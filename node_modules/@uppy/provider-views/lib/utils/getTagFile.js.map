{"version":3,"names":["getTagFile","file","plugin","provider","_file$author","_file$author2","tagFile","id","source","name","type","mimeType","isRemote","data","preview","thumbnail","undefined","meta","authorName","author","authorUrl","url","relativePath","relDirPath","absolutePath","absDirPath","body","fileId","remote","companionUrl","opts","fileUrl","requestPath","providerName","requestClientId"],"sources":["getTagFile.ts"],"sourcesContent":["import type { UnknownPlugin } from '@uppy/core'\nimport type {\n  CompanionClientProvider,\n  CompanionClientSearchProvider,\n} from '@uppy/utils/lib/CompanionClientProvider'\nimport type { CompanionFile } from '@uppy/utils/lib/CompanionFile'\nimport type { Meta, Body, TagFile } from '@uppy/utils/lib/UppyFile'\n\n// TODO: document what is a \"tagFile\" or get rid of this concept\nconst getTagFile = <M extends Meta, B extends Body>(\n  file: CompanionFile,\n  plugin: UnknownPlugin<M, B>,\n  provider: CompanionClientProvider | CompanionClientSearchProvider,\n): TagFile<M> => {\n  const tagFile: TagFile<any> = {\n    id: file.id,\n    source: plugin.id,\n    name: file.name || file.id,\n    type: file.mimeType,\n    isRemote: true,\n    data: file,\n    preview: file.thumbnail || undefined,\n    meta: {\n      authorName: file.author?.name,\n      authorUrl: file.author?.url,\n      // We need to do this `|| null` check, because null value\n      // for .relDirPath is `undefined` and for .relativePath is `null`.\n      // I do think we should just use `null` everywhere.\n      relativePath: file.relDirPath || null,\n      absolutePath: file.absDirPath,\n    },\n    body: {\n      fileId: file.id,\n    },\n    remote: {\n      companionUrl: plugin.opts.companionUrl,\n      url: `${provider.fileUrl(file.requestPath)}`,\n      body: {\n        fileId: file.id,\n      },\n      providerName: provider.name,\n      provider: provider.provider,\n      requestClientId: provider.provider,\n    },\n  }\n\n  return tagFile\n}\n\nexport default getTagFile\n"],"mappings":"AAQA;AACA,MAAMA,UAAU,GAAGA,CACjBC,IAAmB,EACnBC,MAA2B,EAC3BC,QAAiE,KAClD;EAAA,IAAAC,YAAA,EAAAC,aAAA;EACf,MAAMC,OAAqB,GAAG;IAC5BC,EAAE,EAAEN,IAAI,CAACM,EAAE;IACXC,MAAM,EAAEN,MAAM,CAACK,EAAE;IACjBE,IAAI,EAAER,IAAI,CAACQ,IAAI,IAAIR,IAAI,CAACM,EAAE;IAC1BG,IAAI,EAAET,IAAI,CAACU,QAAQ;IACnBC,QAAQ,EAAE,IAAI;IACdC,IAAI,EAAEZ,IAAI;IACVa,OAAO,EAAEb,IAAI,CAACc,SAAS,IAAIC,SAAS;IACpCC,IAAI,EAAE;MACJC,UAAU,GAAAd,YAAA,GAAEH,IAAI,CAACkB,MAAM,qBAAXf,YAAA,CAAaK,IAAI;MAC7BW,SAAS,GAAAf,aAAA,GAAEJ,IAAI,CAACkB,MAAM,qBAAXd,aAAA,CAAagB,GAAG;MAC3B;MACA;MACA;MACAC,YAAY,EAAErB,IAAI,CAACsB,UAAU,IAAI,IAAI;MACrCC,YAAY,EAAEvB,IAAI,CAACwB;IACrB,CAAC;IACDC,IAAI,EAAE;MACJC,MAAM,EAAE1B,IAAI,CAACM;IACf,CAAC;IACDqB,MAAM,EAAE;MACNC,YAAY,EAAE3B,MAAM,CAAC4B,IAAI,CAACD,YAAY;MACtCR,GAAG,EAAE,GAAGlB,QAAQ,CAAC4B,OAAO,CAAC9B,IAAI,CAAC+B,WAAW,CAAC,EAAE;MAC5CN,IAAI,EAAE;QACJC,MAAM,EAAE1B,IAAI,CAACM;MACf,CAAC;MACD0B,YAAY,EAAE9B,QAAQ,CAACM,IAAI;MAC3BN,QAAQ,EAAEA,QAAQ,CAACA,QAAQ;MAC3B+B,eAAe,EAAE/B,QAAQ,CAACA;IAC5B;EACF,CAAC;EAED,OAAOG,OAAO;AAChB,CAAC;AAED,eAAeN,UAAU","ignoreList":[]}