{"version":3,"names":["getSafeFileId","getTagFile","addFiles","companionFiles","plugin","provider","tagFiles","map","f","filesToAdd","filesAlreadyAdded","forEach","tagFile","uppy","checkIfFileAlreadyExists","getID","push","length","info","i18n","numFiles"],"sources":["addFiles.ts"],"sourcesContent":["import type { UnknownPlugin } from '@uppy/core'\nimport type {\n  CompanionClientProvider,\n  CompanionClientSearchProvider,\n} from '@uppy/utils/lib/CompanionClientProvider'\nimport type { CompanionFile } from '@uppy/utils/lib/CompanionFile'\nimport type { Meta, Body, TagFile } from '@uppy/utils/lib/UppyFile'\nimport { getSafeFileId } from '@uppy/utils/lib/generateFileID'\nimport getTagFile from './getTagFile.ts'\n\nconst addFiles = <M extends Meta, B extends Body>(\n  companionFiles: CompanionFile[],\n  plugin: UnknownPlugin<M, B>,\n  provider: CompanionClientProvider | CompanionClientSearchProvider,\n): void => {\n  const tagFiles: TagFile<M>[] = companionFiles.map((f) =>\n    getTagFile<M, B>(f, plugin, provider),\n  )\n\n  const filesToAdd: TagFile<M>[] = []\n  const filesAlreadyAdded: TagFile<M>[] = []\n  tagFiles.forEach((tagFile) => {\n    if (\n      plugin.uppy.checkIfFileAlreadyExists(\n        getSafeFileId(tagFile, plugin.uppy.getID()),\n      )\n    ) {\n      filesAlreadyAdded.push(tagFile)\n    } else {\n      filesToAdd.push(tagFile)\n    }\n  })\n\n  if (filesToAdd.length > 0) {\n    plugin.uppy.info(\n      plugin.uppy.i18n('addedNumFiles', { numFiles: filesToAdd.length }),\n    )\n  }\n  if (filesAlreadyAdded.length > 0) {\n    plugin.uppy.info(\n      `Not adding ${filesAlreadyAdded.length} files because they already exist`,\n    )\n  }\n  plugin.uppy.addFiles(filesToAdd)\n}\n\nexport default addFiles\n"],"mappings":"AAOA,SAASA,aAAa,QAAQ,gCAAgC;AAC9D,OAAOC,UAAU,MAAM,iBAAiB;AAExC,MAAMC,QAAQ,GAAGA,CACfC,cAA+B,EAC/BC,MAA2B,EAC3BC,QAAiE,KACxD;EACT,MAAMC,QAAsB,GAAGH,cAAc,CAACI,GAAG,CAAEC,CAAC,IAClDP,UAAU,CAAOO,CAAC,EAAEJ,MAAM,EAAEC,QAAQ,CACtC,CAAC;EAED,MAAMI,UAAwB,GAAG,EAAE;EACnC,MAAMC,iBAA+B,GAAG,EAAE;EAC1CJ,QAAQ,CAACK,OAAO,CAAEC,OAAO,IAAK;IAC5B,IACER,MAAM,CAACS,IAAI,CAACC,wBAAwB,CAClCd,aAAa,CAACY,OAAO,EAAER,MAAM,CAACS,IAAI,CAACE,KAAK,CAAC,CAAC,CAC5C,CAAC,EACD;MACAL,iBAAiB,CAACM,IAAI,CAACJ,OAAO,CAAC;IACjC,CAAC,MAAM;MACLH,UAAU,CAACO,IAAI,CAACJ,OAAO,CAAC;IAC1B;EACF,CAAC,CAAC;EAEF,IAAIH,UAAU,CAACQ,MAAM,GAAG,CAAC,EAAE;IACzBb,MAAM,CAACS,IAAI,CAACK,IAAI,CACdd,MAAM,CAACS,IAAI,CAACM,IAAI,CAAC,eAAe,EAAE;MAAEC,QAAQ,EAAEX,UAAU,CAACQ;IAAO,CAAC,CACnE,CAAC;EACH;EACA,IAAIP,iBAAiB,CAACO,MAAM,GAAG,CAAC,EAAE;IAChCb,MAAM,CAACS,IAAI,CAACK,IAAI,CACd,cAAcR,iBAAiB,CAACO,MAAM,mCACxC,CAAC;EACH;EACAb,MAAM,CAACS,IAAI,CAACX,QAAQ,CAACO,UAAU,CAAC;AAClC,CAAC;AAED,eAAeP,QAAQ","ignoreList":[]}