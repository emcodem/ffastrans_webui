{"version":3,"names":["h","prettierBytes","truncateString","MetaErrorMessage","renderFileName","props","author","name","file","meta","getMaxNameLength","isSingleFile","containerHeight","containerWidth","className","title","renderAuthor","_props$file$remote","providerName","remote","dot","href","url","target","rel","Fragment","renderFileSize","size","ReSelectButton","isGhost","type","onClick","toggleAddFilesPanel","i18n","ErrorButton","_ref","error","FileInfo","toggleFileCard","metaFields","source","alert"],"sources":["index.tsx"],"sourcesContent":["/* eslint-disable react/destructuring-assignment */\nimport { h } from 'preact'\nimport prettierBytes from '@transloadit/prettier-bytes'\nimport truncateString from '@uppy/utils/lib/truncateString'\nimport type { I18n } from '@uppy/utils/lib/Translator'\nimport type { UppyFile } from '@uppy/core'\nimport MetaErrorMessage from '../MetaErrorMessage.tsx'\nimport type { DashboardState } from '../../../Dashboard.ts'\n\nconst renderFileName = (props: {\n  file: UppyFile<any, any>\n  isSingleFile: boolean\n  containerHeight: number\n  containerWidth: number\n}) => {\n  const { author, name } = props.file.meta\n\n  function getMaxNameLength() {\n    if (props.isSingleFile && props.containerHeight >= 350) {\n      return 90\n    }\n    if (props.containerWidth <= 352) {\n      return 35\n    }\n    if (props.containerWidth <= 576) {\n      return 60\n    }\n    // When `author` is present, we want to make sure\n    // the file name fits on one line so we can place\n    // the author on the second line.\n    return author ? 20 : 30\n  }\n\n  return (\n    <div className=\"uppy-Dashboard-Item-name\" title={name}>\n      {truncateString(name, getMaxNameLength())}\n    </div>\n  )\n}\n\nconst renderAuthor = (props: { file: UppyFile<any, any> }) => {\n  const { author } = props.file.meta\n  const providerName = props.file.remote?.providerName\n  const dot = `\\u00B7`\n\n  if (!author) {\n    return null\n  }\n\n  return (\n    <div className=\"uppy-Dashboard-Item-author\">\n      <a\n        href={`${author.url}?utm_source=Companion&utm_medium=referral`}\n        target=\"_blank\"\n        rel=\"noopener noreferrer\"\n      >\n        {truncateString(author.name, 13)}\n      </a>\n      {providerName ?\n        <>\n          {` ${dot} `}\n          {providerName}\n          {` ${dot} `}\n        </>\n      : null}\n    </div>\n  )\n}\n\nconst renderFileSize = (props: { file: UppyFile<any, any> }) =>\n  props.file.size && (\n    <div className=\"uppy-Dashboard-Item-statusSize\">\n      {prettierBytes(props.file.size)}\n    </div>\n  )\n\nconst ReSelectButton = (props: {\n  file: UppyFile<any, any>\n  toggleAddFilesPanel: (show: boolean) => void\n  i18n: I18n\n}) =>\n  props.file.isGhost && (\n    <span>\n      {' \\u2022 '}\n      <button\n        className=\"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-reSelect\"\n        type=\"button\"\n        onClick={() => props.toggleAddFilesPanel(true)}\n      >\n        {props.i18n('reSelect')}\n      </button>\n    </span>\n  )\n\nconst ErrorButton = ({\n  file,\n  onClick,\n}: {\n  file: UppyFile<any, any>\n  onClick: () => void\n}) => {\n  if (file.error) {\n    return (\n      <button\n        className=\"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-errorDetails\"\n        aria-label={file.error}\n        data-microtip-position=\"bottom\"\n        data-microtip-size=\"medium\"\n        onClick={onClick}\n        type=\"button\"\n      >\n        ?\n      </button>\n    )\n  }\n  return null\n}\n\ntype FileInfoProps = {\n  file: UppyFile<any, any>\n  containerWidth: number\n  containerHeight: number\n  i18n: I18n\n  toggleAddFilesPanel: (show: boolean) => void\n  toggleFileCard: (show: boolean, fileId: string) => void\n  metaFields: DashboardState<any, any>['metaFields']\n  isSingleFile: boolean\n}\n\nexport default function FileInfo(props: FileInfoProps) {\n  const {\n    file,\n    i18n,\n    toggleFileCard,\n    metaFields,\n    toggleAddFilesPanel,\n    isSingleFile,\n    containerHeight,\n    containerWidth,\n  } = props\n  return (\n    <div\n      className=\"uppy-Dashboard-Item-fileInfo\"\n      data-uppy-file-source={file.source}\n    >\n      <div className=\"uppy-Dashboard-Item-fileName\">\n        {renderFileName({\n          file,\n          isSingleFile,\n          containerHeight,\n          containerWidth,\n        })}\n        <ErrorButton file={file} onClick={() => alert(file.error)} />\n      </div>\n      <div className=\"uppy-Dashboard-Item-status\">\n        {renderAuthor({ file })}\n        {renderFileSize({ file })}\n        {ReSelectButton({ file, toggleAddFilesPanel, i18n })}\n      </div>\n      <MetaErrorMessage\n        file={file}\n        i18n={i18n}\n        toggleFileCard={toggleFileCard}\n        metaFields={metaFields}\n      />\n    </div>\n  )\n}\n"],"mappings":"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","ignoreList":[]}