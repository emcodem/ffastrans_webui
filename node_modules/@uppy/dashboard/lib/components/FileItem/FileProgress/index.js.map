{"version":3,"names":["h","onPauseResumeCancelRetry","props","isUploaded","error","hideRetryButton","uppy","retryUpload","file","id","resumableUploads","hidePauseResumeButton","pauseResume","individualCancellation","hideCancelButton","removeFile","progressIndicatorTitle","i18n","isPaused","ProgressIndicatorButton","className","type","title","onClick","children","ProgressCircleContainer","_ref","focusable","width","height","viewBox","ProgressCircle","_ref2","progress","circleLength","Math","PI","r","cx","cy","fill","transform","FileProgress","uploadStarted","percentage","undefined","points","recoveredState","d","x","y","rx"],"sources":["index.tsx"],"sourcesContent":["/* eslint-disable react/no-unused-prop-types */\n/* eslint-disable react/destructuring-assignment */\nimport type { State, Uppy, UppyFile } from '@uppy/core'\nimport type { I18n } from '@uppy/utils/lib/Translator'\nimport type { Body, Meta } from '@uppy/utils/lib/UppyFile'\nimport { h, type ComponentChild } from 'preact'\n\ninterface Props<M extends Meta, B extends Body> {\n  uppy: Uppy<M, B>\n  file: UppyFile<M, B>\n  isUploaded: boolean\n  error: string | false\n  recoveredState: State<M, B>['recoveredState']\n  hideRetryButton: boolean\n  hidePauseResumeButton: boolean\n  hideCancelButton: boolean\n  resumableUploads: boolean\n  individualCancellation: boolean\n  i18n: I18n\n}\n\nfunction onPauseResumeCancelRetry<M extends Meta, B extends Body>(\n  props: Props<M, B>,\n) {\n  if (props.isUploaded) return\n\n  if (props.error && !props.hideRetryButton) {\n    props.uppy.retryUpload(props.file.id)\n    return\n  }\n\n  if (props.resumableUploads && !props.hidePauseResumeButton) {\n    props.uppy.pauseResume(props.file.id)\n  } else if (props.individualCancellation && !props.hideCancelButton) {\n    props.uppy.removeFile(props.file.id)\n  }\n}\n\nfunction progressIndicatorTitle<M extends Meta, B extends Body>(\n  props: Props<M, B>,\n) {\n  if (props.isUploaded) {\n    return props.i18n('uploadComplete')\n  }\n\n  if (props.error) {\n    return props.i18n('retryUpload')\n  }\n\n  if (props.resumableUploads) {\n    if (props.file.isPaused) {\n      return props.i18n('resumeUpload')\n    }\n    return props.i18n('pauseUpload')\n  }\n  if (props.individualCancellation) {\n    return props.i18n('cancelUpload')\n  }\n\n  return ''\n}\n\nfunction ProgressIndicatorButton<M extends Meta, B extends Body>(\n  props: Props<M, B> & { children: ComponentChild },\n) {\n  return (\n    <div className=\"uppy-Dashboard-Item-progress\">\n      <button\n        className=\"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-progressIndicator\"\n        type=\"button\"\n        aria-label={progressIndicatorTitle(props)}\n        title={progressIndicatorTitle(props)}\n        onClick={() => onPauseResumeCancelRetry(props)}\n      >\n        {props.children}\n      </button>\n    </div>\n  )\n}\n\nfunction ProgressCircleContainer({ children }: { children: ComponentChild }) {\n  return (\n    <svg\n      aria-hidden=\"true\"\n      focusable=\"false\"\n      width=\"70\"\n      height=\"70\"\n      viewBox=\"0 0 36 36\"\n      className=\"uppy-c-icon uppy-Dashboard-Item-progressIcon--circle\"\n    >\n      {children}\n    </svg>\n  )\n}\n\nfunction ProgressCircle({ progress }: { progress: number }) {\n  // circle length equals 2 * PI * R\n  const circleLength = 2 * Math.PI * 15\n\n  return (\n    <g>\n      <circle\n        className=\"uppy-Dashboard-Item-progressIcon--bg\"\n        r=\"15\"\n        cx=\"18\"\n        cy=\"18\"\n        stroke-width=\"2\"\n        fill=\"none\"\n      />\n      <circle\n        className=\"uppy-Dashboard-Item-progressIcon--progress\"\n        r=\"15\"\n        cx=\"18\"\n        cy=\"18\"\n        transform=\"rotate(-90, 18, 18)\"\n        fill=\"none\"\n        stroke-width=\"2\"\n        stroke-dasharray={circleLength}\n        stroke-dashoffset={circleLength - (circleLength / 100) * progress}\n      />\n    </g>\n  )\n}\n\nexport default function FileProgress<M extends Meta, B extends Body>(\n  props: Props<M, B>,\n) {\n  // Nothing if upload has not started\n  if (!props.file.progress.uploadStarted) {\n    return null\n  }\n\n  if (props.file.progress.percentage === undefined) {\n    return null\n  }\n\n  // Green checkmark when complete\n  if (props.isUploaded) {\n    return (\n      <div className=\"uppy-Dashboard-Item-progress\">\n        <div className=\"uppy-Dashboard-Item-progressIndicator\">\n          <ProgressCircleContainer>\n            <circle r=\"15\" cx=\"18\" cy=\"18\" fill=\"#1bb240\" />\n            <polygon\n              className=\"uppy-Dashboard-Item-progressIcon--check\"\n              transform=\"translate(2, 3)\"\n              points=\"14 22.5 7 15.2457065 8.99985857 13.1732815 14 18.3547104 22.9729883 9 25 11.1005634\"\n            />\n          </ProgressCircleContainer>\n        </div>\n      </div>\n    )\n  }\n\n  if (props.recoveredState) {\n    return null\n  }\n\n  // Retry button for error\n  if (props.error && !props.hideRetryButton) {\n    return (\n      // eslint-disable-next-line react/jsx-props-no-spreading\n      <ProgressIndicatorButton {...props}>\n        <svg\n          aria-hidden=\"true\"\n          focusable=\"false\"\n          className=\"uppy-c-icon uppy-Dashboard-Item-progressIcon--retry\"\n          width=\"28\"\n          height=\"31\"\n          viewBox=\"0 0 16 19\"\n        >\n          <path d=\"M16 11a8 8 0 1 1-8-8v2a6 6 0 1 0 6 6h2z\" />\n          <path d=\"M7.9 3H10v2H7.9z\" />\n          <path d=\"M8.536.5l3.535 3.536-1.414 1.414L7.12 1.914z\" />\n          <path d=\"M10.657 2.621l1.414 1.415L8.536 7.57 7.12 6.157z\" />\n        </svg>\n      </ProgressIndicatorButton>\n    )\n  }\n\n  // Pause/resume button for resumable uploads\n  if (props.resumableUploads && !props.hidePauseResumeButton) {\n    return (\n      // eslint-disable-next-line react/jsx-props-no-spreading\n      <ProgressIndicatorButton {...props}>\n        <ProgressCircleContainer>\n          <ProgressCircle progress={props.file.progress.percentage} />\n          {props.file.isPaused ?\n            <polygon\n              className=\"uppy-Dashboard-Item-progressIcon--play\"\n              transform=\"translate(3, 3)\"\n              points=\"12 20 12 10 20 15\"\n            />\n          : <g\n              className=\"uppy-Dashboard-Item-progressIcon--pause\"\n              transform=\"translate(14.5, 13)\"\n            >\n              <rect x=\"0\" y=\"0\" width=\"2\" height=\"10\" rx=\"0\" />\n              <rect x=\"5\" y=\"0\" width=\"2\" height=\"10\" rx=\"0\" />\n            </g>\n          }\n        </ProgressCircleContainer>\n      </ProgressIndicatorButton>\n    )\n  }\n\n  // Cancel button for non-resumable uploads if individualCancellation is supported (not bundled)\n  if (\n    !props.resumableUploads &&\n    props.individualCancellation &&\n    !props.hideCancelButton\n  ) {\n    return (\n      // eslint-disable-next-line react/jsx-props-no-spreading\n      <ProgressIndicatorButton {...props}>\n        <ProgressCircleContainer>\n          <ProgressCircle progress={props.file.progress.percentage} />\n          <polygon\n            className=\"cancel\"\n            transform=\"translate(2, 2)\"\n            points=\"19.8856516 11.0625 16 14.9481516 12.1019737 11.0625 11.0625 12.1143484 14.9481516 16 11.0625 19.8980263 12.1019737 20.9375 16 17.0518484 19.8856516 20.9375 20.9375 19.8980263 17.0518484 16 20.9375 12\"\n          />\n        </ProgressCircleContainer>\n      </ProgressIndicatorButton>\n    )\n  }\n\n  // Just progress when buttons are disabled\n  return (\n    <div className=\"uppy-Dashboard-Item-progress\">\n      <div className=\"uppy-Dashboard-Item-progressIndicator\">\n        <ProgressCircleContainer>\n          <ProgressCircle progress={props.file.progress.percentage} />\n        </ProgressCircleContainer>\n      </div>\n    </div>\n  )\n}\n"],"mappings":"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","ignoreList":[]}