{"version":3,"names":["h","copyToClipboard","EditButton","_ref","file","uploadInProgressOrComplete","metaFields","canEditFile","i18n","onClick","length","className","type","meta","name","title","focusable","width","height","viewBox","fillRule","d","x","y","rx","RemoveButton","_ref2","fill","CopyLinkButton","_ref3","uppy","copyLinkToClipboard","event","uploadURL","then","log","info","catch","target","focus","preventScroll","Buttons","props","showLinkToFileUploadResult","showRemoveButton","toggleFileCard","openFileEditor","editAction","id","removeFile"],"sources":["index.tsx"],"sourcesContent":["import { h } from 'preact'\nimport type { Body, Meta, UppyFile } from '@uppy/utils/lib/UppyFile'\nimport type Uppy from '@uppy/core'\nimport type { I18n } from '@uppy/utils/lib/Translator'\nimport copyToClipboard from '../../../utils/copyToClipboard.ts'\nimport type { DashboardState } from '../../../Dashboard.ts'\n\ntype $TSFixMe = any\n\nfunction EditButton<M extends Meta, B extends Body>({\n  file,\n  uploadInProgressOrComplete,\n  metaFields,\n  canEditFile,\n  i18n,\n  onClick,\n}: {\n  file: UppyFile<M, B>\n  uploadInProgressOrComplete: boolean\n  metaFields: DashboardState<M, B>['metaFields']\n  canEditFile: (f: UppyFile<M, B>) => boolean\n  i18n: I18n\n  onClick: () => void\n}) {\n  if (\n    (!uploadInProgressOrComplete && metaFields && metaFields.length > 0) ||\n    (!uploadInProgressOrComplete && canEditFile(file))\n  ) {\n    return (\n      <button\n        className=\"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-action uppy-Dashboard-Item-action--edit\"\n        type=\"button\"\n        aria-label={i18n('editFileWithFilename', { file: file.meta.name })}\n        title={i18n('editFileWithFilename', { file: file.meta.name })}\n        onClick={() => onClick()}\n      >\n        <svg\n          aria-hidden=\"true\"\n          focusable=\"false\"\n          className=\"uppy-c-icon\"\n          width=\"14\"\n          height=\"14\"\n          viewBox=\"0 0 14 14\"\n        >\n          <g fillRule=\"evenodd\">\n            <path\n              d=\"M1.5 10.793h2.793A1 1 0 0 0 5 10.5L11.5 4a1 1 0 0 0 0-1.414L9.707.793a1 1 0 0 0-1.414 0l-6.5 6.5A1 1 0 0 0 1.5 8v2.793zm1-1V8L9 1.5l1.793 1.793-6.5 6.5H2.5z\"\n              fillRule=\"nonzero\"\n            />\n            <rect x=\"1\" y=\"12.293\" width=\"11\" height=\"1\" rx=\".5\" />\n            <path\n              fillRule=\"nonzero\"\n              d=\"M6.793 2.5L9.5 5.207l.707-.707L7.5 1.793z\"\n            />\n          </g>\n        </svg>\n      </button>\n    )\n  }\n  return null\n}\n\nfunction RemoveButton<M extends Meta, B extends Body>({\n  i18n,\n  onClick,\n  file,\n}: {\n  i18n: I18n\n  onClick: () => void\n  file: UppyFile<M, B>\n}) {\n  return (\n    <button\n      className=\"uppy-u-reset uppy-Dashboard-Item-action uppy-Dashboard-Item-action--remove\"\n      type=\"button\"\n      aria-label={i18n('removeFile', { file: file.meta.name })}\n      title={i18n('removeFile', { file: file.meta.name })}\n      onClick={() => onClick()}\n    >\n      <svg\n        aria-hidden=\"true\"\n        focusable=\"false\"\n        className=\"uppy-c-icon\"\n        width=\"18\"\n        height=\"18\"\n        viewBox=\"0 0 18 18\"\n      >\n        <path d=\"M9 0C4.034 0 0 4.034 0 9s4.034 9 9 9 9-4.034 9-9-4.034-9-9-9z\" />\n        <path\n          fill=\"#FFF\"\n          d=\"M13 12.222l-.778.778L9 9.778 5.778 13 5 12.222 8.222 9 5 5.778 5.778 5 9 8.222 12.222 5l.778.778L9.778 9z\"\n        />\n      </svg>\n    </button>\n  )\n}\n\nfunction CopyLinkButton<M extends Meta, B extends Body>({\n  file,\n  uppy,\n  i18n,\n}: {\n  file: UppyFile<M, B>\n  uppy: Uppy<M, B>\n  i18n: I18n\n}) {\n  const copyLinkToClipboard = (event: $TSFixMe) => {\n    copyToClipboard(file.uploadURL, i18n('copyLinkToClipboardFallback'))\n      .then(() => {\n        uppy.log('Link copied to clipboard.')\n        uppy.info(i18n('copyLinkToClipboardSuccess'), 'info', 3000)\n      })\n      .catch(uppy.log)\n      // avoid losing focus\n      .then(() => event.target.focus({ preventScroll: true }))\n  }\n\n  return (\n    <button\n      className=\"uppy-u-reset uppy-Dashboard-Item-action uppy-Dashboard-Item-action--copyLink\"\n      type=\"button\"\n      aria-label={i18n('copyLink')}\n      title={i18n('copyLink')}\n      onClick={(event) => copyLinkToClipboard(event)}\n    >\n      <svg\n        aria-hidden=\"true\"\n        focusable=\"false\"\n        className=\"uppy-c-icon\"\n        width=\"14\"\n        height=\"14\"\n        viewBox=\"0 0 14 12\"\n      >\n        <path d=\"M7.94 7.703a2.613 2.613 0 0 1-.626 2.681l-.852.851a2.597 2.597 0 0 1-1.849.766A2.616 2.616 0 0 1 2.764 7.54l.852-.852a2.596 2.596 0 0 1 2.69-.625L5.267 7.099a1.44 1.44 0 0 0-.833.407l-.852.851a1.458 1.458 0 0 0 1.03 2.486c.39 0 .755-.152 1.03-.426l.852-.852c.231-.231.363-.522.406-.824l1.04-1.038zm4.295-5.937A2.596 2.596 0 0 0 10.387 1c-.698 0-1.355.272-1.849.766l-.852.851a2.614 2.614 0 0 0-.624 2.688l1.036-1.036c.041-.304.173-.6.407-.833l.852-.852c.275-.275.64-.426 1.03-.426a1.458 1.458 0 0 1 1.03 2.486l-.852.851a1.442 1.442 0 0 1-.824.406l-1.04 1.04a2.596 2.596 0 0 0 2.683-.628l.851-.85a2.616 2.616 0 0 0 0-3.697zm-6.88 6.883a.577.577 0 0 0 .82 0l3.474-3.474a.579.579 0 1 0-.819-.82L5.355 7.83a.579.579 0 0 0 0 .819z\" />\n      </svg>\n    </button>\n  )\n}\n\ntype ButtonsProps<M extends Meta, B extends Body> = {\n  uppy: Uppy<M, B>\n  file: UppyFile<M, B>\n  i18n: I18n\n  uploadInProgressOrComplete: boolean\n  canEditFile: (file: UppyFile<M, B>) => boolean\n  metaFields: DashboardState<M, B>['metaFields']\n  showLinkToFileUploadResult: boolean\n  showRemoveButton: boolean\n  toggleFileCard: (show: boolean, fileId: string) => void\n  openFileEditor: (file: UppyFile<M, B>) => void\n}\n\nexport default function Buttons<M extends Meta, B extends Body>(\n  props: ButtonsProps<M, B>,\n) {\n  const {\n    uppy,\n    file,\n    uploadInProgressOrComplete,\n    canEditFile,\n    metaFields,\n    showLinkToFileUploadResult,\n    showRemoveButton,\n    i18n,\n    toggleFileCard,\n    openFileEditor,\n  } = props\n  const editAction = () => {\n    if (metaFields && metaFields.length > 0) {\n      toggleFileCard(true, file.id)\n    } else {\n      openFileEditor(file)\n    }\n  }\n\n  return (\n    <div className=\"uppy-Dashboard-Item-actionWrapper\">\n      <EditButton\n        i18n={i18n}\n        file={file}\n        uploadInProgressOrComplete={uploadInProgressOrComplete}\n        canEditFile={canEditFile}\n        metaFields={metaFields}\n        onClick={editAction}\n      />\n      {showLinkToFileUploadResult && file.uploadURL ?\n        <CopyLinkButton file={file} uppy={uppy} i18n={i18n} />\n      : null}\n      {showRemoveButton ?\n        <RemoveButton\n          i18n={i18n}\n          file={file}\n          onClick={() => uppy.removeFile(file.id)}\n        />\n      : null}\n    </div>\n  )\n}\n"],"mappings":"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","ignoreList":[]}