{"version":3,"names":["tus","isCordova","window","PhoneGap","Cordova","cordova","isReactNative","navigator","product","toLowerCase","getFingerprint","uppyFile","file","options","defaultOptions","fingerprint","uppyFingerprint","id","endpoint","join","Promise","resolve"],"sources":["getFingerprint.ts"],"sourcesContent":["import type { Body, Meta, UppyFile } from '@uppy/utils/lib/UppyFile'\nimport * as tus from 'tus-js-client'\n\nfunction isCordova() {\n  return (\n    typeof window !== 'undefined' &&\n    // @ts-expect-error may exist\n    (typeof window.PhoneGap !== 'undefined' ||\n      // @ts-expect-error may exist\n      typeof window.Cordova !== 'undefined' ||\n      // @ts-expect-error may exist\n      typeof window.cordova !== 'undefined')\n  )\n}\n\nfunction isReactNative() {\n  return (\n    typeof navigator !== 'undefined' &&\n    typeof navigator.product === 'string' &&\n    navigator.product.toLowerCase() === 'reactnative'\n  )\n}\n\n// We override tus fingerprint to uppy’s `file.id`, since the `file.id`\n// now also includes `relativePath` for files added from folders.\n// This means you can add 2 identical files, if one is in folder a,\n// the other in folder b — `a/file.jpg` and `b/file.jpg`, when added\n// together with a folder, will be treated as 2 separate files.\n//\n// For React Native and Cordova, we let tus-js-client’s default\n// fingerprint handling take charge.\nexport default function getFingerprint<M extends Meta, B extends Body>(\n  uppyFile: UppyFile<M, B>,\n): tus.UploadOptions['fingerprint'] {\n  return (file, options) => {\n    if (isCordova() || isReactNative()) {\n      return tus.defaultOptions.fingerprint(file, options)\n    }\n\n    const uppyFingerprint = ['tus', uppyFile.id, options.endpoint].join('-')\n\n    return Promise.resolve(uppyFingerprint)\n  }\n}\n"],"mappings":"AACA,OAAO,KAAKA,GAAG,MAAM,eAAe;AAEpC,SAASC,SAASA,CAAA,EAAG;EACnB,OACE,OAAOC,MAAM,KAAK,WAAW;EAC7B;EACC,OAAOA,MAAM,CAACC,QAAQ,KAAK,WAAW;EACrC;EACA,OAAOD,MAAM,CAACE,OAAO,KAAK,WAAW;EACrC;EACA,OAAOF,MAAM,CAACG,OAAO,KAAK,WAAW,CAAC;AAE5C;AAEA,SAASC,aAAaA,CAAA,EAAG;EACvB,OACE,OAAOC,SAAS,KAAK,WAAW,IAChC,OAAOA,SAAS,CAACC,OAAO,KAAK,QAAQ,IACrCD,SAAS,CAACC,OAAO,CAACC,WAAW,CAAC,CAAC,KAAK,aAAa;AAErD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,SAASC,cAAcA,CACpCC,QAAwB,EACU;EAClC,OAAO,CAACC,IAAI,EAAEC,OAAO,KAAK;IACxB,IAAIZ,SAAS,CAAC,CAAC,IAAIK,aAAa,CAAC,CAAC,EAAE;MAClC,OAAON,GAAG,CAACc,cAAc,CAACC,WAAW,CAACH,IAAI,EAAEC,OAAO,CAAC;IACtD;IAEA,MAAMG,eAAe,GAAG,CAAC,KAAK,EAAEL,QAAQ,CAACM,EAAE,EAAEJ,OAAO,CAACK,QAAQ,CAAC,CAACC,IAAI,CAAC,GAAG,CAAC;IAExE,OAAOC,OAAO,CAACC,OAAO,CAACL,eAAe,CAAC;EACzC,CAAC;AACH","ignoreList":[]}