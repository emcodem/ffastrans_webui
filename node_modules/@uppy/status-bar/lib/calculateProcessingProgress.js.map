{"version":3,"names":["calculateProcessingProgress","files","values","mode","message","progress","Object","preprocess","postprocess","push","value","reduce","total","progressValue","length"],"sources":["calculateProcessingProgress.ts"],"sourcesContent":["import type { FileProcessingInfo } from '@uppy/utils/lib/FileProgress'\nimport type { UppyFile } from '@uppy/utils/lib/UppyFile'\n\nexport default function calculateProcessingProgress(\n  files: Record<string, UppyFile<any, any>>,\n): FileProcessingInfo {\n  const values: number[] = []\n  let mode: FileProcessingInfo['mode'] = 'indeterminate'\n  let message: FileProcessingInfo['message']\n\n  for (const { progress } of Object.values(files)) {\n    const { preprocess, postprocess } = progress\n    // In the future we should probably do this differently. For now we'll take the\n    // mode and message from the first fileâ€¦\n    if (message == null && (preprocess || postprocess)) {\n      ;({ mode, message } = preprocess || postprocess!)\n    }\n    if (preprocess?.mode === 'determinate') values.push(preprocess.value)\n    if (postprocess?.mode === 'determinate') values.push(postprocess.value)\n  }\n\n  const value = values.reduce((total, progressValue) => {\n    return total + progressValue / values.length\n  }, 0)\n\n  return {\n    mode,\n    message,\n    value,\n  } as FileProcessingInfo\n}\n"],"mappings":"AAGA,eAAe,SAASA,2BAA2BA,CACjDC,KAAyC,EACrB;EACpB,MAAMC,MAAgB,GAAG,EAAE;EAC3B,IAAIC,IAAgC,GAAG,eAAe;EACtD,IAAIC,OAAsC;EAE1C,KAAK,MAAM;IAAEC;EAAS,CAAC,IAAIC,MAAM,CAACJ,MAAM,CAACD,KAAK,CAAC,EAAE;IAC/C,MAAM;MAAEM,UAAU;MAAEC;IAAY,CAAC,GAAGH,QAAQ;IAC5C;IACA;IACA,IAAID,OAAO,IAAI,IAAI,KAAKG,UAAU,IAAIC,WAAW,CAAC,EAAE;MAClD;MAAC,CAAC;QAAEL,IAAI;QAAEC;MAAQ,CAAC,GAAGG,UAAU,IAAIC,WAAY;IAClD;IACA,IAAI,CAAAD,UAAU,oBAAVA,UAAU,CAAEJ,IAAI,MAAK,aAAa,EAAED,MAAM,CAACO,IAAI,CAACF,UAAU,CAACG,KAAK,CAAC;IACrE,IAAI,CAAAF,WAAW,oBAAXA,WAAW,CAAEL,IAAI,MAAK,aAAa,EAAED,MAAM,CAACO,IAAI,CAACD,WAAW,CAACE,KAAK,CAAC;EACzE;EAEA,MAAMA,KAAK,GAAGR,MAAM,CAACS,MAAM,CAAC,CAACC,KAAK,EAAEC,aAAa,KAAK;IACpD,OAAOD,KAAK,GAAGC,aAAa,GAAGX,MAAM,CAACY,MAAM;EAC9C,CAAC,EAAE,CAAC,CAAC;EAEL,OAAO;IACLX,IAAI;IACJC,OAAO;IACPM;EACF,CAAC;AACH","ignoreList":[]}