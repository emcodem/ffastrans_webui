{"version":3,"names":["EventManager","constructor","uppy","Object","defineProperty","_uppy","writable","value","_events","_classPrivateFieldLooseBase","on","event","fn","push","remove","splice","off","onFilePause","fileID","cb","targetFileID","isPaused","onFileRemove","file","id","onPause","onRetry","onRetryAll","getFile","onPauseAll","onCancelAll","eventHandler","_this","arguments","onResumeAll"],"sources":["EventManager.js"],"sourcesContent":["/**\n * Create a wrapper around an event emitter with a `remove` method to remove\n * all events that were added using the wrapped emitter.\n */\nexport default class EventManager {\n  #uppy\n\n  #events = []\n\n  constructor (uppy) {\n    this.#uppy = uppy\n  }\n\n  on (event, fn) {\n    this.#events.push([event, fn])\n    return this.#uppy.on(event, fn)\n  }\n\n  remove () {\n    for (const [event, fn] of this.#events.splice(0)) {\n      this.#uppy.off(event, fn)\n    }\n  }\n\n  onFilePause (fileID, cb) {\n    this.on('upload-pause', (targetFileID, isPaused) => {\n      if (fileID === targetFileID) {\n        cb(isPaused)\n      }\n    })\n  }\n\n  onFileRemove (fileID, cb) {\n    this.on('file-removed', (file) => {\n      if (fileID === file.id) cb(file.id)\n    })\n  }\n\n  onPause (fileID, cb) {\n    this.on('upload-pause', (targetFileID, isPaused) => {\n      if (fileID === targetFileID) {\n        // const isPaused = this.#uppy.pauseResume(fileID)\n        cb(isPaused)\n      }\n    })\n  }\n\n  onRetry (fileID, cb) {\n    this.on('upload-retry', (targetFileID) => {\n      if (fileID === targetFileID) {\n        cb()\n      }\n    })\n  }\n\n  onRetryAll (fileID, cb) {\n    this.on('retry-all', () => {\n      if (!this.#uppy.getFile(fileID)) return\n      cb()\n    })\n  }\n\n  onPauseAll (fileID, cb) {\n    this.on('pause-all', () => {\n      if (!this.#uppy.getFile(fileID)) return\n      cb()\n    })\n  }\n\n  onCancelAll (fileID, eventHandler) {\n    this.on('cancel-all', (...args) => {\n      if (!this.#uppy.getFile(fileID)) return\n      eventHandler(...args)\n    })\n  }\n\n  onResumeAll (fileID, cb) {\n    this.on('resume-all', () => {\n      if (!this.#uppy.getFile(fileID)) return\n      cb()\n    })\n  }\n}\n"],"mappings":"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","ignoreList":[]}