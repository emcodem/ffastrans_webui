{"version":3,"names":["throttle","emitSocketProgress","uploader","progressData","file","progress","bytesUploaded","bytesTotal","_file$progress$upload","uppy","log","emit","uploadStarted","leading","trailing"],"sources":["emitSocketProgress.ts"],"sourcesContent":["import throttle from 'lodash/throttle.js'\nimport type { UppyFile } from './UppyFile.ts'\nimport type { FileProgress } from './FileProgress.ts'\n\nfunction emitSocketProgress(\n  uploader: any,\n  progressData: {\n    progress: string // pre-formatted percentage\n    bytesTotal: number\n    bytesUploaded: number\n  },\n  file: UppyFile<any, any>,\n): void {\n  const { progress, bytesUploaded, bytesTotal } = progressData\n  if (progress) {\n    uploader.uppy.log(`Upload progress: ${progress}`)\n    uploader.uppy.emit('upload-progress', file, {\n      uploadStarted: file.progress.uploadStarted ?? 0,\n      bytesUploaded,\n      bytesTotal,\n    } satisfies FileProgress)\n  }\n}\n\nexport default throttle(emitSocketProgress, 300, {\n  leading: true,\n  trailing: true,\n})\n"],"mappings":"AAAA,OAAOA,QAAQ,MAAM,oBAAoB;AAIzC,SAASC,kBAAkBA,CACzBC,QAAa,EACbC,YAIC,EACDC,IAAwB,EAClB;EACN,MAAM;IAAEC,QAAQ;IAAEC,aAAa;IAAEC;EAAW,CAAC,GAAGJ,YAAY;EAC5D,IAAIE,QAAQ,EAAE;IAAA,IAAAG,qBAAA;IACZN,QAAQ,CAACO,IAAI,CAACC,GAAG,CAAC,oBAAoBL,QAAQ,EAAE,CAAC;IACjDH,QAAQ,CAACO,IAAI,CAACE,IAAI,CAAC,iBAAiB,EAAEP,IAAI,EAAE;MAC1CQ,aAAa,GAAAJ,qBAAA,GAAEJ,IAAI,CAACC,QAAQ,CAACO,aAAa,YAAAJ,qBAAA,GAAI,CAAC;MAC/CF,aAAa;MACbC;IACF,CAAwB,CAAC;EAC3B;AACF;AAEA,eAAeP,QAAQ,CAACC,kBAAkB,EAAE,GAAG,EAAE;EAC/CY,OAAO,EAAE,IAAI;EACbC,QAAQ,EAAE;AACZ,CAAC,CAAC","ignoreList":[]}