{"version":3,"names":["webkitGetAsEntryApi","fallbackApi","getDroppedFiles","dataTransfer","options","_options$logDropError","logDropError","Function","prototype","accumulator","file","push"],"sources":["index.ts"],"sourcesContent":["import webkitGetAsEntryApi from './utils/webkitGetAsEntryApi/index.ts'\nimport fallbackApi from './utils/fallbackApi.ts'\n\n/**\n * Returns a promise that resolves to the array of dropped files (if a folder is\n * dropped, and browser supports folder parsing - promise resolves to the flat\n * array of all files in all directories).\n * Each file has .relativePath prop appended to it (e.g. \"/docs/Prague/ticket_from_prague_to_ufa.pdf\")\n * if browser supports it. Otherwise it's undefined.\n *\n * @param dataTransfer\n * @param options\n * @param options.logDropError - a function that's called every time some\n * folder or some file error out (e.g. because of the folder name being too long\n * on Windows). Notice that resulting promise will always be resolved anyway.\n *\n * @returns {Promise} - Array<File>\n */\nexport default async function getDroppedFiles(\n  dataTransfer: DataTransfer,\n  options?: {\n    logDropError?: any\n  },\n): Promise<File[]> {\n  // Get all files from all subdirs. Works (at least) in Chrome, Mozilla, and Safari\n  const logDropError = options?.logDropError ?? Function.prototype\n  try {\n    const accumulator = []\n    for await (const file of webkitGetAsEntryApi(dataTransfer, logDropError)) {\n      accumulator.push(file as File)\n    }\n    return accumulator\n    // Otherwise just return all first-order files\n  } catch {\n    return fallbackApi(dataTransfer)\n  }\n}\n"],"mappings":"AAAA,OAAOA,mBAAmB,MAAM,sCAAsC;AACtE,OAAOC,WAAW,MAAM,wBAAwB;;AAEhD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,eAAeC,eAAeA,CAC3CC,YAA0B,EAC1BC,OAEC,EACgB;EAAA,IAAAC,qBAAA;EACjB;EACA,MAAMC,YAAY,IAAAD,qBAAA,GAAGD,OAAO,oBAAPA,OAAO,CAAEE,YAAY,YAAAD,qBAAA,GAAIE,QAAQ,CAACC,SAAS;EAChE,IAAI;IACF,MAAMC,WAAW,GAAG,EAAE;IACtB,WAAW,MAAMC,IAAI,IAAIV,mBAAmB,CAACG,YAAY,EAAEG,YAAY,CAAC,EAAE;MACxEG,WAAW,CAACE,IAAI,CAACD,IAAY,CAAC;IAChC;IACA,OAAOD,WAAW;IAClB;EACF,CAAC,CAAC,MAAM;IACN,OAAOR,WAAW,CAACE,YAAY,CAAC;EAClC;AACF","ignoreList":[]}