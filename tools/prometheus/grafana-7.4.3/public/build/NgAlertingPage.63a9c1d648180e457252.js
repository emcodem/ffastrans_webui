(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{"4vLh":function(e,t,n){"use strict";n.d(t,"c",(function(){return m})),n.d(t,"i",(function(){return y})),n.d(t,"b",(function(){return v})),n.d(t,"l",(function(){return h})),n.d(t,"h",(function(){return O})),n.d(t,"e",(function(){return g})),n.d(t,"d",(function(){return j})),n.d(t,"a",(function(){return w})),n.d(t,"k",(function(){return E})),n.d(t,"j",(function(){return S})),n.d(t,"g",(function(){return D})),n.d(t,"f",(function(){return k}));var r=n("Obii"),i=n("t8hP"),a=n("HJRA"),o=n("3SGO"),c=n("SMGL"),u=n("qOGI"),s=n("exx3");function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t,n,r,i,a,o){try{var c=e[a](o),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,i)}function b(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){d(a,r,i,o,c,"next",e)}function c(e){d(a,r,i,o,c,"throw",e)}o(void 0)}))}}function m(e){return function(){var t=b(regeneratorRuntime.mark((function t(n){var r,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(Object(u.c)()),t.next=3,Object(i.getBackendSrv)().get("/api/alerts",e);case 3:if(r=t.sent,!i.config.featureToggles.ngalert){t.next=9;break}return t.next=7,Object(i.getBackendSrv)().get("/api/alert-definitions");case 7:a=t.sent,n(Object(u.g)(a.results));case 9:n(Object(u.d)(r));case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}function y(e,t){return function(){var n=b(regeneratorRuntime.mark((function n(r,a){var o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(i.getBackendSrv)().post("/api/alerts/".concat(e,"/pause"),t);case 2:o=a().location.query.state||"all",r(m({state:o.toString()}));case 4:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()}function v(e){return function(){var t=b(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(i.getBackendSrv)().post("/api/alert-notifications",e);case 3:a.a.emit(r.AppEvents.alertSuccess,["Notification created"]),n(Object(o.d)({path:"alerting/notifications"})),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),a.a.emit(r.AppEvents.alertError,[t.t0.data.error]);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}function h(e){return function(){var t=b(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(i.getBackendSrv)().put("/api/alert-notifications/".concat(e.id),e);case 3:a.a.emit(r.AppEvents.alertSuccess,["Notification updated"]),n(Object(o.d)({path:"alerting/notifications"})),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),a.a.emit(r.AppEvents.alertError,[t.t0.data.error]);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}function O(e){return function(){var t=b(regeneratorRuntime.mark((function t(n,r){var a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=r().notificationChannel.notificationChannel,t.next=3,Object(i.getBackendSrv)().post("/api/alert-notifications/test",f({id:a.id},e));case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}function g(){return function(){var e=b(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(i.getBackendSrv)().get("/api/alert-notifiers");case 2:n=e.sent,r=n.sort((function(e,t){return e.name>t.name?1:-1})),t(Object(u.h)(r));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}function j(e){return function(){var t=b(regeneratorRuntime.mark((function t(n){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n(g());case 2:return t.next=4,Object(i.getBackendSrv)().get("/api/alert-notifications/".concat(e));case 4:r=t.sent,n(Object(u.e)(r));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}function w(){return function(){var e=b(regeneratorRuntime.mark((function e(t,n){var c,u,l,p;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=n().alertDefinition.queryOptions,u=n().alertDefinition.alertDefinition,e.next=4,Object(i.getDataSourceSrv)().get(null);case 4:return l=e.sent,p=f({},u,{condition:{refId:u.condition.refId,queriesAndExpressions:c.queries.map((function(e){var t,n=e.datasource===s.a;if(n)t={name:s.a,uid:s.a};else{var r,a,o=Object(i.getDataSourceSrv)().getInstanceSettings(e.datasource);t={name:null!==(r=null==o?void 0:o.name)&&void 0!==r?r:l.name,uid:null!==(a=null==o?void 0:o.uid)&&void 0!==a?a:l.uid}}return{model:f({},e,{type:n?e.type:e.queryType,datasource:t.name,datasourceUid:t.uid}),refId:e.refId,relativeTimeRange:{From:500,To:0}}}))}}),e.next=8,Object(i.getBackendSrv)().post("/api/alert-definitions",p);case 8:a.a.emit(r.AppEvents.alertSuccess,["Alert definition created"]),t(Object(o.d)({path:"alerting/list"}));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}function E(e){return function(t,n){var r=f({},n().alertDefinition.uiState,{},e);t(Object(u.k)(r));try{c.a.setObject(u.a,r)}catch(e){console.error(e)}}}function S(e){return function(t){t(Object(u.l)(e))}}function D(e){return function(t){t(Object(u.i)(e))}}function k(){return function(e,t){var n,i=t().alertDefinition,a=i.queryRunner,o=i.queryOptions,c={from:"now-1h",to:"now"};a.run({timezone:"browser",timeRange:{from:r.dateMath.parse(c.from),to:r.dateMath.parse(c.to),raw:c},maxDataPoints:null!==(n=o.maxDataPoints)&&void 0!==n?n:100,minInterval:o.minInterval,queries:o.queries,datasource:o.dataSource.name})}}},GLxE:function(e,t,n){"use strict";var r=n("q1tI"),i="undefined"!=typeof window?r.useLayoutEffect:r.useEffect;t.a=function(e,t){var n=Object(r.useState)(t),a=n[0],o=n[1];return i((function(){var t=e.subscribe(o);return function(){return t.unsubscribe()}}),[e]),a}},LSil:function(e,t,n){"use strict";var r=n("q1tI"),i=n.n(r),a=n("/MKj"),o=n("kDDq"),c=n("kDLi"),u=n("ZFWI"),s=n("9tWQ"),l=n("4vLh");function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(){var e=y(["\n      border: 1px solid ",";\n      border-radius: ",";\n    "]);return p=function(){return e},e}function d(){var e=y(["\n      display: flex;\n      justify-content: flex-end;\n    "]);return d=function(){return e},e}function b(){var e=y(["\n      padding: ",";\n      background-color: ",";\n      height: 100%;\n    "]);return b=function(){return e},e}function m(){var e=y(["\n      padding-left: ",";\n      height: 100%;\n    "]);return m=function(){return e},e}function y(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){O(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var D=function(e){function t(){var e,n;g(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(n=w(this,(e=E(t)).call.apply(e,[this].concat(i)))).onQueryOptionsChange=function(e){n.props.queryOptionsChange(e)},n.onRunQueries=function(){n.props.onRunQueries()},n.onIntervalChanged=function(e){n.props.queryOptionsChange(h({},n.props.queryOptions,{minInterval:e}))},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.queryOptions,n=e.queryRunner,r=x(u.a.theme);return i.a.createElement("div",{className:r.wrapper},i.a.createElement("div",{className:r.container},i.a.createElement("h4",null,"Queries"),i.a.createElement("div",{className:r.refreshWrapper},i.a.createElement(c.RefreshPicker,{onIntervalChanged:this.onIntervalChanged,onRefresh:this.onRunQueries,intervals:["15s","30s"]})),i.a.createElement(s.a,{queryRunner:n,options:t,onRunQueries:this.onRunQueries,onOptionsChange:this.onQueryOptionsChange})))}}])&&j(n.prototype,r),a&&j(n,a),t}(r.PureComponent),k={queryOptionsChange:l.g,onRunQueries:l.f};t.a=Object(a.connect)((function(e){return{queryOptions:e.alertDefinition.queryOptions,queryRunner:e.alertDefinition.queryRunner}}),k)(D);var x=Object(c.stylesFactory)((function(e){return{wrapper:Object(o.css)(m(),e.spacing.md),container:Object(o.css)(b(),e.spacing.md,e.colors.panelBg),refreshWrapper:Object(o.css)(d()),editorWrapper:Object(o.css)(p(),e.colors.panelBorder,e.border.radius.md)}}))},Tiyj:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n("q1tI"),i=n.n(r),a=n("kDDq"),o=n("kDLi");function c(){var e=f(["\n      font-size: ",";\n      color: ",";\n      margin-right: ",";\n    "]);return c=function(){return e},e}function u(){var e=f(["\n      display: flex;\n      align-items: baseline;\n    "]);return u=function(){return e},e}function s(){var e=f(["\n      padding: ",";\n      background-color: ",";\n    "]);return s=function(){return e},e}function l(){var e=f(["\n      padding-top: ",";\n    "]);return l=function(){return e},e}function f(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var p=function(e){var t=e.alertDefinition,n=e.onChange,a=e.onIntervalChange,c=e.onConditionChange,u=e.queryOptions,s=Object(o.useStyles)(d),l=Object(r.useMemo)((function(){return u.queries.map((function(e){return{value:e.refId,label:e.refId}}))}),[u.queries]);return i.a.createElement("div",{style:{paddingTop:"16px"}},i.a.createElement("div",{className:s.container},i.a.createElement("h4",null,"Alert definition"),i.a.createElement(o.Field,{label:"Title"},i.a.createElement(o.Input,{width:25,name:"title",value:t.title,onChange:n})),i.a.createElement(o.Field,{label:"Description",description:"What does the alert do and why was it created"},i.a.createElement(o.TextArea,{rows:5,width:25,name:"description",value:t.description,onChange:n,readOnly:!0})),i.a.createElement(o.Field,{label:"Evaluate"},i.a.createElement("div",{className:s.optionRow},i.a.createElement("span",{className:s.optionName},"Every"),i.a.createElement(o.Select,{onChange:a,value:t.interval,options:[{value:60,label:"1m"},{value:300,label:"5m"},{value:600,label:"10m"}],width:10}))),i.a.createElement(o.Field,{label:"Conditions"},i.a.createElement("div",{className:s.optionRow},i.a.createElement(o.Select,{onChange:c,value:t.condition.refId,options:l,noOptionsMessage:"No queries added"})))))},d=function(e){return{wrapper:Object(a.css)(l(),e.spacing.md),container:Object(a.css)(s(),e.spacing.md,e.colors.panelBg),optionRow:Object(a.css)(u()),optionName:Object(a.css)(c(),e.typography.size.md,e.colors.formInputText,e.spacing.sm)}}},fyNR:function(e,t,n){"use strict";var r=n("q1tI"),i=n.n(r),a=n("GLxE"),o=n("kDDq"),c=n("jYz7"),u=n("kDLi"),s=n("Obii");function l(){var e=p(["\n      padding: ",";\n    "]);return l=function(){return e},e}function f(){var e=p(["\n      height: ","px;\n    "]);return f=function(){return e},e}function p(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e))&&"[object Arguments]"!==Object.prototype.toString.call(e))return;var n=[],r=!0,i=!1,a=void 0;try{for(var o,c=e[Symbol.iterator]();!(r=(o=c.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(i)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var b,m=function(e){var t=e.data,n=e.height,a=e.width,o=d(Object(r.useState)(0),2),c=o[0],l=o[1],f=Object(u.useTheme)(),p=y(f,n),b=Object(r.useMemo)((function(){return t.series.map((function(e,t){return{value:t,label:Object(s.getFrameDisplayName)(e)}}))}),[t.series]);return t.series.length>1?i.a.createElement("div",{className:p.wrapper},i.a.createElement("div",{style:{height:n-f.spacing.formInputHeight-16}},i.a.createElement(u.Table,{data:t.series[c],height:n-f.spacing.formInputHeight-16,width:a})),i.a.createElement("div",{className:p.selectWrapper},i.a.createElement(u.Select,{onChange:function(e){return l(e.value)},options:b,value:c}))):i.a.createElement(u.Table,{data:t.series[0],height:n,width:a})},y=Object(u.stylesFactory)((function(e,t){return{wrapper:Object(o.css)(f(),t),selectWrapper:Object(o.css)(l(),e.spacing.md)}})),v=function(e){e.data;var t=e.isTested,n=e.styles;return t?i.a.createElement("div",null,"Instances"):i.a.createElement("div",{className:n.noQueries},i.a.createElement("h4",{className:n.noQueriesHeader},"You havenâ€™t tested your alert yet."),i.a.createElement("div",null,"In order to see your instances, you need to test your alert first."),i.a.createElement(u.Button,null,"Test alert now"))};function h(){var e=w(["\n      color: ",";\n    "]);return h=function(){return e},e}function O(){var e=w(["\n      color: ",";\n      display: flex;\n      flex-direction: column;\n      justify-content: center;\n      align-items: center;\n      height: 100%;\n      width: 100%;\n    "]);return O=function(){return e},e}function g(){var e=w(["\n      background: ",";\n      height: 100%;\n    "]);return g=function(){return e},e}function j(){var e=w(["\n      label: alertDefinitionPreviewTabs;\n      display: flex;\n      flex-direction: column;\n      width: 100%;\n      height: 100%;\n      padding: "," 0 0 ",";\n    "]);return j=function(){return e},e}function w(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e))&&"[object Arguments]"!==Object.prototype.toString.call(e))return;var n=[],r=!0,i=!1,a=void 0;try{for(var o,c=e[Symbol.iterator]();!(r=(o=c.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(i)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}n.d(t,"a",(function(){return D})),function(e){e.Query="query",e.Instances="instances"}(b||(b={}));var S=[{id:b.Query,text:"Query result"},{id:b.Instances,text:"Alerting instances"}],D=function(e){var t,n,o=e.queryRunner,s=E(Object(r.useState)(b.Query),2),l=s[0],f=s[1],p=Object(u.useStyles)(k),d=Object(r.useMemo)((function(){return o.getData({withFieldConfig:!0,withTransforms:!0})}),[]),y=Object(a.a)(d);return i.a.createElement("div",{className:p.wrapper},i.a.createElement(u.TabsBar,null,S.map((function(e,t){return i.a.createElement(u.Tab,{key:"".concat(e.id,"-").concat(t),label:e.text,onChangeTab:function(){return f(e.id)},active:l===e.id})}))),i.a.createElement(u.TabContent,{className:p.tabContent},y&&"Error"===y.state?i.a.createElement("div",{className:p.noQueries},i.a.createElement("h4",{className:p.noQueriesHeader},"There was an error :("),i.a.createElement("div",null,null===(t=y.error)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.error)):y&&y.series.length>0?i.a.createElement(c.a,{style:{width:"100%",height:"100%"}},(function(e){var t=e.width,n=e.height;switch(l){case b.Instances:return i.a.createElement(v,{isTested:!1,data:y,styles:p});case b.Query:default:return i.a.createElement(m,{data:y,width:t,height:n})}})):i.a.createElement("div",{className:p.noQueries},i.a.createElement("h4",{className:p.noQueriesHeader},"No queries added."),i.a.createElement("div",null,"Start adding queries to this alert and a visualisation for your queries will appear here."),i.a.createElement("div",null,"Learn more about how to create alert definitions ",i.a.createElement(u.Icon,{name:"external-link-alt"})))))},k=function(e){return{wrapper:Object(o.css)(j(),e.spacing.md,e.spacing.md),tabContent:Object(o.css)(g(),e.colors.panelBg),noQueries:Object(o.css)(O(),e.colors.textSemiWeak),noQueriesHeader:Object(o.css)(h(),e.colors.textSemiWeak)}}},hBny:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("/MKj"),i=n("zVNn"),a=n("q1tI"),o=n.n(a),c=n("2mql"),u=n.n(c),s=function(e,t,n){return function(c){var s=Object(r.connect)(e,t)(c),l=function(e){var t=Object(r.useDispatch)();return Object(a.useEffect)((function(){return function(){t(Object(i.a)({stateSelector:n}))}}),[]),o.a.createElement(s,e)};return l.displayName="ConnectWithCleanUp(".concat(s.displayName,")"),u()(l,c),l}}},zSau:function(e,t,n){"use strict";n.r(t),function(e){var r=n("q1tI"),i=n.n(r),a=n("0cfB"),o=n("kDDq"),c=n("kDLi"),u=n("HJgf"),s=n("/fyT"),l=n("hBny"),f=n("LSil"),p=n("Tiyj"),d=n("fyNR"),b=n("4vLh"),m=n("ZFWI");function y(){var e=h(["\n    display: flex;\n    flex-direction: column;\n    height: 100%;\n    width: 100%;\n    position: relative;\n  "]);return y=function(){return e},e}function v(){var e=h(["\n    width: calc(100% - 55px);\n    height: 100%;\n    position: fixed;\n    top: 0;\n    bottom: 0;\n    background: ",";\n    display: flex;\n    flex-direction: column;\n  "]);return v=function(){return e},e}function h(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){w(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function E(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function D(e,t){return!t||"object"!==O(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function x(e,t){return(x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var P=function(e){function t(){var e,n;E(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(n=D(this,(e=k(t)).call.apply(e,[this].concat(i)))).state={dataSources:[]},n.onChangeAlertOption=function(e){n.props.updateAlertDefinitionOption(w({},e.currentTarget.name,e.currentTarget.value))},n.onChangeInterval=function(e){n.props.updateAlertDefinitionOption({interval:e.value})},n.onConditionChange=function(e){n.props.updateAlertDefinitionOption({condition:j({},n.props.alertDefinition.condition,{refId:e.value})})},n.onSaveAlert=function(){(0,n.props.createAlertDefinition)()},n.onDiscard=function(){},n.onTest=function(){},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&x(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){this.props.loadNotificationTypes()}},{key:"renderToolbarActions",value:function(){return[i.a.createElement(c.Button,{variant:"destructive",key:"discard",onClick:this.onDiscard},"Discard"),i.a.createElement(c.Button,{variant:"secondary",key:"test",onClick:this.onTest},"Test"),i.a.createElement(c.Button,{variant:"primary",key:"save",onClick:this.onSaveAlert},"Save")]}},{key:"render",value:function(){var e=this.props,t=e.alertDefinition,n=e.notificationChannelTypes,r=e.uiState,a=e.updateAlertDefinitionUiState,o=e.queryRunner,l=e.queryOptions,b=q(m.a.theme);return i.a.createElement("div",{className:b.wrapper},i.a.createElement(u.a,{title:"Alert editor",titlePrefix:i.a.createElement(c.Icon,{name:"bell",size:"lg"}),actions:this.renderToolbarActions(),titlePadding:"sm"}),i.a.createElement("div",{className:b.splitPanesWrapper},i.a.createElement(s.a,{leftPaneComponents:[i.a.createElement(d.a,{key:"queryPreview",queryRunner:o}),i.a.createElement(f.a,{key:"queryEditor"})],uiState:r,updateUiState:a,rightPaneComponents:i.a.createElement(p.a,{alertDefinition:t,onChange:this.onChangeAlertOption,notificationChannelTypes:n,onIntervalChange:this.onChangeInterval,onConditionChange:this.onConditionChange,queryOptions:l})})))}}])&&S(n.prototype,r),a&&S(n,a),t}(r.PureComponent),C={createAlertDefinition:b.a,updateAlertDefinitionUiState:b.k,updateAlertDefinitionOption:b.j,loadNotificationTypes:b.e};t.default=Object(a.hot)(e)(Object(l.a)((function(e){return{uiState:e.alertDefinition.uiState,alertDefinition:e.alertDefinition.alertDefinition,queryOptions:e.alertDefinition.queryOptions,notificationChannelTypes:e.notificationChannel.notificationChannelTypes,queryRunner:e.alertDefinition.queryRunner}}),C,(function(e){return e.alertDefinition}))(P));var q=Object(c.stylesFactory)((function(e){return{wrapper:Object(o.css)(v(),e.colors.dashboardBg),splitPanesWrapper:Object(o.css)(y())}}))}.call(this,n("3UD+")(e))}}]);
//# sourceMappingURL=NgAlertingPage.63a9c1d648180e457252.js.map