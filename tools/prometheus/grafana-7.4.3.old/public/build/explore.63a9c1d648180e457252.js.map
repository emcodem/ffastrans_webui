{"version":3,"sources":["webpack:///./node_modules/combokeys/Combokeys/prototype/dom-event.js","webpack:///./node_modules/copy-to-clipboard/index.js","webpack:///./node_modules/react-icons/lib/io/network.js","webpack:///./public/app/features/explore/TraceView/uiElements.tsx","webpack:///./public/app/features/explore/TraceView/useChildrenState.ts","webpack:///./public/app/features/explore/TraceView/useDetailState.ts","webpack:///./public/app/features/explore/TraceView/createSpanLink.tsx","webpack:///./public/app/features/explore/TraceView/TraceView.tsx","webpack:///./public/app/features/explore/TraceView/useHoverIndentGuide.ts","webpack:///./public/app/features/explore/TraceView/useViewRange.ts","webpack:///./public/app/features/explore/TraceView/useSearch.ts","webpack:///./packages/jaeger-ui-components/src/utils/filter-spans.tsx","webpack:///./node_modules/combokeys/Combokeys/prototype/resetSequences.js","webpack:///./public/app/core/components/Animations/FadeIn.tsx","webpack:///./public/app/features/explore/ErrorContainer.tsx","webpack:///./node_modules/react-icons/lib/io/arrow-right-a.js","webpack:///./node_modules/lodash/_baseSortBy.js","webpack:///./node_modules/combokeys/helpers/special-aliases.js","webpack:///./packages/jaeger-ui-components/src/types/index.tsx","webpack:///./node_modules/combokeys/Combokeys/prototype/bindSingle.js","webpack:///./node_modules/combokeys/Combokeys/prototype/unbind.js","webpack:///./node_modules/combokeys/Combokeys/prototype/addEvents.js","webpack:///./node_modules/json-markup/index.js","webpack:///./packages/jaeger-ui-components/src/utils/DraggableManager/index.tsx","webpack:///./packages/jaeger-ui-components/src/common/NewWindowIcon.tsx","webpack:///./public/app/features/explore/state/selectors.ts","webpack:///./node_modules/combokeys/Combokeys/index.js","webpack:///./node_modules/combokeys/helpers/preventDefault.js","webpack:///./public/app/features/explore/RichHistory/RichHistorySettings.tsx","webpack:///./public/app/features/explore/RichHistory/RichHistoryQueriesTab.tsx","webpack:///./public/app/features/explore/RichHistory/RichHistoryStarredTab.tsx","webpack:///./public/app/features/explore/RichHistory/RichHistory.tsx","webpack:///./public/app/features/query/components/HelpToggle.tsx","webpack:///./node_modules/fast-memoize/src/index.js","webpack:///./node_modules/lodash/uniq.js","webpack:///./node_modules/react-icons/lib/io/chevron-right.js","webpack:///./public/app/features/explore/ReturnToDashboardButton.tsx","webpack:///./public/app/features/explore/QueryRow.tsx","webpack:///./node_modules/combokeys/Combokeys/prototype/resetSequenceTimer.js","webpack:///./node_modules/combokeys/Combokeys/prototype/reset.js","webpack:///./packages/jaeger-ui-components/src/utils/DraggableManager/DraggableManager.tsx","webpack:///./node_modules/combokeys/Combokeys/prototype/stopCallback.js","webpack:///./packages/jaeger-ui-components/src/constants/default-config.tsx","webpack:///./packages/jaeger-ui-components/src/utils/config/get-config.tsx","webpack:///./packages/jaeger-ui-components/src/TraceTimelineViewer/TimelineHeaderRow/TimelineCollapser.tsx","webpack:///./packages/jaeger-ui-components/src/TraceTimelineViewer/TimelineHeaderRow/TimelineColumnResizer.tsx","webpack:///./packages/jaeger-ui-components/src/TraceTimelineViewer/TimelineHeaderRow/TimelineViewingLayer.tsx","webpack:///./packages/jaeger-ui-components/src/TraceTimelineViewer/utils.tsx","webpack:///./packages/jaeger-ui-components/src/TraceTimelineViewer/Ticks.tsx","webpack:///./packages/jaeger-ui-components/src/TraceTimelineViewer/TimelineRow.tsx","webpack:///./packages/jaeger-ui-components/src/TraceTimelineViewer/TimelineHeaderRow/TimelineHeaderRow.tsx","webpack:///./packages/jaeger-ui-components/src/TraceTimelineViewer/ListView/Positions.tsx","webpack:///./packages/jaeger-ui-components/src/TraceTimelineViewer/ListView/index.tsx","webpack:///./packages/jaeger-ui-components/src/url/externalLinkContext.tsx","webpack:///./packages/jaeger-ui-components/src/url/ReferenceLink.tsx","webpack:///./packages/jaeger-ui-components/src/TraceTimelineViewer/ReferencesButton.tsx","webpack:///./packages/jaeger-ui-components/src/utils/span-ancestor-ids.tsx","webpack:///./packages/jaeger-ui-components/src/TraceTimelineViewer/SpanTreeOffset.tsx","webpack:///./packages/jaeger-ui-components/src/common/CopyIcon.tsx","webpack:///./packages/jaeger-ui-components/src/TraceTimelineViewer/SpanDetail/KeyValuesTable.tsx","webpack:///./packages/jaeger-ui-components/src/TraceTimelineViewer/SpanDetail/AccordianKeyValues.tsx","webpack:///./packages/jaeger-ui-components/src/TraceTimelineViewer/SpanDetail/AccordianKeyValues.markers.tsx","webpack:///./packages/jaeger-ui-components/src/TraceTimelineViewer/SpanDetail/AccordianLogs.tsx","webpack:///./packages/jaeger-ui-components/src/TraceTimelineViewer/SpanBar.tsx","webpack:///./packages/jaeger-ui-components/src/TraceTimelineViewer/SpanBarRow.tsx","webpack:///./packages/jaeger-ui-components/src/TraceTimelineViewer/SpanDetail/TextList.tsx","webpack:///./packages/jaeger-ui-components/src/TraceTimelineViewer/SpanDetail/AccordianText.tsx","webpack:///./packages/jaeger-ui-components/src/TraceTimelineViewer/SpanDetail/AccordianReferences.tsx","webpack:///./packages/jaeger-ui-components/src/TraceTimelineViewer/SpanDetail/index.tsx","webpack:///./packages/jaeger-ui-components/src/TraceTimelineViewer/SpanDetailRow.tsx","webpack:///./packages/jaeger-ui-components/src/TraceTimelineViewer/VirtualizedTraceView.tsx","webpack:///./packages/jaeger-ui-components/src/keyboard-shortcuts.tsx","webpack:///./packages/jaeger-ui-components/src/keyboard-mappings.tsx","webpack:///./packages/jaeger-ui-components/src/TraceTimelineViewer/index.tsx","webpack:///./node_modules/combokeys/helpers/characterFromEvent.js","webpack:///./node_modules/react-use/esm/useInterval.js","webpack:///./public/app/features/explore/Time.tsx","webpack:///./public/app/features/explore/ElapsedTime.tsx","webpack:///./public/app/features/explore/LiveLogs.tsx","webpack:///./node_modules/react-icons/lib/md/file-upload.js","webpack:///./node_modules/combokeys/Combokeys/prototype/fireCallback.js","webpack:///./node_modules/toggle-selection/index.js","webpack:///./node_modules/combokeys/helpers/eventModifiers.js","webpack:///./node_modules/combokeys/helpers/stopPropagation.js","webpack:///./node_modules/lodash/maxBy.js","webpack:///./node_modules/recompose/node_modules/hoist-non-react-statics/dist/hoist-non-react-statics.cjs.js","webpack:///./public/app/features/explore/ResponsiveButton.tsx","webpack:///./node_modules/combokeys/Combokeys/prototype/getReverseMap.js","webpack:///./packages/jaeger-ui-components/src/common/LabeledList.tsx","webpack:///./packages/jaeger-ui-components/src/utils/DraggableManager/EUpdateTypes.tsx","webpack:///./node_modules/combokeys/Combokeys/prototype/trigger.js","webpack:///./node_modules/lodash/_compareMultiple.js","webpack:///./node_modules/combokeys/helpers/isModifier.js","webpack:///./public/app/features/explore/RichHistory/RichHistoryContainer.tsx","webpack:///./public/app/features/explore/ExploreQueryInspector.tsx","webpack:///./node_modules/recompose/es/Recompose.js","webpack:///./node_modules/re-resizable/lib/resizer.js","webpack:///./packages/jaeger-ui-components/src/selectors/process.js","webpack:///./packages/jaeger-ui-components/src/selectors/span.js","webpack:///./packages/jaeger-ui-components/src/utils/TreeNode.js","webpack:///./packages/jaeger-ui-components/src/selectors/trace.js","webpack:///./packages/jaeger-ui-components/src/utils/sort.js","webpack:///./packages/jaeger-ui-components/src/model/transform-trace-data.tsx","webpack:///./public/app/features/explore/useLiveTailControls.ts","webpack:///./node_modules/fuzzy/lib/fuzzy.js","webpack:///./packages/jaeger-ui-components/src/uiElementsContext.tsx","webpack:///./packages/jaeger-ui-components/src/index.ts","webpack:///./packages/jaeger-ui-components/src/utils/color-generator.tsx","webpack:///./public/app/features/dashboard/components/Inspector/InspectStatsTable.tsx","webpack:///./public/app/features/dashboard/components/Inspector/InspectStatsTab.tsx","webpack:///./node_modules/react-icon-base/lib/index.js","webpack:///./public/app/features/explore/NoDataSourceCallToAction.tsx","webpack:///./node_modules/combokeys/Combokeys/prototype/getMatches.js","webpack:///./node_modules/combokeys/Combokeys/reset.js","webpack:///./node_modules/lodash/_baseGt.js","webpack:///./node_modules/react-icons/lib/io/ios-arrow-down.js","webpack:///./node_modules/re-resizable/lib/index.js","webpack:///./public/app/features/explore/ExploreGraphNGPanel.tsx","webpack:///./node_modules/combokeys/Combokeys/prototype/detach.js","webpack:///./packages/jaeger-ui-components/src/Theme.tsx","webpack:///./packages/jaeger-ui-components/src/TraceTimelineViewer/SpanDetail/DetailState.tsx","webpack:///./node_modules/combokeys/Combokeys/prototype/bindMultiple.js","webpack:///./node_modules/react-use/esm/useEffectOnce.js","webpack:///./public/app/features/explore/LogsContainer.tsx","webpack:///./node_modules/lodash/_baseOrderBy.js","webpack:///./public/app/features/explore/ExploreToolbar.tsx","webpack:///./public/app/features/explore/QueryRows.tsx","webpack:///./node_modules/react-icons/lib/io/alert.js","webpack:///./node_modules/lodash/_baseExtremum.js","webpack:///./public/app/features/explore/Wrapper.tsx","webpack:///./node_modules/combokeys/helpers/keysFromString.js","webpack:///./public/app/features/explore/ExploreGraphPanel.tsx","webpack:///./public/app/features/explore/Logs.tsx","webpack:///./public/app/features/explore/MetaInfoText.tsx","webpack:///./node_modules/combokeys/Combokeys/prototype/handleKey.js","webpack:///./packages/jaeger-ui-components/src/TracePageHeader/SpanGraph/CanvasSpanGraph.tsx","webpack:///./packages/jaeger-ui-components/src/TracePageHeader/SpanGraph/render-into-canvas.tsx","webpack:///./packages/jaeger-ui-components/src/TracePageHeader/SpanGraph/TickLabels.tsx","webpack:///./packages/jaeger-ui-components/src/TracePageHeader/SpanGraph/GraphTicks.tsx","webpack:///./packages/jaeger-ui-components/src/TracePageHeader/SpanGraph/Scrubber.tsx","webpack:///./packages/jaeger-ui-components/src/TracePageHeader/SpanGraph/ViewingLayer.tsx","webpack:///./packages/jaeger-ui-components/src/TracePageHeader/SpanGraph/index.tsx","webpack:///./packages/jaeger-ui-components/src/common/UiFindInput.tsx","webpack:///./packages/jaeger-ui-components/src/TracePageHeader/TracePageSearchBar.tsx","webpack:///./packages/jaeger-ui-components/src/TracePageHeader/TracePageSearchBar.markers.tsx","webpack:///./packages/jaeger-ui-components/src/common/BreakableText.tsx","webpack:///./packages/jaeger-ui-components/src/common/LoadingIndicator.tsx","webpack:///./packages/jaeger-ui-components/src/common/TraceName.tsx","webpack:///./node_modules/lru-memoize/dist/lru-memoize.es.js","webpack:///./packages/jaeger-ui-components/src/model/span.tsx","webpack:///./packages/jaeger-ui-components/src/model/link-patterns.tsx","webpack:///./packages/jaeger-ui-components/src/common/ExternalLinks.tsx","webpack:///./packages/jaeger-ui-components/src/TracePageHeader/TracePageHeader.tsx","webpack:///./packages/jaeger-ui-components/src/model/trace-viewer.ts","webpack:///./packages/jaeger-ui-components/src/TracePageHeader/index.tsx","webpack:///./node_modules/react-icons/lib/io/ios-arrow-right.js","webpack:///./node_modules/combokeys/helpers/special-keys-map.js","webpack:///./public/app/features/explore/SecondaryActions.tsx","webpack:///./node_modules/lodash/_createRound.js","webpack:///./node_modules/combokeys/Combokeys/prototype/bindSequence.js","webpack:///./public/app/features/explore/QueryRowActions.tsx","webpack:///./public/app/features/explore/TimeSyncButton.tsx","webpack:///./public/app/features/explore/ExploreTimeControls.tsx","webpack:///./node_modules/combokeys/Combokeys/prototype/modifiersMatch.js","webpack:///./packages/jaeger-ui-components/src/utils/date.tsx","webpack:///./packages/jaeger-ui-components/src/utils/number.tsx","webpack:///./node_modules/lodash/_baseMap.js","webpack:///./node_modules/combokeys/Combokeys/prototype/handleKeyEvent.js","webpack:///./public/app/features/explore/utils/LogsCrossFadeTransition.tsx","webpack:///./public/app/features/explore/NodeGraphContainer.tsx","webpack:///./public/app/features/explore/RunButton.tsx","webpack:///./node_modules/combokeys/helpers/shift-map.js","webpack:///./node_modules/combokeys/helpers/special-characters-map.js","webpack:///./node_modules/combokeys/Combokeys/prototype/getKeyInfo.js","webpack:///./public/app/features/dashboard/components/Inspector/styles.ts","webpack:///./node_modules/react-icons/lib/md/keyboard-arrow-right.js","webpack:///./node_modules/fbjs/lib/shallowEqual.js","webpack:///./public/app/features/explore/LiveTailButton.tsx","webpack:///./public/app/features/explore/Explore.tsx","webpack:///./node_modules/react-icons/lib/io/android-open.js","webpack:///./node_modules/lodash/round.js","webpack:///./node_modules/deep-freeze/index.js","webpack:///./public/app/features/explore/RichHistory/RichHistoryCard.tsx","webpack:///./packages/jaeger-ui-components/src/constants/index.tsx","webpack:///./public/app/features/explore/ExploreDrawer.tsx","webpack:///./packages/jaeger-ui-components/src/uberUtilityStyles.ts","webpack:///./node_modules/change-emitter/lib/index.js","webpack:///./node_modules/lodash/sortBy.js","webpack:///./public/app/features/explore/QueryEditor.tsx","webpack:///./node_modules/react-icons/lib/io/android-locate.js","webpack:///./node_modules/lodash/_compareAscending.js","webpack:///./node_modules/combokeys/Combokeys/prototype/bind.js","webpack:///./public/app/features/explore/TableContainer.tsx","webpack:///./node_modules/combokeys/Combokeys/prototype/pickBestAction.js"],"names":["on","element","event","callback","capture","addEventListener","attachEvent","call","module","exports","off","removeEventListener","detachEvent","deselectCurrent","clipboardToIE11Formatting","text","options","debug","message","reselectPrevious","range","selection","mark","success","document","createRange","getSelection","createElement","textContent","style","all","position","top","clip","whiteSpace","webkitUserSelect","MozUserSelect","msUserSelect","userSelect","e","stopPropagation","format","preventDefault","clipboardData","console","warn","window","clearData","setData","onCopy","body","appendChild","selectNodeContents","addRange","execCommand","Error","err","error","copyKey","test","navigator","userAgent","replace","prompt","removeRange","removeAllRanges","removeChild","Object","defineProperty","value","_extends","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","_react2","_interopRequireDefault","_reactIconBase2","obj","__esModule","default","props","viewBox","d","UIElements","Popover","Tooltip","Icon","Dropdown","Menu","MenuItem","Button","onClick","children","className","variant","Divider","styles","getStyles","useTheme","cx","Input","InputGroup","stylesFactory","theme","css","isDark","shouldDisableCollapse","allSpans","hiddenSpansIds","filter","s","hasChildren","size","makeDetailSubsectionToggle","subSection","detailStates","setDetailStates","spanID","old","get","detailState","toggleTags","toggleProcess","toggleWarnings","toggleReferences","toggleStackTraces","toggleLogs","newDetailStates","Map","set","defaultKeys","getLokiQueryFromSpan","span","keys","keysToCheck","tags","process","reduce","acc","tag","includes","push","join","getTimeRangeFromSpan","from","dateTime","startTime","spanEndMs","duration","to","raw","utc","TraceView","trace","traceID","useState","Set","childrenHiddenIDs","setChildrenHiddenIDs","expandOne","useCallback","spans","prevExpandedDepth","expandNextHiddenSpan","newChildrenHiddenIDs","res","depth","has","delete","collapseOne","nearestCollapsedAncestor","curSpan","add","expandAll","collapseAll","childrenToggle","useChildrenState","toggleDetail","DetailState","detailLogItemToggle","log","toggleLogItem","detailLogsToggle","detailWarningsToggle","detailStackTracesToggle","detailReferencesToggle","detailProcessToggle","detailTagsToggle","useDetailState","hoverIndentGuideIds","setHoverIndentGuideIds","addHoverIndentGuideId","prevState","newHoverIndentGuideIds","removeHoverIndentGuideId","useHoverIndentGuide","time","current","viewRange","setViewRange","updateNextViewRangeTime","update","prevRange","updateViewRangeTime","start","end","useViewRange","spanNameColumnWidth","setSpanNameColumnWidth","slim","setSlim","traceProp","useMemo","transformTraceData","search","setSearch","spanFindMatches","filterSpans","undefined","useSearch","dataSourceName","useSelector","state","explore","left","datasourceInstance","name","traceToLogsOptions","getDatasourceSrv","getInstanceSettings","jsonData","tracesToLogs","traceTheme","type","ThemeType","Dark","Light","servicesColorPalette","colors","components","TraceName","fontSize","typography","lg","traceTimeline","shouldScrollToFirstUiFindMatch","createSpanLink","splitOpenFn","datasourceUid","dataSourceSettings","dataLink","title","url","internal","uid","datasourceName","query","expr","refId","link","mapInternalLinkToExplore","internalLink","scopedVars","field","onClickFn","replaceVariables","getTemplateSrv","bind","href","content","createSpanLinkFactory","scrollElement","getElementsByClassName","Provider","canCollapse","clearSearch","focusUiFindMatches","hideMap","hideSummary","nextResult","onSlimViewClicked","onTraceGraphViewClicked","prevResult","resultCount","slimView","textFilter","traceGraphView","searchValue","onSearchValueChange","hideSearchButtons","registerAccessors","scrollToFirstVisibleSpan","findMatchesIDs","focusSpan","createLinkToExternalSpan","clearShouldScrollToFirstUiFindMatch","detailToggle","setTrace","uiFind","linksGetter","items","itemIndex","includeFilters","excludeKeys","split","Boolean","forEach","w","substr","toLowerCase","isTextInFilters","filters","some","isTextInKeyValues","kvs","kv","toString","operationName","serviceName","logs","fields","map","doNotReset","activeSequences","this","sequenceLevels","nextExpectedAction","FadeIn","defaultStyle","transition","opacity","transitionStyles","exited","display","entering","entered","exiting","Transition","in","timeout","unmountOnExit","onExited","ErrorContainer","queryError","showError","array","comparer","sort","platform","combination","action","sequenceName","level","directMap","info","sequence","bindSequence","getKeyInfo","callbacks","getMatches","modifiers","seq","combo","eventHandler","Stylize","styleFile","cssClass","objRule","str","rule","escape","doc","indent","list","fn","out","slice","visit","Array","isArray","toISOString","createStyle","NewWindowIconLarge","NewWindowIcon","isLarge","rest","cls","defaultProps","deduplicatedRowsSelector","createSelector","logsResult","rows","hiddenLogLevels","dedupStrategy","filteredRows","filterLogLevels","dedupLogRows","Combokeys","constructor","storeInstancesGlobally","resetTimer","ignoreNextKeyup","ignoreNextKeypress","addEvents","instances","bindMultiple","unbind","trigger","reset","stopCallback","handleKey","bindSingle","pickBestAction","getReverseMap","resetSequences","fireCallback","resetSequenceTimer","detach","REVERSE_MAP","returnValue","container","spacing","sm","input","switch","label","md","retentionPeriodOptions","RichHistorySettings","retentionPeriod","starredTabAsFirstTab","activeDatasourceOnly","onChangeRetentionPeriod","toggleStarredTabAsFirstTab","toggleactiveDatasourceOnly","deleteRichHistory","selectedOption","find","v","description","onChange","weight","bold","appEvents","emit","CoreEvents","showConfirmModal","yesText","icon","onConfirm","AppEvents","alertSuccess","height","bgColor","isLight","palette","gray5","dark4","sliderHeight","semibold","containerContent","containerSlider","slider","selectors","filterInput","multiselect","xxs","xs","border","radius","sessionName","heading","h4","footer","light","queries","regular","RichHistoryQueriesTab","datasourceFilters","onSelectDatasourceFilters","onChangeSortOrder","sortOrder","exploreId","timeFilter","setTimeFilter","filteredQueries","setFilteredQueries","searchInput","setSearchInput","datasourcesRetrievedFromQueryHistory","uniqBy","listOfDatasources","createDatasourcesList","filterAndSortQueriesDebounced","debounce","filterAndSortQueries","useEffect","mappedQueriesToHeadings","mapQueriesToHeadings","mapNumbertoTimeInSlider","tooltipAlwaysVisible","min","max","orientation","formatTooltipResult","reverse","onAfterChange","aria-label","isMulti","placeholder","FilterInput","labelClassName","inputClassName","sortOrderOptions","order","q","idx","findIndex","RichHistoryCard","ts","dsImg","imgUrl","isRemoved","Tabs","RichHistoryStarredTab","starredQueries","starred","SortOrder","Descending","Ascending","DatasourceAZ","DatasourceZA","UnThemedRichHistory","setState","store","RICH_HISTORY_SETTING_KEYS","toggleActiveDatasourceOnly","setObject","getObject","getBool","activeDatasourceInstance","updateFilters","prevProps","richHistory","onClose","firstTab","tabs","RichHistory","Starred","Settings","defaultTab","closeIconTooltip","PureComponent","withTheme","infoBox","HelpToggle","isHelpVisible","setIsHelpVisible","_","monadic","cache","serializer","arg","cacheKey","computedValue","variadic","args","apply","assemble","context","strategy","serialize","strategyDefault","create","serializerDefault","JSON","stringify","ObjectWithoutPrototypeCache","cacheDefault","strategies","baseUniq","ButtonSelect","LegacyForms","mapDispatchToProps","updateLocation","setDashboardQueriesToUpdateOnLoad","hot","connect","splitted","originPanelId","withOriginId","Number","isInteger","panelReturnClasses","classNames","cleanQueries","returnToPanel","withChanges","dashboardSrv","getDashboardSrv","dash","getCurrent","titleSlug","kbn","slugifyForUrl","panelId","panelInEdit","editPanel","panelInView","viewPanel","path","placement","data-testid","maxMenuHeight","noopOnBlur","QueryRow","textEditModeEnabled","onRunQuery","runQueries","override","index","changeQuery","getHighlighterExpression","updateLogsHighlights","onClickToggleDisabled","newQuery","hide","onClickRemoveButton","removeQueryRowAction","onClickToggleEditorMode","setReactQueryEditor","QueryEditor","ExploreMetricsQueryField","ExploreLogsQueryField","ExploreQueryField","renderQueryEditor","history","exploreEvents","queryResponse","queryErrors","ReactQueryEditor","datasource","onBlur","data","onQueryChange","onExecuteQuery","initialQuery","DatasourceCheatsheet","QueryEditorHelp","onClickExample","expressions","highlightLogsExpressionAction","latency","canToggleEditorModes","isNotStarted","LoadingState","NotStarted","QueryEditorRows","isDisabled","modifyQueries","item","absoluteRange","self","clearTimeout","setTimeout","DraggableManager","getBounds","resetBoundsOnResize","resetBounds","_bounds","_handleMinorMouseEvent","button","clientX","eventType","_isDragging","handler","EUpdateTypes","MouseEnter","_onMouseEnter","MouseLeave","_onMouseLeave","MouseMove","_onMouseMove","_getPosition","x","manager","_handleDragEvent","_get","DragStart","_onDragStart","DragMove","_onDragMove","_stopDragging","DragEnd","_onDragEnd","handleMouseDown","handleMouseEnter","handleMouseMove","handleMouseLeave","_resetBoundsOnResize","onMouseEnter","onMouseLeave","onMouseMove","onDragStart","onDragMove","onDragEnd","_getBounds","clientXLeft","maxValue","minValue","width","indexOf","tagName","isContentEditable","deepFreeze","archiveEnabled","dependencies","dagMaxNumServices","FALLBACK_DAG_MAX_NUM_SERVICES","menuEnabled","linkPatterns","menu","maxLookback","maxLimit","tracking","gaID","trackErrors","getConfigValue","defaultConfig","TimelineCollapser","onExpandAll","onExpandOne","onCollapseAll","onCollapseOne","data-test-id","tooltip","tooltipPlacement","TimelineColumnResizer","wrapper","dragger","draggerDragging","draggerDraggingLeft","draggerDraggingRight","gripIcon","gripIconDragging","_setRootElm","elm","_rootElm","_getDraggingBounds","getBoundingClientRect","_handleDragUpdate","dragPosition","_handleDragEnd","_dragManager","dispose","draggerStyle","columnResizeHandleHeight","gripStyle","isDraggingLeft","isDraggingRight","isDragging","Math","right","ref","aria-hidden","onMouseDown","React","TimelineViewingLayer","TimelineViewingLayerCursorGuide","TimelineViewingLayerDragged","TimelineViewingLayerDraggedDraggingLeft","TimelineViewingLayerDraggedDraggingRight","TimelineViewingLayerDraggedShiftDrag","TimelineViewingLayerDraggedReframeDrag","TimelineViewingLayerFullOverlay","mapFromViewSubRange","viewStart","viewEnd","mapToViewSubRange","getMarkers","isShift","layout","isOutOfView","getNextViewLayout","Reflect","_setRoot","_root","_handleReframeMouseMove","viewRangeTime","cursor","_handleReframeMouseLeave","_handleReframeDragUpdate","reframe","shift","anchor","_handleReframeDragEnd","_draggerReframe","nextProps","boundsInvalidator","cusrorPosition","shiftEnd","shiftStart","createViewedBoundsFunc","viewMin","viewWindow","spanHasTag","isClientSpan","isServerSpan","isErrorBool","isErrorStr","isErrorSpan","Ticks","TicksTick","autoColor","TicksTickLabel","TicksTickLabelEndAnchor","labels","endTime","numTicks","showLabels","viewingDuration","durationAtTick","formatDuration","ticks","portion","flexRow","TimelineRow","TimelineRowCell","widthPercent","mergedStyle","flexBasis","maxWidth","ubRelative","Cell","TimelineHeaderRow","TimelineHeaderRowTitle","TimelineHeaderWrapper","nameColumnWidth","onColummWidthChange","ubFlex","ubPx2","Positions","bufferLen","ys","heights","dataLen","lastI","dataLength","heightGetter","forcedLastI","_max","h","yValue","calcHeights","_i","chg","calcYs","imin","imax","confirmHeight","y","known","ListView","getViewHeight","_viewHeight","getBottomVisibleIndex","bottomY","_scrollTop","_yPositions","findFloorIndex","_getHeight","getTopVisibleIndex","getRowPosition","_onScroll","_isScrolledOrResized","requestAnimationFrame","_positionList","_wrapperElm","_calcViewIndexes","maxStart","viewBufferMin","_startIndex","minEnd","_endIndex","_startIndexDrawn","_endIndexDrawn","forceUpdate","_initWrapper","windowScroller","clientHeight","_initItemHolder","_itemHolderElm","_scanItemHeights","getIndexFromKey","lowDirtyKey","highDirtyKey","isDirty","nodes","childNodes","node","itemKey","getAttribute","observed","firstElementChild","_knownHeights","getKeyFromIndex","itemHeightGetter","_htmlTopOffset","_windowScrollListenerAdded","_htmlElm","documentElement","scrollTop","useRoot","innerHeight","scrollY","yStart","yEnd","initialDraw","itemRenderer","viewBuffer","profileData","_isViewChanged","attrs","wrapperProps","onScroll","overflowY","scrollerStyle","getEstimatedHeight","margin","padding","itemsWrapperClassName","ExternalLinkContext","createContext","displayName","ReferenceLink","reference","otherProps","role","Consumer","rel","MultiParent","TraceRefLink","ReferencesButton","referencesList","references","tooltipText","tooltipProps","arrowPointAtCenter","mouseLeaveDelay","overlayClassName","overlay","getFirstAncestor","_find","refType","SpanTreeOffset","SpanTreeOffsetParent","indentGuide","indentGuideActive","iconWrapper","UnthemedSpanTreeOffset","ancestorId","relatedTarget","HTMLSpanElement","ancestorIds","ancestorIDs","spanAncestorIds","childrenVisible","showChildrenIcon","data-ancestor-id","CopyIcon","hasCopied","handleClick","copy","copyText","handleTooltipVisibilityChange","visible","onVisibleChange","tooltipTitle","htmlType","copyIcon","KeyValueTable","row","keyColumn","copyColumn","linkIcon","jsonObjectOrArrayStartRegex","parseIfComplexJson","parse","LinkValue","linkValueList","links","KeyValuesTable","uWidth100","valueMarkup","markup","__html","jsonMarkup","jsonTable","ubInlineBlock","dangerouslySetInnerHTML","header","headerEmpty","headerHighContrast","emptyIcon","summary","summaryItem","summaryLabel","summaryDelim","KeyValuesSummary","String","AccordianKeyValues","highContrast","interactive","isOpen","onToggle","isEmpty","iconCls","uAlignIcon","arrow","headerProps","uTxEllipsis","data-test","AccordianLogs","AccordianLogsHeader","AccordianLogsContent","AccordianLogsFooter","openedItems","onItemToggle","timestamp","HeaderComponent","_sortBy","ubMb1","bar","rpc","logMarker","logHint","toPercent","toFixed","compose","withState","shortLabel","withProps","setLabel","longLabel","setLongLabel","setShortLabel","onlyUpdateForKeys","getViewedBounds","color","traceStartTime","logGroups","_groupBy","posPercent","round","onMouseOut","onMouseOver","background","positionKey","spanBar","spanBarLabel","nameWrapper","nameWrapperMatchingFilter","endpointName","view","viewExpanded","viewExpandedAndMatchingFilter","nameColumn","rowClippingLeft","rowClippingRight","rowExpanded","rowMatchingFilter","rowExpandedAndMatchingFilter","nameDetailExpanded","svcName","svcNameChildrenCollapsed","errorIcon","rpcColorMarker","labelRight","labelLeft","UnthemedSpanBarRow","_detailToggle","onDetailToggled","_childrenToggle","onChildrenToggled","hintClassName","columnDivision","isChildrenExpanded","isDetailExpanded","isMatchingFilter","showErrorIcon","clippingLeft","clippingRight","isParent","viewBounds","labelDetail","aria-checked","borderColor","tabIndex","backgroundColor","errorIconColor","marginRight","ctrlKey","metaKey","shiftKey","subsidiarilyReferencedBy","TextList","List","DefaultTextComponent","AccordianText","headerClassName","TextComponent","accordianKeyValuesStyles","getAccordianKeyValuesStyles","ReferencesList","itemContent","debugInfo","debugLabel","References","data-label","AccordianReferences","divider","dividerVertical","debugValue","AccordianWarnings","AccordianWarningsHeader","AccordianWarningsHeaderOpen","AccordianWarningsLabel","Textarea","SpanDetail","logItemToggle","logsToggle","processToggle","tagsToggle","warningsToggle","stackTracesToggle","referencesToggle","isTagsOpen","isProcessOpen","logsState","isWarningsOpen","isReferencesOpen","isStackTracesOpen","relativeStartTime","warnings","stackTraces","overviewItems","deepLinkCopyText","location","origin","pathname","ubItemsCenter","ubFlexAuto","ubM0","LabeledList","ubTxRightAlign","dividerClassName","buttonProps","ubMy1","logItem","textComponentProps","stackTrace","readOnly","cols","expandedAccent","infoWrapper","UnthemedSpanDetailRow","_linksGetter","borderTopColor","rowsWrapper","DEFAULT_HEIGHTS","generateRowStates","collapseDepth","rowStates","hidden","isDetail","spanIndex","getClipping","currentViewRange","instance","UnthemedVirtualizedTraceView","getViewRange","currentViewRangeTime","getSearchedSpanIDs","getCollapsedChildren","mapRowIndexToSpanIndex","mapSpanIndexToRowIndex","setListView","listView","isChanged","getAccessors","parts","_spanID","_isDetail","getRowHeight","renderRow","renderSpanDetailRow","renderSpanBarRow","clipping","zoomStart","zoomEnd","nextPropKeys","nextViewRangeTime","nextHiddenIDs","nextDetailStates","nextRegisterAccessors","nextTrace","lv","getBottomRowIndexVisible","getTopRowIndexVisible","getColorByKey","isCollapsed","parentSpanIndex","spanContainsErredSpan","rpcSpan","spanChildDepth","findServerChildSpan","rpcViewBounds","SpanBarRow","zIndex","SpanDetailRow","keyboardMappings","scrollPageDown","binding","scrollPageUp","scrollToNextVisibleSpan","scrollToPrevVisibleSpan","panLeft","panLeftFast","panRight","panRightFast","zoomIn","zoomInFast","zoomOut","zoomOutFast","searchSpans","getInstance","local","TraceTimelineViewer","UnthemedTraceTimelineViewer","inst","keysHandler","VirtualizedTraceView","SPECIAL_KEYS_MAP","SPECIAL_CHARACTERS_MAP","character","fromCharCode","which","delay","savedCallback","interval_1","setInterval","clearInterval","Time","timeInMs","humanize","formatTime","inSeconds","toDuration","hours","minutes","seconds","ElapsedTime","resetKey","elapsed","setElapsed","useInterval","LiveLogs","liveEndDiv","scrollContainerRef","createRef","isPaused","onPause","currentTarget","scrollHeight","rowsToRender","logRowsToRender","logRows","timeZone","onResume","logsRowsLive","fontFamily","monospace","logsRowFade","tinycolor","blue95","setAlpha","logsRowsIndicator","fullWidth","getLogRowStyles","logsRow","logsRowLocalTime","logsRowMessage","dateTimeFormat","timeEpochMs","hasAnsi","entry","scrollTo","stopLive","LiveLogsWithTheme","srcElement","rangeCount","active","activeElement","ranges","getRangeAt","toUpperCase","blur","focus","altKey","cancelBubble","baseExtremum","baseGt","baseIteratee","iteratee","REACT_STATICS","childContextTypes","contextTypes","getDefaultProps","getDerivedStateFromProps","mixins","propTypes","KNOWN_STATICS","caller","callee","arity","getOwnPropertyNames","getOwnPropertySymbols","getOwnPropertyDescriptor","getPrototypeOf","objectPrototype","hoistNonReactStatics","targetComponent","sourceComponent","blacklist","inheritedComponent","concat","descriptor","IconSide","ResponsiveButton","forwardRef","iconSide","buttonClassName","iconClassName","disabled","divElementProps","formatBtnTitle","LabeledListItem","LabeledListLabel","compareAscending","object","other","orders","objCriteria","criteria","othCriteria","ordersLength","result","setHeight","onResize","_e","_dir","stripPropsFromResponse","response","config","hideFromInspector","clonedResponse","headers","request","transformRequest","transformResponse","paramSerializer","jsonpCallbackParam","requestId","inspect","retry","status","statusText","ok","redirected","$$config","loading","formattedJSON","setFormattedJSON","allNodesExpanded","setAllNodesExpanded","setResponse","useEffectOnce","inspectorStreamSub","getBackendSrv","getInspectorStream","subscribe","resp","strippedResponse","unsubscribe","haveData","getPanelInspectorStyles","timezone","toolbar","toolbarItem","onSuccess","elType","contentQueryInspector","json","open","onDidRender","classCallCheck","Constructor","TypeError","inherits","subClass","superClass","enumerable","writable","configurable","setPrototypeOf","__proto__","possibleConstructorReturn","ReferenceError","createEagerElementUtil","hasKey","isReferentiallyTransparent","Component$$1","isClassComponent","render","isReferentiallyTransparentFunctionComponent","createFactory","p","c","mapProps","propsMapper","BaseComponent","factory","pick","stateName","stateUpdaterName","initialState","_Component","WithState","_temp","_this","_len","_key","stateValue","updateStateValue","updateFn","_ref","_babelHelpers$extends","shouldUpdate","Nothing","ShouldUpdate","shouldComponentUpdate","propKeys","funcs","a","b","config$$1","_config","fromESObservable","toESObservable","observable","stream","extendStatics","__extends","__","__assign","t","n","__importStar","mod","k","bottom","topRight","bottomRight","bottomLeft","topLeft","Resizer","_super","onResizeStart","direction","onTouchStart","replaceStyles","getProcessServiceName","proc","getSpanId","getSpanName","getSpanDuration","getSpanTimestamp","getSpanProcessId","processID","getSpanReferenceByType","getSpanServiceName","childOfRef","filterSpansForText","leftBound","rightBound","fuzzy","extract","original","getTextFilterdSpansAsMap","matchingSpans","textFilteredSpansMap","muted","TreeNode","child","iterFunction","searchFunction","searchFn","findPath","currentNode","currentPath","attempt","match","nodeStack","actualDepth","pop","nodeDepth","walk","getTraceSpans","getTraceProcesses","processes","getSpanWithProcess","getTraceSpansAsMap","getTraceSpanIdsAsTree","nodesById","spansById","root","parentID","comparator","nodeA","nodeB","getTraceTimestamp","prevTimestamp","getTraceDuration","prevDuration","getParentSpan","tree","spanMap","spanA","spanB","itemA","itemB","getTraceServices","spanTree","getPath","services","DURATION_FORMATTERS","ms","formatMillisecondTime","formatSecondTime","getDurationFormatterForTrace","totalDuration","ONE_SECOND","getTraceSpansByHierarchyPosition","unit","formatter","dir","selector","hierarchyPositionMap","createStructuredSelector","collapsed","collapse","hiddenSpanIds","collapsedSpanId","id","interval","num","updatedSpan","deduplicateTags","spanTags","warningsHash","uniqueTags","values","orderTags","topPrefixes","orderedTags","tp","aKey","bKey","startsWith","traceEndTime","MAX_SAFE_INTEGER","spanIdCounts","idCount","_isEqual","svcCounts","traceName","tagsInfo","refSpan","numberOfSpans","LiveTailControls","dispatch","pause","resume","stop","controls","useDispatch","setPausedStateAction","changeRefreshInterval","RefreshPicker","offOption","liveOption","simpleFilter","pattern","opts","ch","patternIdx","len","totalScore","currScore","pre","post","compareString","caseSensitive","Infinity","rendered","score","arr","prev","string","compare","UIPopover","GetElementsContext","elements","UITooltip","UIIcon","UIDropdown","UIMenu","UIMenuItem","UIButton","UIDivider","UIInput","UIInputGroup","UIElementsContext","strToRgb","r","g","parseInt","ColorGenerator","colorsHex","colorsRgb","currentIdx","_getColorIndex","clear","getGenerator","memoizeOne","getRgbColorByKey","InspectStatsTable","stats","stat","cell","getDisplayProcessor","FieldType","number","formattedValueToString","formatStat","InspectStatsTab","requestTime","processingTime","timings","dataProcessingTime","dataRows","series","targets","dataStats","meta","PanelInspector","Stats","_propTypes2","IconBase","_ref2","_objectWithoutProperties","_ref2$reactIconBase","reactIconBase","computedSize","fill","preserveAspectRatio","verticalAlign","oneOfType","shape","NoDataSourceCallToAction","useContext","ThemeContext","ctaElement","cardClassName","breakpoints","callToActionElement","j","isModifier","modifiersMatch","matches","code","deleteCombo","deleteSequence","splice","combokeys","__importDefault","resizer_1","fast_memoize_1","DEFAULT_SIZE","clamp","snap","hasDirection","RegExp","findClosestSnap","snapArray","snapGap","closestGapIndex","curr","abs","gap","endsWith","searchStr","getStringSize","getPixelSize","parentSize","ratio","innerWidth","calculateNewMax","maxHeight","minWidth","minHeight","definedProps","Resizable","resizable","parentLeft","parentTop","resizableLeft","resizableTop","targetLeft","targetTop","isResizing","propsSize","backgroundStyle","onMouseUp","parentNode","defaultSize","parent","children_1","HTMLElement","classList","contains","orgWidth","offsetWidth","orgHeight","offsetHeight","orgPosition","getSize","getParentSize","base","wrapChanged","wrap","flexWrap","bindEvents","unbindEvents","componentDidMount","computedStyle","getComputedStyle","transform","flex","componentWillUnmount","parent_1","Node","createSizeForCssProperty","newSize","kind","calculateNewMaxFromBoundary","bounds","parent_2","boundWidth","boundHeight","calculateNewSizeFromDirection","clientY","scale","resizeRatio","_a","_b","lockAspectRatio","lockAspectRatioExtraHeight","lockAspectRatioExtraWidth","newWidth","newHeight","extraHeight","extraWidth","calculateNewSizeFromAspectRatio","computedMinWidth","computedMaxWidth","computedMinHeight","computedMaxHeight","extraMinWidth","extraMaxWidth","extraMinHeight","extraMaxHeight","lockedMinWidth","lockedMaxWidth","lockedMinHeight","lockedMaxHeight","setBoundingClientRect","parent_3","parentRect","targetRect","top_1","nativeEvent","MouseEvent","TouchEvent","touches","parent_4","flexDirection","flexDir","_c","boundaryMax","grid","newGridWidth","newGridHeight","delta","newState","onResizeStop","updateSize","renderResizer","enable","handleStyles","handleClasses","handleWrapperStyle","handleWrapperClass","handleComponent","resizers","extendsProps","sizeStyle","boxSizing","flexShrink","ExploreGraphNGPanel","onUpdateTimeRange","isLoading","annotations","showAllTimeSeries","setShowAllTimeSeries","defaults","mode","FieldColorModeId","PaletteClassic","custom","drawStyle","DrawStyle","Line","fillOpacity","pointSize","spanNulls","overrides","fieldConfig","setFieldConfig","useStyles","timeRange","dataWithConfig","registry","createFieldConfigRegistry","getGraphFieldConfig","defaultGraphConfig","applyFieldOverrides","fieldConfigRegistry","onLegendClick","hideSeriesConfigFactory","seriesToShow","timeSeriesDisclaimer","disclaimerIcon","legend","displayMode","LegendDisplayMode","calcs","onZoom","exemplars","getFieldLinks","rowIndex","getFieldLinksForExplore","bg1","yellow","linkExternal","COLORS_HEX_DARK","defaultTheme","borderStyle","ThemeProvider","ThemeConsumer","memoizedThemeMerge","darkOverrides","Component","WithTheme","wrapped","hex","mostReadable","clone","lighten","darken","includeFallbackColors","toHex8String","toHsl","l","newColor","safeSize","fallback","oldState","next","combinations","effect","LogsContainer","onChangeTime","updateTimeRange","handleDedupStrategyChange","changeDedupStrategy","handleToggleLogLevel","toggleLogLevelAction","getLogRowContext","showContextToggle","splitOpen","logsHighlighterExpressions","logsMeta","logsSeries","dedupedRows","onClickFilterLabel","onClickFilterOutLabel","onStartScanning","onStopScanning","visibleRange","scanning","isLive","LogsDedupStrategy","none","highlighterExpressions","onDedupStrategyChange","onToggleLogLevel","scanRange","getRowContext","connector","getTimeZone","user","arrayMap","baseGet","baseMap","baseSortBy","baseUnary","compareMultiple","identity","collection","iteratees","liveTailButtons","UnConnectedExploreToolbar","onChangeDatasource","dsSettings","changeDatasource","importQueries","onClearAll","clearAll","cancelQueries","onChangeRefreshInterval","onChangeTimeSync","syncTimes","datasourceMissing","closeSplit","syncedTimes","refreshInterval","hasLiveOption","containerWidth","onChangeTimeZone","showSmallDataSourcePicker","showSmallTimePicker","hideTextValue","createAndCopyShortLink","hideText","onRun","showDropdown","func","clearQueries","splitClose","updateTimeZoneForSession","ExploreToolbar","exploreItem","streaming","QueryRows","queryKeys","isSymbol","computed","Wrapper","resetExploreAction","getRichHistory","richHistoryUpdatedAction","autoHeightMin","autoHeightMax","ExploreId","UnThemedExploreGraphPanel","hiddenSeries","onShowAllTimeSeries","renderGraph","ariaLabel","onHiddenSeriesChanged","showPanel","showBars","showLines","isStacked","lineWidth","onSeriesToggle","toggledSeries","legendDisplayMode","showPoints","onToggleSort","onHorizontalRegionSelected","selectThemeVariant","white","dark","ExploreGraphPanel","SETTINGS_KEYS","renderMetaItem","LogsMetaKind","LabelsMap","UnthemedLogs","showTime","wrapLogMessage","logsSortOrder","isFlipping","showDetectedFields","onChangeLogsSortOrder","flipOrderTimer","LogsSortOrder","cancelFlippingTimer","onChangeDedup","dedup","onChangeLabels","checked","onChangewrapLogMessage","hiddenRawLevels","LogLevel","onClickScan","onClickStopScan","showDetectedField","hideDetectedField","clearDetectedFields","hasData","dedupCount","sum","duplicates","MAX_CHARACTERS","scanText","rangeUtil","describeTimeRange","logOptions","transparent","dedupType","capitalize","LogsDedupDescription","radioButtons","flipButton","MetaInfoText","metaItems","deduplicatedRows","rowLimit","onClickShowDetectedField","onClickHideDetectedField","noData","Logs","panelBorder","metaContainer","textWeak","metaItem","red","metaLabel","metaValue","MetaInfoItem","memo","ignoreThisKeypress","maxLevel","processedSequenceCallback","CanvasSpanGraph","UnthemedCanvasSpanGraph","getColor","_setCanvasRef","_canvasElm","_draw","totalValueWidth","valueWidth","canvas","getFillColor","fillCache","cHeight","cWidth","itemHeight","itemYChange","ctx","getContext","alpha","fillStyle","fillRect","valueOffset","renderIntoCanvas","TickLabels","TickLabelsLabel","GraphTick","GraphTicks","x1","y1","x2","y2","ScrubberHandleExpansion","ScrubberHandle","ScrubberLine","ScrubberDragging","ScrubberHandles","Scrubber","xPercent","ViewingLayerResetZoom","ViewingLayer","ViewingLayerGraph","ViewingLayerInactive","ViewingLayerCursorGuide","ViewingLayerDraggedShift","ViewingLayerDrag","ViewingLayerFullOverlay","ViewingLayerResetZoomHoverClassName","dragTypes","UnthemedViewingLayer","_handleScrubberEnterLeave","preventCursorLine","_handleScrubberDragUpdate","_handleScrubberDragEnd","_resetTimeZoomClickHandler","_draggerStart","_draggerEnd","leadingX","haveNextTimeRange","leftInactive","cursorPosition","rightInactive","strokeWidth","_getMarkers","getItem","SpanGraph","ubPb2","UiFindInput","clearUiFind","allowClear","inputProps","suffix","autosize","trackFindFunction","TracePageSearchBar","TracePageSearchBarBar","TracePageSearchBarCount","TracePageSearchBarBtn","TracePageSearchBarBtnDisabled","TracePageSearchBarLocateBtn","navigable","count","btnClass","uiFindInputInputProps","ubJustifyEnd","compact","BreakableText","WORD_RX","wordRegexp","exec","LoadingIndicatorColorAnim","keyframes","LoadingIndicator","LoadingIndicatorCentered","LoadingIndicatorSmall","centered","small","TraceNameError","isErred","fetchedState","ERROR","FALLBACK_TRACE_NAME","errorCssClass","titleStr","LOADING","hasOwn","createCache","limit","equals","put","singletonCache","entries","cacheIndex","unshift","lruCache","createEqualsFn","basicEquals","deepObjects","deep","valueA","valueB","every","isANull","isBNull","aKeys","bKeys","equalityChecker","deepEquals","_len2","_key2","getParent","parentRef","parameterRegExp","stringSupplant","encodeFn","processTemplate","template","parameters","names","createTestFunction","getParameterInArray","callTemplate","computeLinks","processTags","parameterValues","parameter","currentSpan","getParameterInAncestor","processedLinks","encodeURIComponent","_uniq","getTraceLinks","memoize","validKeys","computeTraceLink","WeakMap","ExternalLinks","TracePageHeaderOverviewItemValueDetail","TracePageHeader","TracePageHeaderTitleRow","TracePageHeaderBack","TracePageHeaderTitleLink","TracePageHeaderDetailToggle","TracePageHeaderDetailToggleExpanded","TracePageHeaderTitle","TracePageHeaderTitleCollapsible","TracePageHeaderOverviewItems","TracePageHeaderOverviewItemValue","TracePageHeaderArchiveIcon","TracePageHeaderTraceId","HEADER_ITEMS","renderer","dateStr","formatDatetime","_values","_maxBy","summaryItems","sp","uTxMuted","8","9","13","16","17","18","20","27","32","33","34","35","36","37","38","39","40","45","46","91","93","173","187","189","224","containerMargin","SecondaryActions","addQueryRowButtonHidden","onClickAddQueryRowButton","addQueryRowButtonDisabled","richHistoryButtonActive","onClickRichHistoryButton","queryInspectorButtonActive","onClickQueryInspectorButton","toInteger","toNumber","nativeIsFinite","isFinite","nativeMin","methodName","precision","pair","increaseSequence","nextAction","callbackAndReset","characterFromEvent","wrappedCallback","QueryRowActions","TimeSyncButton","isSynced","ExploreTimeControls","onMoveTimePicker","getShiftedTimeRange","dateTimeForTimeZone","onMoveForward","onMoveBack","onChangeTimePicker","getZoomedTimeRange","timeSyncButton","timePickerCommonProps","onMoveBackward","TimePickerWithHistory","modifiers1","modifiers2","DEFAULT_MS_PRECISION","log10","quantizeDuration","floatPrecision","conversionFactor","targetPrecision","floor","trunc","toPrecision","moment","targetDuration","asMilliseconds","asSeconds","inputUnit","units","_round","baseEach","isArrayLike","eventModifiers","keyCode","logsEnter","logsEnterActive","logsExit","logsExitActive","LogsCrossFadeTransition","mountOnEnter","transitionDuration","enter","enterActive","exit","exitActive","NodeGraphContainer","dataFrames","short","getLinks","useLinks","selectButtonOverride","RunButton","intervals","getTimeSrv","getValidIntervals","defaultIntervals","runButton","pages","Explore","General","onIntervalChanged","buttonSelectClassName","refreshButton","106","107","109","110","111","186","188","190","191","192","219","220","221","222","SPECIAL_ALIASES","SHIFT_MAP","keysFromString","editor","viewer","dataFrameSelect","tabContent","dataTabContent","actionsWrapper","leftActions","dataDisplayOptions","selects","is","objA","objB","keysA","keysB","dark1","orangeLighter","orangeDark","pulseTextColor","desaturate","noRightBorderStyle","liveButton","stopButtonEnter","stopButtonEnterActive","stopButtonExit","stopButtonExitActive","LiveTailButton","onClickMain","ExploreDrawer","exploreMain","queryContainer","panelPadding","getRef","el","rawRange","setQueries","onCellFilterAdded","operator","FILTER_FOR_OPERATOR","FILTER_OUT_OPERATOR","onModifyQueries","addQueryRow","modifyQuery","modification","changeSize","scanStart","scanStopAction","toggleShowRichHistory","openDrawer","toggleShowQueryInspector","QueryInspector","refreshExplore","getNodeGraphDataFrames","frames","frame","preferredVisualisationType","EventBusSrv","initialized","initialDatasource","initialQueries","initialRange","initializeExplore","removeAllListeners","graphResult","table","showTrace","showMetrics","showTable","showLogs","showNodeGraph","exploreClass","showPanels","getFirstNonQueryRowSpecificError","showRichHistory","showQueryInspector","renderEmptyState","disableHeight","renderGraphPanel","renderTablePanel","renderLogsPanel","renderNodeGraphPanel","renderTraceViewPanel","ensureQueriesMemoized","ensureQueries","getTimeRangeFromUrlMemoized","getTimeRangeFromUrl","urlState","urlRange","lastUsedDatasourceKeyForOrgId","orgId","getTimeRange","DEFAULT_RANGE","createRound","o","freeze","prop","isFrozen","cardColor","gray95","gray15","gray05","queryCard","formInputBorder","orange","cardRow","datasourceContainer","queryActionButtons","queryRow","updateCommentContainer","comment","commentButtonRow","textArea","updateRichHistory","activeUpdateComment","setActiveUpdateComment","setComment","queryDsInstance","setQueryDsInstance","getDataSourceSrv","ds","getQueryDsInstance","queriesToRun","onCreateShortLink","createUrlFromRichHistory","onUpdateComment","onCancelUpdateComment","updateComment","queriesToCopy","createQueryText","copyStringToClipboard","iconType","onKeyDown","keyEvent","src","queryText","DONE","drawerSlide","shadowColor","gray4","black","pageHeaderBg","sidemenu","drawerActive","rzHandle","formInputBorderHover","drawerWidth","createChangeEmitter","currentListeners","nextListeners","ensureCanMutateNextListeners","listen","listener","isSubscribed","listeners","baseFlatten","baseOrderBy","baseRest","isIterateeCall","sortBy","loader","getAngularLoader","scopeProps","ctrl","refresh","events","panel","dashboard","component","load","angularScope","hasToggledEditorMode","hasNewError","toggleEditorMode","digest","destroy","valIsDefined","valIsNull","valIsReflexive","valIsSymbol","othIsDefined","othIsNull","othIsReflexive","othIsSymbol","TableContainer","tableResult","getTableHeight","tableWidth","PANEL_BORDER","hasTableResult","valueRowIndex","loadingInState"],"mappings":"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","file":"explore.63a9c1d648180e457252.js","sourcesContent":["module.exports = on\nmodule.exports.on = on\nmodule.exports.off = off\n\nfunction on (element, event, callback, capture) {\n  !element.addEventListener && (event = 'on' + event)\n  ;(element.addEventListener || element.attachEvent).call(element, event, callback, capture)\n  return callback\n}\n\nfunction off (element, event, callback, capture) {\n  !element.removeEventListener && (event = 'on' + event)\n  ;(element.removeEventListener || element.detachEvent).call(element, event, callback, capture)\n  return callback\n}\n","\"use strict\";\n\nvar deselectCurrent = require(\"toggle-selection\");\n\nvar clipboardToIE11Formatting = {\n  \"text/plain\": \"Text\",\n  \"text/html\": \"Url\",\n  \"default\": \"Text\"\n}\n\nvar defaultMessage = \"Copy to clipboard: #{key}, Enter\";\n\nfunction format(message) {\n  var copyKey = (/mac os x/i.test(navigator.userAgent) ? \"⌘\" : \"Ctrl\") + \"+C\";\n  return message.replace(/#{\\s*key\\s*}/g, copyKey);\n}\n\nfunction copy(text, options) {\n  var debug,\n    message,\n    reselectPrevious,\n    range,\n    selection,\n    mark,\n    success = false;\n  if (!options) {\n    options = {};\n  }\n  debug = options.debug || false;\n  try {\n    reselectPrevious = deselectCurrent();\n\n    range = document.createRange();\n    selection = document.getSelection();\n\n    mark = document.createElement(\"span\");\n    mark.textContent = text;\n    // reset user styles for span element\n    mark.style.all = \"unset\";\n    // prevents scrolling to the end of the page\n    mark.style.position = \"fixed\";\n    mark.style.top = 0;\n    mark.style.clip = \"rect(0, 0, 0, 0)\";\n    // used to preserve spaces and line breaks\n    mark.style.whiteSpace = \"pre\";\n    // do not inherit user-select (it may be `none`)\n    mark.style.webkitUserSelect = \"text\";\n    mark.style.MozUserSelect = \"text\";\n    mark.style.msUserSelect = \"text\";\n    mark.style.userSelect = \"text\";\n    mark.addEventListener(\"copy\", function(e) {\n      e.stopPropagation();\n      if (options.format) {\n        e.preventDefault();\n        if (typeof e.clipboardData === \"undefined\") { // IE 11\n          debug && console.warn(\"unable to use e.clipboardData\");\n          debug && console.warn(\"trying IE specific stuff\");\n          window.clipboardData.clearData();\n          var format = clipboardToIE11Formatting[options.format] || clipboardToIE11Formatting[\"default\"]\n          window.clipboardData.setData(format, text);\n        } else { // all other browsers\n          e.clipboardData.clearData();\n          e.clipboardData.setData(options.format, text);\n        }\n      }\n      if (options.onCopy) {\n        e.preventDefault();\n        options.onCopy(e.clipboardData);\n      }\n    });\n\n    document.body.appendChild(mark);\n\n    range.selectNodeContents(mark);\n    selection.addRange(range);\n\n    var successful = document.execCommand(\"copy\");\n    if (!successful) {\n      throw new Error(\"copy command was unsuccessful\");\n    }\n    success = true;\n  } catch (err) {\n    debug && console.error(\"unable to copy using execCommand: \", err);\n    debug && console.warn(\"trying IE specific stuff\");\n    try {\n      window.clipboardData.setData(options.format || \"text\", text);\n      options.onCopy && options.onCopy(window.clipboardData);\n      success = true;\n    } catch (err) {\n      debug && console.error(\"unable to copy using clipboardData: \", err);\n      debug && console.error(\"falling back to prompt\");\n      message = format(\"message\" in options ? options.message : defaultMessage);\n      window.prompt(message, text);\n    }\n  } finally {\n    if (selection) {\n      if (typeof selection.removeRange == \"function\") {\n        selection.removeRange(range);\n      } else {\n        selection.removeAllRanges();\n      }\n    }\n\n    if (mark) {\n      document.body.removeChild(mark);\n    }\n    reselectPrevious();\n  }\n\n  return success;\n}\n\nmodule.exports = copy;\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactIconBase = require('react-icon-base');\n\nvar _reactIconBase2 = _interopRequireDefault(_reactIconBase);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar IoNetwork = function IoNetwork(props) {\n    return _react2.default.createElement(\n        _reactIconBase2.default,\n        _extends({ viewBox: '0 0 40 40' }, props),\n        _react2.default.createElement(\n            'g',\n            null,\n            _react2.default.createElement('path', { d: 'm35 7.5c0 1.9-1 3.4-2.5 4.3v7.3l-10 5v4.1c1.5 0.9 2.5 2.4 2.5 4.3 0 2.7-2.3 5-5 5s-5-2.3-5-5c0-1.9 1-3.4 2.5-4.3v-4.1l-10-5v-7.3c-1.5-0.9-2.5-2.4-2.5-4.3 0-2.7 2.3-5 5-5s5 2.3 5 5c0 1.9-1 3.4-2.5 4.3v4.1l7.5 3.8 7.5-3.8v-4.1c-1.5-0.9-2.5-2.4-2.5-4.3 0-2.7 2.3-5 5-5s5 2.3 5 5z m-25-2.5c-1.4 0-2.5 1.1-2.5 2.5s1.1 2.5 2.5 2.5 2.5-1.1 2.5-2.5-1.1-2.5-2.5-2.5z m10 30c1.4 0 2.5-1.1 2.5-2.5s-1.1-2.5-2.5-2.5-2.5 1.1-2.5 2.5 1.1 2.5 2.5 2.5z m10-25c1.4 0 2.5-1.1 2.5-2.5s-1.1-2.5-2.5-2.5-2.5 1.1-2.5 2.5 1.1 2.5 2.5 2.5z' })\n        )\n    );\n};\n\nexports.default = IoNetwork;\nmodule.exports = exports['default'];","import React from 'react';\nimport { ButtonProps, Elements } from '@jaegertracing/jaeger-ui-components';\nimport { Button, Input, stylesFactory, useTheme } from '@grafana/ui';\nimport { css } from 'emotion';\nimport { GrafanaTheme } from '@grafana/data';\nimport cx from 'classnames';\n\n/**\n * Right now Jaeger components need some UI elements to be injected. This is to get rid of AntD UI library that was\n * used by default.\n */\n\n// This needs to be static to prevent remounting on every render.\nexport const UIElements: Elements = {\n  Popover: (() => null as any) as any,\n  Tooltip: (() => null as any) as any,\n  Icon: (() => null as any) as any,\n  Dropdown: (() => null as any) as any,\n  Menu: (() => null as any) as any,\n  MenuItem: (() => null as any) as any,\n  Button({ onClick, children, className }: ButtonProps) {\n    return (\n      <Button variant={'secondary'} onClick={onClick} className={className}>\n        {children}\n      </Button>\n    );\n  },\n  Divider,\n  Input(props) {\n    return <Input {...props} />;\n  },\n  InputGroup({ children, className, style }) {\n    return (\n      <span className={className} style={style}>\n        {children}\n      </span>\n    );\n  },\n};\n\nconst getStyles = stylesFactory((theme: GrafanaTheme) => {\n  return {\n    Divider: css`\n      display: inline-block;\n      background: ${theme.isDark ? '#242424' : '#e8e8e8'};\n      width: 1px;\n      height: 0.9em;\n      margin: 0 8px;\n      vertical-align: middle;\n    `,\n  };\n});\n\nfunction Divider({ className }: { className?: string }) {\n  const styles = getStyles(useTheme());\n  return <div style={{}} className={cx(styles.Divider, className)} />;\n}\n","import { useCallback, useState } from 'react';\nimport { TraceSpan } from '@grafana/data';\n\n/**\n * Children state means whether spans are collapsed or not. Also provides some functions to manipulate that state.\n */\nexport function useChildrenState() {\n  const [childrenHiddenIDs, setChildrenHiddenIDs] = useState(new Set<string>());\n\n  const expandOne = useCallback(\n    function expandOne(spans: TraceSpan[]) {\n      if (childrenHiddenIDs.size === 0) {\n        return;\n      }\n      let prevExpandedDepth = -1;\n      let expandNextHiddenSpan = true;\n      const newChildrenHiddenIDs = spans.reduce((res, s) => {\n        if (s.depth <= prevExpandedDepth) {\n          expandNextHiddenSpan = true;\n        }\n        if (expandNextHiddenSpan && res.has(s.spanID)) {\n          res.delete(s.spanID);\n          expandNextHiddenSpan = false;\n          prevExpandedDepth = s.depth;\n        }\n        return res;\n      }, new Set(childrenHiddenIDs));\n      setChildrenHiddenIDs(newChildrenHiddenIDs);\n    },\n    [childrenHiddenIDs]\n  );\n\n  const collapseOne = useCallback(\n    function collapseOne(spans: TraceSpan[]) {\n      if (shouldDisableCollapse(spans, childrenHiddenIDs)) {\n        return;\n      }\n      let nearestCollapsedAncestor: TraceSpan | undefined;\n      const newChildrenHiddenIDs = spans.reduce((res, curSpan) => {\n        if (nearestCollapsedAncestor && curSpan.depth <= nearestCollapsedAncestor.depth) {\n          res.add(nearestCollapsedAncestor.spanID);\n          if (curSpan.hasChildren) {\n            nearestCollapsedAncestor = curSpan;\n          }\n        } else if (curSpan.hasChildren && !res.has(curSpan.spanID)) {\n          nearestCollapsedAncestor = curSpan;\n        }\n        return res;\n      }, new Set(childrenHiddenIDs));\n      // The last one\n      if (nearestCollapsedAncestor) {\n        newChildrenHiddenIDs.add(nearestCollapsedAncestor.spanID);\n      }\n      setChildrenHiddenIDs(newChildrenHiddenIDs);\n    },\n    [childrenHiddenIDs]\n  );\n\n  const expandAll = useCallback(function expandAll() {\n    setChildrenHiddenIDs(new Set<string>());\n  }, []);\n\n  const collapseAll = useCallback(\n    function collapseAll(spans: TraceSpan[]) {\n      if (shouldDisableCollapse(spans, childrenHiddenIDs)) {\n        return;\n      }\n      const newChildrenHiddenIDs = spans.reduce((res, s) => {\n        if (s.hasChildren) {\n          res.add(s.spanID);\n        }\n        return res;\n      }, new Set<string>());\n\n      setChildrenHiddenIDs(newChildrenHiddenIDs);\n    },\n    [childrenHiddenIDs]\n  );\n\n  const childrenToggle = useCallback(\n    function childrenToggle(spanID: string) {\n      const newChildrenHiddenIDs = new Set(childrenHiddenIDs);\n      if (childrenHiddenIDs.has(spanID)) {\n        newChildrenHiddenIDs.delete(spanID);\n      } else {\n        newChildrenHiddenIDs.add(spanID);\n      }\n      setChildrenHiddenIDs(newChildrenHiddenIDs);\n    },\n    [childrenHiddenIDs]\n  );\n\n  return {\n    childrenHiddenIDs,\n    expandOne,\n    collapseOne,\n    expandAll,\n    collapseAll,\n    childrenToggle,\n  };\n}\n\nfunction shouldDisableCollapse(allSpans: TraceSpan[], hiddenSpansIds: Set<string>) {\n  const allParentSpans = allSpans.filter((s) => s.hasChildren);\n  return allParentSpans.length === hiddenSpansIds.size;\n}\n","import { useCallback, useState } from 'react';\nimport { DetailState } from '@jaegertracing/jaeger-ui-components';\nimport { TraceLog } from '@grafana/data';\n\n/**\n * Keeps state of the span detail. This means whether span details are open but also state of each detail subitem\n * like logs or tags.\n */\nexport function useDetailState() {\n  const [detailStates, setDetailStates] = useState(new Map<string, DetailState>());\n\n  const toggleDetail = useCallback(\n    function toggleDetail(spanID: string) {\n      const newDetailStates = new Map(detailStates);\n      if (newDetailStates.has(spanID)) {\n        newDetailStates.delete(spanID);\n      } else {\n        newDetailStates.set(spanID, new DetailState());\n      }\n      setDetailStates(newDetailStates);\n    },\n    [detailStates]\n  );\n\n  const detailLogItemToggle = useCallback(\n    function detailLogItemToggle(spanID: string, log: TraceLog) {\n      const old = detailStates.get(spanID);\n      if (!old) {\n        return;\n      }\n      const detailState = old.toggleLogItem(log);\n      const newDetailStates = new Map(detailStates);\n      newDetailStates.set(spanID, detailState);\n      return setDetailStates(newDetailStates);\n    },\n    [detailStates]\n  );\n\n  return {\n    detailStates,\n    toggleDetail,\n    detailLogItemToggle,\n    detailLogsToggle: useCallback(makeDetailSubsectionToggle('logs', detailStates, setDetailStates), [detailStates]),\n    detailWarningsToggle: useCallback(makeDetailSubsectionToggle('warnings', detailStates, setDetailStates), [\n      detailStates,\n    ]),\n    detailStackTracesToggle: useCallback(makeDetailSubsectionToggle('stackTraces', detailStates, setDetailStates), [\n      detailStates,\n    ]),\n    detailReferencesToggle: useCallback(makeDetailSubsectionToggle('references', detailStates, setDetailStates), [\n      detailStates,\n    ]),\n    detailProcessToggle: useCallback(makeDetailSubsectionToggle('process', detailStates, setDetailStates), [\n      detailStates,\n    ]),\n    detailTagsToggle: useCallback(makeDetailSubsectionToggle('tags', detailStates, setDetailStates), [detailStates]),\n  };\n}\n\nfunction makeDetailSubsectionToggle(\n  subSection: 'tags' | 'process' | 'logs' | 'warnings' | 'references' | 'stackTraces',\n  detailStates: Map<string, DetailState>,\n  setDetailStates: (detailStates: Map<string, DetailState>) => void\n) {\n  return (spanID: string) => {\n    const old = detailStates.get(spanID);\n    if (!old) {\n      return;\n    }\n    let detailState;\n    if (subSection === 'tags') {\n      detailState = old.toggleTags();\n    } else if (subSection === 'process') {\n      detailState = old.toggleProcess();\n    } else if (subSection === 'warnings') {\n      detailState = old.toggleWarnings();\n    } else if (subSection === 'references') {\n      detailState = old.toggleReferences();\n    } else if (subSection === 'stackTraces') {\n      detailState = old.toggleStackTraces();\n    } else {\n      detailState = old.toggleLogs();\n    }\n    const newDetailStates = new Map(detailStates);\n    newDetailStates.set(spanID, detailState);\n    setDetailStates(newDetailStates);\n  };\n}\n","import { DataLink, dateTime, Field, mapInternalLinkToExplore, TimeRange, TraceSpan } from '@grafana/data';\nimport { getTemplateSrv } from '@grafana/runtime';\nimport { Icon } from '@grafana/ui';\nimport { SplitOpen } from 'app/types/explore';\nimport { TraceToLogsOptions } from 'app/core/components/TraceToLogsSettings';\nimport { getDatasourceSrv } from 'app/features/plugins/datasource_srv';\nimport React from 'react';\nimport { LokiQuery } from '../../../plugins/datasource/loki/types';\n\n/**\n * This is a factory for the link creator. It returns the function mainly so it can return undefined in which case\n * the trace view won't create any links and to capture the datasource and split function making it easier to memoize\n * with useMemo.\n */\nexport function createSpanLinkFactory(splitOpenFn: SplitOpen, traceToLogsOptions?: TraceToLogsOptions) {\n  // We should return if dataSourceUid is undefined otherwise getInstanceSettings would return testDataSource.\n  if (!traceToLogsOptions?.datasourceUid) {\n    return undefined;\n  }\n\n  const dataSourceSettings = getDatasourceSrv().getInstanceSettings(traceToLogsOptions.datasourceUid);\n\n  if (!dataSourceSettings) {\n    return undefined;\n  }\n\n  return function (span: TraceSpan): { href: string; onClick?: (event: any) => void; content: React.ReactNode } {\n    // This is reusing existing code from derived fields which may not be ideal match so some data is a bit faked at\n    // the moment. Issue is that the trace itself isn't clearly mapped to dataFrame (right now it's just a json blob\n    // inside a single field) so the dataLinks as config of that dataFrame abstraction breaks down a bit and we do\n    // it manually here instead of leaving it for the data source to supply the config.\n\n    const dataLink: DataLink<LokiQuery> = {\n      title: dataSourceSettings.name,\n      url: '',\n      internal: {\n        datasourceUid: dataSourceSettings.uid,\n        datasourceName: dataSourceSettings.name,\n        query: {\n          expr: getLokiQueryFromSpan(span, traceToLogsOptions.tags),\n          refId: '',\n        },\n      },\n    };\n\n    const link = mapInternalLinkToExplore({\n      link: dataLink,\n      internalLink: dataLink.internal!,\n      scopedVars: {},\n      range: getTimeRangeFromSpan(span),\n      field: {} as Field,\n      onClickFn: splitOpenFn,\n      replaceVariables: getTemplateSrv().replace.bind(getTemplateSrv()),\n    });\n\n    return {\n      href: link.href,\n      onClick: link.onClick,\n      content: <Icon name=\"gf-logs\" title=\"Explore the logs for this in split view\" />,\n    };\n  };\n}\n\n/**\n * Default keys to use when there are no configured tags.\n */\nconst defaultKeys = ['cluster', 'hostname', 'namespace', 'pod'];\n\nfunction getLokiQueryFromSpan(span: TraceSpan, keys?: string[]): string {\n  const keysToCheck = keys?.length ? keys : defaultKeys;\n  const tags = [...span.process.tags, ...span.tags].reduce((acc, tag) => {\n    if (keysToCheck.includes(tag.key)) {\n      acc.push(`${tag.key}=\"${tag.value}\"`);\n    }\n    return acc;\n  }, [] as string[]);\n  return `{${tags.join(', ')}}`;\n}\n\n/**\n * Gets a time range from the span. Naively this could be just start and end time of the span but we also want some\n * buffer around that just so we do not miss some logs which may not have timestamps aligned with the span. Right\n * now the buffers are hardcoded which may be a bit weird for very short spans but at the same time, fractional buffers\n * with very short spans could mean microseconds and that could miss some logs relevant to that spans. In the future\n * something more intelligent should probably be implemented\n */\nfunction getTimeRangeFromSpan(span: TraceSpan): TimeRange {\n  const from = dateTime(span.startTime / 1000 - 1000 * 60 * 60);\n  const spanEndMs = (span.startTime + span.duration) / 1000;\n  const to = dateTime(spanEndMs + 5 * 1000);\n\n  return {\n    from,\n    to,\n    // Weirdly Explore does not handle ISO string which would have been the default stringification if passed as object\n    // and we have to use this custom format :( .\n    raw: {\n      from: from.utc().format('YYYYMMDDTHHmmss'),\n      to: to.utc().format('YYYYMMDDTHHmmss'),\n    },\n  };\n}\n","import React, { useCallback, useMemo, useState } from 'react';\nimport {\n  ThemeOptions,\n  ThemeProvider,\n  ThemeType,\n  TracePageHeader,\n  TraceTimelineViewer,\n  transformTraceData,\n  TTraceTimeline,\n  UIElementsContext,\n} from '@jaegertracing/jaeger-ui-components';\nimport { UIElements } from './uiElements';\nimport { useViewRange } from './useViewRange';\nimport { useSearch } from './useSearch';\nimport { useChildrenState } from './useChildrenState';\nimport { useDetailState } from './useDetailState';\nimport { useHoverIndentGuide } from './useHoverIndentGuide';\nimport { colors, useTheme } from '@grafana/ui';\nimport { TraceViewData, Trace, TraceSpan, TraceKeyValuePair, TraceLink } from '@grafana/data';\nimport { createSpanLinkFactory } from './createSpanLink';\nimport { useSelector } from 'react-redux';\nimport { StoreState } from 'app/types';\nimport { SplitOpen } from 'app/types/explore';\nimport { getDatasourceSrv } from 'app/features/plugins/datasource_srv';\nimport { TraceToLogsData } from 'app/core/components/TraceToLogsSettings';\n\ntype Props = {\n  trace?: TraceViewData;\n  splitOpenFn: SplitOpen;\n};\n\nexport function TraceView(props: Props) {\n  if (!props.trace?.traceID) {\n    return null;\n  }\n  const { expandOne, collapseOne, childrenToggle, collapseAll, childrenHiddenIDs, expandAll } = useChildrenState();\n  const {\n    detailStates,\n    toggleDetail,\n    detailLogItemToggle,\n    detailLogsToggle,\n    detailProcessToggle,\n    detailReferencesToggle,\n    detailTagsToggle,\n    detailWarningsToggle,\n    detailStackTracesToggle,\n  } = useDetailState();\n  const { removeHoverIndentGuideId, addHoverIndentGuideId, hoverIndentGuideIds } = useHoverIndentGuide();\n  const { viewRange, updateViewRangeTime, updateNextViewRangeTime } = useViewRange();\n\n  /**\n   * Keeps state of resizable name column width\n   */\n  const [spanNameColumnWidth, setSpanNameColumnWidth] = useState(0.25);\n  /**\n   * State of the top minimap, slim means it is collapsed.\n   */\n  const [slim, setSlim] = useState(false);\n\n  const traceProp = useMemo(() => transformTraceData(props.trace), [props.trace]);\n  const { search, setSearch, spanFindMatches } = useSearch(traceProp?.spans);\n  const dataSourceName = useSelector((state: StoreState) => state.explore.left.datasourceInstance?.name);\n  const traceToLogsOptions = (getDatasourceSrv().getInstanceSettings(dataSourceName)?.jsonData as TraceToLogsData)\n    ?.tracesToLogs;\n\n  const theme = useTheme();\n  const traceTheme = useMemo(\n    () =>\n      ({\n        type: theme.isDark ? ThemeType.Dark : ThemeType.Light,\n        servicesColorPalette: colors,\n        components: {\n          TraceName: {\n            fontSize: theme.typography.size.lg,\n          },\n        },\n      } as ThemeOptions),\n    [theme]\n  );\n\n  const traceTimeline: TTraceTimeline = useMemo(\n    () => ({\n      childrenHiddenIDs,\n      detailStates,\n      hoverIndentGuideIds,\n      shouldScrollToFirstUiFindMatch: false,\n      spanNameColumnWidth,\n      traceID: traceProp?.traceID,\n    }),\n    [childrenHiddenIDs, detailStates, hoverIndentGuideIds, spanNameColumnWidth, traceProp?.traceID]\n  );\n\n  const createSpanLink = useMemo(() => createSpanLinkFactory(props.splitOpenFn, traceToLogsOptions), [\n    props.splitOpenFn,\n    traceToLogsOptions,\n  ]);\n  const scrollElement = document.getElementsByClassName('scroll-canvas')[0];\n\n  if (!traceProp) {\n    return null;\n  }\n\n  return (\n    <ThemeProvider value={traceTheme}>\n      <UIElementsContext.Provider value={UIElements}>\n        <TracePageHeader\n          canCollapse={false}\n          clearSearch={useCallback(() => {}, [])}\n          focusUiFindMatches={useCallback(() => {}, [])}\n          hideMap={false}\n          hideSummary={false}\n          nextResult={useCallback(() => {}, [])}\n          onSlimViewClicked={useCallback(() => setSlim(!slim), [])}\n          onTraceGraphViewClicked={useCallback(() => {}, [])}\n          prevResult={useCallback(() => {}, [])}\n          resultCount={0}\n          slimView={slim}\n          textFilter={null}\n          trace={traceProp}\n          traceGraphView={false}\n          updateNextViewRangeTime={updateNextViewRangeTime}\n          updateViewRangeTime={updateViewRangeTime}\n          viewRange={viewRange}\n          searchValue={search}\n          onSearchValueChange={setSearch}\n          hideSearchButtons={true}\n        />\n        <TraceTimelineViewer\n          registerAccessors={useCallback(() => {}, [])}\n          scrollToFirstVisibleSpan={useCallback(() => {}, [])}\n          findMatchesIDs={spanFindMatches}\n          trace={traceProp}\n          traceTimeline={traceTimeline}\n          updateNextViewRangeTime={updateNextViewRangeTime}\n          updateViewRangeTime={updateViewRangeTime}\n          viewRange={viewRange}\n          focusSpan={useCallback(() => {}, [])}\n          createLinkToExternalSpan={useCallback(() => '', [])}\n          setSpanNameColumnWidth={setSpanNameColumnWidth}\n          collapseAll={collapseAll}\n          collapseOne={collapseOne}\n          expandAll={expandAll}\n          expandOne={expandOne}\n          childrenToggle={childrenToggle}\n          clearShouldScrollToFirstUiFindMatch={useCallback(() => {}, [])}\n          detailLogItemToggle={detailLogItemToggle}\n          detailLogsToggle={detailLogsToggle}\n          detailWarningsToggle={detailWarningsToggle}\n          detailStackTracesToggle={detailStackTracesToggle}\n          detailReferencesToggle={detailReferencesToggle}\n          detailProcessToggle={detailProcessToggle}\n          detailTagsToggle={detailTagsToggle}\n          detailToggle={toggleDetail}\n          setTrace={useCallback((trace: Trace | null, uiFind: string | null) => {}, [])}\n          addHoverIndentGuideId={addHoverIndentGuideId}\n          removeHoverIndentGuideId={removeHoverIndentGuideId}\n          linksGetter={useCallback(\n            (span: TraceSpan, items: TraceKeyValuePair[], itemIndex: number) => [] as TraceLink[],\n            []\n          )}\n          uiFind={search}\n          createSpanLink={createSpanLink}\n          scrollElement={scrollElement}\n        />\n      </UIElementsContext.Provider>\n    </ThemeProvider>\n  );\n}\n","import { useCallback, useState } from 'react';\n\n/**\n * This is used internally to handle hover state of indent guide. As indent guides are separate\n * components per each row/span and you need to highlight all in multiple rows to make the effect of single line\n * they need this kind of common imperative state changes.\n *\n * Ideally would be changed to trace view internal state.\n */\nexport function useHoverIndentGuide() {\n  const [hoverIndentGuideIds, setHoverIndentGuideIds] = useState(new Set<string>());\n\n  const addHoverIndentGuideId = useCallback(function addHoverIndentGuideId(spanID: string) {\n    setHoverIndentGuideIds((prevState) => {\n      const newHoverIndentGuideIds = new Set(prevState);\n      newHoverIndentGuideIds.add(spanID);\n      return newHoverIndentGuideIds;\n    });\n  }, []);\n\n  const removeHoverIndentGuideId = useCallback(function removeHoverIndentGuideId(spanID: string) {\n    setHoverIndentGuideIds((prevState) => {\n      const newHoverIndentGuideIds = new Set(prevState);\n      newHoverIndentGuideIds.delete(spanID);\n      return newHoverIndentGuideIds;\n    });\n  }, []);\n\n  return { hoverIndentGuideIds, addHoverIndentGuideId, removeHoverIndentGuideId };\n}\n","import { useCallback, useState } from 'react';\nimport { ViewRangeTimeUpdate, ViewRange } from '@jaegertracing/jaeger-ui-components';\n\n/**\n * Controls state of the zoom function that can be used through minimap in header or on the timeline. ViewRange contains\n * state not only for current range that is showing but range that is currently being selected by the user.\n */\nexport function useViewRange() {\n  const [viewRange, setViewRange] = useState<ViewRange>({\n    time: {\n      current: [0, 1],\n    },\n  });\n\n  const updateNextViewRangeTime = useCallback(function updateNextViewRangeTime(update: ViewRangeTimeUpdate) {\n    setViewRange(\n      (prevRange): ViewRange => {\n        const time = { ...prevRange.time, ...update };\n        return { ...prevRange, time };\n      }\n    );\n  }, []);\n\n  const updateViewRangeTime = useCallback(function updateViewRangeTime(start: number, end: number) {\n    const current: [number, number] = [start, end];\n    const time = { current };\n    setViewRange(\n      (prevRange): ViewRange => {\n        return { ...prevRange, time };\n      }\n    );\n  }, []);\n\n  return { viewRange, updateViewRangeTime, updateNextViewRangeTime };\n}\n","import { useMemo, useState } from 'react';\nimport { filterSpans } from '@jaegertracing/jaeger-ui-components';\nimport { TraceSpan } from '@grafana/data';\n\n/**\n * Controls the state of search input that highlights spans if they match the search string.\n * @param spans\n */\nexport function useSearch(spans?: TraceSpan[]) {\n  const [search, setSearch] = useState('');\n  const spanFindMatches: Set<string> | undefined | null = useMemo(() => {\n    return search && spans ? filterSpans(search, spans) : undefined;\n  }, [search, spans]);\n\n  return { search, setSearch, spanFindMatches };\n}\n","// Copyright (c) 2019 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { TraceKeyValuePair, TraceSpan } from '@grafana/data';\nimport { TNil } from '../types';\n\nexport default function filterSpans(textFilter: string, spans: TraceSpan[] | TNil) {\n  if (!spans) {\n    return null;\n  }\n\n  // if a span field includes at least one filter in includeFilters, the span is a match\n  const includeFilters: string[] = [];\n\n  // values with keys that include text in any one of the excludeKeys will be ignored\n  const excludeKeys: string[] = [];\n\n  // split textFilter by whitespace, remove empty strings, and extract includeFilters and excludeKeys\n  textFilter\n    .split(/\\s+/)\n    .filter(Boolean)\n    .forEach((w) => {\n      if (w[0] === '-') {\n        excludeKeys.push(w.substr(1).toLowerCase());\n      } else {\n        includeFilters.push(w.toLowerCase());\n      }\n    });\n\n  const isTextInFilters = (filters: string[], text: string) =>\n    filters.some((filter) => text.toLowerCase().includes(filter));\n\n  const isTextInKeyValues = (kvs: TraceKeyValuePair[]) =>\n    kvs\n      ? kvs.some((kv) => {\n          // ignore checking key and value for a match if key is in excludeKeys\n          if (isTextInFilters(excludeKeys, kv.key)) {\n            return false;\n          }\n          // match if key or value matches an item in includeFilters\n          return isTextInFilters(includeFilters, kv.key) || isTextInFilters(includeFilters, kv.value.toString());\n        })\n      : false;\n\n  const isSpanAMatch = (span: TraceSpan) =>\n    isTextInFilters(includeFilters, span.operationName) ||\n    isTextInFilters(includeFilters, span.process.serviceName) ||\n    isTextInKeyValues(span.tags) ||\n    span.logs.some((log) => isTextInKeyValues(log.fields)) ||\n    isTextInKeyValues(span.process.tags) ||\n    includeFilters.some((filter) => filter === span.spanID);\n\n  // declare as const because need to disambiguate the type\n  const rv: Set<string> = new Set(spans.filter(isSpanAMatch).map((span: TraceSpan) => span.spanID));\n  return rv;\n}\n","/* eslint-env node, browser */\n'use strict'\n\n/**\n * resets all sequence counters except for the ones passed in\n *\n * @param {Object} doNotReset\n * @returns void\n */\nmodule.exports = function (doNotReset) {\n  var self = this\n\n  doNotReset = doNotReset || {}\n\n  var activeSequences = false\n  var key\n\n  for (key in self.sequenceLevels) {\n    if (doNotReset[key]) {\n      activeSequences = true\n      continue\n    }\n    self.sequenceLevels[key] = 0\n  }\n\n  if (!activeSequences) {\n    self.nextExpectedAction = false\n  }\n}\n","import React, { FC, CSSProperties } from 'react';\nimport Transition, { ExitHandler } from 'react-transition-group/Transition';\n\ninterface Props {\n  duration: number;\n  children: JSX.Element;\n  in: boolean;\n  unmountOnExit?: boolean;\n  onExited?: ExitHandler<HTMLDivElement>;\n}\n\nexport const FadeIn: FC<Props> = (props) => {\n  const defaultStyle: CSSProperties = {\n    transition: `opacity ${props.duration}ms linear`,\n    opacity: 0,\n  };\n\n  const transitionStyles: { [str: string]: CSSProperties } = {\n    exited: { opacity: 0, display: 'none' },\n    entering: { opacity: 0 },\n    entered: { opacity: 1 },\n    exiting: { opacity: 0 },\n  };\n\n  return (\n    <Transition\n      in={props.in}\n      timeout={props.duration}\n      unmountOnExit={props.unmountOnExit || false}\n      onExited={props.onExited}\n    >\n      {(state) => (\n        <div\n          style={{\n            ...defaultStyle,\n            ...transitionStyles[state],\n          }}\n        >\n          {props.children}\n        </div>\n      )}\n    </Transition>\n  );\n};\n","import React, { FunctionComponent } from 'react';\nimport { DataQueryError } from '@grafana/data';\nimport { Icon } from '@grafana/ui';\nimport { FadeIn } from 'app/core/components/Animations/FadeIn';\n\nexport interface ErrorContainerProps {\n  queryError?: DataQueryError;\n}\n\nexport const ErrorContainer: FunctionComponent<ErrorContainerProps> = (props) => {\n  const { queryError } = props;\n  const showError = queryError ? true : false;\n  const duration = showError ? 100 : 10;\n  const message = queryError ? queryError.message : null;\n\n  return (\n    <FadeIn in={showError} duration={duration}>\n      <div className=\"alert-container\">\n        <div className=\"alert-error alert\">\n          <div className=\"alert-icon\">\n            <Icon name=\"exclamation-triangle\" />\n          </div>\n          <div className=\"alert-body\">\n            <div className=\"alert-title\">{message}</div>\n          </div>\n        </div>\n      </div>\n    </FadeIn>\n  );\n};\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactIconBase = require('react-icon-base');\n\nvar _reactIconBase2 = _interopRequireDefault(_reactIconBase);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar IoArrowRightA = function IoArrowRightA(props) {\n    return _react2.default.createElement(\n        _reactIconBase2.default,\n        _extends({ viewBox: '0 0 40 40' }, props),\n        _react2.default.createElement(\n            'g',\n            null,\n            _react2.default.createElement('path', { d: 'm35 20l-15 15v-8.7h-15v-12.5h15v-8.8z' })\n        )\n    );\n};\n\nexports.default = IoArrowRightA;\nmodule.exports = exports['default'];","/**\n * The base implementation of `_.sortBy` which uses `comparer` to define the\n * sort order of `array` and replaces criteria objects with their corresponding\n * values.\n *\n * @private\n * @param {Array} array The array to sort.\n * @param {Function} comparer The function to define sort order.\n * @returns {Array} Returns `array`.\n */\nfunction baseSortBy(array, comparer) {\n  var length = array.length;\n\n  array.sort(comparer);\n  while (length--) {\n    array[length] = array[length].value;\n  }\n  return array;\n}\n\nmodule.exports = baseSortBy;\n","/* eslint-env node, browser */\n'use strict'\n/**\n * this is a list of special strings you can use to map\n * to modifier keys when you specify your keyboard shortcuts\n *\n * @type {Object}\n */\nmodule.exports = {\n  'option': 'alt',\n  'command': 'meta',\n  'return': 'enter',\n  'escape': 'esc',\n  'mod': /Mac|iPod|iPhone|iPad/.test(navigator.platform) ? 'meta' : 'ctrl'\n}\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { ApiError } from './api-error';\nimport { Trace } from '@grafana/data';\n\nexport { default as TTraceTimeline } from './TTraceTimeline';\nexport { default as TNil } from './TNil';\n\nexport type FetchedState = 'FETCH_DONE' | 'FETCH_ERROR' | 'FETCH_LOADING';\n\nexport type FetchedTrace = {\n  data?: Trace;\n  error?: ApiError;\n  id: string;\n  state?: FetchedState;\n};\n","/* eslint-env node, browser */\n'use strict'\n\n/**\n * binds a single keyboard combination\n *\n * @param {string} combination\n * @param {Function} callback\n * @param {string=} action\n * @param {string=} sequenceName - name of sequence if part of sequence\n * @param {number=} level - what part of the sequence the command is\n * @returns void\n */\nmodule.exports = function (combination, callback, action, sequenceName, level) {\n  var self = this\n\n  // store a direct mapped reference for use with Combokeys.trigger\n  self.directMap[combination + ':' + action] = callback\n\n  // make sure multiple spaces in a row become a single space\n  combination = combination.replace(/\\s+/g, ' ')\n\n  var sequence = combination.split(' ')\n  var info\n\n  // if this pattern is a sequence of keys then run through this method\n  // to reprocess each pattern one key at a time\n  if (sequence.length > 1) {\n    self.bindSequence(combination, sequence, callback, action)\n    return\n  }\n\n  info = self.getKeyInfo(combination, action)\n\n  // make sure to initialize array if this is the first time\n  // a callback is added for this key\n  self.callbacks[info.key] = self.callbacks[info.key] || []\n\n  // remove an existing match if there is one\n  self.getMatches(info.key, info.modifiers, {type: info.action}, sequenceName, combination, level)\n\n  // add this call back to the array\n  // if it is a sequence put it at the beginning\n  // if not put it at the end\n  //\n  // this is important because the way these are processed expects\n  // the sequence ones to come first\n  self.callbacks[info.key][sequenceName ? 'unshift' : 'push']({\n    callback: callback,\n    modifiers: info.modifiers,\n    action: info.action,\n    seq: sequenceName,\n    level: level,\n    combo: combination\n  })\n}\n","/* eslint-env node, browser */\n'use strict'\n/**\n * unbinds an event to Combokeys\n *\n * the unbinding sets the callback function of the specified key combo\n * to an empty function and deletes the corresponding key in the\n * directMap dict.\n *\n * TODO: actually remove this from the callbacks dictionary instead\n * of binding an empty function\n *\n * the keycombo+action has to be exactly the same as\n * it was defined in the bind method\n *\n * @param {string|Array} keys\n * @param {string} action\n * @returns void\n */\nmodule.exports = function (keys, action) {\n  var self = this\n\n  return self.bind(keys, function () {}, action)\n}\n","/* eslint-env node, browser */\n'use strict'\nmodule.exports = function () {\n  var self = this\n  var on = require('./dom-event')\n  var element = self.element\n\n  self.eventHandler = require('./handleKeyEvent').bind(self)\n\n  on(element, 'keypress', self.eventHandler)\n  on(element, 'keydown', self.eventHandler)\n  on(element, 'keyup', self.eventHandler)\n}\n","'use strict'\n\nvar INDENT = '    '\n\nfunction inlineRule (objRule) {\n  var str = ''\n  objRule && Object.keys(objRule).forEach(function (rule) {\n    str += rule + ':' + objRule[rule] + ';'\n  })\n  return str\n}\n\nfunction Stylize (styleFile) {\n  function styleClass (cssClass) {\n    return 'class=\"' + cssClass + '\"'\n  }\n\n  function styleInline (cssClass) {\n    return 'style=\"' + inlineRule(styleFile['.' + cssClass]) + '\"'\n  }\n\n  if (!styleFile) return styleClass\n  return styleInline\n}\n\nfunction type (doc) {\n  if (doc === null) return 'null'\n  if (Array.isArray(doc)) return 'array'\n  if (typeof doc === 'string' && /^https?:/.test(doc)) return 'link'\n  if (typeof doc === 'object' && typeof doc.toISOString === 'function') return 'date'\n\n  return typeof doc\n}\n\nfunction escape (str) {\n  return str.replace(/</g, '&lt;').replace(/>/g, '&gt;')\n}\n\nmodule.exports = function (doc, styleFile) {\n  var indent = ''\n  var style = Stylize(styleFile)\n\n  var forEach = function (list, start, end, fn) {\n    if (!list.length) return start + ' ' + end\n\n    var out = start + '\\n'\n\n    indent += INDENT\n    list.forEach(function (key, i) {\n      out += indent + fn(key) + (i < list.length - 1 ? ',' : '') + '\\n'\n    })\n    indent = indent.slice(0, -INDENT.length)\n\n    return out + indent + end\n  }\n\n  function visit (obj) {\n    if (obj === undefined) return ''\n\n    switch (type(obj)) {\n      case 'boolean':\n        return '<span ' + style('json-markup-bool') + '>' + obj + '</span>'\n\n      case 'number':\n        return '<span ' + style('json-markup-number') + '>' + obj + '</span>'\n\n      case 'date':\n        return '<span class=\"json-markup-string\">\"' + escape(obj.toISOString()) + '\"</span>'\n\n      case 'null':\n        return '<span ' + style('json-markup-null') + '>null</span>'\n\n      case 'string':\n        return '<span ' + style('json-markup-string') + '>\"' + escape(obj.replace(/\\n/g, '\\n' + indent)) + '\"</span>'\n\n      case 'link':\n        return '<span ' + style('json-markup-string') + '>\"<a href=\"' + escape(obj) + '\">' + escape(obj) + '</a>\"</span>'\n\n      case 'array':\n        return forEach(obj, '[', ']', visit)\n\n      case 'object':\n        var keys = Object.keys(obj).filter(function (key) {\n          return obj[key] !== undefined\n        })\n\n        return forEach(keys, '{', '}', function (key) {\n          return '<span ' + style('json-markup-key') + '>\"' + key + '\":</span> ' + visit(obj[key])\n        })\n    }\n\n    return ''\n  }\n\n  return '<div ' + style('json-markup') + '>' + visit(doc) + '</div>'\n}\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nexport * from './types';\nexport { default as EUpdateTypes } from './EUpdateTypes';\nexport { default } from './DraggableManager';\n","// Copyright (c) 2018 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport React from 'react';\nimport cx from 'classnames';\nimport IoAndroidOpen from 'react-icons/lib/io/android-open';\nimport { css } from 'emotion';\n\nimport { createStyle } from '../Theme';\n\nexport const getStyles = createStyle(() => {\n  return {\n    NewWindowIconLarge: css`\n      label: NewWindowIconLarge;\n      font-size: 1.5em;\n    `,\n  };\n});\n\ntype Props = {\n  isLarge?: boolean;\n  className?: string;\n};\n\nexport default function NewWindowIcon(props: Props) {\n  const { isLarge, className, ...rest } = props;\n  const styles = getStyles();\n  const cls = cx({ [styles.NewWindowIconLarge]: isLarge }, className);\n  return <IoAndroidOpen className={cls} {...rest} />;\n}\n\nNewWindowIcon.defaultProps = {\n  isLarge: false,\n};\n","import { createSelector } from 'reselect';\nimport { ExploreItemState } from 'app/types';\nimport { filterLogLevels, dedupLogRows } from 'app/core/logs_model';\n\nconst logsRowsSelector = (state: ExploreItemState) => state.logsResult && state.logsResult.rows;\nconst hiddenLogLevelsSelector = (state: ExploreItemState) => state.hiddenLogLevels;\nconst dedupStrategySelector = (state: ExploreItemState) => state.dedupStrategy;\nexport const deduplicatedRowsSelector = createSelector(\n  logsRowsSelector,\n  hiddenLogLevelsSelector,\n  dedupStrategySelector,\n  function dedupRows(rows, hiddenLogLevels, dedupStrategy) {\n    if (!(rows && rows.length)) {\n      return rows;\n    }\n    const filteredRows = filterLogLevels(rows, new Set(hiddenLogLevels));\n    return dedupLogRows(filteredRows, dedupStrategy);\n  }\n);\n","/* eslint-env node, browser */\n'use strict'\n\nmodule.exports = function (element, options) {\n  var self = this\n  var Combokeys = self.constructor\n\n  /**\n   * an object of passed options\n   *\n   * @type { storeInstancesGlobally?: true }\n   */\n\n  self.options = Object.assign({ storeInstancesGlobally: true }, options || {})\n\n  /**\n   * a list of all the callbacks setup via Combokeys.bind()\n   *\n   * @type {Object}\n   */\n  self.callbacks = {}\n\n  /**\n   * direct map of string combinations to callbacks used for trigger()\n   *\n   * @type {Object}\n   */\n  self.directMap = {}\n\n  /**\n   * keeps track of what level each sequence is at since multiple\n   * sequences can start out with the same sequence\n   *\n   * @type {Object}\n   */\n  self.sequenceLevels = {}\n\n  /**\n   * variable to store the setTimeout call\n   *\n   * @type {null|number}\n   */\n  self.resetTimer = null\n\n  /**\n   * temporary state where we will ignore the next keyup\n   *\n   * @type {boolean|string}\n   */\n  self.ignoreNextKeyup = false\n\n  /**\n   * temporary state where we will ignore the next keypress\n   *\n   * @type {boolean}\n   */\n  self.ignoreNextKeypress = false\n\n  /**\n   * are we currently inside of a sequence?\n   * type of action (\"keyup\" or \"keydown\" or \"keypress\") or false\n   *\n   * @type {boolean|string}\n   */\n  self.nextExpectedAction = false\n\n  self.element = element\n\n  self.addEvents()\n\n  if (self.options.storeInstancesGlobally) {\n    Combokeys.instances.push(self)\n  }\n\n  return self\n}\n\nmodule.exports.prototype.bind = require('./prototype/bind')\nmodule.exports.prototype.bindMultiple = require('./prototype/bindMultiple')\nmodule.exports.prototype.unbind = require('./prototype/unbind')\nmodule.exports.prototype.trigger = require('./prototype/trigger')\nmodule.exports.prototype.reset = require('./prototype/reset.js')\nmodule.exports.prototype.stopCallback = require('./prototype/stopCallback')\nmodule.exports.prototype.handleKey = require('./prototype/handleKey')\nmodule.exports.prototype.addEvents = require('./prototype/addEvents')\nmodule.exports.prototype.bindSingle = require('./prototype/bindSingle')\nmodule.exports.prototype.getKeyInfo = require('./prototype/getKeyInfo')\nmodule.exports.prototype.pickBestAction = require('./prototype/pickBestAction')\nmodule.exports.prototype.getReverseMap = require('./prototype/getReverseMap')\nmodule.exports.prototype.getMatches = require('./prototype/getMatches')\nmodule.exports.prototype.resetSequences = require('./prototype/resetSequences')\nmodule.exports.prototype.fireCallback = require('./prototype/fireCallback')\nmodule.exports.prototype.bindSequence = require('./prototype/bindSequence')\nmodule.exports.prototype.resetSequenceTimer = require('./prototype/resetSequenceTimer')\nmodule.exports.prototype.detach = require('./prototype/detach')\n\nmodule.exports.instances = []\nmodule.exports.reset = require('./reset')\n\n/**\n * variable to store the flipped version of MAP from above\n * needed to check if we should use keypress or not when no action\n * is specified\n *\n * @type {Object|undefined}\n */\nmodule.exports.REVERSE_MAP = null\n","/* eslint-env node, browser */\n'use strict'\n\n/**\n * prevents default for this event\n *\n * @param {Event} e\n * @returns void\n */\nmodule.exports = function (e) {\n  if (e.preventDefault) {\n    e.preventDefault()\n    return\n  }\n\n  e.returnValue = false\n}\n","import React from 'react';\nimport { css } from 'emotion';\nimport { stylesFactory, useTheme, Select, Button, Switch, Field } from '@grafana/ui';\nimport { GrafanaTheme, AppEvents } from '@grafana/data';\nimport appEvents from 'app/core/app_events';\nimport { CoreEvents } from 'app/types';\n\nexport interface RichHistorySettingsProps {\n  retentionPeriod: number;\n  starredTabAsFirstTab: boolean;\n  activeDatasourceOnly: boolean;\n  onChangeRetentionPeriod: (option: { label: string; value: number }) => void;\n  toggleStarredTabAsFirstTab: () => void;\n  toggleactiveDatasourceOnly: () => void;\n  deleteRichHistory: () => void;\n}\n\nconst getStyles = stylesFactory((theme: GrafanaTheme) => {\n  return {\n    container: css`\n      padding-left: ${theme.spacing.sm};\n      font-size: ${theme.typography.size.sm};\n      .space-between {\n        margin-bottom: ${theme.spacing.lg};\n      }\n    `,\n    input: css`\n      max-width: 200px;\n    `,\n    switch: css`\n      display: flex;\n      align-items: center;\n    `,\n    label: css`\n      margin-left: ${theme.spacing.md};\n    `,\n  };\n});\n\nconst retentionPeriodOptions = [\n  { value: 2, label: '2 days' },\n  { value: 5, label: '5 days' },\n  { value: 7, label: '1 week' },\n  { value: 14, label: '2 weeks' },\n];\n\nexport function RichHistorySettings(props: RichHistorySettingsProps) {\n  const {\n    retentionPeriod,\n    starredTabAsFirstTab,\n    activeDatasourceOnly,\n    onChangeRetentionPeriod,\n    toggleStarredTabAsFirstTab,\n    toggleactiveDatasourceOnly,\n    deleteRichHistory,\n  } = props;\n  const theme = useTheme();\n  const styles = getStyles(theme);\n  const selectedOption = retentionPeriodOptions.find((v) => v.value === retentionPeriod);\n\n  const onDelete = () => {\n    appEvents.emit(CoreEvents.showConfirmModal, {\n      title: 'Delete',\n      text: 'Are you sure you want to permanently delete your query history?',\n      yesText: 'Delete',\n      icon: 'trash-alt',\n      onConfirm: () => {\n        deleteRichHistory();\n        appEvents.emit(AppEvents.alertSuccess, ['Query history deleted']);\n      },\n    });\n  };\n\n  return (\n    <div className={styles.container}>\n      <Field\n        label=\"History time span\"\n        description=\"Select the period of time for which Grafana will save your query history\"\n        className=\"space-between\"\n      >\n        <div className={styles.input}>\n          <Select value={selectedOption} options={retentionPeriodOptions} onChange={onChangeRetentionPeriod}></Select>\n        </div>\n      </Field>\n      <Field label=\"Default active tab\" description=\" \" className=\"space-between\">\n        <div className={styles.switch}>\n          <Switch value={starredTabAsFirstTab} onChange={toggleStarredTabAsFirstTab}></Switch>\n          <div className={styles.label}>Change the default active tab from “Query history” to “Starred”</div>\n        </div>\n      </Field>\n      <Field label=\"Data source behaviour\" description=\" \" className=\"space-between\">\n        <div className={styles.switch}>\n          <Switch value={activeDatasourceOnly} onChange={toggleactiveDatasourceOnly}></Switch>\n          <div className={styles.label}>Only show queries for data source currently active in Explore</div>\n        </div>\n      </Field>\n      <div\n        className={css`\n          font-weight: ${theme.typography.weight.bold};\n        `}\n      >\n        Clear query history\n      </div>\n      <div\n        className={css`\n          margin-bottom: ${theme.spacing.sm};\n        `}\n      >\n        Delete all of your query history, permanently.\n      </div>\n      <Button variant=\"destructive\" onClick={onDelete}>\n        Clear query history\n      </Button>\n    </div>\n  );\n}\n","import React, { useState, useEffect, useCallback } from 'react';\nimport { css } from 'emotion';\nimport { uniqBy, debounce } from 'lodash';\n\n// Types\nimport { RichHistoryQuery, ExploreId } from 'app/types/explore';\n\n// Utils\nimport { stylesFactory, useTheme } from '@grafana/ui';\nimport { GrafanaTheme, SelectableValue } from '@grafana/data';\n\nimport {\n  SortOrder,\n  mapNumbertoTimeInSlider,\n  mapQueriesToHeadings,\n  createDatasourcesList,\n  filterAndSortQueries,\n} from 'app/core/utils/richHistory';\n\n// Components\nimport RichHistoryCard from './RichHistoryCard';\nimport { sortOrderOptions } from './RichHistory';\nimport { RangeSlider, Select } from '@grafana/ui';\nimport { FilterInput } from 'app/core/components/FilterInput/FilterInput';\n\nexport interface Props {\n  queries: RichHistoryQuery[];\n  sortOrder: SortOrder;\n  activeDatasourceOnly: boolean;\n  datasourceFilters: SelectableValue[] | null;\n  retentionPeriod: number;\n  exploreId: ExploreId;\n  height: number;\n  onChangeSortOrder: (sortOrder: SortOrder) => void;\n  onSelectDatasourceFilters: (value: SelectableValue[]) => void;\n}\n\nconst getStyles = stylesFactory((theme: GrafanaTheme, height: number) => {\n  const bgColor = theme.isLight ? theme.palette.gray5 : theme.palette.dark4;\n\n  /* 134px is based on the width of the Query history tabs bar, so the content is aligned to right side of the tab */\n  const cardWidth = '100% - 134px';\n  const sliderHeight = `${height - 180}px`;\n  return {\n    container: css`\n      display: flex;\n      .label-slider {\n        font-size: ${theme.typography.size.sm};\n        &:last-of-type {\n          margin-top: ${theme.spacing.lg};\n        }\n        &:first-of-type {\n          font-weight: ${theme.typography.weight.semibold};\n          margin-bottom: ${theme.spacing.md};\n        }\n      }\n    `,\n    containerContent: css`\n      width: calc(${cardWidth});\n    `,\n    containerSlider: css`\n      width: 129px;\n      margin-right: ${theme.spacing.sm};\n      .slider {\n        bottom: 10px;\n        height: ${sliderHeight};\n        width: 129px;\n        padding: ${theme.spacing.sm} 0;\n      }\n    `,\n    slider: css`\n      position: fixed;\n    `,\n    selectors: css`\n      display: flex;\n      justify-content: space-between;\n      flex-wrap: wrap;\n    `,\n    filterInput: css`\n      margin-bottom: ${theme.spacing.sm};\n    `,\n    multiselect: css`\n      width: 100%;\n      margin-bottom: ${theme.spacing.sm};\n      .gf-form-select-box__multi-value {\n        background-color: ${bgColor};\n        padding: ${theme.spacing.xxs} ${theme.spacing.xs} ${theme.spacing.xxs} ${theme.spacing.sm};\n        border-radius: ${theme.border.radius.sm};\n      }\n    `,\n    sort: css`\n      width: 170px;\n    `,\n    sessionName: css`\n      display: flex;\n      align-items: flex-start;\n      justify-content: flex-start;\n      margin-top: ${theme.spacing.lg};\n      h4 {\n        margin: 0 10px 0 0;\n      }\n    `,\n    heading: css`\n      font-size: ${theme.typography.heading.h4};\n      margin: ${theme.spacing.md} ${theme.spacing.xxs} ${theme.spacing.sm} ${theme.spacing.xxs};\n    `,\n    footer: css`\n      height: 60px;\n      margin-top: ${theme.spacing.lg};\n      display: flex;\n      justify-content: center;\n      font-weight: ${theme.typography.weight.light};\n      font-size: ${theme.typography.size.sm};\n      a {\n        font-weight: ${theme.typography.weight.semibold};\n        margin-left: ${theme.spacing.xxs};\n      }\n    `,\n    queries: css`\n      font-size: ${theme.typography.size.sm};\n      font-weight: ${theme.typography.weight.regular};\n      margin-left: ${theme.spacing.xs};\n    `,\n  };\n});\n\nexport function RichHistoryQueriesTab(props: Props) {\n  const {\n    datasourceFilters,\n    onSelectDatasourceFilters,\n    queries,\n    onChangeSortOrder,\n    sortOrder,\n    activeDatasourceOnly,\n    retentionPeriod,\n    exploreId,\n    height,\n  } = props;\n\n  const [timeFilter, setTimeFilter] = useState<[number, number]>([0, retentionPeriod]);\n  const [filteredQueries, setFilteredQueries] = useState<RichHistoryQuery[]>([]);\n  const [searchInput, setSearchInput] = useState('');\n\n  const theme = useTheme();\n  const styles = getStyles(theme, height);\n\n  const datasourcesRetrievedFromQueryHistory = uniqBy(queries, 'datasourceName').map((d) => d.datasourceName);\n  const listOfDatasources = createDatasourcesList(datasourcesRetrievedFromQueryHistory);\n\n  const filterAndSortQueriesDebounced = useCallback(\n    debounce((searchValue: string) => {\n      setFilteredQueries(\n        filterAndSortQueries(\n          queries,\n          sortOrder,\n          datasourceFilters?.map((d) => d.value) as string[] | null,\n          searchValue,\n          timeFilter\n        )\n      );\n    }, 300),\n    [timeFilter, queries, sortOrder, datasourceFilters]\n  );\n\n  useEffect(() => {\n    setFilteredQueries(\n      filterAndSortQueries(\n        queries,\n        sortOrder,\n        datasourceFilters?.map((d) => d.value) as string[] | null,\n        searchInput,\n        timeFilter\n      )\n    );\n  }, [timeFilter, queries, sortOrder, datasourceFilters]);\n\n  /* mappedQueriesToHeadings is an object where query headings (stringified dates/data sources)\n   * are keys and arrays with queries that belong to that headings are values.\n   */\n  const mappedQueriesToHeadings = mapQueriesToHeadings(filteredQueries, sortOrder);\n\n  return (\n    <div className={styles.container}>\n      <div className={styles.containerSlider}>\n        <div className={styles.slider}>\n          <div className=\"label-slider\">Filter history</div>\n          <div className=\"label-slider\">{mapNumbertoTimeInSlider(timeFilter[0])}</div>\n          <div className=\"slider\">\n            <RangeSlider\n              tooltipAlwaysVisible={false}\n              min={0}\n              max={retentionPeriod}\n              value={timeFilter}\n              orientation=\"vertical\"\n              formatTooltipResult={mapNumbertoTimeInSlider}\n              reverse={true}\n              onAfterChange={setTimeFilter as () => number[]}\n            />\n          </div>\n          <div className=\"label-slider\">{mapNumbertoTimeInSlider(timeFilter[1])}</div>\n        </div>\n      </div>\n\n      <div className={styles.containerContent}>\n        <div className={styles.selectors}>\n          {!activeDatasourceOnly && (\n            <div aria-label=\"Filter datasources\" className={styles.multiselect}>\n              <Select\n                isMulti={true}\n                options={listOfDatasources}\n                value={datasourceFilters}\n                placeholder=\"Filter queries for data sources(s)\"\n                onChange={onSelectDatasourceFilters}\n              />\n            </div>\n          )}\n          <div className={styles.filterInput}>\n            <FilterInput\n              labelClassName=\"gf-form--has-input-icon gf-form--grow\"\n              inputClassName=\"gf-form-input\"\n              placeholder=\"Search queries\"\n              value={searchInput}\n              onChange={(value: string) => {\n                setSearchInput(value);\n                filterAndSortQueriesDebounced(value);\n              }}\n            />\n          </div>\n          <div aria-label=\"Sort queries\" className={styles.sort}>\n            <Select\n              value={sortOrderOptions.filter((order) => order.value === sortOrder)}\n              options={sortOrderOptions}\n              placeholder=\"Sort queries by\"\n              onChange={(e) => onChangeSortOrder(e.value as SortOrder)}\n            />\n          </div>\n        </div>\n        {Object.keys(mappedQueriesToHeadings).map((heading) => {\n          return (\n            <div key={heading}>\n              <div className={styles.heading}>\n                {heading} <span className={styles.queries}>{mappedQueriesToHeadings[heading].length} queries</span>\n              </div>\n              {mappedQueriesToHeadings[heading].map((q: RichHistoryQuery) => {\n                const idx = listOfDatasources.findIndex((d) => d.label === q.datasourceName);\n                return (\n                  <RichHistoryCard\n                    query={q}\n                    key={q.ts}\n                    exploreId={exploreId}\n                    dsImg={listOfDatasources[idx].imgUrl}\n                    isRemoved={listOfDatasources[idx].isRemoved}\n                  />\n                );\n              })}\n            </div>\n          );\n        })}\n        <div className={styles.footer}>The history is local to your browser and is not shared with others.</div>\n      </div>\n    </div>\n  );\n}\n","import React, { useState, useEffect, useCallback } from 'react';\nimport { css } from 'emotion';\nimport { uniqBy, debounce } from 'lodash';\n\n// Types\nimport { RichHistoryQuery, ExploreId } from 'app/types/explore';\n\n// Utils\nimport { stylesFactory, useTheme } from '@grafana/ui';\nimport { GrafanaTheme, SelectableValue } from '@grafana/data';\nimport { filterAndSortQueries, createDatasourcesList, SortOrder } from 'app/core/utils/richHistory';\n\n// Components\nimport RichHistoryCard from './RichHistoryCard';\nimport { sortOrderOptions } from './RichHistory';\nimport { Select } from '@grafana/ui';\nimport { FilterInput } from 'app/core/components/FilterInput/FilterInput';\n\nexport interface Props {\n  queries: RichHistoryQuery[];\n  sortOrder: SortOrder;\n  activeDatasourceOnly: boolean;\n  datasourceFilters: SelectableValue[] | null;\n  exploreId: ExploreId;\n  onChangeSortOrder: (sortOrder: SortOrder) => void;\n  onSelectDatasourceFilters: (value: SelectableValue[]) => void;\n}\n\nconst getStyles = stylesFactory((theme: GrafanaTheme) => {\n  const bgColor = theme.isLight ? theme.palette.gray5 : theme.palette.dark4;\n  return {\n    container: css`\n      display: flex;\n    `,\n    containerContent: css`\n      width: 100%;\n    `,\n    selectors: css`\n      display: flex;\n      justify-content: space-between;\n      flex-wrap: wrap;\n    `,\n    multiselect: css`\n      width: 100%;\n      margin-bottom: ${theme.spacing.sm};\n      .gf-form-select-box__multi-value {\n        background-color: ${bgColor};\n        padding: ${theme.spacing.xxs} ${theme.spacing.xs} ${theme.spacing.xxs} ${theme.spacing.sm};\n        border-radius: ${theme.border.radius.sm};\n      }\n    `,\n    filterInput: css`\n      margin-bottom: ${theme.spacing.sm};\n    `,\n    sort: css`\n      width: 170px;\n    `,\n    footer: css`\n      height: 60px;\n      margin-top: ${theme.spacing.lg};\n      display: flex;\n      justify-content: center;\n      font-weight: ${theme.typography.weight.light};\n      font-size: ${theme.typography.size.sm};\n      a {\n        font-weight: ${theme.typography.weight.semibold};\n        margin-left: ${theme.spacing.xxs};\n      }\n    `,\n  };\n});\n\nexport function RichHistoryStarredTab(props: Props) {\n  const {\n    datasourceFilters,\n    onSelectDatasourceFilters,\n    queries,\n    onChangeSortOrder,\n    sortOrder,\n    activeDatasourceOnly,\n    exploreId,\n  } = props;\n\n  const [filteredQueries, setFilteredQueries] = useState<RichHistoryQuery[]>([]);\n  const [searchInput, setSearchInput] = useState('');\n\n  const theme = useTheme();\n  const styles = getStyles(theme);\n\n  const datasourcesRetrievedFromQueryHistory = uniqBy(queries, 'datasourceName').map((d) => d.datasourceName);\n  const listOfDatasources = createDatasourcesList(datasourcesRetrievedFromQueryHistory);\n  const starredQueries = queries.filter((q) => q.starred === true);\n\n  const filterAndSortQueriesDebounced = useCallback(\n    debounce((searchValue: string) => {\n      setFilteredQueries(\n        filterAndSortQueries(\n          starredQueries,\n          sortOrder,\n          datasourceFilters?.map((d) => d.value) as string[] | null,\n          searchValue\n        )\n      );\n    }, 300),\n    [queries, sortOrder, datasourceFilters]\n  );\n\n  useEffect(() => {\n    setFilteredQueries(\n      filterAndSortQueries(\n        starredQueries,\n        sortOrder,\n        datasourceFilters?.map((d) => d.value) as string[] | null,\n        searchInput\n      )\n    );\n  }, [queries, sortOrder, datasourceFilters]);\n\n  return (\n    <div className={styles.container}>\n      <div className={styles.containerContent}>\n        <div className={styles.selectors}>\n          {!activeDatasourceOnly && (\n            <div aria-label=\"Filter datasources\" className={styles.multiselect}>\n              <Select\n                isMulti={true}\n                options={listOfDatasources}\n                value={datasourceFilters}\n                placeholder=\"Filter queries for specific data sources(s)\"\n                onChange={onSelectDatasourceFilters}\n              />\n            </div>\n          )}\n          <div className={styles.filterInput}>\n            <FilterInput\n              labelClassName=\"gf-form--has-input-icon gf-form--grow\"\n              inputClassName=\"gf-form-input\"\n              placeholder=\"Search queries\"\n              value={searchInput}\n              onChange={(value: string) => {\n                setSearchInput(value);\n                filterAndSortQueriesDebounced(value);\n              }}\n            />\n          </div>\n          <div aria-label=\"Sort queries\" className={styles.sort}>\n            <Select\n              options={sortOrderOptions}\n              value={sortOrderOptions.filter((order) => order.value === sortOrder)}\n              placeholder=\"Sort queries by\"\n              onChange={(e) => onChangeSortOrder(e.value as SortOrder)}\n            />\n          </div>\n        </div>\n        {filteredQueries.map((q) => {\n          const idx = listOfDatasources.findIndex((d) => d.label === q.datasourceName);\n          return (\n            <RichHistoryCard\n              query={q}\n              key={q.ts}\n              exploreId={exploreId}\n              dsImg={listOfDatasources[idx].imgUrl}\n              isRemoved={listOfDatasources[idx].isRemoved}\n            />\n          );\n        })}\n        <div className={styles.footer}>The history is local to your browser and is not shared with others.</div>\n      </div>\n    </div>\n  );\n}\n","import React, { PureComponent } from 'react';\n\n//Services & Utils\nimport { RICH_HISTORY_SETTING_KEYS, SortOrder } from 'app/core/utils/richHistory';\nimport store from 'app/core/store';\nimport { withTheme, TabbedContainer, TabConfig } from '@grafana/ui';\n\n//Types\nimport { RichHistoryQuery, ExploreId } from 'app/types/explore';\nimport { SelectableValue } from '@grafana/data';\nimport { Themeable } from '@grafana/ui';\n\n//Components\nimport { RichHistorySettings } from './RichHistorySettings';\nimport { RichHistoryQueriesTab } from './RichHistoryQueriesTab';\nimport { RichHistoryStarredTab } from './RichHistoryStarredTab';\n\nexport enum Tabs {\n  RichHistory = 'Query history',\n  Starred = 'Starred',\n  Settings = 'Settings',\n}\n\nexport const sortOrderOptions = [\n  { label: 'Newest first', value: SortOrder.Descending },\n  { label: 'Oldest first', value: SortOrder.Ascending },\n  { label: 'Data source A-Z', value: SortOrder.DatasourceAZ },\n  { label: 'Data source Z-A', value: SortOrder.DatasourceZA },\n];\n\nexport interface RichHistoryProps extends Themeable {\n  richHistory: RichHistoryQuery[];\n  activeDatasourceInstance: string;\n  firstTab: Tabs;\n  exploreId: ExploreId;\n  height: number;\n  deleteRichHistory: () => void;\n  onClose: () => void;\n}\n\ninterface RichHistoryState {\n  sortOrder: SortOrder;\n  retentionPeriod: number;\n  starredTabAsFirstTab: boolean;\n  activeDatasourceOnly: boolean;\n  datasourceFilters: SelectableValue[] | null;\n}\n\nclass UnThemedRichHistory extends PureComponent<RichHistoryProps, RichHistoryState> {\n  constructor(props: RichHistoryProps) {\n    super(props);\n    this.state = {\n      sortOrder: SortOrder.Descending,\n      datasourceFilters: store.getObject(RICH_HISTORY_SETTING_KEYS.datasourceFilters, null),\n      retentionPeriod: store.getObject(RICH_HISTORY_SETTING_KEYS.retentionPeriod, 7),\n      starredTabAsFirstTab: store.getBool(RICH_HISTORY_SETTING_KEYS.starredTabAsFirstTab, false),\n      activeDatasourceOnly: store.getBool(RICH_HISTORY_SETTING_KEYS.activeDatasourceOnly, true),\n    };\n  }\n\n  onChangeRetentionPeriod = (retentionPeriod: { label: string; value: number }) => {\n    this.setState({\n      retentionPeriod: retentionPeriod.value,\n    });\n    store.set(RICH_HISTORY_SETTING_KEYS.retentionPeriod, retentionPeriod.value);\n  };\n\n  toggleStarredTabAsFirstTab = () => {\n    const starredTabAsFirstTab = !this.state.starredTabAsFirstTab;\n    this.setState({\n      starredTabAsFirstTab,\n    });\n    store.set(RICH_HISTORY_SETTING_KEYS.starredTabAsFirstTab, starredTabAsFirstTab);\n  };\n\n  toggleActiveDatasourceOnly = () => {\n    const activeDatasourceOnly = !this.state.activeDatasourceOnly;\n    this.setState({\n      activeDatasourceOnly,\n    });\n    store.set(RICH_HISTORY_SETTING_KEYS.activeDatasourceOnly, activeDatasourceOnly);\n  };\n\n  onSelectDatasourceFilters = (value: SelectableValue[] | null) => {\n    try {\n      store.setObject(RICH_HISTORY_SETTING_KEYS.datasourceFilters, value);\n    } catch (error) {\n      console.error(error);\n    }\n    /* Set data source filters to state even though they were not successfully saved in\n     * localStorage to allow interaction and filtering.\n     **/\n    this.setState({ datasourceFilters: value });\n  };\n\n  onChangeSortOrder = (sortOrder: SortOrder) => this.setState({ sortOrder });\n\n  /* If user selects activeDatasourceOnly === true, set datasource filter to currently active datasource.\n   * Filtering based on datasource won't be available. Otherwise set to null, as filtering will be\n   * available for user.\n   */\n  updateFilters() {\n    this.state.activeDatasourceOnly && this.props.activeDatasourceInstance\n      ? this.onSelectDatasourceFilters([\n          { label: this.props.activeDatasourceInstance, value: this.props.activeDatasourceInstance },\n        ])\n      : this.onSelectDatasourceFilters(this.state.datasourceFilters);\n  }\n\n  componentDidMount() {\n    this.updateFilters();\n  }\n\n  componentDidUpdate(prevProps: RichHistoryProps, prevState: RichHistoryState) {\n    if (\n      this.props.activeDatasourceInstance !== prevProps.activeDatasourceInstance ||\n      this.state.activeDatasourceOnly !== prevState.activeDatasourceOnly\n    ) {\n      this.updateFilters();\n    }\n  }\n\n  render() {\n    const { datasourceFilters, sortOrder, activeDatasourceOnly, retentionPeriod } = this.state;\n    const { richHistory, height, exploreId, deleteRichHistory, onClose, firstTab } = this.props;\n\n    const QueriesTab: TabConfig = {\n      label: 'Query history',\n      value: Tabs.RichHistory,\n      content: (\n        <RichHistoryQueriesTab\n          queries={richHistory}\n          sortOrder={sortOrder}\n          datasourceFilters={datasourceFilters}\n          activeDatasourceOnly={activeDatasourceOnly}\n          retentionPeriod={retentionPeriod}\n          onChangeSortOrder={this.onChangeSortOrder}\n          onSelectDatasourceFilters={this.onSelectDatasourceFilters}\n          exploreId={exploreId}\n          height={height}\n        />\n      ),\n      icon: 'history',\n    };\n\n    const StarredTab: TabConfig = {\n      label: 'Starred',\n      value: Tabs.Starred,\n      content: (\n        <RichHistoryStarredTab\n          queries={richHistory}\n          sortOrder={sortOrder}\n          datasourceFilters={datasourceFilters}\n          activeDatasourceOnly={activeDatasourceOnly}\n          onChangeSortOrder={this.onChangeSortOrder}\n          onSelectDatasourceFilters={this.onSelectDatasourceFilters}\n          exploreId={exploreId}\n        />\n      ),\n      icon: 'star',\n    };\n\n    const SettingsTab: TabConfig = {\n      label: 'Settings',\n      value: Tabs.Settings,\n      content: (\n        <RichHistorySettings\n          retentionPeriod={this.state.retentionPeriod}\n          starredTabAsFirstTab={this.state.starredTabAsFirstTab}\n          activeDatasourceOnly={this.state.activeDatasourceOnly}\n          onChangeRetentionPeriod={this.onChangeRetentionPeriod}\n          toggleStarredTabAsFirstTab={this.toggleStarredTabAsFirstTab}\n          toggleactiveDatasourceOnly={this.toggleActiveDatasourceOnly}\n          deleteRichHistory={deleteRichHistory}\n        />\n      ),\n      icon: 'sliders-v-alt',\n    };\n\n    let tabs = [QueriesTab, StarredTab, SettingsTab];\n    return (\n      <TabbedContainer tabs={tabs} onClose={onClose} defaultTab={firstTab} closeIconTooltip=\"Close query history\" />\n    );\n  }\n}\n\nexport const RichHistory = withTheme(UnThemedRichHistory);\n","import { GrafanaTheme } from '@grafana/data';\nimport { Icon, InfoBox, stylesFactory, useTheme } from '@grafana/ui';\nimport { css, cx } from 'emotion';\nimport React, { useState } from 'react';\n\nconst getStyles = stylesFactory((theme: GrafanaTheme) => ({\n  infoBox: css`\n    margin-top: ${theme.spacing.xs};\n  `,\n}));\n\nexport const HelpToggle: React.FunctionComponent = ({ children }) => {\n  const [isHelpVisible, setIsHelpVisible] = useState(false);\n  const theme = useTheme();\n  const styles = getStyles(theme);\n\n  return (\n    <>\n      <button className=\"gf-form-label query-keyword pointer\" onClick={(_) => setIsHelpVisible(!isHelpVisible)}>\n        Help\n        <Icon name={isHelpVisible ? 'angle-down' : 'angle-right'} />\n      </button>\n      {isHelpVisible && <InfoBox className={cx(styles.infoBox)}>{children}</InfoBox>}\n    </>\n  );\n};\n","//\n// Main\n//\n\nfunction memoize (fn, options) {\n  var cache = options && options.cache\n    ? options.cache\n    : cacheDefault\n\n  var serializer = options && options.serializer\n    ? options.serializer\n    : serializerDefault\n\n  var strategy = options && options.strategy\n    ? options.strategy\n    : strategyDefault\n\n  return strategy(fn, {\n    cache: cache,\n    serializer: serializer\n  })\n}\n\n//\n// Strategy\n//\n\nfunction isPrimitive (value) {\n  return value == null || typeof value === 'number' || typeof value === 'boolean' // || typeof value === \"string\" 'unsafe' primitive for our needs\n}\n\nfunction monadic (fn, cache, serializer, arg) {\n  var cacheKey = isPrimitive(arg) ? arg : serializer(arg)\n\n  var computedValue = cache.get(cacheKey)\n  if (typeof computedValue === 'undefined') {\n    computedValue = fn.call(this, arg)\n    cache.set(cacheKey, computedValue)\n  }\n\n  return computedValue\n}\n\nfunction variadic (fn, cache, serializer) {\n  var args = Array.prototype.slice.call(arguments, 3)\n  var cacheKey = serializer(args)\n\n  var computedValue = cache.get(cacheKey)\n  if (typeof computedValue === 'undefined') {\n    computedValue = fn.apply(this, args)\n    cache.set(cacheKey, computedValue)\n  }\n\n  return computedValue\n}\n\nfunction assemble (fn, context, strategy, cache, serialize) {\n  return strategy.bind(\n    context,\n    fn,\n    cache,\n    serialize\n  )\n}\n\nfunction strategyDefault (fn, options) {\n  var strategy = fn.length === 1 ? monadic : variadic\n\n  return assemble(\n    fn,\n    this,\n    strategy,\n    options.cache.create(),\n    options.serializer\n  )\n}\n\nfunction strategyVariadic (fn, options) {\n  var strategy = variadic\n\n  return assemble(\n    fn,\n    this,\n    strategy,\n    options.cache.create(),\n    options.serializer\n  )\n}\n\nfunction strategyMonadic (fn, options) {\n  var strategy = monadic\n\n  return assemble(\n    fn,\n    this,\n    strategy,\n    options.cache.create(),\n    options.serializer\n  )\n}\n\n//\n// Serializer\n//\n\nfunction serializerDefault () {\n  return JSON.stringify(arguments)\n}\n\n//\n// Cache\n//\n\nfunction ObjectWithoutPrototypeCache () {\n  this.cache = Object.create(null)\n}\n\nObjectWithoutPrototypeCache.prototype.has = function (key) {\n  return (key in this.cache)\n}\n\nObjectWithoutPrototypeCache.prototype.get = function (key) {\n  return this.cache[key]\n}\n\nObjectWithoutPrototypeCache.prototype.set = function (key, value) {\n  this.cache[key] = value\n}\n\nvar cacheDefault = {\n  create: function create () {\n    return new ObjectWithoutPrototypeCache()\n  }\n}\n\n//\n// API\n//\n\nmodule.exports = memoize\nmodule.exports.strategies = {\n  variadic: strategyVariadic,\n  monadic: strategyMonadic\n}\n","var baseUniq = require('./_baseUniq');\n\n/**\n * Creates a duplicate-free version of an array, using\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons, in which only the first occurrence of each element\n * is kept. The order of result values is determined by the order they occur\n * in the array.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {Array} array The array to inspect.\n * @returns {Array} Returns the new duplicate free array.\n * @example\n *\n * _.uniq([2, 1, 2]);\n * // => [2, 1]\n */\nfunction uniq(array) {\n  return (array && array.length) ? baseUniq(array) : [];\n}\n\nmodule.exports = uniq;\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactIconBase = require('react-icon-base');\n\nvar _reactIconBase2 = _interopRequireDefault(_reactIconBase);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar IoChevronRight = function IoChevronRight(props) {\n    return _react2.default.createElement(\n        _reactIconBase2.default,\n        _extends({ viewBox: '0 0 40 40' }, props),\n        _react2.default.createElement(\n            'g',\n            null,\n            _react2.default.createElement('path', { d: 'm23.3 20l-13.1-13.6c-0.3-0.3-0.3-0.9 0-1.2l2.4-2.4c0.3-0.3 0.9-0.4 1.2-0.1l16 16.7c0.1 0.1 0.2 0.4 0.2 0.6s-0.1 0.5-0.2 0.6l-16 16.7c-0.3 0.3-0.9 0.3-1.2 0l-2.4-2.5c-0.3-0.3-0.3-0.9 0-1.2z' })\n        )\n    );\n};\n\nexports.default = IoChevronRight;\nmodule.exports = exports['default'];","import React, { FC } from 'react';\nimport classNames from 'classnames';\nimport { connect } from 'react-redux';\nimport { hot } from 'react-hot-loader';\nimport { Icon, Tooltip, LegacyForms } from '@grafana/ui';\nimport { DataQuery } from '@grafana/data';\n\nimport kbn from '../../core/utils/kbn';\nimport { getDashboardSrv } from '../dashboard/services/DashboardSrv';\nimport { StoreState } from 'app/types';\nimport { ExploreId } from 'app/types/explore';\nimport { updateLocation } from 'app/core/actions';\nimport { setDashboardQueriesToUpdateOnLoad } from '../dashboard/state/reducers';\n\nconst { ButtonSelect } = LegacyForms;\n\ninterface Props {\n  exploreId: ExploreId;\n  splitted: boolean;\n  queries: DataQuery[];\n  originPanelId?: number | null;\n  updateLocation: typeof updateLocation;\n  setDashboardQueriesToUpdateOnLoad: typeof setDashboardQueriesToUpdateOnLoad;\n}\n\nexport const UnconnectedReturnToDashboardButton: FC<Props> = ({\n  originPanelId,\n  updateLocation,\n  setDashboardQueriesToUpdateOnLoad,\n  queries,\n  splitted,\n}) => {\n  const withOriginId = originPanelId && Number.isInteger(originPanelId);\n\n  // If in split mode, or no origin id, escape early and return null\n  if (splitted || !withOriginId) {\n    return null;\n  }\n\n  const panelReturnClasses = classNames('btn', 'navbar-button', {\n    'btn--radius-right-0': withOriginId,\n    'navbar-button navbar-button--border-right-0': withOriginId,\n  });\n\n  const cleanQueries = (queries: DataQuery[]) => {\n    return queries.map((query: DataQuery & { context?: string }) => {\n      delete query.context;\n      delete query.key;\n      return query;\n    });\n  };\n\n  const returnToPanel = async ({ withChanges = false } = {}) => {\n    const dashboardSrv = getDashboardSrv();\n    const dash = dashboardSrv.getCurrent();\n    const titleSlug = kbn.slugifyForUrl(dash.title);\n\n    if (withChanges) {\n      setDashboardQueriesToUpdateOnLoad({\n        panelId: originPanelId!,\n        queries: cleanQueries(queries),\n      });\n    }\n\n    const query: any = {};\n\n    if (withChanges || dash.panelInEdit) {\n      query.editPanel = originPanelId;\n    } else if (dash.panelInView) {\n      query.viewPanel = originPanelId;\n    }\n\n    updateLocation({ path: `/d/${dash.uid}/:${titleSlug}`, query });\n  };\n\n  return (\n    <div className=\"explore-toolbar-content-item\">\n      <Tooltip content={'Return to panel'} placement=\"bottom\">\n        <button\n          data-testid=\"returnButton\"\n          title={'Return to panel'}\n          className={panelReturnClasses}\n          onClick={() => returnToPanel()}\n        >\n          <Icon name=\"arrow-left\" />\n        </button>\n      </Tooltip>\n      <div data-testid=\"returnButtonWithChanges\">\n        <ButtonSelect\n          className=\"navbar-button--attached btn--radius-left-0$\"\n          options={[{ label: 'Return to panel with changes', value: '' }]}\n          onChange={() => returnToPanel({ withChanges: true })}\n          maxMenuHeight={380}\n        />\n      </div>\n    </div>\n  );\n};\n\nfunction mapStateToProps(state: StoreState, { exploreId }: { exploreId: ExploreId }) {\n  const explore = state.explore;\n  const splitted = state.explore.split;\n  const { datasourceInstance, queries, originPanelId } = explore[exploreId];\n\n  return {\n    exploreId,\n    datasourceInstance,\n    queries,\n    originPanelId,\n    splitted,\n  };\n}\n\nconst mapDispatchToProps = {\n  updateLocation,\n  setDashboardQueriesToUpdateOnLoad,\n};\nexport default hot(module)(connect(mapStateToProps, mapDispatchToProps)(UnconnectedReturnToDashboardButton));\n","// Libraries\nimport React, { PureComponent } from 'react';\nimport debounce from 'lodash/debounce';\nimport has from 'lodash/has';\nimport { hot } from 'react-hot-loader';\n// @ts-ignore\nimport { connect } from 'react-redux';\n// Components\nimport AngularQueryEditor from './QueryEditor';\nimport { QueryRowActions } from './QueryRowActions';\n// Types\nimport { StoreState } from 'app/types';\nimport {\n  DataQuery,\n  DataSourceApi,\n  PanelData,\n  HistoryItem,\n  TimeRange,\n  AbsoluteTimeRange,\n  LoadingState,\n  EventBusExtended,\n} from '@grafana/data';\nimport { selectors } from '@grafana/e2e-selectors';\n\nimport { ExploreItemState, ExploreId } from 'app/types/explore';\nimport { highlightLogsExpressionAction } from './state/explorePane';\nimport { ErrorContainer } from './ErrorContainer';\nimport { changeQuery, modifyQueries, removeQueryRowAction, runQueries } from './state/query';\nimport { HelpToggle } from '../query/components/HelpToggle';\n\ninterface PropsFromParent {\n  exploreId: ExploreId;\n  index: number;\n  exploreEvents: EventBusExtended;\n}\n\nexport interface QueryRowProps extends PropsFromParent {\n  changeQuery: typeof changeQuery;\n  className?: string;\n  exploreId: ExploreId;\n  datasourceInstance: DataSourceApi;\n  highlightLogsExpressionAction: typeof highlightLogsExpressionAction;\n  history: HistoryItem[];\n  query: DataQuery;\n  modifyQueries: typeof modifyQueries;\n  range: TimeRange;\n  absoluteRange: AbsoluteTimeRange;\n  removeQueryRowAction: typeof removeQueryRowAction;\n  runQueries: typeof runQueries;\n  queryResponse: PanelData;\n  latency: number;\n}\n\ninterface QueryRowState {\n  textEditModeEnabled: boolean;\n}\n\n// Empty function to override blur execution on query field\nconst noopOnBlur = () => {};\n\nexport class QueryRow extends PureComponent<QueryRowProps, QueryRowState> {\n  state: QueryRowState = {\n    textEditModeEnabled: false,\n  };\n\n  onRunQuery = () => {\n    const { exploreId } = this.props;\n    this.props.runQueries(exploreId);\n  };\n\n  onChange = (query: DataQuery, override?: boolean) => {\n    const { datasourceInstance, exploreId, index } = this.props;\n    this.props.changeQuery(exploreId, query, index, override);\n    if (query && !override && datasourceInstance.getHighlighterExpression && index === 0) {\n      // Live preview of log search matches. Only use on first row for now\n      this.updateLogsHighlights(query);\n    }\n  };\n\n  onClickToggleDisabled = () => {\n    const { exploreId, index, query } = this.props;\n    const newQuery = {\n      ...query,\n      hide: !query.hide,\n    };\n    this.props.changeQuery(exploreId, newQuery, index, true);\n  };\n\n  onClickRemoveButton = () => {\n    const { exploreId, index } = this.props;\n    this.props.removeQueryRowAction({ exploreId, index });\n    this.props.runQueries(exploreId);\n  };\n\n  onClickToggleEditorMode = () => {\n    this.setState({ textEditModeEnabled: !this.state.textEditModeEnabled });\n  };\n\n  setReactQueryEditor = () => {\n    const { datasourceInstance } = this.props;\n    let QueryEditor;\n\n    // TODO:unification\n    if (datasourceInstance.components?.ExploreMetricsQueryField) {\n      QueryEditor = datasourceInstance.components.ExploreMetricsQueryField;\n    } else if (datasourceInstance.components?.ExploreLogsQueryField) {\n      QueryEditor = datasourceInstance.components.ExploreLogsQueryField;\n    } else if (datasourceInstance.components?.ExploreQueryField) {\n      QueryEditor = datasourceInstance.components.ExploreQueryField;\n    } else {\n      QueryEditor = datasourceInstance.components?.QueryEditor;\n    }\n    return QueryEditor;\n  };\n\n  renderQueryEditor = () => {\n    const { datasourceInstance, history, query, exploreEvents, range, queryResponse, exploreId } = this.props;\n\n    const queryErrors = queryResponse.error && queryResponse.error.refId === query.refId ? [queryResponse.error] : [];\n\n    const ReactQueryEditor = this.setReactQueryEditor();\n\n    let QueryEditor: JSX.Element;\n    if (ReactQueryEditor) {\n      QueryEditor = (\n        <ReactQueryEditor\n          datasource={datasourceInstance}\n          query={query}\n          history={history}\n          onRunQuery={this.onRunQuery}\n          onBlur={noopOnBlur}\n          onChange={this.onChange}\n          data={queryResponse}\n          range={range}\n          exploreId={exploreId}\n        />\n      );\n    } else {\n      QueryEditor = (\n        <AngularQueryEditor\n          error={queryErrors}\n          datasource={datasourceInstance}\n          onQueryChange={this.onChange}\n          onExecuteQuery={this.onRunQuery}\n          initialQuery={query}\n          exploreEvents={exploreEvents}\n          range={range}\n          textEditModeEnabled={this.state.textEditModeEnabled}\n        />\n      );\n    }\n\n    const DatasourceCheatsheet = datasourceInstance.components?.QueryEditorHelp;\n    return (\n      <>\n        {QueryEditor}\n        {DatasourceCheatsheet && (\n          <HelpToggle>\n            <DatasourceCheatsheet onClickExample={(query) => this.onChange(query)} datasource={datasourceInstance} />\n          </HelpToggle>\n        )}\n      </>\n    );\n  };\n\n  updateLogsHighlights = debounce((value: DataQuery) => {\n    const { datasourceInstance } = this.props;\n    if (datasourceInstance.getHighlighterExpression) {\n      const { exploreId } = this.props;\n      const expressions = datasourceInstance.getHighlighterExpression(value);\n      this.props.highlightLogsExpressionAction({ exploreId, expressions });\n    }\n  }, 500);\n\n  render() {\n    const { datasourceInstance, query, queryResponse, latency } = this.props;\n\n    const canToggleEditorModes = has(datasourceInstance, 'components.QueryCtrl.prototype.toggleEditorMode');\n    const isNotStarted = queryResponse.state === LoadingState.NotStarted;\n    const queryErrors = queryResponse.error && queryResponse.error.refId === query.refId ? [queryResponse.error] : [];\n\n    return (\n      <>\n        <div className=\"query-row\" aria-label={selectors.components.QueryEditorRows.rows}>\n          <div className=\"query-row-field flex-shrink-1\">{this.renderQueryEditor()}</div>\n          <QueryRowActions\n            canToggleEditorModes={canToggleEditorModes}\n            isDisabled={query.hide}\n            isNotStarted={isNotStarted}\n            latency={latency}\n            onClickToggleEditorMode={this.onClickToggleEditorMode}\n            onClickToggleDisabled={this.onClickToggleDisabled}\n            onClickRemoveButton={this.onClickRemoveButton}\n          />\n        </div>\n        {queryErrors.length > 0 && <ErrorContainer queryError={queryErrors[0]} />}\n      </>\n    );\n  }\n}\n\nfunction mapStateToProps(state: StoreState, { exploreId, index }: QueryRowProps) {\n  const explore = state.explore;\n  const item: ExploreItemState = explore[exploreId];\n  const { datasourceInstance, history, queries, range, absoluteRange, queryResponse, latency } = item;\n  const query = queries[index];\n\n  return {\n    datasourceInstance,\n    history,\n    query,\n    range,\n    absoluteRange,\n    queryResponse,\n    latency,\n  };\n}\n\nconst mapDispatchToProps = {\n  changeQuery,\n  highlightLogsExpressionAction,\n  modifyQueries,\n  removeQueryRowAction,\n  runQueries,\n};\n\nexport default hot(module)(\n  connect(mapStateToProps, mapDispatchToProps)(QueryRow) as React.ComponentType<PropsFromParent>\n);\n","/* eslint-env node, browser */\n'use strict'\n/**\n * called to set a 1 second timeout on the specified sequence\n *\n * this is so after each key press in the sequence you have 1 second\n * to press the next key before you have to start over\n *\n * @returns void\n */\nmodule.exports = function () {\n  var self = this\n\n  clearTimeout(self.resetTimer)\n  self.resetTimer = setTimeout(\n    function () {\n      self.resetSequences()\n    },\n    1000\n  )\n}\n","/* eslint-env node, browser */\n'use strict'\n\n/**\n * resets the library back to its initial state. This is useful\n * if you want to clear out the current keyboard shortcuts and bind\n * new ones - for example if you switch to another page\n *\n * @returns void\n */\nmodule.exports = function () {\n  var self = this\n  self.callbacks = {}\n  self.directMap = {}\n  return this\n}\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport _get from 'lodash/get';\n\nimport EUpdateTypes from './EUpdateTypes';\nimport { DraggableBounds, DraggingUpdate } from './types';\nimport { TNil } from '../../types';\n\nconst LEFT_MOUSE_BUTTON = 0;\n\ntype DraggableManagerOptions = {\n  getBounds: (tag: string | TNil) => DraggableBounds;\n  onMouseEnter?: (update: DraggingUpdate) => void;\n  onMouseLeave?: (update: DraggingUpdate) => void;\n  onMouseMove?: (update: DraggingUpdate) => void;\n  onDragStart?: (update: DraggingUpdate) => void;\n  onDragMove?: (update: DraggingUpdate) => void;\n  onDragEnd?: (update: DraggingUpdate) => void;\n  resetBoundsOnResize?: boolean;\n  tag?: string;\n};\n\nexport default class DraggableManager {\n  // cache the last known DraggableBounds (invalidate via `#resetBounds())\n  _bounds: DraggableBounds | TNil;\n  _isDragging: boolean;\n  // optional callbacks for various dragging events\n  _onMouseEnter: ((update: DraggingUpdate) => void) | TNil;\n  _onMouseLeave: ((update: DraggingUpdate) => void) | TNil;\n  _onMouseMove: ((update: DraggingUpdate) => void) | TNil;\n  _onDragStart: ((update: DraggingUpdate) => void) | TNil;\n  _onDragMove: ((update: DraggingUpdate) => void) | TNil;\n  _onDragEnd: ((update: DraggingUpdate) => void) | TNil;\n  // whether to reset the bounds on window resize\n  _resetBoundsOnResize: boolean;\n\n  /**\n   * Get the `DraggableBounds` for the current drag. The returned value is\n   * cached until either `#resetBounds()` is called or the window is resized\n   * (assuming `_resetBoundsOnResize` is `true`). The `DraggableBounds` defines\n   * the range the current drag can span to. It also establishes the left offset\n   * to adjust `clientX` by (from the `MouseEvent`s).\n   */\n  getBounds: (tag: string | TNil) => DraggableBounds;\n\n  // convenience data\n  tag: string | TNil;\n\n  // handlers for integration with DOM elements\n  handleMouseEnter: (event: React.MouseEvent<any>) => void;\n  handleMouseMove: (event: React.MouseEvent<any>) => void;\n  handleMouseLeave: (event: React.MouseEvent<any>) => void;\n  handleMouseDown: (event: React.MouseEvent<any>) => void;\n\n  constructor({ getBounds, tag, resetBoundsOnResize = true, ...rest }: DraggableManagerOptions) {\n    this.handleMouseDown = this._handleDragEvent;\n    this.handleMouseEnter = this._handleMinorMouseEvent;\n    this.handleMouseMove = this._handleMinorMouseEvent;\n    this.handleMouseLeave = this._handleMinorMouseEvent;\n\n    this.getBounds = getBounds;\n    this.tag = tag;\n    this._isDragging = false;\n    this._bounds = undefined;\n    this._resetBoundsOnResize = Boolean(resetBoundsOnResize);\n    if (this._resetBoundsOnResize) {\n      window.addEventListener('resize', this.resetBounds);\n    }\n    this._onMouseEnter = rest.onMouseEnter;\n    this._onMouseLeave = rest.onMouseLeave;\n    this._onMouseMove = rest.onMouseMove;\n    this._onDragStart = rest.onDragStart;\n    this._onDragMove = rest.onDragMove;\n    this._onDragEnd = rest.onDragEnd;\n  }\n\n  _getBounds(): DraggableBounds {\n    if (!this._bounds) {\n      this._bounds = this.getBounds(this.tag);\n    }\n    return this._bounds;\n  }\n\n  _getPosition(clientX: number) {\n    const { clientXLeft, maxValue, minValue, width } = this._getBounds();\n    let x = clientX - clientXLeft;\n    let value = x / width;\n    if (minValue != null && value < minValue) {\n      value = minValue;\n      x = minValue * width;\n    } else if (maxValue != null && value > maxValue) {\n      value = maxValue;\n      x = maxValue * width;\n    }\n    return { value, x };\n  }\n\n  _stopDragging() {\n    window.removeEventListener('mousemove', this._handleDragEvent);\n    window.removeEventListener('mouseup', this._handleDragEvent);\n    const style = _get(document, 'body.style');\n    if (style) {\n      style.userSelect = null;\n    }\n    this._isDragging = false;\n  }\n\n  isDragging() {\n    return this._isDragging;\n  }\n\n  dispose() {\n    if (this._isDragging) {\n      this._stopDragging();\n    }\n    if (this._resetBoundsOnResize) {\n      window.removeEventListener('resize', this.resetBounds);\n    }\n    this._bounds = undefined;\n    this._onMouseEnter = undefined;\n    this._onMouseLeave = undefined;\n    this._onMouseMove = undefined;\n    this._onDragStart = undefined;\n    this._onDragMove = undefined;\n    this._onDragEnd = undefined;\n  }\n\n  resetBounds = () => {\n    this._bounds = undefined;\n  };\n\n  _handleMinorMouseEvent = (event: React.MouseEvent<any>) => {\n    const { button, clientX, type: eventType } = event;\n    if (this._isDragging || button !== LEFT_MOUSE_BUTTON) {\n      return;\n    }\n    let type: EUpdateTypes | null = null;\n    let handler: ((update: DraggingUpdate) => void) | TNil;\n    if (eventType === 'mouseenter') {\n      type = EUpdateTypes.MouseEnter;\n      handler = this._onMouseEnter;\n    } else if (eventType === 'mouseleave') {\n      type = EUpdateTypes.MouseLeave;\n      handler = this._onMouseLeave;\n    } else if (eventType === 'mousemove') {\n      type = EUpdateTypes.MouseMove;\n      handler = this._onMouseMove;\n    } else {\n      throw new Error(`invalid event type: ${eventType}`);\n    }\n    if (!handler) {\n      return;\n    }\n    const { value, x } = this._getPosition(clientX);\n    handler({\n      event,\n      type,\n      value,\n      x,\n      manager: this,\n      tag: this.tag,\n    });\n  };\n\n  _handleDragEvent = (event: MouseEvent | React.MouseEvent<any>) => {\n    const { button, clientX, type: eventType } = event;\n    let type: EUpdateTypes | null = null;\n    let handler: ((update: DraggingUpdate) => void) | TNil;\n    if (eventType === 'mousedown') {\n      if (this._isDragging || button !== LEFT_MOUSE_BUTTON) {\n        return;\n      }\n      window.addEventListener('mousemove', this._handleDragEvent);\n      window.addEventListener('mouseup', this._handleDragEvent);\n      const style = _get(document, 'body.style');\n      if (style) {\n        style.userSelect = 'none';\n      }\n      this._isDragging = true;\n\n      type = EUpdateTypes.DragStart;\n      handler = this._onDragStart;\n    } else if (eventType === 'mousemove') {\n      if (!this._isDragging) {\n        return;\n      }\n      type = EUpdateTypes.DragMove;\n      handler = this._onDragMove;\n    } else if (eventType === 'mouseup') {\n      if (!this._isDragging) {\n        return;\n      }\n      this._stopDragging();\n      type = EUpdateTypes.DragEnd;\n      handler = this._onDragEnd;\n    } else {\n      throw new Error(`invalid event type: ${eventType}`);\n    }\n    if (!handler) {\n      return;\n    }\n    const { value, x } = this._getPosition(clientX);\n    handler({\n      event,\n      type,\n      value,\n      x,\n      manager: this,\n      tag: this.tag,\n    });\n  };\n}\n","/* eslint-env node, browser */\n'use strict'\n\n/**\n* should we stop this event before firing off callbacks\n*\n* @param {Event} e\n* @param {Element} element\n* @return {boolean}\n*/\nmodule.exports = function (e, element) {\n  // if the element has the class \"combokeys\" then no need to stop\n  if ((' ' + element.className + ' ').indexOf(' combokeys ') > -1) {\n    return false\n  }\n\n  var tagName = element.tagName.toLowerCase()\n\n  // stop for input, select, and textarea\n  return tagName === 'input' || tagName === 'select' || tagName === 'textarea' || element.isContentEditable\n}\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport deepFreeze from 'deep-freeze';\n\nimport { FALLBACK_DAG_MAX_NUM_SERVICES } from './index';\n\nexport default deepFreeze(\n  Object.defineProperty(\n    {\n      archiveEnabled: false,\n      dependencies: {\n        dagMaxNumServices: FALLBACK_DAG_MAX_NUM_SERVICES,\n        menuEnabled: true,\n      },\n      linkPatterns: [],\n      menu: [\n        {\n          label: 'About Jaeger',\n          items: [\n            {\n              label: 'GitHub',\n              url: 'https://github.com/uber/jaeger',\n            },\n            {\n              label: 'Docs',\n              url: 'http://jaeger.readthedocs.io/en/latest/',\n            },\n            {\n              label: 'Twitter',\n              url: 'https://twitter.com/JaegerTracing',\n            },\n            {\n              label: 'Discussion Group',\n              url: 'https://groups.google.com/forum/#!forum/jaeger-tracing',\n            },\n            {\n              label: 'Gitter.im',\n              url: 'https://gitter.im/jaegertracing/Lobby',\n            },\n            {\n              label: 'Blog',\n              url: 'https://medium.com/jaegertracing/',\n            },\n          ],\n        },\n      ],\n      search: {\n        maxLookback: {\n          label: '2 Days',\n          value: '2d',\n        },\n        maxLimit: 1500,\n      },\n      tracking: {\n        gaID: null,\n        trackErrors: true,\n      },\n    },\n    // fields that should be individually merged vs wholesale replaced\n    '__mergeFields',\n    { value: ['dependencies', 'search', 'tracking'] }\n  )\n);\n\nexport const deprecations = [\n  {\n    formerKey: 'dependenciesMenuEnabled',\n    currentKey: 'dependencies.menuEnabled',\n  },\n  {\n    formerKey: 'gaTrackingID',\n    currentKey: 'tracking.gaID',\n  },\n];\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport _get from 'lodash/get';\n\nimport defaultConfig from '../../constants/default-config';\n\n/**\n * Merge the embedded config from the query service (if present) with the\n * default config from `../../constants/default-config`.\n */\nexport default function getConfig() {\n  return defaultConfig;\n}\n\nexport function getConfigValue(path: string) {\n  return _get(getConfig(), path);\n}\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { IconButton } from '@grafana/ui';\nimport { css } from 'emotion';\nimport React from 'react';\nimport { createStyle } from '../../Theme';\n\nconst getStyles = createStyle(() => {\n  return {\n    TimelineCollapser: css`\n      align-items: center;\n      display: flex;\n      flex: none;\n      justify-content: center;\n      margin-right: 0.5rem;\n    `,\n  };\n});\n\ntype CollapserProps = {\n  onCollapseAll: () => void;\n  onCollapseOne: () => void;\n  onExpandOne: () => void;\n  onExpandAll: () => void;\n};\n\nexport function TimelineCollapser(props: CollapserProps) {\n  const { onExpandAll, onExpandOne, onCollapseAll, onCollapseOne } = props;\n  const styles = getStyles();\n  return (\n    <div className={styles.TimelineCollapser} data-test-id=\"TimelineCollapser\">\n      <IconButton tooltip=\"Expand +1\" size=\"xl\" tooltipPlacement=\"top\" name=\"angle-down\" onClick={onExpandOne} />\n      <IconButton tooltip=\"Collapse +1\" size=\"xl\" tooltipPlacement=\"top\" name=\"angle-right\" onClick={onCollapseOne} />\n      <IconButton\n        tooltip=\"Expand All\"\n        size=\"xl\"\n        tooltipPlacement=\"top\"\n        name=\"angle-double-down\"\n        onClick={onExpandAll}\n      />\n      <IconButton\n        tooltip=\"Collapse All\"\n        size=\"xl\"\n        tooltipPlacement=\"top\"\n        name=\"angle-double-right\"\n        onClick={onCollapseAll}\n      />\n    </div>\n  );\n}\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as React from 'react';\nimport { css } from 'emotion';\nimport cx from 'classnames';\n\nimport { TNil } from '../../types';\nimport DraggableManager, { DraggableBounds, DraggingUpdate } from '../../utils/DraggableManager';\nimport { createStyle } from '../../Theme';\n\nexport const getStyles = createStyle(() => {\n  return {\n    TimelineColumnResizer: css`\n      left: 0;\n      position: absolute;\n      right: 0;\n      top: 0;\n    `,\n    wrapper: css`\n      bottom: 0;\n      position: absolute;\n      top: 0;\n    `,\n    dragger: css`\n      border-left: 2px solid transparent;\n      cursor: col-resize;\n      height: 5000px;\n      margin-left: -1px;\n      position: absolute;\n      top: 0;\n      width: 1px;\n      z-index: 10;\n      &:hover {\n        border-left: 2px solid rgba(0, 0, 0, 0.3);\n      }\n      &::before {\n        position: absolute;\n        top: 0;\n        bottom: 0;\n        left: -8px;\n        right: 0;\n        content: ' ';\n      }\n    `,\n    draggerDragging: css`\n      background: rgba(136, 0, 136, 0.05);\n      width: unset;\n      &::before {\n        left: -2000px;\n        right: -2000px;\n      }\n    `,\n    draggerDraggingLeft: css`\n      border-left: 2px solid #808;\n      border-right: 1px solid #999;\n    `,\n    draggerDraggingRight: css`\n      border-left: 1px solid #999;\n      border-right: 2px solid #808;\n    `,\n    gripIcon: css`\n      position: absolute;\n      top: 0;\n      bottom: 0;\n      &::before,\n      &::after {\n        border-right: 1px solid #ccc;\n        content: ' ';\n        height: 9px;\n        position: absolute;\n        right: 9px;\n        top: 25px;\n      }\n      &::after {\n        right: 5px;\n      }\n    `,\n    gripIconDragging: css`\n      &::before,\n      &::after {\n        border-right: 1px solid rgba(136, 0, 136, 0.5);\n      }\n    `,\n  };\n});\n\ntype TimelineColumnResizerProps = {\n  min: number;\n  max: number;\n  onChange: (newSize: number) => void;\n  position: number;\n  columnResizeHandleHeight: number;\n};\n\ntype TimelineColumnResizerState = {\n  dragPosition: number | TNil;\n};\n\nexport default class TimelineColumnResizer extends React.PureComponent<\n  TimelineColumnResizerProps,\n  TimelineColumnResizerState\n> {\n  state: TimelineColumnResizerState;\n\n  _dragManager: DraggableManager;\n  _rootElm: Element | TNil;\n\n  constructor(props: TimelineColumnResizerProps) {\n    super(props);\n    this._dragManager = new DraggableManager({\n      getBounds: this._getDraggingBounds,\n      onDragEnd: this._handleDragEnd,\n      onDragMove: this._handleDragUpdate,\n      onDragStart: this._handleDragUpdate,\n    });\n    this._rootElm = undefined;\n    this.state = {\n      dragPosition: null,\n    };\n  }\n\n  componentWillUnmount() {\n    this._dragManager.dispose();\n  }\n\n  _setRootElm = (elm: Element | TNil) => {\n    this._rootElm = elm;\n  };\n\n  _getDraggingBounds = (): DraggableBounds => {\n    if (!this._rootElm) {\n      throw new Error('invalid state');\n    }\n    const { left: clientXLeft, width } = this._rootElm.getBoundingClientRect();\n    const { min, max } = this.props;\n    return {\n      clientXLeft,\n      width,\n      maxValue: max,\n      minValue: min,\n    };\n  };\n\n  _handleDragUpdate = ({ value }: DraggingUpdate) => {\n    this.setState({ dragPosition: value });\n  };\n\n  _handleDragEnd = ({ manager, value }: DraggingUpdate) => {\n    manager.resetBounds();\n    this.setState({ dragPosition: null });\n    this.props.onChange(value);\n  };\n\n  render() {\n    let left;\n    let draggerStyle: React.CSSProperties;\n    const { position, columnResizeHandleHeight } = this.props;\n    const { dragPosition } = this.state;\n    left = `${position * 100}%`;\n    const gripStyle = { left };\n    let isDraggingLeft = false;\n    let isDraggingRight = false;\n    const styles = getStyles();\n\n    if (this._dragManager.isDragging() && this._rootElm && dragPosition != null) {\n      isDraggingLeft = dragPosition < position;\n      isDraggingRight = dragPosition > position;\n      left = `${dragPosition * 100}%`;\n      // Draw a highlight from the current dragged position back to the original\n      // position, e.g. highlight the change. Draw the highlight via `left` and\n      // `right` css styles (simpler than using `width`).\n      const draggerLeft = `${Math.min(position, dragPosition) * 100}%`;\n      // subtract 1px for draggerRight to deal with the right border being off\n      // by 1px when dragging left\n      const draggerRight = `calc(${(1 - Math.max(position, dragPosition)) * 100}% - 1px)`;\n      draggerStyle = { left: draggerLeft, right: draggerRight };\n    } else {\n      draggerStyle = gripStyle;\n    }\n    draggerStyle.height = columnResizeHandleHeight;\n\n    const isDragging = isDraggingLeft || isDraggingRight;\n    return (\n      <div className={styles.TimelineColumnResizer} ref={this._setRootElm} data-test-id=\"TimelineColumnResizer\">\n        <div\n          className={cx(styles.gripIcon, isDragging && styles.gripIconDragging)}\n          style={gripStyle}\n          data-test-id=\"TimelineColumnResizer--gripIcon\"\n        />\n        <div\n          aria-hidden\n          className={cx(\n            styles.dragger,\n            isDragging && styles.draggerDragging,\n            isDraggingRight && styles.draggerDraggingRight,\n            isDraggingLeft && styles.draggerDraggingLeft\n          )}\n          onMouseDown={this._dragManager.handleMouseDown}\n          style={draggerStyle}\n          data-test-id=\"TimelineColumnResizer--dragger\"\n        />\n      </div>\n    );\n  }\n}\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as React from 'react';\nimport { css, cx } from 'emotion';\n\nimport { TUpdateViewRangeTimeFunction, ViewRangeTime, ViewRangeTimeUpdate } from '../types';\nimport { TNil } from '../../types';\nimport DraggableManager, { DraggableBounds, DraggingUpdate } from '../../utils/DraggableManager';\nimport { createStyle } from '../../Theme';\n\n// exported for testing\nexport const getStyles = createStyle(() => {\n  return {\n    TimelineViewingLayer: css`\n      label: TimelineViewingLayer;\n      bottom: 0;\n      cursor: vertical-text;\n      left: 0;\n      position: absolute;\n      right: 0;\n      top: 0;\n    `,\n    TimelineViewingLayerCursorGuide: css`\n      label: TimelineViewingLayerCursorGuide;\n      position: absolute;\n      top: 0;\n      bottom: 0;\n      left: 0;\n      width: 1px;\n      background-color: red;\n    `,\n    TimelineViewingLayerDragged: css`\n      label: TimelineViewingLayerDragged;\n      position: absolute;\n      top: 0;\n      bottom: 0;\n    `,\n    TimelineViewingLayerDraggedDraggingLeft: css`\n      label: TimelineViewingLayerDraggedDraggingLeft;\n      border-left: 1px solid;\n    `,\n    TimelineViewingLayerDraggedDraggingRight: css`\n      label: TimelineViewingLayerDraggedDraggingRight;\n      border-right: 1px solid;\n    `,\n    TimelineViewingLayerDraggedShiftDrag: css`\n      label: TimelineViewingLayerDraggedShiftDrag;\n      background-color: rgba(68, 68, 255, 0.2);\n      border-color: #44f;\n    `,\n    TimelineViewingLayerDraggedReframeDrag: css`\n      label: TimelineViewingLayerDraggedReframeDrag;\n      background-color: rgba(255, 68, 68, 0.2);\n      border-color: #f44;\n    `,\n    TimelineViewingLayerFullOverlay: css`\n      label: TimelineViewingLayerFullOverlay;\n      bottom: 0;\n      cursor: col-resize;\n      left: 0;\n      position: fixed;\n      right: 0;\n      top: 0;\n      user-select: none;\n    `,\n  };\n});\n\ntype TimelineViewingLayerProps = {\n  /**\n   * `boundsInvalidator` is an arbitrary prop that lets the component know the\n   * bounds for dragging need to be recalculated. In practice, the name column\n   * width serves fine for this.\n   */\n  boundsInvalidator: any | null | undefined;\n  updateNextViewRangeTime: (update: ViewRangeTimeUpdate) => void;\n  updateViewRangeTime: TUpdateViewRangeTimeFunction;\n  viewRangeTime: ViewRangeTime;\n};\n\ntype TDraggingLeftLayout = {\n  isDraggingLeft: boolean;\n  left: string;\n  width: string;\n};\n\ntype TOutOfViewLayout = {\n  isOutOfView: true;\n};\n\nfunction isOutOfView(layout: TDraggingLeftLayout | TOutOfViewLayout): layout is TOutOfViewLayout {\n  return Reflect.has(layout, 'isOutOfView');\n}\n\n/**\n * Map from a sub range to the greater view range, e.g, when the view range is\n * the middle half ([0.25, 0.75]), a value of 0.25 befomes 3/8.\n * @returns {number}\n */\nfunction mapFromViewSubRange(viewStart: number, viewEnd: number, value: number) {\n  return viewStart + value * (viewEnd - viewStart);\n}\n\n/**\n * Map a value from the view ([0, 1]) to a sub-range, e.g, when the view range is\n * the middle half ([0.25, 0.75]), a value of 3/8 becomes 1/4.\n * @returns {number}\n */\nfunction mapToViewSubRange(viewStart: number, viewEnd: number, value: number) {\n  return (value - viewStart) / (viewEnd - viewStart);\n}\n\n/**\n * Get the layout for the \"next\" view range time, e.g. the difference from the\n * drag start and the drag end. This is driven by `shiftStart`, `shiftEnd` or\n * `reframe` on `props.viewRangeTime`, not by the current state of the\n * component. So, it reflects in-progress dragging from the span minimap.\n */\nfunction getNextViewLayout(start: number, position: number): TDraggingLeftLayout | TOutOfViewLayout {\n  let [left, right] = start < position ? [start, position] : [position, start];\n  if (left >= 1 || right <= 0) {\n    return { isOutOfView: true };\n  }\n  if (left < 0) {\n    left = 0;\n  }\n  if (right > 1) {\n    right = 1;\n  }\n  return {\n    isDraggingLeft: start > position,\n    left: `${left * 100}%`,\n    width: `${(right - left) * 100}%`,\n  };\n}\n\n/**\n * Render the visual indication of the \"next\" view range.\n */\nfunction getMarkers(viewStart: number, viewEnd: number, from: number, to: number, isShift: boolean): React.ReactNode {\n  const mappedFrom = mapToViewSubRange(viewStart, viewEnd, from);\n  const mappedTo = mapToViewSubRange(viewStart, viewEnd, to);\n  const layout = getNextViewLayout(mappedFrom, mappedTo);\n  if (isOutOfView(layout)) {\n    return null;\n  }\n  const { isDraggingLeft, left, width } = layout;\n  const styles = getStyles();\n  const cls = cx({\n    [styles.TimelineViewingLayerDraggedDraggingRight]: !isDraggingLeft,\n    [styles.TimelineViewingLayerDraggedReframeDrag]: !isShift,\n    [styles.TimelineViewingLayerDraggedShiftDrag]: isShift,\n  });\n  return (\n    <div\n      className={cx(styles.TimelineViewingLayerDragged, styles.TimelineViewingLayerDraggedDraggingLeft, cls)}\n      style={{ left, width }}\n      data-test-id=\"Dragged\"\n    />\n  );\n}\n\n/**\n * `TimelineViewingLayer` is rendered on top of the TimelineHeaderRow time\n * labels; it handles showing the current view range and handles mouse UX for\n * modifying it.\n */\nexport default class TimelineViewingLayer extends React.PureComponent<TimelineViewingLayerProps> {\n  _draggerReframe: DraggableManager;\n  _root: Element | TNil;\n\n  constructor(props: TimelineViewingLayerProps) {\n    super(props);\n    this._draggerReframe = new DraggableManager({\n      getBounds: this._getDraggingBounds,\n      onDragEnd: this._handleReframeDragEnd,\n      onDragMove: this._handleReframeDragUpdate,\n      onDragStart: this._handleReframeDragUpdate,\n      onMouseLeave: this._handleReframeMouseLeave,\n      onMouseMove: this._handleReframeMouseMove,\n    });\n    this._root = undefined;\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps: TimelineViewingLayerProps) {\n    const { boundsInvalidator } = this.props;\n    if (boundsInvalidator !== nextProps.boundsInvalidator) {\n      this._draggerReframe.resetBounds();\n    }\n  }\n\n  componentWillUnmount() {\n    this._draggerReframe.dispose();\n  }\n\n  _setRoot = (elm: Element | TNil) => {\n    this._root = elm;\n  };\n\n  _getDraggingBounds = (): DraggableBounds => {\n    if (!this._root) {\n      throw new Error('invalid state');\n    }\n    const { left: clientXLeft, width } = this._root.getBoundingClientRect();\n    return { clientXLeft, width };\n  };\n\n  _handleReframeMouseMove = ({ value }: DraggingUpdate) => {\n    const [viewStart, viewEnd] = this.props.viewRangeTime.current;\n    const cursor = mapFromViewSubRange(viewStart, viewEnd, value);\n    this.props.updateNextViewRangeTime({ cursor });\n  };\n\n  _handleReframeMouseLeave = () => {\n    this.props.updateNextViewRangeTime({ cursor: undefined });\n  };\n\n  _handleReframeDragUpdate = ({ value }: DraggingUpdate) => {\n    const { current, reframe } = this.props.viewRangeTime;\n    const [viewStart, viewEnd] = current;\n    const shift = mapFromViewSubRange(viewStart, viewEnd, value);\n    const anchor = reframe ? reframe.anchor : shift;\n    const update = { reframe: { anchor, shift } };\n    this.props.updateNextViewRangeTime(update);\n  };\n\n  _handleReframeDragEnd = ({ manager, value }: DraggingUpdate) => {\n    const { current, reframe } = this.props.viewRangeTime;\n    const [viewStart, viewEnd] = current;\n    const shift = mapFromViewSubRange(viewStart, viewEnd, value);\n    const anchor = reframe ? reframe.anchor : shift;\n    const [start, end] = shift < anchor ? [shift, anchor] : [anchor, shift];\n    manager.resetBounds();\n    this.props.updateViewRangeTime(start, end, 'timeline-header');\n  };\n\n  render() {\n    const { viewRangeTime } = this.props;\n    const { current, cursor, reframe, shiftEnd, shiftStart } = viewRangeTime;\n    const [viewStart, viewEnd] = current;\n    const haveNextTimeRange = reframe != null || shiftEnd != null || shiftStart != null;\n    let cusrorPosition: string | TNil;\n    if (!haveNextTimeRange && cursor != null && cursor >= viewStart && cursor <= viewEnd) {\n      cusrorPosition = `${mapToViewSubRange(viewStart, viewEnd, cursor) * 100}%`;\n    }\n    const styles = getStyles();\n    return (\n      <div\n        aria-hidden\n        className={styles.TimelineViewingLayer}\n        ref={this._setRoot}\n        onMouseDown={this._draggerReframe.handleMouseDown}\n        onMouseLeave={this._draggerReframe.handleMouseLeave}\n        onMouseMove={this._draggerReframe.handleMouseMove}\n        data-test-id=\"TimelineViewingLayer\"\n      >\n        {cusrorPosition != null && (\n          <div\n            className={styles.TimelineViewingLayerCursorGuide}\n            style={{ left: cusrorPosition }}\n            data-test-id=\"TimelineViewingLayer--cursorGuide\"\n          />\n        )}\n        {reframe != null && getMarkers(viewStart, viewEnd, reframe.anchor, reframe.shift, false)}\n        {shiftEnd != null && getMarkers(viewStart, viewEnd, viewEnd, shiftEnd, true)}\n        {shiftStart != null && getMarkers(viewStart, viewEnd, viewStart, shiftStart, true)}\n      </div>\n    );\n  }\n}\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { TraceSpan } from '@grafana/data';\n\nexport type ViewedBoundsFunctionType = (start: number, end: number) => { start: number; end: number };\n/**\n * Given a range (`min`, `max`) and factoring in a zoom (`viewStart`, `viewEnd`)\n * a function is created that will find the position of a sub-range (`start`, `end`).\n * The calling the generated method will return the result as a `{ start, end }`\n * object with values ranging in [0, 1].\n *\n * @param  {number} min       The start of the outer range.\n * @param  {number} max       The end of the outer range.\n * @param  {number} viewStart The start of the zoom, on a range of [0, 1],\n *                            relative to the `min`, `max`.\n * @param  {number} viewEnd   The end of the zoom, on a range of [0, 1],\n *                            relative to the `min`, `max`.\n * @returns {(number, number) => Object} Created view bounds function\n */\nexport function createViewedBoundsFunc(viewRange: { min: number; max: number; viewStart: number; viewEnd: number }) {\n  const { min, max, viewStart, viewEnd } = viewRange;\n  const duration = max - min;\n  const viewMin = min + viewStart * duration;\n  const viewMax = max - (1 - viewEnd) * duration;\n  const viewWindow = viewMax - viewMin;\n\n  /**\n   * View bounds function\n   * @param  {number} start     The start of the sub-range.\n   * @param  {number} end       The end of the sub-range.\n   * @returns {Object}           The resultant range.\n   */\n  return (start: number, end: number) => ({\n    start: (start - viewMin) / viewWindow,\n    end: (end - viewMin) / viewWindow,\n  });\n}\n\n/**\n * Returns `true` if the `span` has a tag matching `key` = `value`.\n *\n * @param  {string} key   The tag key to match on.\n * @param  {any}    value The tag value to match.\n * @param  {{tags}} span  An object with a `tags` property of { key, value }\n *                        items.\n * @returns {boolean}      True if a match was found.\n */\nexport function spanHasTag(key: string, value: any, span: TraceSpan) {\n  if (!Array.isArray(span.tags) || !span.tags.length) {\n    return false;\n  }\n  return span.tags.some((tag) => tag.key === key && tag.value === value);\n}\n\nexport const isClientSpan = spanHasTag.bind(null, 'span.kind', 'client');\nexport const isServerSpan = spanHasTag.bind(null, 'span.kind', 'server');\n\nconst isErrorBool = spanHasTag.bind(null, 'error', true);\nconst isErrorStr = spanHasTag.bind(null, 'error', 'true');\nexport const isErrorSpan = (span: TraceSpan) => isErrorBool(span) || isErrorStr(span);\n\n/**\n * Returns `true` if at least one of the descendants of the `parentSpanIndex`\n * span contains an error tag.\n *\n * @param      {TraceSpan[]}   spans            The spans for a trace - should be\n *                                         sorted with children following parents.\n * @param      {number}   parentSpanIndex  The index of the parent span - only\n *                                         subsequent spans with depth less than\n *                                         the parent span will be checked.\n * @returns     {boolean}  Returns `true` if a descendant contains an error tag.\n */\nexport function spanContainsErredSpan(spans: TraceSpan[], parentSpanIndex: number) {\n  const { depth } = spans[parentSpanIndex];\n  let i = parentSpanIndex + 1;\n  for (; i < spans.length && spans[i].depth > depth; i++) {\n    if (isErrorSpan(spans[i])) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * Expects the first span to be the parent span.\n */\nexport function findServerChildSpan(spans: TraceSpan[]) {\n  if (spans.length <= 1 || !isClientSpan(spans[0])) {\n    return false;\n  }\n  const span = spans[0];\n  const spanChildDepth = span.depth + 1;\n  let i = 1;\n  while (i < spans.length && spans[i].depth === spanChildDepth) {\n    if (isServerSpan(spans[i])) {\n      return spans[i];\n    }\n    i++;\n  }\n  return null;\n}\n\nexport { formatDuration } from '../utils/date';\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as React from 'react';\nimport { css } from 'emotion';\nimport cx from 'classnames';\n\nimport { formatDuration } from './utils';\nimport { TNil } from '../types';\nimport { autoColor, createStyle, Theme, useTheme } from '../Theme';\n\nconst getStyles = createStyle((theme: Theme) => {\n  return {\n    Ticks: css`\n      label: Ticks;\n      pointer-events: none;\n    `,\n    TicksTick: css`\n      label: TicksTick;\n      position: absolute;\n      height: 100%;\n      width: 1px;\n      background: ${autoColor(theme, '#d8d8d8')};\n      &:last-child {\n        width: 0;\n      }\n    `,\n    TicksTickLabel: css`\n      label: TicksTickLabel;\n      left: 0.25rem;\n      position: absolute;\n    `,\n    TicksTickLabelEndAnchor: css`\n      label: TicksTickLabelEndAnchor;\n      left: initial;\n      right: 0.25rem;\n    `,\n  };\n});\n\ntype TicksProps = {\n  endTime?: number | TNil;\n  numTicks: number;\n  showLabels?: boolean | TNil;\n  startTime?: number | TNil;\n};\n\nexport default function Ticks(props: TicksProps) {\n  const { endTime, numTicks, showLabels, startTime } = props;\n\n  let labels: undefined | string[];\n  if (showLabels) {\n    labels = [];\n    const viewingDuration = (endTime || 0) - (startTime || 0);\n    for (let i = 0; i < numTicks; i++) {\n      const durationAtTick = (startTime || 0) + (i / (numTicks - 1)) * viewingDuration;\n      labels.push(formatDuration(durationAtTick));\n    }\n  }\n  const styles = getStyles(useTheme());\n  const ticks: React.ReactNode[] = [];\n  for (let i = 0; i < numTicks; i++) {\n    const portion = i / (numTicks - 1);\n    ticks.push(\n      <div\n        key={portion}\n        className={styles.TicksTick}\n        style={{\n          left: `${portion * 100}%`,\n        }}\n      >\n        {labels && (\n          <span className={cx(styles.TicksTickLabel, { [styles.TicksTickLabelEndAnchor]: portion >= 1 })}>\n            {labels[i]}\n          </span>\n        )}\n      </div>\n    );\n  }\n  return <div className={styles.Ticks}>{ticks}</div>;\n}\n\nTicks.defaultProps = {\n  endTime: null,\n  showLabels: null,\n  startTime: null,\n};\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as React from 'react';\nimport { css } from 'emotion';\nimport cx from 'classnames';\nimport { createStyle } from '../Theme';\nimport { ubRelative } from '../uberUtilityStyles';\n\nconst getStyles = createStyle(() => {\n  return {\n    flexRow: css`\n      display: flex;\n      flex: 0 1 auto;\n      flex-direction: row;\n    `,\n  };\n});\n\ntype TTimelineRowProps = {\n  children: React.ReactNode;\n  className?: string;\n};\n\ninterface TimelineRowCellProps extends React.HTMLAttributes<HTMLDivElement> {\n  children: React.ReactNode;\n  className?: string;\n  width: number;\n  style?: {};\n}\n\nexport default function TimelineRow(props: TTimelineRowProps) {\n  const { children, className = '', ...rest } = props;\n  const styles = getStyles();\n  return (\n    <div className={cx(styles.flexRow, className)} {...rest}>\n      {children}\n    </div>\n  );\n}\n\nTimelineRow.defaultProps = {\n  className: '',\n};\n\nexport function TimelineRowCell(props: TimelineRowCellProps) {\n  const { children, className = '', width, style, ...rest } = props;\n  const widthPercent = `${width * 100}%`;\n  const mergedStyle = { ...style, flexBasis: widthPercent, maxWidth: widthPercent };\n  return (\n    <div className={cx(ubRelative, className)} style={mergedStyle} {...(rest as any)}>\n      {children}\n    </div>\n  );\n}\n\nTimelineRowCell.defaultProps = { className: '', style: {} };\n\nTimelineRow.Cell = TimelineRowCell;\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as React from 'react';\nimport { css } from 'emotion';\nimport cx from 'classnames';\n\nimport { TimelineCollapser } from './TimelineCollapser';\nimport TimelineColumnResizer from './TimelineColumnResizer';\nimport TimelineViewingLayer from './TimelineViewingLayer';\nimport Ticks from '../Ticks';\nimport TimelineRow from '../TimelineRow';\nimport { TUpdateViewRangeTimeFunction, ViewRangeTime, ViewRangeTimeUpdate } from '../types';\nimport { autoColor, createStyle, Theme, useTheme } from '../../Theme';\nimport { ubFlex, ubPx2 } from '../../uberUtilityStyles';\n\nconst getStyles = createStyle((theme: Theme) => {\n  return {\n    TimelineHeaderRow: css`\n      label: TimelineHeaderRow;\n      background: ${autoColor(theme, '#ececec')};\n      border-bottom: 1px solid ${autoColor(theme, '#ccc')};\n      height: 38px;\n      line-height: 38px;\n      width: 100%;\n      z-index: 4;\n      position: relative;\n    `,\n    TimelineHeaderRowTitle: css`\n      label: TimelineHeaderRowTitle;\n      flex: 1;\n      overflow: hidden;\n      margin: 0;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n    `,\n    TimelineHeaderWrapper: css`\n      label: TimelineHeaderWrapper;\n      align-items: center;\n    `,\n  };\n});\n\ntype TimelineHeaderRowProps = {\n  duration: number;\n  nameColumnWidth: number;\n  numTicks: number;\n  onCollapseAll: () => void;\n  onCollapseOne: () => void;\n  onColummWidthChange: (width: number) => void;\n  onExpandAll: () => void;\n  onExpandOne: () => void;\n  updateNextViewRangeTime: (update: ViewRangeTimeUpdate) => void;\n  updateViewRangeTime: TUpdateViewRangeTimeFunction;\n  viewRangeTime: ViewRangeTime;\n  columnResizeHandleHeight: number;\n};\n\nexport default function TimelineHeaderRow(props: TimelineHeaderRowProps) {\n  const {\n    duration,\n    nameColumnWidth,\n    numTicks,\n    onCollapseAll,\n    onCollapseOne,\n    onColummWidthChange,\n    onExpandAll,\n    onExpandOne,\n    updateViewRangeTime,\n    updateNextViewRangeTime,\n    viewRangeTime,\n    columnResizeHandleHeight,\n  } = props;\n  const [viewStart, viewEnd] = viewRangeTime.current;\n  const styles = getStyles(useTheme());\n  return (\n    <TimelineRow className={styles.TimelineHeaderRow} data-test-id=\"TimelineHeaderRow\">\n      <TimelineRow.Cell className={cx(ubFlex, ubPx2, styles.TimelineHeaderWrapper)} width={nameColumnWidth}>\n        <h4 className={styles.TimelineHeaderRowTitle}>Service &amp; Operation</h4>\n        <TimelineCollapser\n          onCollapseAll={onCollapseAll}\n          onExpandAll={onExpandAll}\n          onCollapseOne={onCollapseOne}\n          onExpandOne={onExpandOne}\n        />\n      </TimelineRow.Cell>\n      <TimelineRow.Cell width={1 - nameColumnWidth}>\n        <TimelineViewingLayer\n          boundsInvalidator={nameColumnWidth}\n          updateNextViewRangeTime={updateNextViewRangeTime}\n          updateViewRangeTime={updateViewRangeTime}\n          viewRangeTime={viewRangeTime}\n        />\n        <Ticks numTicks={numTicks} startTime={viewStart * duration} endTime={viewEnd * duration} showLabels />\n      </TimelineRow.Cell>\n      <TimelineColumnResizer\n        columnResizeHandleHeight={columnResizeHandleHeight}\n        position={nameColumnWidth}\n        onChange={onColummWidthChange}\n        min={0.2}\n        max={0.85}\n      />\n    </TimelineRow>\n  );\n}\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\ntype THeightGetter = (index: number) => number;\n\n/**\n * Keeps track of the height and y-position for anything sequenctial where\n * y-positions follow one-after-another and can be derived from the height of\n * the prior entries. The height is known from an accessor function parameter\n * to the methods that require new knowledge the heights.\n *\n * @export\n * @class Positions\n */\nexport default class Positions {\n  /**\n   * Indicates how far past the explicitly required height or y-values should\n   * checked.\n   */\n  bufferLen: number;\n  dataLen: number;\n  heights: number[];\n  /**\n   * `lastI` keeps track of which values have already been visited. In many\n   * scenarios, values do not need to be revisited. But, revisiting is required\n   * when heights have changed, so `lastI` can be forced.\n   */\n  lastI: number;\n  ys: number[];\n\n  constructor(bufferLen: number) {\n    this.ys = [];\n    this.heights = [];\n    this.bufferLen = bufferLen;\n    this.dataLen = -1;\n    this.lastI = -1;\n  }\n\n  /**\n   * Used to make sure the length of y-values and heights is consistent with\n   * the context; in particular `lastI` needs to remain valid.\n   */\n  profileData(dataLength: number) {\n    if (dataLength !== this.dataLen) {\n      this.dataLen = dataLength;\n      this.ys.length = dataLength;\n      this.heights.length = dataLength;\n      if (this.lastI >= dataLength) {\n        this.lastI = dataLength - 1;\n      }\n    }\n  }\n\n  /**\n   * Calculate and save the heights and y-values, based on `heightGetter`, from\n   * `lastI` until the`max` index; the starting point (`lastI`) can be forced\n   * via the `forcedLastI` parameter.\n   * @param {number=} forcedLastI\n   */\n  calcHeights(max: number, heightGetter: THeightGetter, forcedLastI?: number) {\n    if (forcedLastI != null) {\n      this.lastI = forcedLastI;\n    }\n    let _max = max + this.bufferLen;\n    if (_max <= this.lastI) {\n      return;\n    }\n    if (_max >= this.heights.length) {\n      _max = this.heights.length - 1;\n    }\n    let i = this.lastI;\n    if (this.lastI === -1) {\n      i = 0;\n      this.ys[0] = 0;\n    }\n    while (i <= _max) {\n      // eslint-disable-next-line no-multi-assign\n      const h = (this.heights[i] = heightGetter(i));\n      this.ys[i + 1] = this.ys[i] + h;\n      i++;\n    }\n    this.lastI = _max;\n  }\n\n  /**\n   * Verify the height and y-values from `lastI` up to `yValue`.\n   */\n  calcYs(yValue: number, heightGetter: THeightGetter) {\n    while ((this.ys[this.lastI] == null || yValue > this.ys[this.lastI]) && this.lastI < this.dataLen - 1) {\n      this.calcHeights(this.lastI, heightGetter);\n    }\n  }\n\n  /**\n   * Get the latest height for index `_i`. If it's in new terretory\n   * (_i > lastI), find the heights (and y-values) leading up to it. If it's in\n   * known territory (_i <= lastI) and the height is different than what is\n   * known, recalculate subsequent y values, but don't confirm the heights of\n   * those items, just update based on the difference.\n   */\n  confirmHeight(_i: number, heightGetter: THeightGetter) {\n    let i = _i;\n    if (i > this.lastI) {\n      this.calcHeights(i, heightGetter);\n      return;\n    }\n    const h = heightGetter(i);\n    if (h === this.heights[i]) {\n      return;\n    }\n    const chg = h - this.heights[i];\n    this.heights[i] = h;\n    // shift the y positions by `chg` for all known y positions\n    while (++i <= this.lastI) {\n      this.ys[i] += chg;\n    }\n    if (this.ys[this.lastI + 1] != null) {\n      this.ys[this.lastI + 1] += chg;\n    }\n  }\n\n  /**\n   * Given a target y-value (`yValue`), find the closest index (in the `.ys`\n   * array) that is prior to the y-value; e.g. map from y-value to index in\n   * `.ys`.\n   */\n  findFloorIndex(yValue: number, heightGetter: THeightGetter): number {\n    this.calcYs(yValue, heightGetter);\n\n    let imin = 0;\n    let imax = this.lastI;\n\n    if (this.ys.length < 2 || yValue < this.ys[1]) {\n      return 0;\n    }\n    if (yValue > this.ys[imax]) {\n      return imax;\n    }\n    let i;\n    while (imin < imax) {\n      // eslint-disable-next-line no-bitwise\n      i = (imin + 0.5 * (imax - imin)) | 0;\n      if (yValue > this.ys[i]) {\n        if (yValue <= this.ys[i + 1]) {\n          return i;\n        }\n        imin = i;\n      } else if (yValue < this.ys[i]) {\n        if (yValue >= this.ys[i - 1]) {\n          return i - 1;\n        }\n        imax = i;\n      } else {\n        return i;\n      }\n    }\n    throw new Error(`unable to find floor index for y=${yValue}`);\n  }\n\n  /**\n   * Get the `y` and `height` for a given row.\n   *\n   * @returns {{ height: number, y: number }}\n   */\n  getRowPosition(index: number, heightGetter: THeightGetter) {\n    this.confirmHeight(index, heightGetter);\n    return {\n      height: this.heights[index],\n      y: this.ys[index],\n    };\n  }\n\n  /**\n   * Get the estimated height of the whole shebang by extrapolating based on\n   * the average known height.\n   */\n  getEstimatedHeight(): number {\n    const known = this.ys[this.lastI] + this.heights[this.lastI];\n    if (this.lastI >= this.dataLen - 1) {\n      // eslint-disable-next-line no-bitwise\n      return known | 0;\n    }\n    // eslint-disable-next-line no-bitwise\n    return ((known / (this.lastI + 1)) * this.heights.length) | 0;\n  }\n}\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as React from 'react';\n\nimport Positions from './Positions';\nimport { TNil } from '../../types';\n\ntype TWrapperProps = {\n  style: React.CSSProperties;\n  ref: (elm: HTMLDivElement) => void;\n  onScroll?: () => void;\n};\n\n/**\n * @typedef\n */\ntype TListViewProps = {\n  /**\n   * Number of elements in the list.\n   */\n  dataLength: number;\n  /**\n   * Convert item index (number) to the key (string). ListView uses both indexes\n   * and keys to handle the addition of new rows.\n   */\n  getIndexFromKey: (key: string) => number;\n  /**\n   * Convert item key (string) to the index (number). ListView uses both indexes\n   * and keys to handle the addition of new rows.\n   */\n  getKeyFromIndex: (index: number) => string;\n  /**\n   * Number of items to draw and add to the DOM, initially.\n   */\n  initialDraw?: number;\n  /**\n   * The parent provides fallback height measurements when there is not a\n   * rendered element to measure.\n   */\n  itemHeightGetter: (index: number, key: string) => number;\n  /**\n   * Function that renders an item; rendered items are added directly to the\n   * DOM, they are not wrapped in list item wrapper HTMLElement.\n   */\n  // itemRenderer(itemKey, style, i, attrs)\n  itemRenderer: (\n    itemKey: string,\n    style: Record<string, string | number>,\n    index: number,\n    attributes: Record<string, string>\n  ) => React.ReactNode;\n  /**\n   * `className` for the HTMLElement that holds the items.\n   */\n  itemsWrapperClassName?: string;\n  /**\n   * When adding new items to the DOM, this is the number of items to add above\n   * and below the current view. E.g. if list is 100 items and is scrolled\n   * halfway down (so items [46, 55] are in view), then when a new range of\n   * items is rendered, it will render items `46 - viewBuffer` to\n   * `55 + viewBuffer`.\n   */\n  viewBuffer: number;\n  /**\n   * The minimum number of items offscreen in either direction; e.g. at least\n   * `viewBuffer` number of items must be off screen above and below the\n   * current view, or more items will be rendered.\n   */\n  viewBufferMin: number;\n  /**\n   * When `true`, expect `_wrapperElm` to have `overflow: visible` and to,\n   * essentially, be tall to the point the entire page will will end up\n   * scrolling as a result of the ListView. Similar to react-virtualized\n   * window scroller.\n   *\n   * - Ref: https://bvaughn.github.io/react-virtualized/#/components/WindowScroller\n   * - Ref:https://github.com/bvaughn/react-virtualized/blob/497e2a1942529560681d65a9ef9f5e9c9c9a49ba/docs/WindowScroller.md\n   */\n  windowScroller?: boolean;\n  /**\n   * You need to pass in scrollElement when windowScroller is set to false.\n   * This element is responsible for tracking scrolling for lazy loading.\n   */\n  scrollElement?: Element;\n};\n\nconst DEFAULT_INITIAL_DRAW = 100;\n\n/**\n * Virtualized list view component, for the most part, only renders the window\n * of items that are in-view with some buffer before and after. Listens for\n * scroll events and updates which items are rendered. See react-virtualized\n * for a suite of components with similar, but generalized, functionality.\n * https://github.com/bvaughn/react-virtualized\n *\n * Note: Presently, ListView cannot be a PureComponent. This is because ListView\n * is sensitive to the underlying state that drives the list items, but it\n * doesn't actually receive that state. So, a render may still be required even\n * if ListView's props are unchanged.\n *\n * @export\n * @class ListView\n */\nexport default class ListView extends React.Component<TListViewProps> {\n  /**\n   * Keeps track of the height and y-value of items, by item index, in the\n   * ListView.\n   */\n  _yPositions: Positions;\n  /**\n   * Keep track of the known / measured heights of the rendered items; populated\n   * with values through observation and keyed on the item key, not the item\n   * index.\n   */\n  _knownHeights: Map<string, number>;\n  /**\n   * The start index of the items currently drawn.\n   */\n  _startIndexDrawn: number;\n  /**\n   * The end index of the items currently drawn.\n   */\n  _endIndexDrawn: number;\n  /**\n   * The start index of the items currently in view.\n   */\n  _startIndex: number;\n  /**\n   * The end index of the items currently in view.\n   */\n  _endIndex: number;\n  /**\n   * Height of the visual window, e.g. height of the scroller element.\n   */\n  _viewHeight: number;\n  /**\n   * `scrollTop` of the current scroll position.\n   */\n  _scrollTop: number;\n  /**\n   * Used to keep track of whether or not a re-calculation of what should be\n   * drawn / viewable has been scheduled.\n   */\n  _isScrolledOrResized: boolean;\n  /**\n   * If `windowScroller` is true, this notes how far down the page the scroller\n   * is located. (Note: repositioning and below-the-fold views are untested)\n   */\n  _htmlTopOffset: number;\n  _windowScrollListenerAdded: boolean;\n  _htmlElm: HTMLElement;\n  /**\n   * Element holding the scroller.\n   */\n  _wrapperElm: Element | TNil;\n  /**\n   * HTMLElement holding the rendered items.\n   */\n  _itemHolderElm: HTMLElement | TNil;\n\n  static defaultProps = {\n    initialDraw: DEFAULT_INITIAL_DRAW,\n    itemsWrapperClassName: '',\n    windowScroller: false,\n  };\n\n  constructor(props: TListViewProps) {\n    super(props);\n\n    this._yPositions = new Positions(200);\n    // _knownHeights is (item-key -> observed height) of list items\n    this._knownHeights = new Map();\n\n    this._startIndexDrawn = 2 ** 20;\n    this._endIndexDrawn = -(2 ** 20);\n    this._startIndex = 0;\n    this._endIndex = 0;\n    this._viewHeight = -1;\n    this._scrollTop = -1;\n    this._isScrolledOrResized = false;\n\n    this._htmlTopOffset = -1;\n    this._windowScrollListenerAdded = false;\n    // _htmlElm is only relevant if props.windowScroller is true\n    this._htmlElm = document.documentElement as any;\n    this._wrapperElm = undefined;\n    this._itemHolderElm = undefined;\n  }\n\n  componentDidMount() {\n    if (this.props.windowScroller) {\n      if (this._wrapperElm) {\n        const { top } = this._wrapperElm.getBoundingClientRect();\n        this._htmlTopOffset = top + this._htmlElm.scrollTop;\n      }\n      window.addEventListener('scroll', this._onScroll);\n      this._windowScrollListenerAdded = true;\n    } else {\n      // The wrapper element should be the one that handles the scrolling. Once we are not using scroll-canvas we can remove this.\n      this._wrapperElm = this.props.scrollElement;\n      this._wrapperElm?.addEventListener('scroll', this._onScroll);\n    }\n  }\n\n  componentDidUpdate() {\n    if (this._itemHolderElm) {\n      this._scanItemHeights();\n    }\n  }\n\n  componentWillUnmount() {\n    if (this._windowScrollListenerAdded) {\n      window.removeEventListener('scroll', this._onScroll);\n    } else {\n      this._wrapperElm?.removeEventListener('scroll', this._onScroll);\n    }\n  }\n\n  getViewHeight = () => this._viewHeight;\n\n  /**\n   * Get the index of the item at the bottom of the current view.\n   */\n  getBottomVisibleIndex = (): number => {\n    const bottomY = this._scrollTop + this._viewHeight;\n    return this._yPositions.findFloorIndex(bottomY, this._getHeight);\n  };\n\n  /**\n   * Get the index of the item at the top of the current view.\n   */\n  getTopVisibleIndex = (): number => this._yPositions.findFloorIndex(this._scrollTop, this._getHeight);\n\n  getRowPosition = (index: number): { height: number; y: number } =>\n    this._yPositions.getRowPosition(index, this._getHeight);\n\n  /**\n   * Scroll event listener that schedules a remeasuring of which items should be\n   * rendered.\n   */\n  _onScroll = () => {\n    if (!this._isScrolledOrResized) {\n      this._isScrolledOrResized = true;\n      window.requestAnimationFrame(this._positionList);\n    }\n  };\n\n  /**\n   * Returns true is the view height (scroll window) or scroll position have\n   * changed.\n   */\n  _isViewChanged() {\n    if (!this._wrapperElm) {\n      return false;\n    }\n    const useRoot = this.props.windowScroller;\n    const clientHeight = useRoot ? this._htmlElm.clientHeight : this._wrapperElm.clientHeight;\n    const scrollTop = useRoot ? this._htmlElm.scrollTop : this._wrapperElm.scrollTop;\n    return clientHeight !== this._viewHeight || scrollTop !== this._scrollTop;\n  }\n\n  /**\n   * Recalculate _startIndex and _endIndex, e.g. which items are in view.\n   */\n  _calcViewIndexes() {\n    const useRoot = this.props.windowScroller;\n    // funky if statement is to satisfy flow\n    if (!useRoot) {\n      /* istanbul ignore next */\n      if (!this._wrapperElm) {\n        this._viewHeight = -1;\n        this._startIndex = 0;\n        this._endIndex = 0;\n        return;\n      }\n      this._viewHeight = this._wrapperElm.clientHeight;\n      this._scrollTop = this._wrapperElm.scrollTop;\n    } else {\n      this._viewHeight = window.innerHeight - this._htmlTopOffset;\n      this._scrollTop = window.scrollY;\n    }\n    const yStart = this._scrollTop;\n    const yEnd = this._scrollTop + this._viewHeight;\n    this._startIndex = this._yPositions.findFloorIndex(yStart, this._getHeight);\n    this._endIndex = this._yPositions.findFloorIndex(yEnd, this._getHeight);\n  }\n\n  /**\n   * Checked to see if the currently rendered items are sufficient, if not,\n   * force an update to trigger more items to be rendered.\n   */\n  _positionList = () => {\n    this._isScrolledOrResized = false;\n    if (!this._wrapperElm) {\n      return;\n    }\n    this._calcViewIndexes();\n    // indexes drawn should be padded by at least props.viewBufferMin\n    const maxStart = this.props.viewBufferMin > this._startIndex ? 0 : this._startIndex - this.props.viewBufferMin;\n    const minEnd =\n      this.props.viewBufferMin < this.props.dataLength - this._endIndex\n        ? this._endIndex + this.props.viewBufferMin\n        : this.props.dataLength - 1;\n    if (maxStart < this._startIndexDrawn || minEnd > this._endIndexDrawn) {\n      this.forceUpdate();\n    }\n  };\n\n  _initWrapper = (elm: HTMLElement | TNil) => {\n    if (!this.props.windowScroller) {\n      return;\n    }\n    this._wrapperElm = elm;\n    if (elm) {\n      this._viewHeight = elm.clientHeight;\n    }\n  };\n\n  _initItemHolder = (elm: HTMLElement | TNil) => {\n    this._itemHolderElm = elm;\n    this._scanItemHeights();\n  };\n\n  /**\n   * Go through all items that are rendered and save their height based on their\n   * item-key (which is on a data-* attribute). If any new or adjusted heights\n   * are found, re-measure the current known y-positions (via .yPositions).\n   */\n  _scanItemHeights = () => {\n    const getIndexFromKey = this.props.getIndexFromKey;\n    if (!this._itemHolderElm) {\n      return;\n    }\n    // note the keys for the first and last altered heights, the `yPositions`\n    // needs to be updated\n    let lowDirtyKey = null;\n    let highDirtyKey = null;\n    let isDirty = false;\n    // iterating childNodes is faster than children\n    // https://jsperf.com/large-htmlcollection-vs-large-nodelist\n    const nodes = this._itemHolderElm.childNodes;\n    const max = nodes.length;\n    for (let i = 0; i < max; i++) {\n      const node: HTMLElement = nodes[i] as any;\n      // use `.getAttribute(...)` instead of `.dataset` for jest / JSDOM\n      const itemKey = node.getAttribute('data-item-key');\n      if (!itemKey) {\n        // eslint-disable-next-line no-console\n        console.warn('itemKey not found');\n        continue;\n      }\n      // measure the first child, if it's available, otherwise the node itself\n      // (likely not transferable to other contexts, and instead is specific to\n      // how we have the items rendered)\n      const measureSrc: Element = node.firstElementChild || node;\n      const observed = measureSrc.clientHeight;\n      const known = this._knownHeights.get(itemKey);\n      if (observed !== known) {\n        this._knownHeights.set(itemKey, observed);\n        if (!isDirty) {\n          isDirty = true;\n          // eslint-disable-next-line no-multi-assign\n          lowDirtyKey = highDirtyKey = itemKey;\n        } else {\n          highDirtyKey = itemKey;\n        }\n      }\n    }\n    if (lowDirtyKey != null && highDirtyKey != null) {\n      // update yPositions, then redraw\n      const imin = getIndexFromKey(lowDirtyKey);\n      const imax = highDirtyKey === lowDirtyKey ? imin : getIndexFromKey(highDirtyKey);\n      this._yPositions.calcHeights(imax, this._getHeight, imin);\n      this.forceUpdate();\n    }\n  };\n\n  /**\n   * Get the height of the element at index `i`; first check the known heights,\n   * fallback to `.props.itemHeightGetter(...)`.\n   */\n  _getHeight = (i: number) => {\n    const key = this.props.getKeyFromIndex(i);\n    const known = this._knownHeights.get(key);\n    // known !== known iff known is NaN\n    // eslint-disable-next-line no-self-compare\n    if (known != null && known === known) {\n      return known;\n    }\n    return this.props.itemHeightGetter(i, key);\n  };\n\n  render() {\n    const {\n      dataLength,\n      getKeyFromIndex,\n      initialDraw = DEFAULT_INITIAL_DRAW,\n      itemRenderer,\n      viewBuffer,\n      viewBufferMin,\n    } = this.props;\n    const heightGetter = this._getHeight;\n    const items = [];\n    let start;\n    let end;\n\n    this._yPositions.profileData(dataLength);\n\n    if (!this._wrapperElm) {\n      start = 0;\n      end = (initialDraw < dataLength ? initialDraw : dataLength) - 1;\n    } else {\n      if (this._isViewChanged()) {\n        this._calcViewIndexes();\n      }\n      const maxStart = viewBufferMin > this._startIndex ? 0 : this._startIndex - viewBufferMin;\n      const minEnd = viewBufferMin < dataLength - this._endIndex ? this._endIndex + viewBufferMin : dataLength - 1;\n      if (maxStart < this._startIndexDrawn || minEnd > this._endIndexDrawn) {\n        start = viewBuffer > this._startIndex ? 0 : this._startIndex - viewBuffer;\n        end = this._endIndex + viewBuffer;\n        if (end >= dataLength) {\n          end = dataLength - 1;\n        }\n      } else {\n        start = this._startIndexDrawn;\n        end = this._endIndexDrawn > dataLength - 1 ? dataLength - 1 : this._endIndexDrawn;\n      }\n    }\n\n    this._yPositions.calcHeights(end, heightGetter, start || -1);\n    this._startIndexDrawn = start;\n    this._endIndexDrawn = end;\n\n    items.length = end - start + 1;\n    for (let i = start; i <= end; i++) {\n      const { y: top, height } = this._yPositions.getRowPosition(i, heightGetter);\n      const style = {\n        height,\n        top,\n        position: 'absolute',\n      };\n      const itemKey = getKeyFromIndex(i);\n      const attrs = { 'data-item-key': itemKey };\n      items.push(itemRenderer(itemKey, style, i, attrs));\n    }\n    const wrapperProps: TWrapperProps = {\n      style: { position: 'relative' },\n      ref: this._initWrapper,\n    };\n    if (!this.props.windowScroller) {\n      wrapperProps.onScroll = this._onScroll;\n      wrapperProps.style.height = '100%';\n      wrapperProps.style.overflowY = 'auto';\n    }\n    const scrollerStyle = {\n      position: 'relative' as 'relative',\n      height: this._yPositions.getEstimatedHeight(),\n    };\n    return (\n      <div {...wrapperProps}>\n        <div style={scrollerStyle}>\n          <div\n            style={{\n              position: 'absolute',\n              top: 0,\n              margin: 0,\n              padding: 0,\n            }}\n            className={this.props.itemsWrapperClassName}\n            ref={this._initItemHolder}\n          >\n            {items}\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport React from 'react';\n\n/**\n * There are several places where external links to spans are created. The url layout though is something\n * that should be decided on the application level and not on the component level but at the same time\n * propagating the factory function everywhere could be cumbersome so we use this context for that.\n */\nconst ExternalLinkContext = React.createContext<((traceID: string, spanID: string) => string) | undefined>(undefined);\nExternalLinkContext.displayName = 'ExternalLinkContext';\nexport default ExternalLinkContext;\n","// Copyright (c) 2019 The Jaeger Authors.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport React from 'react';\nimport { TraceSpanReference } from '@grafana/data';\nimport ExternalLinkContext from './externalLinkContext';\n\ntype ReferenceLinkProps = {\n  reference: TraceSpanReference;\n  children: React.ReactNode;\n  className?: string;\n  focusSpan: (spanID: string) => void;\n  onClick?: () => void;\n};\n\nexport default function ReferenceLink(props: ReferenceLinkProps) {\n  const { reference, children, className, focusSpan, ...otherProps } = props;\n  delete otherProps.onClick;\n  if (reference.span) {\n    return (\n      <a role=\"button\" onClick={() => focusSpan(reference.spanID)} className={className} {...otherProps}>\n        {children}\n      </a>\n    );\n  }\n\n  return (\n    <ExternalLinkContext.Consumer>\n      {(createLinkToExternalSpan) => {\n        if (!createLinkToExternalSpan) {\n          throw new Error(\"ExternalLinkContext does not have a value, you probably forgot to setup it's provider\");\n        }\n        return (\n          <a\n            href={createLinkToExternalSpan(reference.traceID, reference.spanID)}\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n            className={className}\n            {...otherProps}\n          >\n            {children}\n          </a>\n        );\n      }}\n    </ExternalLinkContext.Consumer>\n  );\n}\n","// Copyright (c) 2019 The Jaeger Authors.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport React from 'react';\nimport { css } from 'emotion';\nimport NewWindowIcon from '../common/NewWindowIcon';\nimport { TraceSpanReference } from '@grafana/data';\nimport { UITooltip, UIDropdown, UIMenuItem, UIMenu, TooltipPlacement } from '../uiElementsContext';\n\nimport ReferenceLink from '../url/ReferenceLink';\nimport { createStyle } from '../Theme';\n\nexport const getStyles = createStyle(() => {\n  return {\n    MultiParent: css`\n      padding: 0 5px;\n      color: #000;\n      & ~ & {\n        margin-left: 5px;\n      }\n    `,\n    TraceRefLink: css`\n      display: flex;\n      justify-content: space-between;\n    `,\n    NewWindowIcon: css`\n      margin: 0.2em 0 0;\n    `,\n    tooltip: css`\n      max-width: none;\n    `,\n  };\n});\n\ntype TReferencesButtonProps = {\n  references: TraceSpanReference[];\n  children: React.ReactNode;\n  tooltipText: string;\n  focusSpan: (spanID: string) => void;\n};\n\nexport default class ReferencesButton extends React.PureComponent<TReferencesButtonProps> {\n  referencesList = (references: TraceSpanReference[]) => {\n    const styles = getStyles();\n    return (\n      <UIMenu>\n        {references.map((ref) => {\n          const { span, spanID } = ref;\n          return (\n            <UIMenuItem key={`${spanID}`}>\n              <ReferenceLink reference={ref} focusSpan={this.props.focusSpan} className={styles.TraceRefLink}>\n                {span\n                  ? `${span.process.serviceName}:${span.operationName} - ${ref.spanID}`\n                  : `(another trace) - ${ref.spanID}`}\n                {!span && <NewWindowIcon className={styles.NewWindowIcon} />}\n              </ReferenceLink>\n            </UIMenuItem>\n          );\n        })}\n      </UIMenu>\n    );\n  };\n\n  render() {\n    const { references, children, tooltipText, focusSpan } = this.props;\n    const styles = getStyles();\n\n    const tooltipProps = {\n      arrowPointAtCenter: true,\n      mouseLeaveDelay: 0.5,\n      placement: 'bottom' as TooltipPlacement,\n      title: tooltipText,\n      overlayClassName: styles.tooltip,\n    };\n\n    if (references.length > 1) {\n      return (\n        <UITooltip {...tooltipProps}>\n          <UIDropdown overlay={this.referencesList(references)} placement=\"bottomRight\" trigger={['click']}>\n            <a className={styles.MultiParent}>{children}</a>\n          </UIDropdown>\n        </UITooltip>\n      );\n    }\n    const ref = references[0];\n    return (\n      <UITooltip {...tooltipProps}>\n        <ReferenceLink reference={ref} focusSpan={focusSpan} className={styles.MultiParent}>\n          {children}\n        </ReferenceLink>\n      </UITooltip>\n    );\n  }\n}\n","// Copyright (c) 2019 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport _find from 'lodash/find';\nimport _get from 'lodash/get';\n\nimport { TNil } from '../types';\nimport { TraceSpan } from '@grafana/data';\n\nfunction getFirstAncestor(span: TraceSpan): TraceSpan | TNil {\n  return _get(\n    _find(\n      span.references,\n      ({ span: ref, refType }) => ref && ref.spanID && (refType === 'CHILD_OF' || refType === 'FOLLOWS_FROM')\n    ),\n    'span'\n  );\n}\n\nexport default function spanAncestorIds(span: TraceSpan | TNil): string[] {\n  const ancestorIDs: string[] = [];\n  if (!span) {\n    return ancestorIDs;\n  }\n  let ref = getFirstAncestor(span);\n  while (ref) {\n    ancestorIDs.push(ref.spanID);\n    ref = getFirstAncestor(ref);\n  }\n  return ancestorIDs;\n}\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport React from 'react';\nimport _get from 'lodash/get';\nimport IoChevronRight from 'react-icons/lib/io/chevron-right';\nimport IoIosArrowDown from 'react-icons/lib/io/ios-arrow-down';\nimport { css } from 'emotion';\nimport cx from 'classnames';\n\nimport { TraceSpan } from '@grafana/data';\nimport spanAncestorIds from '../utils/span-ancestor-ids';\n\nimport { autoColor, createStyle, Theme, withTheme } from '../Theme';\n\nexport const getStyles = createStyle((theme: Theme) => {\n  return {\n    SpanTreeOffset: css`\n      label: SpanTreeOffset;\n      color: ${autoColor(theme, '#000')};\n      position: relative;\n    `,\n    SpanTreeOffsetParent: css`\n      label: SpanTreeOffsetParent;\n      &:hover {\n        background-color: ${autoColor(theme, '#e8e8e8')};\n        cursor: pointer;\n      }\n    `,\n    indentGuide: css`\n      label: indentGuide;\n      /* The size of the indentGuide is based off of the iconWrapper */\n      padding-right: calc(0.5rem + 12px);\n      height: 100%;\n      border-left: 3px solid transparent;\n      display: inline-flex;\n      &::before {\n        content: '';\n        padding-left: 1px;\n        background-color: ${autoColor(theme, 'lightgrey')};\n      }\n    `,\n    indentGuideActive: css`\n      label: indentGuideActive;\n      border-color: ${autoColor(theme, 'darkgrey')};\n      &::before {\n        background-color: transparent;\n      }\n    `,\n    iconWrapper: css`\n      label: iconWrapper;\n      position: absolute;\n      right: 0.25rem;\n    `,\n  };\n});\n\ntype TProps = {\n  childrenVisible?: boolean;\n  onClick?: () => void;\n  span: TraceSpan;\n  showChildrenIcon?: boolean;\n\n  hoverIndentGuideIds: Set<string>;\n  addHoverIndentGuideId: (spanID: string) => void;\n  removeHoverIndentGuideId: (spanID: string) => void;\n  theme: Theme;\n};\n\nexport class UnthemedSpanTreeOffset extends React.PureComponent<TProps> {\n  static displayName = 'UnthemedSpanTreeOffset';\n\n  ancestorIds: string[];\n\n  static defaultProps = {\n    childrenVisible: false,\n    showChildrenIcon: true,\n  };\n\n  constructor(props: TProps) {\n    super(props);\n\n    this.ancestorIds = spanAncestorIds(props.span);\n    // Some traces have multiple root-level spans, this connects them all under one guideline and adds the\n    // necessary padding for the collapse icon on root-level spans.\n    this.ancestorIds.push('root');\n\n    this.ancestorIds.reverse();\n  }\n\n  /**\n   * If the mouse leaves to anywhere except another span with the same ancestor id, this span's ancestor id is\n   * removed from the set of hoverIndentGuideIds.\n   *\n   * @param {Object} event - React Synthetic event tied to mouseleave. Includes the related target which is\n   *     the element the user is now hovering.\n   * @param {string} ancestorId - The span id that the user was hovering over.\n   */\n  handleMouseLeave = (event: React.MouseEvent<HTMLSpanElement>, ancestorId: string) => {\n    if (\n      !(event.relatedTarget instanceof HTMLSpanElement) ||\n      _get(event, 'relatedTarget.dataset.ancestorId') !== ancestorId\n    ) {\n      this.props.removeHoverIndentGuideId(ancestorId);\n    }\n  };\n\n  /**\n   * If the mouse entered this span from anywhere except another span with the same ancestor id, this span's\n   * ancestorId is added to the set of hoverIndentGuideIds.\n   *\n   * @param {Object} event - React Synthetic event tied to mouseenter. Includes the related target which is\n   *     the last element the user was hovering.\n   * @param {string} ancestorId - The span id that the user is now hovering over.\n   */\n  handleMouseEnter = (event: React.MouseEvent<HTMLSpanElement>, ancestorId: string) => {\n    if (\n      !(event.relatedTarget instanceof HTMLSpanElement) ||\n      _get(event, 'relatedTarget.dataset.ancestorId') !== ancestorId\n    ) {\n      this.props.addHoverIndentGuideId(ancestorId);\n    }\n  };\n\n  render() {\n    const { childrenVisible, onClick, showChildrenIcon, span, theme } = this.props;\n    const { hasChildren, spanID } = span;\n    const wrapperProps = hasChildren ? { onClick, role: 'switch', 'aria-checked': childrenVisible } : null;\n    const icon = showChildrenIcon && hasChildren && (childrenVisible ? <IoIosArrowDown /> : <IoChevronRight />);\n    const styles = getStyles(theme);\n    return (\n      <span className={cx(styles.SpanTreeOffset, { [styles.SpanTreeOffsetParent]: hasChildren })} {...wrapperProps}>\n        {this.ancestorIds.map((ancestorId) => (\n          <span\n            key={ancestorId}\n            className={cx(styles.indentGuide, {\n              [styles.indentGuideActive]: this.props.hoverIndentGuideIds.has(ancestorId),\n            })}\n            data-ancestor-id={ancestorId}\n            data-test-id=\"SpanTreeOffset--indentGuide\"\n            onMouseEnter={(event) => this.handleMouseEnter(event, ancestorId)}\n            onMouseLeave={(event) => this.handleMouseLeave(event, ancestorId)}\n          />\n        ))}\n        {icon && (\n          <span\n            className={styles.iconWrapper}\n            onMouseEnter={(event) => this.handleMouseEnter(event, spanID)}\n            onMouseLeave={(event) => this.handleMouseLeave(event, spanID)}\n            data-test-id=\"icon-wrapper\"\n          >\n            {icon}\n          </span>\n        )}\n      </span>\n    );\n  }\n}\n\nexport default withTheme(UnthemedSpanTreeOffset);\n","// Copyright (c) 2019 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as React from 'react';\nimport { css } from 'emotion';\nimport cx from 'classnames';\nimport copy from 'copy-to-clipboard';\n\nimport { UITooltip, TooltipPlacement, UIButton } from '../uiElementsContext';\nimport { createStyle } from '../Theme';\n\nconst getStyles = createStyle(() => {\n  return {\n    CopyIcon: css`\n      background-color: transparent;\n      border: none;\n      color: inherit;\n      height: 100%;\n      overflow: hidden;\n      padding: 0px;\n      &:focus {\n        background-color: rgba(255, 255, 255, 0.25);\n        color: inherit;\n      }\n    `,\n  };\n});\n\ntype PropsType = {\n  className?: string;\n  copyText: string;\n  icon?: string;\n  placement?: TooltipPlacement;\n  tooltipTitle: string;\n};\n\ntype StateType = {\n  hasCopied: boolean;\n};\n\nexport default class CopyIcon extends React.PureComponent<PropsType, StateType> {\n  static defaultProps: Partial<PropsType> = {\n    className: undefined,\n    icon: 'copy',\n    placement: 'left',\n  };\n\n  state = {\n    hasCopied: false,\n  };\n\n  handleClick = () => {\n    this.setState({\n      hasCopied: true,\n    });\n    copy(this.props.copyText);\n  };\n\n  handleTooltipVisibilityChange = (visible: boolean) => {\n    if (!visible && this.state.hasCopied) {\n      this.setState({\n        hasCopied: false,\n      });\n    }\n  };\n\n  render() {\n    const styles = getStyles();\n    return (\n      <UITooltip\n        arrowPointAtCenter\n        mouseLeaveDelay={0.5}\n        onVisibleChange={this.handleTooltipVisibilityChange}\n        placement={this.props.placement}\n        title={this.state.hasCopied ? 'Copied' : this.props.tooltipTitle}\n      >\n        <UIButton\n          className={cx(styles.CopyIcon, this.props.className)}\n          htmlType=\"button\"\n          icon={this.props.icon}\n          onClick={this.handleClick}\n        />\n      </UITooltip>\n    );\n  }\n}\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as React from 'react';\nimport jsonMarkup from 'json-markup';\nimport { css } from 'emotion';\nimport cx from 'classnames';\n\nimport CopyIcon from '../../common/CopyIcon';\n\nimport { TNil } from '../../types';\nimport { TraceKeyValuePair, TraceLink } from '@grafana/data';\nimport { UIDropdown, UIIcon, UIMenu, UIMenuItem } from '../../uiElementsContext';\nimport { autoColor, createStyle, Theme, useTheme } from '../../Theme';\nimport { ubInlineBlock, uWidth100 } from '../../uberUtilityStyles';\n\nexport const getStyles = createStyle((theme: Theme) => {\n  const copyIcon = css`\n    label: copyIcon;\n  `;\n  return {\n    KeyValueTable: css`\n      label: KeyValueTable;\n      background: ${autoColor(theme, '#fff')};\n      border: 1px solid ${autoColor(theme, '#ddd')};\n      margin-bottom: 0.7em;\n      max-height: 450px;\n      overflow: auto;\n    `,\n    body: css`\n      label: body;\n      vertical-align: baseline;\n    `,\n    row: css`\n      label: row;\n      & > td {\n        padding: 0.25rem 0.5rem;\n        padding: 0.25rem 0.5rem;\n        vertical-align: top;\n      }\n      &:nth-child(2n) > td {\n        background: ${autoColor(theme, '#f5f5f5')};\n      }\n      &:not(:hover) .${copyIcon} {\n        display: none;\n      }\n    `,\n    keyColumn: css`\n      label: keyColumn;\n      color: ${autoColor(theme, '#888')};\n      white-space: pre;\n      width: 125px;\n    `,\n    copyColumn: css`\n      label: copyColumn;\n      text-align: right;\n    `,\n    linkIcon: css`\n      label: linkIcon;\n      vertical-align: middle;\n      font-weight: bold;\n    `,\n    copyIcon,\n  };\n});\n\nconst jsonObjectOrArrayStartRegex = /^(\\[|\\{)/;\n\nfunction parseIfComplexJson(value: any) {\n  // if the value is a string representing actual json object or array, then use json-markup\n  if (typeof value === 'string' && jsonObjectOrArrayStartRegex.test(value)) {\n    // otherwise just return as is\n    try {\n      return JSON.parse(value);\n      // eslint-disable-next-line no-empty\n    } catch (_) {}\n  }\n  return value;\n}\n\nexport const LinkValue = (props: { href: string; title?: string; children: React.ReactNode }) => {\n  const styles = getStyles(useTheme());\n  return (\n    <a href={props.href} title={props.title} target=\"_blank\" rel=\"noopener noreferrer\">\n      {props.children} <UIIcon className={styles.linkIcon} type=\"export\" />\n    </a>\n  );\n};\n\nLinkValue.defaultProps = {\n  title: '',\n};\n\nconst linkValueList = (links: TraceLink[]) => (\n  <UIMenu>\n    {links.map(({ text, url }, index) => (\n      // `index` is necessary in the key because url can repeat\n      <UIMenuItem key={`${url}-${index}`}>\n        <LinkValue href={url}>{text}</LinkValue>\n      </UIMenuItem>\n    ))}\n  </UIMenu>\n);\n\ntype KeyValuesTableProps = {\n  data: TraceKeyValuePair[];\n  linksGetter: ((pairs: TraceKeyValuePair[], index: number) => TraceLink[]) | TNil;\n};\n\nexport default function KeyValuesTable(props: KeyValuesTableProps) {\n  const { data, linksGetter } = props;\n  const styles = getStyles(useTheme());\n  return (\n    <div className={cx(styles.KeyValueTable)} data-test-id=\"KeyValueTable\">\n      <table className={uWidth100}>\n        <tbody className={styles.body}>\n          {data.map((row, i) => {\n            const markup = {\n              __html: jsonMarkup(parseIfComplexJson(row.value)),\n            };\n            const jsonTable = <div className={ubInlineBlock} dangerouslySetInnerHTML={markup} />;\n            const links = linksGetter ? linksGetter(data, i) : null;\n            let valueMarkup;\n            if (links && links.length === 1) {\n              valueMarkup = (\n                <div>\n                  <LinkValue href={links[0].url} title={links[0].text}>\n                    {jsonTable}\n                  </LinkValue>\n                </div>\n              );\n            } else if (links && links.length > 1) {\n              valueMarkup = (\n                <div>\n                  <UIDropdown overlay={linkValueList(links)} placement=\"bottomRight\" trigger={['click']}>\n                    <a>\n                      {jsonTable} <UIIcon className={styles.linkIcon} type=\"profile\" />\n                    </a>\n                  </UIDropdown>\n                </div>\n              );\n            } else {\n              valueMarkup = jsonTable;\n            }\n            return (\n              // `i` is necessary in the key because row.key can repeat\n              <tr className={styles.row} key={`${row.key}-${i}`}>\n                <td className={styles.keyColumn} data-test-id=\"KeyValueTable--keyColumn\">\n                  {row.key}\n                </td>\n                <td>{valueMarkup}</td>\n                <td className={styles.copyColumn}>\n                  <CopyIcon\n                    className={styles.copyIcon}\n                    copyText={JSON.stringify(row, null, 2)}\n                    tooltipTitle=\"Copy JSON\"\n                  />\n                </td>\n              </tr>\n            );\n          })}\n        </tbody>\n      </table>\n    </div>\n  );\n}\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as React from 'react';\nimport IoIosArrowDown from 'react-icons/lib/io/ios-arrow-down';\nimport IoIosArrowRight from 'react-icons/lib/io/ios-arrow-right';\nimport { css } from 'emotion';\nimport cx from 'classnames';\n\nimport * as markers from './AccordianKeyValues.markers';\nimport KeyValuesTable from './KeyValuesTable';\nimport { TNil } from '../../types';\nimport { TraceKeyValuePair, TraceLink } from '@grafana/data';\nimport { autoColor, createStyle, Theme, useTheme } from '../../Theme';\nimport { uAlignIcon, uTxEllipsis } from '../../uberUtilityStyles';\n\nexport const getStyles = createStyle((theme: Theme) => {\n  return {\n    header: css`\n      label: header;\n      cursor: pointer;\n      overflow: hidden;\n      padding: 0.25em 0.1em;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n      &:hover {\n        background: ${autoColor(theme, '#e8e8e8')};\n      }\n    `,\n    headerEmpty: css`\n      label: headerEmpty;\n      background: none;\n      cursor: initial;\n    `,\n    headerHighContrast: css`\n      label: headerHighContrast;\n      &:hover {\n        background: ${autoColor(theme, '#ddd')};\n      }\n    `,\n    emptyIcon: css`\n      label: emptyIcon;\n      color: ${autoColor(theme, '#aaa')};\n    `,\n    summary: css`\n      label: summary;\n      display: inline;\n      list-style: none;\n      padding: 0;\n    `,\n    summaryItem: css`\n      label: summaryItem;\n      display: inline;\n      margin-left: 0.7em;\n      padding-right: 0.5rem;\n      border-right: 1px solid ${autoColor(theme, '#ddd')};\n      &:last-child {\n        padding-right: 0;\n        border-right: none;\n      }\n    `,\n    summaryLabel: css`\n      label: summaryLabel;\n      color: ${autoColor(theme, '#777')};\n    `,\n    summaryDelim: css`\n      label: summaryDelim;\n      color: ${autoColor(theme, '#bbb')};\n      padding: 0 0.2em;\n    `,\n  };\n});\n\ntype AccordianKeyValuesProps = {\n  className?: string | TNil;\n  data: TraceKeyValuePair[];\n  highContrast?: boolean;\n  interactive?: boolean;\n  isOpen: boolean;\n  label: string;\n  linksGetter: ((pairs: TraceKeyValuePair[], index: number) => TraceLink[]) | TNil;\n  onToggle?: null | (() => void);\n};\n\n// export for tests\nexport function KeyValuesSummary(props: { data?: TraceKeyValuePair[] }) {\n  const { data } = props;\n  const styles = getStyles(useTheme());\n\n  if (!Array.isArray(data) || !data.length) {\n    return null;\n  }\n\n  return (\n    <ul className={styles.summary}>\n      {data.map((item, i) => (\n        // `i` is necessary in the key because item.key can repeat\n        <li className={styles.summaryItem} key={`${item.key}-${i}`}>\n          <span className={styles.summaryLabel}>{item.key}</span>\n          <span className={styles.summaryDelim}>=</span>\n          {String(item.value)}\n        </li>\n      ))}\n    </ul>\n  );\n}\n\nKeyValuesSummary.defaultProps = {\n  data: null,\n};\n\nexport default function AccordianKeyValues(props: AccordianKeyValuesProps) {\n  const { className, data, highContrast, interactive, isOpen, label, linksGetter, onToggle } = props;\n  const isEmpty = !Array.isArray(data) || !data.length;\n  const styles = getStyles(useTheme());\n  const iconCls = cx(uAlignIcon, { [styles.emptyIcon]: isEmpty });\n  let arrow: React.ReactNode | null = null;\n  let headerProps: {} | null = null;\n  if (interactive) {\n    arrow = isOpen ? <IoIosArrowDown className={iconCls} /> : <IoIosArrowRight className={iconCls} />;\n    headerProps = {\n      'aria-checked': isOpen,\n      onClick: isEmpty ? null : onToggle,\n      role: 'switch',\n    };\n  }\n\n  return (\n    <div className={cx(className, uTxEllipsis)}>\n      <div\n        className={cx(styles.header, {\n          [styles.headerEmpty]: isEmpty,\n          [styles.headerHighContrast]: highContrast && !isEmpty,\n        })}\n        {...headerProps}\n        data-test-id=\"AccordianKeyValues--header\"\n      >\n        {arrow}\n        <strong data-test={markers.LABEL}>\n          {label}\n          {isOpen || ':'}\n        </strong>\n        {!isOpen && <KeyValuesSummary data={data} />}\n      </div>\n      {isOpen && <KeyValuesTable data={data} linksGetter={linksGetter} />}\n    </div>\n  );\n}\n\nAccordianKeyValues.defaultProps = {\n  className: null,\n  highContrast: false,\n  interactive: true,\n  onToggle: null,\n};\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nexport const LABEL = 'label';\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as React from 'react';\nimport _sortBy from 'lodash/sortBy';\nimport IoIosArrowDown from 'react-icons/lib/io/ios-arrow-down';\nimport IoIosArrowRight from 'react-icons/lib/io/ios-arrow-right';\nimport { css } from 'emotion';\n\nimport AccordianKeyValues from './AccordianKeyValues';\nimport { formatDuration } from '../utils';\nimport { TNil } from '../../types';\nimport { TraceLog, TraceKeyValuePair, TraceLink } from '@grafana/data';\nimport { autoColor, createStyle, Theme, useTheme } from '../../Theme';\nimport { uAlignIcon, ubMb1 } from '../../uberUtilityStyles';\n\nconst getStyles = createStyle((theme: Theme) => {\n  return {\n    AccordianLogs: css`\n      label: AccordianLogs;\n      border: 1px solid ${autoColor(theme, '#d8d8d8')};\n      position: relative;\n      margin-bottom: 0.25rem;\n    `,\n    AccordianLogsHeader: css`\n      label: AccordianLogsHeader;\n      background: ${autoColor(theme, '#e4e4e4')};\n      color: inherit;\n      display: block;\n      padding: 0.25rem 0.5rem;\n      &:hover {\n        background: ${autoColor(theme, '#dadada')};\n      }\n    `,\n    AccordianLogsContent: css`\n      label: AccordianLogsContent;\n      background: ${autoColor(theme, '#f0f0f0')};\n      border-top: 1px solid ${autoColor(theme, '#d8d8d8')};\n      padding: 0.5rem 0.5rem 0.25rem 0.5rem;\n    `,\n    AccordianLogsFooter: css`\n      label: AccordianLogsFooter;\n      color: ${autoColor(theme, '#999')};\n    `,\n  };\n});\n\ntype AccordianLogsProps = {\n  interactive?: boolean;\n  isOpen: boolean;\n  linksGetter: ((pairs: TraceKeyValuePair[], index: number) => TraceLink[]) | TNil;\n  logs: TraceLog[];\n  onItemToggle?: (log: TraceLog) => void;\n  onToggle?: () => void;\n  openedItems?: Set<TraceLog>;\n  timestamp: number;\n};\n\nexport default function AccordianLogs(props: AccordianLogsProps) {\n  const { interactive, isOpen, linksGetter, logs, openedItems, onItemToggle, onToggle, timestamp } = props;\n  let arrow: React.ReactNode | null = null;\n  let HeaderComponent: 'span' | 'a' = 'span';\n  let headerProps: {} | null = null;\n  if (interactive) {\n    arrow = isOpen ? <IoIosArrowDown className={uAlignIcon} /> : <IoIosArrowRight className=\"u-align-icon\" />;\n    HeaderComponent = 'a';\n    headerProps = {\n      'aria-checked': isOpen,\n      onClick: onToggle,\n      role: 'switch',\n    };\n  }\n\n  const styles = getStyles(useTheme());\n  return (\n    <div className={styles.AccordianLogs}>\n      <HeaderComponent className={styles.AccordianLogsHeader} {...headerProps}>\n        {arrow} <strong>Logs</strong> ({logs.length})\n      </HeaderComponent>\n      {isOpen && (\n        <div className={styles.AccordianLogsContent}>\n          {_sortBy(logs, 'timestamp').map((log, i) => (\n            <AccordianKeyValues\n              // `i` is necessary in the key because timestamps can repeat\n              key={`${log.timestamp}-${i}`}\n              className={i < logs.length - 1 ? ubMb1 : null}\n              data={log.fields || []}\n              highContrast\n              interactive={interactive}\n              isOpen={openedItems ? openedItems.has(log) : false}\n              label={`${formatDuration(log.timestamp - timestamp)}`}\n              linksGetter={linksGetter}\n              onToggle={interactive && onItemToggle ? () => onItemToggle(log) : null}\n            />\n          ))}\n          <small className={styles.AccordianLogsFooter}>\n            Log timestamps are relative to the start time of the full trace.\n          </small>\n        </div>\n      )}\n    </div>\n  );\n}\n\nAccordianLogs.defaultProps = {\n  interactive: true,\n  linksGetter: undefined,\n  onItemToggle: undefined,\n  onToggle: undefined,\n  openedItems: undefined,\n};\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport React from 'react';\nimport _groupBy from 'lodash/groupBy';\nimport { onlyUpdateForKeys, compose, withState, withProps } from 'recompose';\nimport { css } from 'emotion';\nimport cx from 'classnames';\n\nimport AccordianLogs from './SpanDetail/AccordianLogs';\n\nimport { ViewedBoundsFunctionType } from './utils';\nimport { TNil } from '../types';\nimport { TraceSpan } from '@grafana/data';\nimport { UIPopover } from '../uiElementsContext';\nimport { createStyle } from '../Theme';\n\nconst getStyles = createStyle(() => {\n  return {\n    wrapper: css`\n      label: wrapper;\n      bottom: 0;\n      left: 0;\n      position: absolute;\n      right: 0;\n      top: 0;\n      overflow: hidden;\n      z-index: 0;\n    `,\n    bar: css`\n      label: bar;\n      border-radius: 3px;\n      min-width: 2px;\n      position: absolute;\n      height: 36%;\n      top: 32%;\n    `,\n    rpc: css`\n      label: rpc;\n      position: absolute;\n      top: 35%;\n      bottom: 35%;\n      z-index: 1;\n    `,\n    label: css`\n      label: label;\n      color: #aaa;\n      font-size: 12px;\n      font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;\n      line-height: 1em;\n      white-space: nowrap;\n      padding: 0 0.5em;\n      position: absolute;\n    `,\n    logMarker: css`\n      label: logMarker;\n      background-color: rgba(0, 0, 0, 0.5);\n      cursor: pointer;\n      height: 60%;\n      min-width: 1px;\n      position: absolute;\n      top: 20%;\n      &:hover {\n        background-color: #000;\n      }\n      &::before,\n      &::after {\n        content: '';\n        position: absolute;\n        top: 0;\n        bottom: 0;\n        right: 0;\n        border: 1px solid transparent;\n      }\n      &::after {\n        left: 0;\n      }\n    `,\n    logHint: css`\n      label: logHint;\n      pointer-events: none;\n      // TODO won't work with different UI elements injected\n      & .ant-popover-inner-content {\n        padding: 0.25rem;\n      }\n    `,\n  };\n});\n\ntype TCommonProps = {\n  color: string;\n  // onClick: (evt: React.MouseEvent<any>) => void;\n  onClick?: (evt: React.MouseEvent<any>) => void;\n  viewEnd: number;\n  viewStart: number;\n  getViewedBounds: ViewedBoundsFunctionType;\n  rpc:\n    | {\n        viewStart: number;\n        viewEnd: number;\n        color: string;\n      }\n    | TNil;\n  traceStartTime: number;\n  span: TraceSpan;\n  className?: string;\n  labelClassName?: string;\n};\n\ntype TInnerProps = {\n  label: string;\n  setLongLabel: () => void;\n  setShortLabel: () => void;\n} & TCommonProps;\n\ntype TOuterProps = {\n  longLabel: string;\n  shortLabel: string;\n} & TCommonProps;\n\nfunction toPercent(value: number) {\n  return `${(value * 100).toFixed(1)}%`;\n}\n\nfunction SpanBar(props: TInnerProps) {\n  const {\n    viewEnd,\n    viewStart,\n    getViewedBounds,\n    color,\n    label,\n    onClick,\n    setLongLabel,\n    setShortLabel,\n    rpc,\n    traceStartTime,\n    span,\n    className,\n    labelClassName,\n  } = props;\n  // group logs based on timestamps\n  const logGroups = _groupBy(span.logs, (log) => {\n    const posPercent = getViewedBounds(log.timestamp, log.timestamp).start;\n    // round to the nearest 0.2%\n    return toPercent(Math.round(posPercent * 500) / 500);\n  });\n  const styles = getStyles();\n\n  return (\n    <div\n      className={cx(styles.wrapper, className)}\n      onClick={onClick}\n      onMouseOut={setShortLabel}\n      onMouseOver={setLongLabel}\n      aria-hidden\n      data-test-id=\"SpanBar--wrapper\"\n    >\n      <div\n        aria-label={label}\n        className={styles.bar}\n        style={{\n          background: color,\n          left: toPercent(viewStart),\n          width: toPercent(viewEnd - viewStart),\n        }}\n      >\n        <div className={cx(styles.label, labelClassName)} data-test-id=\"SpanBar--label\">\n          {label}\n        </div>\n      </div>\n      <div>\n        {Object.keys(logGroups).map((positionKey) => (\n          <UIPopover\n            key={positionKey}\n            arrowPointAtCenter\n            overlayClassName={styles.logHint}\n            placement=\"topLeft\"\n            content={\n              <AccordianLogs interactive={false} isOpen logs={logGroups[positionKey]} timestamp={traceStartTime} />\n            }\n          >\n            <div className={styles.logMarker} style={{ left: positionKey }} />\n          </UIPopover>\n        ))}\n      </div>\n      {rpc && (\n        <div\n          className={styles.rpc}\n          style={{\n            background: rpc.color,\n            left: toPercent(rpc.viewStart),\n            width: toPercent(rpc.viewEnd - rpc.viewStart),\n          }}\n        />\n      )}\n    </div>\n  );\n}\n\nexport default compose<TInnerProps, TOuterProps>(\n  withState('label', 'setLabel', (props: { shortLabel: string }) => props.shortLabel),\n  withProps(\n    ({\n      setLabel,\n      shortLabel,\n      longLabel,\n    }: {\n      setLabel: (label: string) => void;\n      shortLabel: string;\n      longLabel: string;\n    }) => ({\n      setLongLabel: () => setLabel(longLabel),\n      setShortLabel: () => setLabel(shortLabel),\n    })\n  ),\n  onlyUpdateForKeys(['label', 'rpc', 'viewStart', 'viewEnd'])\n)(SpanBar);\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as React from 'react';\nimport IoAlert from 'react-icons/lib/io/alert';\nimport IoArrowRightA from 'react-icons/lib/io/arrow-right-a';\nimport IoNetwork from 'react-icons/lib/io/network';\nimport MdFileUpload from 'react-icons/lib/md/file-upload';\nimport { css } from 'emotion';\nimport cx from 'classnames';\n\nimport ReferencesButton from './ReferencesButton';\nimport TimelineRow from './TimelineRow';\nimport { formatDuration, ViewedBoundsFunctionType } from './utils';\nimport SpanTreeOffset from './SpanTreeOffset';\nimport SpanBar from './SpanBar';\nimport Ticks from './Ticks';\n\nimport { TNil } from '../types';\nimport { TraceSpan } from '@grafana/data';\nimport { autoColor, createStyle, Theme, withTheme } from '../Theme';\n\nconst getStyles = createStyle((theme: Theme) => {\n  const spanBar = css`\n    label: spanBar;\n  `;\n  const spanBarLabel = css`\n    label: spanBarLabel;\n  `;\n  const nameWrapper = css`\n    label: nameWrapper;\n    background: ${autoColor(theme, '#f8f8f8')};\n    line-height: 27px;\n    overflow: hidden;\n    display: flex;\n    &:hover {\n      border-right: 1px solid ${autoColor(theme, '#bbb')};\n      float: left;\n      min-width: calc(100% + 1px);\n      overflow: visible;\n    }\n  `;\n\n  const nameWrapperMatchingFilter = css`\n    label: nameWrapperMatchingFilter;\n    background-color: ${autoColor(theme, '#fffce4')};\n  `;\n\n  const endpointName = css`\n    label: endpointName;\n    color: ${autoColor(theme, '#808080')};\n  `;\n\n  const view = css`\n    label: view;\n    position: relative;\n  `;\n\n  const viewExpanded = css`\n    label: viewExpanded;\n    background: ${autoColor(theme, '#f8f8f8')};\n    outline: 1px solid ${autoColor(theme, '#ddd')};\n  `;\n\n  const viewExpandedAndMatchingFilter = css`\n    label: viewExpandedAndMatchingFilter;\n    background: ${autoColor(theme, '#fff3d7')};\n    outline: 1px solid ${autoColor(theme, '#ddd')};\n  `;\n\n  const nameColumn = css`\n    label: nameColumn;\n    position: relative;\n    white-space: nowrap;\n    z-index: 1;\n    &:hover {\n      z-index: 1;\n    }\n  `;\n\n  return {\n    spanBar,\n    spanBarLabel,\n    nameWrapper,\n    nameWrapperMatchingFilter,\n    nameColumn,\n    endpointName,\n    view,\n    viewExpanded,\n    viewExpandedAndMatchingFilter,\n    row: css`\n      label: row;\n      &:hover .${spanBar} {\n        opacity: 1;\n      }\n      &:hover .${spanBarLabel} {\n        color: ${autoColor(theme, '#000')};\n      }\n      &:hover .${nameWrapper} {\n        background: #f8f8f8;\n        background: linear-gradient(\n          90deg,\n          ${autoColor(theme, '#fafafa')},\n          ${autoColor(theme, '#f8f8f8')} 75%,\n          ${autoColor(theme, '#eee')}\n        );\n      }\n      &:hover .${view} {\n        background-color: ${autoColor(theme, '#f5f5f5')};\n        outline: 1px solid ${autoColor(theme, '#ddd')};\n      }\n    `,\n    rowClippingLeft: css`\n      label: rowClippingLeft;\n      & .${nameColumn}::before {\n        content: ' ';\n        height: 100%;\n        position: absolute;\n        width: 6px;\n        background-image: linear-gradient(\n          to right,\n          ${autoColor(theme, 'rgba(25, 25, 25, 0.25)')},\n          ${autoColor(theme, 'rgba(32, 32, 32, 0)')}\n        );\n        left: 100%;\n        z-index: -1;\n      }\n    `,\n    rowClippingRight: css`\n      label: rowClippingRight;\n      & .${view}::before {\n        content: ' ';\n        height: 100%;\n        position: absolute;\n        width: 6px;\n        background-image: linear-gradient(\n          to left,\n          ${autoColor(theme, 'rgba(25, 25, 25, 0.25)')},\n          ${autoColor(theme, 'rgba(25, 25, 25, 0.25)')}\n        );\n        right: 0%;\n        z-index: 1;\n      }\n    `,\n    rowExpanded: css`\n      label: rowExpanded;\n      & .${spanBar} {\n        opacity: 1;\n      }\n      & .${spanBarLabel} {\n        color: ${autoColor(theme, '#000')};\n      }\n      & .${nameWrapper}, &:hover .${nameWrapper} {\n        background: ${autoColor(theme, '#f0f0f0')};\n        box-shadow: 0 1px 0 ${autoColor(theme, '#ddd')};\n      }\n      & .${nameWrapperMatchingFilter} {\n        background: ${autoColor(theme, '#fff3d7')};\n      }\n      &:hover .${view} {\n        background: ${autoColor(theme, '#eee')};\n      }\n    `,\n    rowMatchingFilter: css`\n      label: rowMatchingFilter;\n      background-color: ${autoColor(theme, '#fffce4')};\n      &:hover .${nameWrapper} {\n        background: linear-gradient(\n          90deg,\n          ${autoColor(theme, '#fff5e1')},\n          ${autoColor(theme, '#fff5e1')} 75%,\n          ${autoColor(theme, '#ffe6c9')}\n        );\n      }\n      &:hover .${view} {\n        background-color: ${autoColor(theme, '#fff3d7')};\n        outline: 1px solid ${autoColor(theme, '#ddd')};\n      }\n    `,\n\n    rowExpandedAndMatchingFilter: css`\n      label: rowExpandedAndMatchingFilter;\n      &:hover .${view} {\n        background: ${autoColor(theme, '#ffeccf')};\n      }\n    `,\n\n    name: css`\n      label: name;\n      color: ${autoColor(theme, '#000')};\n      cursor: pointer;\n      flex: 1 1 auto;\n      outline: none;\n      overflow: hidden;\n      padding-left: 4px;\n      padding-right: 0.25em;\n      position: relative;\n      text-overflow: ellipsis;\n      &::before {\n        content: ' ';\n        position: absolute;\n        top: 4px;\n        bottom: 4px;\n        left: 0;\n        border-left: 4px solid;\n        border-left-color: inherit;\n      }\n\n      /* This is so the hit area of the span-name extends the rest of the width of the span-name column */\n      &::after {\n        background: transparent;\n        bottom: 0;\n        content: ' ';\n        left: 0;\n        position: absolute;\n        top: 0;\n        width: 1000px;\n      }\n      &:focus {\n        text-decoration: none;\n      }\n      &:hover > .${endpointName} {\n        color: ${autoColor(theme, '#000')};\n      }\n    `,\n    nameDetailExpanded: css`\n      label: nameDetailExpanded;\n      &::before {\n        bottom: 0;\n      }\n    `,\n    svcName: css`\n      label: svcName;\n      padding: 0 0.25rem 0 0.5rem;\n      font-size: 1.05em;\n    `,\n    svcNameChildrenCollapsed: css`\n      label: svcNameChildrenCollapsed;\n      font-weight: bold;\n      font-style: italic;\n    `,\n    errorIcon: css`\n      label: errorIcon;\n      border-radius: 6.5px;\n      color: ${autoColor(theme, '#fff')};\n      font-size: 0.85em;\n      margin-right: 0.25rem;\n      padding: 1px;\n    `,\n    rpcColorMarker: css`\n      label: rpcColorMarker;\n      border-radius: 6.5px;\n      display: inline-block;\n      font-size: 0.85em;\n      height: 1em;\n      margin-right: 0.25rem;\n      padding: 1px;\n      width: 1em;\n      vertical-align: middle;\n    `,\n    labelRight: css`\n      label: labelRight;\n      left: 100%;\n    `,\n    labelLeft: css`\n      label: labelLeft;\n      right: 100%;\n    `,\n  };\n});\n\ntype SpanBarRowProps = {\n  className?: string;\n  theme: Theme;\n  color: string;\n  columnDivision: number;\n  isChildrenExpanded: boolean;\n  isDetailExpanded: boolean;\n  isMatchingFilter: boolean;\n  onDetailToggled: (spanID: string) => void;\n  onChildrenToggled: (spanID: string) => void;\n  numTicks: number;\n  rpc?:\n    | {\n        viewStart: number;\n        viewEnd: number;\n        color: string;\n        operationName: string;\n        serviceName: string;\n      }\n    | TNil;\n  showErrorIcon: boolean;\n  getViewedBounds: ViewedBoundsFunctionType;\n  traceStartTime: number;\n  span: TraceSpan;\n  focusSpan: (spanID: string) => void;\n  hoverIndentGuideIds: Set<string>;\n  addHoverIndentGuideId: (spanID: string) => void;\n  removeHoverIndentGuideId: (spanID: string) => void;\n  clippingLeft?: boolean;\n  clippingRight?: boolean;\n  createSpanLink?: (\n    span: TraceSpan\n  ) => { href: string; onClick?: (e: React.MouseEvent) => void; content: React.ReactNode };\n};\n\n/**\n * This was originally a stateless function, but changing to a PureComponent\n * reduced the render time of expanding a span row detail by ~50%. This is\n * even true in the case where the stateless function has the same prop types as\n * this class and arrow functions are created in the stateless function as\n * handlers to the onClick props. E.g. for now, the PureComponent is more\n * performance than the stateless function.\n */\nexport class UnthemedSpanBarRow extends React.PureComponent<SpanBarRowProps> {\n  static displayName = 'UnthemedSpanBarRow';\n  static defaultProps: Partial<SpanBarRowProps> = {\n    className: '',\n    rpc: null,\n  };\n\n  _detailToggle = () => {\n    this.props.onDetailToggled(this.props.span.spanID);\n  };\n\n  _childrenToggle = () => {\n    this.props.onChildrenToggled(this.props.span.spanID);\n  };\n\n  render() {\n    const {\n      className,\n      color,\n      columnDivision,\n      isChildrenExpanded,\n      isDetailExpanded,\n      isMatchingFilter,\n      numTicks,\n      rpc,\n      showErrorIcon,\n      getViewedBounds,\n      traceStartTime,\n      span,\n      focusSpan,\n      hoverIndentGuideIds,\n      addHoverIndentGuideId,\n      removeHoverIndentGuideId,\n      clippingLeft,\n      clippingRight,\n      theme,\n      createSpanLink,\n    } = this.props;\n    const {\n      duration,\n      hasChildren: isParent,\n      operationName,\n      process: { serviceName },\n    } = span;\n    const label = formatDuration(duration);\n    const viewBounds = getViewedBounds(span.startTime, span.startTime + span.duration);\n    const viewStart = viewBounds.start;\n    const viewEnd = viewBounds.end;\n    const styles = getStyles(theme);\n\n    const labelDetail = `${serviceName}::${operationName}`;\n    let longLabel;\n    let hintClassName;\n    if (viewStart > 1 - viewEnd) {\n      longLabel = `${labelDetail} | ${label}`;\n      hintClassName = styles.labelLeft;\n    } else {\n      longLabel = `${label} | ${labelDetail}`;\n      hintClassName = styles.labelRight;\n    }\n\n    return (\n      <TimelineRow\n        className={cx(\n          styles.row,\n          {\n            [styles.rowExpanded]: isDetailExpanded,\n            [styles.rowMatchingFilter]: isMatchingFilter,\n            [styles.rowExpandedAndMatchingFilter]: isMatchingFilter && isDetailExpanded,\n            [styles.rowClippingLeft]: clippingLeft,\n            [styles.rowClippingRight]: clippingRight,\n          },\n          className\n        )}\n      >\n        <TimelineRow.Cell className={styles.nameColumn} width={columnDivision}>\n          <div className={cx(styles.nameWrapper, { [styles.nameWrapperMatchingFilter]: isMatchingFilter })}>\n            <SpanTreeOffset\n              childrenVisible={isChildrenExpanded}\n              span={span}\n              onClick={isParent ? this._childrenToggle : undefined}\n              hoverIndentGuideIds={hoverIndentGuideIds}\n              addHoverIndentGuideId={addHoverIndentGuideId}\n              removeHoverIndentGuideId={removeHoverIndentGuideId}\n            />\n            <a\n              className={cx(styles.name, { [styles.nameDetailExpanded]: isDetailExpanded })}\n              aria-checked={isDetailExpanded}\n              onClick={this._detailToggle}\n              role=\"switch\"\n              style={{ borderColor: color }}\n              tabIndex={0}\n            >\n              <span\n                className={cx(styles.svcName, {\n                  [styles.svcNameChildrenCollapsed]: isParent && !isChildrenExpanded,\n                })}\n              >\n                {showErrorIcon && (\n                  <IoAlert\n                    style={{\n                      backgroundColor: span.errorIconColor\n                        ? autoColor(theme, span.errorIconColor)\n                        : autoColor(theme, '#db2828'),\n                    }}\n                    className={styles.errorIcon}\n                  />\n                )}\n                {serviceName}{' '}\n                {rpc && (\n                  <span>\n                    <IoArrowRightA /> <i className={styles.rpcColorMarker} style={{ background: rpc.color }} />\n                    {rpc.serviceName}\n                  </span>\n                )}\n              </span>\n              <small className={styles.endpointName}>{rpc ? rpc.operationName : operationName}</small>\n            </a>\n            {createSpanLink &&\n              (() => {\n                const link = createSpanLink(span);\n                return (\n                  <a\n                    href={link.href}\n                    // Needs to have target otherwise preventDefault would not work due to angularRouter.\n                    target={'_blank'}\n                    style={{ marginRight: '5px' }}\n                    rel=\"noopener noreferrer\"\n                    onClick={\n                      link.onClick\n                        ? (event) => {\n                            if (!(event.ctrlKey || event.metaKey || event.shiftKey) && link.onClick) {\n                              event.preventDefault();\n                              link.onClick(event);\n                            }\n                          }\n                        : undefined\n                    }\n                  >\n                    {link.content}\n                  </a>\n                );\n              })()}\n\n            {span.references && span.references.length > 1 && (\n              <ReferencesButton\n                references={span.references}\n                tooltipText=\"Contains multiple references\"\n                focusSpan={focusSpan}\n              >\n                <IoNetwork />\n              </ReferencesButton>\n            )}\n            {span.subsidiarilyReferencedBy && span.subsidiarilyReferencedBy.length > 0 && (\n              <ReferencesButton\n                references={span.subsidiarilyReferencedBy}\n                tooltipText={`This span is referenced by ${\n                  span.subsidiarilyReferencedBy.length === 1 ? 'another span' : 'multiple other spans'\n                }`}\n                focusSpan={focusSpan}\n              >\n                <MdFileUpload />\n              </ReferencesButton>\n            )}\n          </div>\n        </TimelineRow.Cell>\n        <TimelineRow.Cell\n          className={cx(styles.view, {\n            [styles.viewExpanded]: isDetailExpanded,\n            [styles.viewExpandedAndMatchingFilter]: isMatchingFilter && isDetailExpanded,\n          })}\n          data-test-id=\"span-view\"\n          style={{ cursor: 'pointer' }}\n          width={1 - columnDivision}\n          onClick={this._detailToggle}\n        >\n          <Ticks numTicks={numTicks} />\n          <SpanBar\n            rpc={rpc}\n            viewStart={viewStart}\n            viewEnd={viewEnd}\n            getViewedBounds={getViewedBounds}\n            color={color}\n            shortLabel={label}\n            longLabel={longLabel}\n            traceStartTime={traceStartTime}\n            span={span}\n            labelClassName={`${styles.spanBarLabel} ${hintClassName}`}\n            className={styles.spanBar}\n          />\n        </TimelineRow.Cell>\n      </TimelineRow>\n    );\n  }\n}\n\nexport default withTheme(UnthemedSpanBarRow);\n","// Copyright (c) 2019 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as React from 'react';\nimport { css } from 'emotion';\nimport cx from 'classnames';\n\nimport { createStyle } from '../../Theme';\n\nconst getStyles = createStyle(() => {\n  return {\n    TextList: css`\n      max-height: 450px;\n      overflow: auto;\n    `,\n    List: css`\n      width: 100%;\n      list-style: none;\n      padding: 0;\n      margin: 0;\n    `,\n    item: css`\n      padding: 0.25rem 0.5rem;\n      vertical-align: top;\n      &:nth-child(2n) {\n        background: #f5f5f5;\n      }\n    `,\n  };\n});\n\ntype TextListProps = {\n  data: string[];\n};\n\nexport default function TextList(props: TextListProps) {\n  const { data } = props;\n  const styles = getStyles();\n  return (\n    <div className={cx(styles.TextList)} data-test-id=\"TextList\">\n      <ul className={styles.List}>\n        {data.map((row, i) => {\n          return (\n            // `i` is necessary in the key because row.key can repeat\n            <li className={styles.item} key={`${i}`}>\n              {row}\n            </li>\n          );\n        })}\n      </ul>\n    </div>\n  );\n}\n","// Copyright (c) 2019 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as React from 'react';\nimport { css } from 'emotion';\nimport cx from 'classnames';\nimport IoIosArrowDown from 'react-icons/lib/io/ios-arrow-down';\nimport IoIosArrowRight from 'react-icons/lib/io/ios-arrow-right';\nimport TextList from './TextList';\nimport { TNil } from '../../types';\nimport { getStyles as getAccordianKeyValuesStyles } from './AccordianKeyValues';\nimport { autoColor, createStyle, Theme, useTheme } from '../../Theme';\nimport { uAlignIcon } from '../../uberUtilityStyles';\n\nconst getStyles = createStyle((theme: Theme) => {\n  return {\n    header: css`\n      cursor: pointer;\n      overflow: hidden;\n      padding: 0.25em 0.1em;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n      &:hover {\n        background: ${autoColor(theme, '#e8e8e8')};\n      }\n    `,\n  };\n});\n\ntype AccordianTextProps = {\n  className?: string | TNil;\n  headerClassName?: string | TNil;\n  data: string[];\n  highContrast?: boolean;\n  interactive?: boolean;\n  isOpen: boolean;\n  label: React.ReactNode | string;\n  onToggle?: null | (() => void);\n  TextComponent?: React.ElementType<{ data: string[] }>;\n};\n\nfunction DefaultTextComponent({ data }: { data: string[] }) {\n  return <TextList data={data} />;\n}\n\nexport default function AccordianText(props: AccordianTextProps) {\n  const {\n    className,\n    data,\n    headerClassName,\n    interactive,\n    isOpen,\n    label,\n    onToggle,\n    TextComponent = DefaultTextComponent,\n  } = props;\n  const isEmpty = !Array.isArray(data) || !data.length;\n  const accordianKeyValuesStyles = getAccordianKeyValuesStyles(useTheme());\n  const iconCls = cx(uAlignIcon, { [accordianKeyValuesStyles.emptyIcon]: isEmpty });\n  let arrow: React.ReactNode | null = null;\n  let headerProps: {} | null = null;\n  if (interactive) {\n    arrow = isOpen ? <IoIosArrowDown className={iconCls} /> : <IoIosArrowRight className={iconCls} />;\n    headerProps = {\n      'aria-checked': isOpen,\n      onClick: isEmpty ? null : onToggle,\n      role: 'switch',\n    };\n  }\n  const styles = getStyles(useTheme());\n  return (\n    <div className={className || ''}>\n      <div className={cx(styles.header, headerClassName)} {...headerProps} data-test-id=\"AccordianText--header\">\n        {arrow}\n        <strong>{label}</strong> ({data.length})\n      </div>\n      {isOpen && <TextComponent data={data} />}\n    </div>\n  );\n}\n\nAccordianText.defaultProps = {\n  className: null,\n  highContrast: false,\n  interactive: true,\n  onToggle: null,\n};\n","// Copyright (c) 2019 The Jaeger Authors.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as React from 'react';\nimport { css } from 'emotion';\nimport cx from 'classnames';\n\nimport IoIosArrowDown from 'react-icons/lib/io/ios-arrow-down';\nimport IoIosArrowRight from 'react-icons/lib/io/ios-arrow-right';\nimport { TraceSpanReference } from '@grafana/data';\nimport ReferenceLink from '../../url/ReferenceLink';\n\nimport { createStyle } from '../../Theme';\nimport { uAlignIcon } from '../../uberUtilityStyles';\n\nconst getStyles = createStyle(() => {\n  return {\n    ReferencesList: css`\n      background: #fff;\n      border: 1px solid #ddd;\n      margin-bottom: 0.7em;\n      max-height: 450px;\n      overflow: auto;\n    `,\n    list: css`\n      width: 100%;\n      list-style: none;\n      padding: 0;\n      margin: 0;\n      background: #fff;\n    `,\n    itemContent: css`\n      padding: 0.25rem 0.5rem;\n      display: flex;\n      width: 100%;\n      justify-content: space-between;\n    `,\n    item: css`\n      &:nth-child(2n) {\n        background: #f5f5f5;\n      }\n    `,\n    debugInfo: css`\n      letter-spacing: 0.25px;\n      margin: 0.5em 0 0;\n    `,\n    debugLabel: css`\n      margin: 0 5px 0 5px;\n      &::before {\n        color: #bbb;\n        content: attr(data-label);\n      }\n    `,\n  };\n});\n\ntype AccordianReferencesProps = {\n  data: TraceSpanReference[];\n  highContrast?: boolean;\n  interactive?: boolean;\n  isOpen: boolean;\n  onToggle?: null | (() => void);\n  focusSpan: (uiFind: string) => void;\n};\n\ntype ReferenceItemProps = {\n  data: TraceSpanReference[];\n  focusSpan: (uiFind: string) => void;\n};\n\n// export for test\nexport function References(props: ReferenceItemProps) {\n  const { data, focusSpan } = props;\n  const styles = getStyles();\n\n  return (\n    <div className={cx(styles.ReferencesList)}>\n      <ul className={styles.list}>\n        {data.map((reference) => {\n          return (\n            <li className={styles.item} key={`${reference.spanID}`}>\n              <ReferenceLink reference={reference} focusSpan={focusSpan}>\n                <span className={styles.itemContent}>\n                  {reference.span ? (\n                    <span>\n                      <span className=\"span-svc-name\">{reference.span.process.serviceName}</span>\n                      <small className=\"endpoint-name\">{reference.span.operationName}</small>\n                    </span>\n                  ) : (\n                    <span className=\"span-svc-name\">&lt; span in another trace &gt;</span>\n                  )}\n                  <small className={styles.debugInfo}>\n                    <span className={styles.debugLabel} data-label=\"Reference Type:\">\n                      {reference.refType}\n                    </span>\n                    <span className={styles.debugLabel} data-label=\"SpanID:\">\n                      {reference.spanID}\n                    </span>\n                  </small>\n                </span>\n              </ReferenceLink>\n            </li>\n          );\n        })}\n      </ul>\n    </div>\n  );\n}\n\nexport default class AccordianReferences extends React.PureComponent<AccordianReferencesProps> {\n  static defaultProps: Partial<AccordianReferencesProps> = {\n    highContrast: false,\n    interactive: true,\n    onToggle: null,\n  };\n\n  render() {\n    const { data, interactive, isOpen, onToggle, focusSpan } = this.props;\n    const isEmpty = !Array.isArray(data) || !data.length;\n    const iconCls = uAlignIcon;\n    let arrow: React.ReactNode | null = null;\n    let headerProps: {} | null = null;\n    if (interactive) {\n      arrow = isOpen ? <IoIosArrowDown className={iconCls} /> : <IoIosArrowRight className={iconCls} />;\n      headerProps = {\n        'aria-checked': isOpen,\n        onClick: isEmpty ? null : onToggle,\n        role: 'switch',\n      };\n    }\n    return (\n      <div>\n        <div {...headerProps}>\n          {arrow}\n          <strong>\n            <span>References</span>\n          </strong>{' '}\n          ({data.length})\n        </div>\n        {isOpen && <References data={data} focusSpan={focusSpan} />}\n      </div>\n    );\n  }\n}\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport React from 'react';\nimport { css } from 'emotion';\nimport cx from 'classnames';\n\nimport AccordianKeyValues from './AccordianKeyValues';\nimport AccordianLogs from './AccordianLogs';\nimport AccordianText from './AccordianText';\nimport DetailState from './DetailState';\nimport { formatDuration } from '../utils';\nimport CopyIcon from '../../common/CopyIcon';\nimport LabeledList from '../../common/LabeledList';\n\nimport { TNil } from '../../types';\nimport { TraceKeyValuePair, TraceLink, TraceLog, TraceSpan } from '@grafana/data';\nimport AccordianReferences from './AccordianReferences';\nimport { autoColor, createStyle, Theme, useTheme } from '../../Theme';\nimport { UIDivider } from '../../uiElementsContext';\nimport { ubFlex, ubFlexAuto, ubItemsCenter, ubM0, ubMb1, ubMy1, ubTxRightAlign } from '../../uberUtilityStyles';\nimport { DataLinkButton, TextArea } from '@grafana/ui';\nimport { CreateSpanLink } from '../types';\n\nconst getStyles = createStyle((theme: Theme) => {\n  return {\n    divider: css`\n      label: divider;\n      background: ${autoColor(theme, '#ddd')};\n    `,\n    dividerVertical: css`\n      label: dividerVertical;\n      display: block;\n      height: 1px;\n      width: 100%;\n      margin: 24px 0;\n      clear: both;\n      vertical-align: middle;\n      position: relative;\n      top: -0.06em;\n    `,\n    debugInfo: css`\n      label: debugInfo;\n      display: block;\n      letter-spacing: 0.25px;\n      margin: 0.5em 0 -0.75em;\n      text-align: right;\n    `,\n    debugLabel: css`\n      label: debugLabel;\n      &::before {\n        color: ${autoColor(theme, '#bbb')};\n        content: attr(data-label);\n      }\n    `,\n    debugValue: css`\n      label: debugValue;\n      background-color: inherit;\n      border: none;\n      color: ${autoColor(theme, '#888')};\n      cursor: pointer;\n      &:hover {\n        color: ${autoColor(theme, '#333')};\n      }\n    `,\n    AccordianWarnings: css`\n      label: AccordianWarnings;\n      background: ${autoColor(theme, '#fafafa')};\n      border: 1px solid ${autoColor(theme, '#e4e4e4')};\n      margin-bottom: 0.25rem;\n    `,\n    AccordianWarningsHeader: css`\n      label: AccordianWarningsHeader;\n      background: ${autoColor(theme, '#fff7e6')};\n      padding: 0.25rem 0.5rem;\n      &:hover {\n        background: ${autoColor(theme, '#ffe7ba')};\n      }\n    `,\n    AccordianWarningsHeaderOpen: css`\n      label: AccordianWarningsHeaderOpen;\n      border-bottom: 1px solid ${autoColor(theme, '#e8e8e8')};\n    `,\n    AccordianWarningsLabel: css`\n      label: AccordianWarningsLabel;\n      color: ${autoColor(theme, '#d36c08')};\n    `,\n    Textarea: css`\n      word-break: break-all;\n      white-space: pre;\n    `,\n  };\n});\n\ntype SpanDetailProps = {\n  detailState: DetailState;\n  linksGetter: ((links: TraceKeyValuePair[], index: number) => TraceLink[]) | TNil;\n  logItemToggle: (spanID: string, log: TraceLog) => void;\n  logsToggle: (spanID: string) => void;\n  processToggle: (spanID: string) => void;\n  span: TraceSpan;\n  tagsToggle: (spanID: string) => void;\n  traceStartTime: number;\n  warningsToggle: (spanID: string) => void;\n  stackTracesToggle: (spanID: string) => void;\n  referencesToggle: (spanID: string) => void;\n  focusSpan: (uiFind: string) => void;\n  createSpanLink?: CreateSpanLink;\n};\n\nexport default function SpanDetail(props: SpanDetailProps) {\n  const {\n    detailState,\n    linksGetter,\n    logItemToggle,\n    logsToggle,\n    processToggle,\n    span,\n    tagsToggle,\n    traceStartTime,\n    warningsToggle,\n    stackTracesToggle,\n    referencesToggle,\n    focusSpan,\n    createSpanLink,\n  } = props;\n  const {\n    isTagsOpen,\n    isProcessOpen,\n    logs: logsState,\n    isWarningsOpen,\n    isReferencesOpen,\n    isStackTracesOpen,\n  } = detailState;\n  const {\n    operationName,\n    process,\n    duration,\n    relativeStartTime,\n    spanID,\n    logs,\n    tags,\n    warnings,\n    references,\n    stackTraces,\n  } = span;\n  const overviewItems = [\n    {\n      key: 'svc',\n      label: 'Service:',\n      value: process.serviceName,\n    },\n    {\n      key: 'duration',\n      label: 'Duration:',\n      value: formatDuration(duration),\n    },\n    {\n      key: 'start',\n      label: 'Start Time:',\n      value: formatDuration(relativeStartTime),\n    },\n  ];\n  const deepLinkCopyText = `${window.location.origin}${window.location.pathname}?uiFind=${spanID}`;\n  const styles = getStyles(useTheme());\n  const link = createSpanLink?.(span);\n\n  return (\n    <div>\n      <div className={cx(ubFlex, ubItemsCenter, ubMb1)}>\n        <h2 className={cx(ubFlexAuto, ubM0)}>{operationName}</h2>\n        <LabeledList className={ubTxRightAlign} dividerClassName={styles.divider} items={overviewItems} />\n      </div>\n      {link ? (\n        <DataLinkButton link={{ ...link, title: 'Logs for this span' } as any} buttonProps={{ icon: 'gf-logs' }} />\n      ) : null}\n      <UIDivider className={cx(styles.divider, styles.dividerVertical, ubMy1)} />\n      <div>\n        <div>\n          <AccordianKeyValues\n            data={tags}\n            label=\"Tags\"\n            linksGetter={linksGetter}\n            isOpen={isTagsOpen}\n            onToggle={() => tagsToggle(spanID)}\n          />\n          {process.tags && (\n            <AccordianKeyValues\n              className={ubMb1}\n              data={process.tags}\n              label=\"Process\"\n              linksGetter={linksGetter}\n              isOpen={isProcessOpen}\n              onToggle={() => processToggle(spanID)}\n            />\n          )}\n        </div>\n        {logs && logs.length > 0 && (\n          <AccordianLogs\n            linksGetter={linksGetter}\n            logs={logs}\n            isOpen={logsState.isOpen}\n            openedItems={logsState.openedItems}\n            onToggle={() => logsToggle(spanID)}\n            onItemToggle={(logItem) => logItemToggle(spanID, logItem)}\n            timestamp={traceStartTime}\n          />\n        )}\n        {warnings && warnings.length > 0 && (\n          <AccordianText\n            className={styles.AccordianWarnings}\n            headerClassName={styles.AccordianWarningsHeader}\n            label={<span className={styles.AccordianWarningsLabel}>Warnings</span>}\n            data={warnings}\n            isOpen={isWarningsOpen}\n            onToggle={() => warningsToggle(spanID)}\n          />\n        )}\n        {stackTraces && stackTraces.length && (\n          <AccordianText\n            label=\"Stack trace\"\n            data={stackTraces}\n            isOpen={isStackTracesOpen}\n            TextComponent={(textComponentProps) => {\n              let text;\n              if (textComponentProps.data?.length > 1) {\n                text = textComponentProps.data\n                  .map((stackTrace, index) => `StackTrace ${index + 1}:\\n${stackTrace}`)\n                  .join('\\n');\n              } else {\n                text = textComponentProps.data?.[0];\n              }\n              return (\n                <TextArea\n                  className={styles.Textarea}\n                  style={{ cursor: 'unset' }}\n                  readOnly\n                  cols={10}\n                  rows={10}\n                  value={text}\n                />\n              );\n            }}\n            onToggle={() => stackTracesToggle(spanID)}\n          />\n        )}\n        {references && references.length > 1 && (\n          <AccordianReferences\n            data={references}\n            isOpen={isReferencesOpen}\n            onToggle={() => referencesToggle(spanID)}\n            focusSpan={focusSpan}\n          />\n        )}\n        <small className={styles.debugInfo}>\n          <span className={styles.debugLabel} data-label=\"SpanID:\" /> {spanID}\n          <CopyIcon\n            copyText={deepLinkCopyText}\n            icon=\"link\"\n            placement=\"topRight\"\n            tooltipTitle=\"Copy deep link to this span\"\n          />\n        </small>\n      </div>\n    </div>\n  );\n}\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport React from 'react';\nimport { css } from 'emotion';\n\nimport SpanDetail from './SpanDetail';\nimport DetailState from './SpanDetail/DetailState';\nimport SpanTreeOffset from './SpanTreeOffset';\nimport TimelineRow from './TimelineRow';\nimport { autoColor, createStyle, Theme, withTheme } from '../Theme';\n\nimport { TraceLog, TraceSpan, TraceKeyValuePair, TraceLink } from '@grafana/data';\nimport { CreateSpanLink } from './types';\n\nconst getStyles = createStyle((theme: Theme) => {\n  return {\n    expandedAccent: css`\n      cursor: pointer;\n      height: 100%;\n      overflow: hidden;\n      position: absolute;\n      width: 100%;\n      &::before {\n        border-left: 4px solid;\n        pointer-events: none;\n        width: 1000px;\n      }\n      &::after {\n        border-right: 1000px solid;\n        border-color: inherit;\n        cursor: pointer;\n        opacity: 0.2;\n      }\n\n      /* border-color inherit must come AFTER other border declarations for accent */\n      &::before,\n      &::after {\n        border-color: inherit;\n        content: ' ';\n        position: absolute;\n        height: 100%;\n      }\n\n      &:hover::after {\n        opacity: 0.35;\n      }\n    `,\n    infoWrapper: css`\n      background: ${autoColor(theme, '#f5f5f5')};\n      border: 1px solid ${autoColor(theme, '#d3d3d3')};\n      border-top: 3px solid;\n      padding: 0.75rem;\n    `,\n  };\n});\n\ntype SpanDetailRowProps = {\n  color: string;\n  columnDivision: number;\n  detailState: DetailState;\n  onDetailToggled: (spanID: string) => void;\n  linksGetter: (span: TraceSpan, links: TraceKeyValuePair[], index: number) => TraceLink[];\n  logItemToggle: (spanID: string, log: TraceLog) => void;\n  logsToggle: (spanID: string) => void;\n  processToggle: (spanID: string) => void;\n  referencesToggle: (spanID: string) => void;\n  warningsToggle: (spanID: string) => void;\n  stackTracesToggle: (spanID: string) => void;\n  span: TraceSpan;\n  tagsToggle: (spanID: string) => void;\n  traceStartTime: number;\n  focusSpan: (uiFind: string) => void;\n  hoverIndentGuideIds: Set<string>;\n  addHoverIndentGuideId: (spanID: string) => void;\n  removeHoverIndentGuideId: (spanID: string) => void;\n  theme: Theme;\n  createSpanLink?: CreateSpanLink;\n};\n\nexport class UnthemedSpanDetailRow extends React.PureComponent<SpanDetailRowProps> {\n  _detailToggle = () => {\n    this.props.onDetailToggled(this.props.span.spanID);\n  };\n\n  _linksGetter = (items: TraceKeyValuePair[], itemIndex: number) => {\n    const { linksGetter, span } = this.props;\n    return linksGetter(span, items, itemIndex);\n  };\n\n  render() {\n    const {\n      color,\n      columnDivision,\n      detailState,\n      logItemToggle,\n      logsToggle,\n      processToggle,\n      referencesToggle,\n      warningsToggle,\n      stackTracesToggle,\n      span,\n      tagsToggle,\n      traceStartTime,\n      focusSpan,\n      hoverIndentGuideIds,\n      addHoverIndentGuideId,\n      removeHoverIndentGuideId,\n      theme,\n      createSpanLink,\n    } = this.props;\n    const styles = getStyles(theme);\n    return (\n      <TimelineRow>\n        <TimelineRow.Cell width={columnDivision}>\n          <SpanTreeOffset\n            span={span}\n            showChildrenIcon={false}\n            hoverIndentGuideIds={hoverIndentGuideIds}\n            addHoverIndentGuideId={addHoverIndentGuideId}\n            removeHoverIndentGuideId={removeHoverIndentGuideId}\n          />\n          <span>\n            <span\n              className={styles.expandedAccent}\n              aria-checked=\"true\"\n              onClick={this._detailToggle}\n              role=\"switch\"\n              style={{ borderColor: color }}\n              data-test-id=\"detail-row-expanded-accent\"\n            />\n          </span>\n        </TimelineRow.Cell>\n        <TimelineRow.Cell width={1 - columnDivision}>\n          <div className={styles.infoWrapper} style={{ borderTopColor: color }}>\n            <SpanDetail\n              detailState={detailState}\n              linksGetter={this._linksGetter}\n              logItemToggle={logItemToggle}\n              logsToggle={logsToggle}\n              processToggle={processToggle}\n              referencesToggle={referencesToggle}\n              warningsToggle={warningsToggle}\n              stackTracesToggle={stackTracesToggle}\n              span={span}\n              tagsToggle={tagsToggle}\n              traceStartTime={traceStartTime}\n              focusSpan={focusSpan}\n              createSpanLink={createSpanLink}\n            />\n          </div>\n        </TimelineRow.Cell>\n      </TimelineRow>\n    );\n  }\n}\n\nexport default withTheme(UnthemedSpanDetailRow);\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as React from 'react';\nimport { css } from 'emotion';\n\nimport ListView from './ListView';\nimport SpanBarRow from './SpanBarRow';\nimport DetailState from './SpanDetail/DetailState';\nimport SpanDetailRow from './SpanDetailRow';\nimport {\n  createViewedBoundsFunc,\n  findServerChildSpan,\n  isErrorSpan,\n  spanContainsErredSpan,\n  ViewedBoundsFunctionType,\n} from './utils';\nimport { Accessors } from '../ScrollManager';\nimport { getColorByKey } from '../utils/color-generator';\nimport { TNil } from '../types';\nimport { TraceLog, TraceSpan, Trace, TraceKeyValuePair, TraceLink } from '@grafana/data';\nimport TTraceTimeline from '../types/TTraceTimeline';\n\nimport { createStyle, Theme, withTheme } from '../Theme';\nimport { CreateSpanLink } from './types';\n\ntype TExtractUiFindFromStateReturn = {\n  uiFind: string | undefined;\n};\n\nconst getStyles = createStyle(() => {\n  return {\n    rowsWrapper: css`\n      width: 100%;\n    `,\n    row: css`\n      width: 100%;\n    `,\n  };\n});\n\ntype RowState = {\n  isDetail: boolean;\n  span: TraceSpan;\n  spanIndex: number;\n};\n\ntype TVirtualizedTraceViewOwnProps = {\n  currentViewRangeTime: [number, number];\n  findMatchesIDs: Set<string> | TNil;\n  scrollToFirstVisibleSpan: () => void;\n  registerAccessors: (accesors: Accessors) => void;\n  trace: Trace;\n  focusSpan: (uiFind: string) => void;\n  linksGetter: (span: TraceSpan, items: TraceKeyValuePair[], itemIndex: number) => TraceLink[];\n  childrenToggle: (spanID: string) => void;\n  clearShouldScrollToFirstUiFindMatch: () => void;\n  detailLogItemToggle: (spanID: string, log: TraceLog) => void;\n  detailLogsToggle: (spanID: string) => void;\n  detailWarningsToggle: (spanID: string) => void;\n  detailStackTracesToggle: (spanID: string) => void;\n  detailReferencesToggle: (spanID: string) => void;\n  detailProcessToggle: (spanID: string) => void;\n  detailTagsToggle: (spanID: string) => void;\n  detailToggle: (spanID: string) => void;\n  setSpanNameColumnWidth: (width: number) => void;\n  setTrace: (trace: Trace | TNil, uiFind: string | TNil) => void;\n  hoverIndentGuideIds: Set<string>;\n  addHoverIndentGuideId: (spanID: string) => void;\n  removeHoverIndentGuideId: (spanID: string) => void;\n  theme: Theme;\n  createSpanLink?: CreateSpanLink;\n  scrollElement?: Element;\n};\n\ntype VirtualizedTraceViewProps = TVirtualizedTraceViewOwnProps & TExtractUiFindFromStateReturn & TTraceTimeline;\n\n// export for tests\nexport const DEFAULT_HEIGHTS = {\n  bar: 28,\n  detail: 161,\n  detailWithLogs: 197,\n};\n\nconst NUM_TICKS = 5;\n\nfunction generateRowStates(\n  spans: TraceSpan[] | TNil,\n  childrenHiddenIDs: Set<string>,\n  detailStates: Map<string, DetailState | TNil>\n): RowState[] {\n  if (!spans) {\n    return [];\n  }\n  let collapseDepth = null;\n  const rowStates = [];\n  for (let i = 0; i < spans.length; i++) {\n    const span = spans[i];\n    const { spanID, depth } = span;\n    let hidden = false;\n    if (collapseDepth != null) {\n      if (depth >= collapseDepth) {\n        hidden = true;\n      } else {\n        collapseDepth = null;\n      }\n    }\n    if (hidden) {\n      continue;\n    }\n    if (childrenHiddenIDs.has(spanID)) {\n      collapseDepth = depth + 1;\n    }\n    rowStates.push({\n      span,\n      isDetail: false,\n      spanIndex: i,\n    });\n    if (detailStates.has(spanID)) {\n      rowStates.push({\n        span,\n        isDetail: true,\n        spanIndex: i,\n      });\n    }\n  }\n  return rowStates;\n}\n\nfunction getClipping(currentViewRange: [number, number]) {\n  const [zoomStart, zoomEnd] = currentViewRange;\n  return {\n    left: zoomStart > 0,\n    right: zoomEnd < 1,\n  };\n}\n\n// export from tests\nexport class UnthemedVirtualizedTraceView extends React.Component<VirtualizedTraceViewProps> {\n  clipping: { left: boolean; right: boolean };\n  listView: ListView | TNil;\n  rowStates: RowState[];\n  getViewedBounds: ViewedBoundsFunctionType;\n\n  constructor(props: VirtualizedTraceViewProps) {\n    super(props);\n    // keep \"prop derivations\" on the instance instead of calculating in\n    // `.render()` to avoid recalculating in every invocation of `.renderRow()`\n    const { currentViewRangeTime, childrenHiddenIDs, detailStates, setTrace, trace, uiFind } = props;\n    this.clipping = getClipping(currentViewRangeTime);\n    const [zoomStart, zoomEnd] = currentViewRangeTime;\n    this.getViewedBounds = createViewedBoundsFunc({\n      min: trace.startTime,\n      max: trace.endTime,\n      viewStart: zoomStart,\n      viewEnd: zoomEnd,\n    });\n    this.rowStates = generateRowStates(trace.spans, childrenHiddenIDs, detailStates);\n\n    setTrace(trace, uiFind);\n  }\n\n  shouldComponentUpdate(nextProps: VirtualizedTraceViewProps) {\n    // If any prop updates, VirtualizedTraceViewImpl should update.\n    const nextPropKeys = Object.keys(nextProps) as Array<keyof VirtualizedTraceViewProps>;\n    for (let i = 0; i < nextPropKeys.length; i += 1) {\n      if (nextProps[nextPropKeys[i]] !== this.props[nextPropKeys[i]]) {\n        // Unless the only change was props.shouldScrollToFirstUiFindMatch changing to false.\n        if (nextPropKeys[i] === 'shouldScrollToFirstUiFindMatch') {\n          if (nextProps[nextPropKeys[i]]) {\n            return true;\n          }\n        } else {\n          return true;\n        }\n      }\n    }\n    return false;\n  }\n\n  UNSAFE_componentWillUpdate(nextProps: VirtualizedTraceViewProps) {\n    const { childrenHiddenIDs, detailStates, registerAccessors, trace, currentViewRangeTime } = this.props;\n    const {\n      currentViewRangeTime: nextViewRangeTime,\n      childrenHiddenIDs: nextHiddenIDs,\n      detailStates: nextDetailStates,\n      registerAccessors: nextRegisterAccessors,\n      setTrace,\n      trace: nextTrace,\n      uiFind,\n    } = nextProps;\n    if (trace !== nextTrace) {\n      setTrace(nextTrace, uiFind);\n    }\n    if (trace !== nextTrace || childrenHiddenIDs !== nextHiddenIDs || detailStates !== nextDetailStates) {\n      this.rowStates = nextTrace ? generateRowStates(nextTrace.spans, nextHiddenIDs, nextDetailStates) : [];\n    }\n    if (currentViewRangeTime !== nextViewRangeTime || (trace !== nextTrace && nextTrace)) {\n      this.clipping = getClipping(nextViewRangeTime);\n      const [zoomStart, zoomEnd] = nextViewRangeTime;\n      this.getViewedBounds = createViewedBoundsFunc({\n        min: nextTrace.startTime,\n        max: nextTrace.endTime,\n        viewStart: zoomStart,\n        viewEnd: zoomEnd,\n      });\n    }\n    if (this.listView && registerAccessors !== nextRegisterAccessors) {\n      nextRegisterAccessors(this.getAccessors());\n    }\n  }\n\n  componentDidUpdate() {\n    const {\n      shouldScrollToFirstUiFindMatch,\n      clearShouldScrollToFirstUiFindMatch,\n      scrollToFirstVisibleSpan,\n    } = this.props;\n    if (shouldScrollToFirstUiFindMatch) {\n      scrollToFirstVisibleSpan();\n      clearShouldScrollToFirstUiFindMatch();\n    }\n  }\n\n  getAccessors() {\n    const lv = this.listView;\n    if (!lv) {\n      throw new Error('ListView unavailable');\n    }\n    return {\n      getViewRange: this.getViewRange,\n      getSearchedSpanIDs: this.getSearchedSpanIDs,\n      getCollapsedChildren: this.getCollapsedChildren,\n      getViewHeight: lv.getViewHeight,\n      getBottomRowIndexVisible: lv.getBottomVisibleIndex,\n      getTopRowIndexVisible: lv.getTopVisibleIndex,\n      getRowPosition: lv.getRowPosition,\n      mapRowIndexToSpanIndex: this.mapRowIndexToSpanIndex,\n      mapSpanIndexToRowIndex: this.mapSpanIndexToRowIndex,\n    };\n  }\n\n  getViewRange = () => this.props.currentViewRangeTime;\n\n  getSearchedSpanIDs = () => this.props.findMatchesIDs;\n\n  getCollapsedChildren = () => this.props.childrenHiddenIDs;\n\n  mapRowIndexToSpanIndex = (index: number) => this.rowStates[index].spanIndex;\n\n  mapSpanIndexToRowIndex = (index: number) => {\n    const max = this.rowStates.length;\n    for (let i = 0; i < max; i++) {\n      const { spanIndex } = this.rowStates[i];\n      if (spanIndex === index) {\n        return i;\n      }\n    }\n    throw new Error(`unable to find row for span index: ${index}`);\n  };\n\n  setListView = (listView: ListView | TNil) => {\n    const isChanged = this.listView !== listView;\n    this.listView = listView;\n    if (listView && isChanged) {\n      this.props.registerAccessors(this.getAccessors());\n    }\n  };\n\n  // use long form syntax to avert flow error\n  // https://github.com/facebook/flow/issues/3076#issuecomment-290944051\n  getKeyFromIndex = (index: number) => {\n    const { isDetail, span } = this.rowStates[index];\n    return `${span.spanID}--${isDetail ? 'detail' : 'bar'}`;\n  };\n\n  getIndexFromKey = (key: string) => {\n    const parts = key.split('--');\n    const _spanID = parts[0];\n    const _isDetail = parts[1] === 'detail';\n    const max = this.rowStates.length;\n    for (let i = 0; i < max; i++) {\n      const { span, isDetail } = this.rowStates[i];\n      if (span.spanID === _spanID && isDetail === _isDetail) {\n        return i;\n      }\n    }\n    return -1;\n  };\n\n  getRowHeight = (index: number) => {\n    const { span, isDetail } = this.rowStates[index];\n    if (!isDetail) {\n      return DEFAULT_HEIGHTS.bar;\n    }\n    if (Array.isArray(span.logs) && span.logs.length) {\n      return DEFAULT_HEIGHTS.detailWithLogs;\n    }\n    return DEFAULT_HEIGHTS.detail;\n  };\n\n  renderRow = (key: string, style: React.CSSProperties, index: number, attrs: {}) => {\n    const { isDetail, span, spanIndex } = this.rowStates[index];\n    return isDetail\n      ? this.renderSpanDetailRow(span, key, style, attrs)\n      : this.renderSpanBarRow(span, spanIndex, key, style, attrs);\n  };\n\n  renderSpanBarRow(span: TraceSpan, spanIndex: number, key: string, style: React.CSSProperties, attrs: {}) {\n    const { spanID } = span;\n    const { serviceName } = span.process;\n    const {\n      childrenHiddenIDs,\n      childrenToggle,\n      detailStates,\n      detailToggle,\n      findMatchesIDs,\n      spanNameColumnWidth,\n      trace,\n      focusSpan,\n      hoverIndentGuideIds,\n      addHoverIndentGuideId,\n      removeHoverIndentGuideId,\n      theme,\n      createSpanLink,\n    } = this.props;\n    // to avert flow error\n    if (!trace) {\n      return null;\n    }\n    const color = getColorByKey(serviceName, theme);\n    const isCollapsed = childrenHiddenIDs.has(spanID);\n    const isDetailExpanded = detailStates.has(spanID);\n    const isMatchingFilter = findMatchesIDs ? findMatchesIDs.has(spanID) : false;\n    const showErrorIcon = isErrorSpan(span) || (isCollapsed && spanContainsErredSpan(trace.spans, spanIndex));\n\n    // Check for direct child \"server\" span if the span is a \"client\" span.\n    let rpc = null;\n    if (isCollapsed) {\n      const rpcSpan = findServerChildSpan(trace.spans.slice(spanIndex));\n      if (rpcSpan) {\n        const rpcViewBounds = this.getViewedBounds(rpcSpan.startTime, rpcSpan.startTime + rpcSpan.duration);\n        rpc = {\n          color: getColorByKey(rpcSpan.process.serviceName, theme),\n          operationName: rpcSpan.operationName,\n          serviceName: rpcSpan.process.serviceName,\n          viewEnd: rpcViewBounds.end,\n          viewStart: rpcViewBounds.start,\n        };\n      }\n    }\n    const styles = getStyles();\n    return (\n      <div className={styles.row} key={key} style={style} {...attrs}>\n        <SpanBarRow\n          clippingLeft={this.clipping.left}\n          clippingRight={this.clipping.right}\n          color={color}\n          columnDivision={spanNameColumnWidth}\n          isChildrenExpanded={!isCollapsed}\n          isDetailExpanded={isDetailExpanded}\n          isMatchingFilter={isMatchingFilter}\n          numTicks={NUM_TICKS}\n          onDetailToggled={detailToggle}\n          onChildrenToggled={childrenToggle}\n          rpc={rpc}\n          showErrorIcon={showErrorIcon}\n          getViewedBounds={this.getViewedBounds}\n          traceStartTime={trace.startTime}\n          span={span}\n          focusSpan={focusSpan}\n          hoverIndentGuideIds={hoverIndentGuideIds}\n          addHoverIndentGuideId={addHoverIndentGuideId}\n          removeHoverIndentGuideId={removeHoverIndentGuideId}\n          createSpanLink={createSpanLink}\n        />\n      </div>\n    );\n  }\n\n  renderSpanDetailRow(span: TraceSpan, key: string, style: React.CSSProperties, attrs: {}) {\n    const { spanID } = span;\n    const { serviceName } = span.process;\n    const {\n      detailLogItemToggle,\n      detailLogsToggle,\n      detailProcessToggle,\n      detailReferencesToggle,\n      detailWarningsToggle,\n      detailStackTracesToggle,\n      detailStates,\n      detailTagsToggle,\n      detailToggle,\n      spanNameColumnWidth,\n      trace,\n      focusSpan,\n      hoverIndentGuideIds,\n      addHoverIndentGuideId,\n      removeHoverIndentGuideId,\n      linksGetter,\n      theme,\n      createSpanLink,\n    } = this.props;\n    const detailState = detailStates.get(spanID);\n    if (!trace || !detailState) {\n      return null;\n    }\n    const color = getColorByKey(serviceName, theme);\n    const styles = getStyles();\n    return (\n      <div className={styles.row} key={key} style={{ ...style, zIndex: 1 }} {...attrs}>\n        <SpanDetailRow\n          color={color}\n          columnDivision={spanNameColumnWidth}\n          onDetailToggled={detailToggle}\n          detailState={detailState}\n          linksGetter={linksGetter}\n          logItemToggle={detailLogItemToggle}\n          logsToggle={detailLogsToggle}\n          processToggle={detailProcessToggle}\n          referencesToggle={detailReferencesToggle}\n          warningsToggle={detailWarningsToggle}\n          stackTracesToggle={detailStackTracesToggle}\n          span={span}\n          tagsToggle={detailTagsToggle}\n          traceStartTime={trace.startTime}\n          focusSpan={focusSpan}\n          hoverIndentGuideIds={hoverIndentGuideIds}\n          addHoverIndentGuideId={addHoverIndentGuideId}\n          removeHoverIndentGuideId={removeHoverIndentGuideId}\n          createSpanLink={createSpanLink}\n        />\n      </div>\n    );\n  }\n\n  render() {\n    const styles = getStyles();\n    const { scrollElement } = this.props;\n    return (\n      <div>\n        <ListView\n          ref={this.setListView}\n          dataLength={this.rowStates.length}\n          itemHeightGetter={this.getRowHeight}\n          itemRenderer={this.renderRow}\n          viewBuffer={50}\n          viewBufferMin={50}\n          itemsWrapperClassName={styles.rowsWrapper}\n          getKeyFromIndex={this.getKeyFromIndex}\n          getIndexFromKey={this.getIndexFromKey}\n          windowScroller={false}\n          scrollElement={scrollElement}\n        />\n      </div>\n    );\n  }\n}\n\nexport default withTheme(UnthemedVirtualizedTraceView);\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as React from 'react';\nimport Combokeys from 'combokeys';\n\nimport keyboardMappings from './keyboard-mappings';\n\nexport type CombokeysHandler =\n  | (() => void)\n  | ((event: React.KeyboardEvent<any>) => void)\n  | ((event: React.KeyboardEvent<any>, s: string) => void);\n\nexport type ShortcutCallbacks = {\n  [name: string]: CombokeysHandler;\n};\n\nlet instance: Combokeys | undefined;\n\nfunction getInstance(): Combokeys {\n  if (instance) {\n    return instance;\n  }\n  const local = new Combokeys(document.body);\n  instance = local;\n  return local;\n}\n\nexport function merge(callbacks: ShortcutCallbacks) {\n  const inst = getInstance();\n  Object.keys(callbacks).forEach((name) => {\n    const keysHandler = callbacks[name];\n    if (keysHandler) {\n      inst.bind(keyboardMappings[name].binding, keysHandler);\n    }\n  });\n}\n\nexport function reset() {\n  const combokeys = getInstance();\n  combokeys.reset();\n}\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nconst keyboardMappings: Record<string, { binding: string | string[]; label: string }> = {\n  scrollPageDown: { binding: 's', label: 'Scroll down' },\n  scrollPageUp: { binding: 'w', label: 'Scroll up' },\n  scrollToNextVisibleSpan: { binding: 'f', label: 'Scroll to the next visible span' },\n  scrollToPrevVisibleSpan: { binding: 'b', label: 'Scroll to the previous visible span' },\n  panLeft: { binding: ['a', 'left'], label: 'Pan left' },\n  panLeftFast: { binding: ['shift+a', 'shift+left'], label: 'Pan left — Large' },\n  panRight: { binding: ['d', 'right'], label: 'Pan right' },\n  panRightFast: { binding: ['shift+d', 'shift+right'], label: 'Pan right — Large' },\n  zoomIn: { binding: 'up', label: 'Zoom in' },\n  zoomInFast: { binding: 'shift+up', label: 'Zoom in — Large' },\n  zoomOut: { binding: 'down', label: 'Zoom out' },\n  zoomOutFast: { binding: 'shift+down', label: 'Zoom out — Large' },\n  collapseAll: { binding: ']', label: 'Collapse All' },\n  expandAll: { binding: '[', label: 'Expand All' },\n  collapseOne: { binding: 'p', label: 'Collapse One Level' },\n  expandOne: { binding: 'o', label: 'Expand One Level' },\n  searchSpans: { binding: 'ctrl+b', label: 'Search Spans' },\n  clearSearch: { binding: 'escape', label: 'Clear Search' },\n};\n\nexport default keyboardMappings;\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport React from 'react';\nimport { css } from 'emotion';\n\nimport TimelineHeaderRow from './TimelineHeaderRow';\nimport VirtualizedTraceView from './VirtualizedTraceView';\nimport { merge as mergeShortcuts } from '../keyboard-shortcuts';\nimport { Accessors } from '../ScrollManager';\nimport { TUpdateViewRangeTimeFunction, ViewRange, ViewRangeTimeUpdate } from './types';\nimport { TNil } from '../types';\nimport { TraceSpan, Trace, TraceLog, TraceKeyValuePair, TraceLink } from '@grafana/data';\nimport TTraceTimeline from '../types/TTraceTimeline';\nimport { autoColor, createStyle, Theme, withTheme } from '../Theme';\nimport ExternalLinkContext from '../url/externalLinkContext';\n\ntype TExtractUiFindFromStateReturn = {\n  uiFind: string | undefined;\n};\n\nconst getStyles = createStyle((theme: Theme) => {\n  return {\n    TraceTimelineViewer: css`\n      label: TraceTimelineViewer;\n      border-bottom: 1px solid ${autoColor(theme, '#bbb')};\n\n      & .json-markup {\n        line-height: 17px;\n        font-size: 13px;\n        font-family: monospace;\n        white-space: pre-wrap;\n      }\n\n      & .json-markup-key {\n        font-weight: bold;\n      }\n\n      & .json-markup-bool {\n        color: ${autoColor(theme, 'firebrick')};\n      }\n\n      & .json-markup-string {\n        color: ${autoColor(theme, 'teal')};\n      }\n\n      & .json-markup-null {\n        color: ${autoColor(theme, 'teal')};\n      }\n\n      & .json-markup-number {\n        color: ${autoColor(theme, 'blue', 'black')};\n      }\n    `,\n  };\n});\n\ntype TProps = TExtractUiFindFromStateReturn & {\n  registerAccessors: (accessors: Accessors) => void;\n  findMatchesIDs: Set<string> | TNil;\n  scrollToFirstVisibleSpan: () => void;\n  traceTimeline: TTraceTimeline;\n  trace: Trace;\n  updateNextViewRangeTime: (update: ViewRangeTimeUpdate) => void;\n  updateViewRangeTime: TUpdateViewRangeTimeFunction;\n  viewRange: ViewRange;\n  focusSpan: (uiFind: string) => void;\n  createLinkToExternalSpan: (traceID: string, spanID: string) => string;\n\n  setSpanNameColumnWidth: (width: number) => void;\n  collapseAll: (spans: TraceSpan[]) => void;\n  collapseOne: (spans: TraceSpan[]) => void;\n  expandAll: () => void;\n  expandOne: (spans: TraceSpan[]) => void;\n\n  childrenToggle: (spanID: string) => void;\n  clearShouldScrollToFirstUiFindMatch: () => void;\n  detailLogItemToggle: (spanID: string, log: TraceLog) => void;\n  detailLogsToggle: (spanID: string) => void;\n  detailWarningsToggle: (spanID: string) => void;\n  detailStackTracesToggle: (spanID: string) => void;\n  detailReferencesToggle: (spanID: string) => void;\n  detailProcessToggle: (spanID: string) => void;\n  detailTagsToggle: (spanID: string) => void;\n  detailToggle: (spanID: string) => void;\n  setTrace: (trace: Trace | TNil, uiFind: string | TNil) => void;\n  addHoverIndentGuideId: (spanID: string) => void;\n  removeHoverIndentGuideId: (spanID: string) => void;\n  linksGetter: (span: TraceSpan, items: TraceKeyValuePair[], itemIndex: number) => TraceLink[];\n  theme: Theme;\n  createSpanLink?: (\n    span: TraceSpan\n  ) => { href: string; onClick?: (e: React.MouseEvent) => void; content: React.ReactNode };\n  scrollElement?: Element;\n};\n\ntype State = {\n  // Will be set to real height of the component so it can be passed down to size some other elements.\n  height: number;\n};\n\nconst NUM_TICKS = 5;\n\n/**\n * `TraceTimelineViewer` now renders the header row because it is sensitive to\n * `props.viewRange.time.cursor`. If `VirtualizedTraceView` renders it, it will\n * re-render the ListView every time the cursor is moved on the trace minimap\n * or `TimelineHeaderRow`.\n */\nexport class UnthemedTraceTimelineViewer extends React.PureComponent<TProps, State> {\n  constructor(props: TProps) {\n    super(props);\n    this.state = { height: 0 };\n  }\n\n  componentDidMount() {\n    mergeShortcuts({\n      collapseAll: this.collapseAll,\n      expandAll: this.expandAll,\n      collapseOne: this.collapseOne,\n      expandOne: this.expandOne,\n    });\n  }\n\n  collapseAll = () => {\n    this.props.collapseAll(this.props.trace.spans);\n  };\n\n  collapseOne = () => {\n    this.props.collapseOne(this.props.trace.spans);\n  };\n\n  expandAll = () => {\n    this.props.expandAll();\n  };\n\n  expandOne = () => {\n    this.props.expandOne(this.props.trace.spans);\n  };\n\n  render() {\n    const {\n      setSpanNameColumnWidth,\n      updateNextViewRangeTime,\n      updateViewRangeTime,\n      viewRange,\n      createLinkToExternalSpan,\n      traceTimeline,\n      theme,\n      ...rest\n    } = this.props;\n    const { trace } = rest;\n    const styles = getStyles(theme);\n\n    return (\n      <ExternalLinkContext.Provider value={createLinkToExternalSpan}>\n        <div\n          className={styles.TraceTimelineViewer}\n          ref={(ref: HTMLDivElement | null) => ref && this.setState({ height: ref.getBoundingClientRect().height })}\n        >\n          <TimelineHeaderRow\n            duration={trace.duration}\n            nameColumnWidth={traceTimeline.spanNameColumnWidth}\n            numTicks={NUM_TICKS}\n            onCollapseAll={this.collapseAll}\n            onCollapseOne={this.collapseOne}\n            onColummWidthChange={setSpanNameColumnWidth}\n            onExpandAll={this.expandAll}\n            onExpandOne={this.expandOne}\n            viewRangeTime={viewRange.time}\n            updateNextViewRangeTime={updateNextViewRangeTime}\n            updateViewRangeTime={updateViewRangeTime}\n            columnResizeHandleHeight={this.state.height}\n          />\n          <VirtualizedTraceView\n            {...rest}\n            {...traceTimeline}\n            setSpanNameColumnWidth={setSpanNameColumnWidth}\n            currentViewRangeTime={viewRange.time.current}\n          />\n        </div>\n      </ExternalLinkContext.Provider>\n    );\n  }\n}\n\nexport default withTheme(UnthemedTraceTimelineViewer);\n","/* eslint-env node, browser */\n'use strict'\n\n/**\n * takes the event and returns the key character\n *\n * @param {Event} e\n * @return {string}\n */\nmodule.exports = function (e) {\n  var SPECIAL_KEYS_MAP,\n    SPECIAL_CHARACTERS_MAP\n  SPECIAL_KEYS_MAP = require('./special-keys-map')\n  SPECIAL_CHARACTERS_MAP = require('./special-characters-map')\n\n  // for keypress events we should return the character as is\n  if (e.type === 'keypress') {\n    var character = String.fromCharCode(e.which)\n\n    // if the shift key is not pressed then it is safe to assume\n    // that we want the character to be lowercase.  this means if\n    // you accidentally have caps lock on then your key bindings\n    // will continue to work\n    //\n    // the only side effect that might not be desired is if you\n    // bind something like 'A' cause you want to trigger an\n    // event when capital A is pressed caps lock will no longer\n    // trigger the event.  shift+a will though.\n    if (!e.shiftKey) {\n      character = character.toLowerCase()\n    }\n\n    return character\n  }\n\n  // for non keypress events the special maps are needed\n  if (SPECIAL_KEYS_MAP[e.which] !== undefined) {\n    return SPECIAL_KEYS_MAP[e.which]\n  }\n\n  if (SPECIAL_CHARACTERS_MAP[e.which] !== undefined) {\n    return SPECIAL_CHARACTERS_MAP[e.which]\n  }\n\n  // if it is not in the special map\n\n  // with keydown and keyup events the character seems to always\n  // come in as an uppercase character whether you are pressing shift\n  // or not.  we should make sure it is always lowercase for comparisons\n  return String.fromCharCode(e.which).toLowerCase()\n}\n","import { useEffect, useRef } from 'react';\nvar useInterval = function (callback, delay) {\n    var savedCallback = useRef(function () { });\n    useEffect(function () {\n        savedCallback.current = callback;\n    });\n    useEffect(function () {\n        if (delay !== null) {\n            var interval_1 = setInterval(function () { return savedCallback.current(); }, delay || 0);\n            return function () { return clearInterval(interval_1); };\n        }\n        return undefined;\n    }, [delay]);\n};\nexport default useInterval;\n","import React, { FC } from 'react';\nimport { toDuration } from '@grafana/data';\n\nexport interface TimeProps {\n  timeInMs: number;\n  className?: string;\n  humanize?: boolean;\n}\n\nexport const Time: FC<TimeProps> = ({ timeInMs, className, humanize }) => {\n  return <span className={`elapsed-time ${className}`}>{formatTime(timeInMs, humanize)}</span>;\n};\n\nconst formatTime = (timeInMs: number, humanize = false): string => {\n  const inSeconds = timeInMs / 1000;\n\n  if (!humanize) {\n    return `${inSeconds.toFixed(1)}s`;\n  }\n\n  const duration = toDuration(inSeconds, 'seconds');\n  const hours = duration.hours();\n  const minutes = duration.minutes();\n  const seconds = duration.seconds();\n\n  if (hours) {\n    return `${hours}h ${minutes}m ${seconds}s`;\n  }\n\n  if (minutes) {\n    return `${minutes}m ${seconds}s`;\n  }\n\n  return `${seconds}s`;\n};\n","import React, { FC, useState, useEffect } from 'react';\nimport { useInterval } from 'react-use';\nimport { Time, TimeProps } from './Time';\n\nconst INTERVAL = 150;\n\nexport interface ElapsedTimeProps extends Omit<TimeProps, 'timeInMs'> {\n  // Use this to reset the timer. Any value is allowed just need to be !== from the previous.\n  // Keep in mind things like [] !== [] or {} !== {}.\n  resetKey?: any;\n}\n\nexport const ElapsedTime: FC<ElapsedTimeProps> = ({ resetKey, humanize, className }) => {\n  const [elapsed, setElapsed] = useState(0); // the current value of elapsed\n\n  // hook that will schedule a interval and then update the elapsed value on every tick.\n  useInterval(() => setElapsed(elapsed + INTERVAL), INTERVAL);\n  // this effect will only be run when resetKey changes. This will reset the elapsed to 0.\n  useEffect(() => setElapsed(0), [resetKey]);\n\n  return <Time timeInMs={elapsed} className={className} humanize={humanize} />;\n};\n","import React, { PureComponent } from 'react';\nimport { css, cx } from 'emotion';\nimport tinycolor from 'tinycolor2';\n\nimport { LogMessageAnsi, Themeable, withTheme, getLogRowStyles, Icon } from '@grafana/ui';\nimport { GrafanaTheme, LogRowModel, TimeZone, dateTimeFormat } from '@grafana/data';\n\nimport { ElapsedTime } from './ElapsedTime';\n\nconst getStyles = (theme: GrafanaTheme) => ({\n  logsRowsLive: css`\n    label: logs-rows-live;\n    font-family: ${theme.typography.fontFamily.monospace};\n    font-size: ${theme.typography.size.sm};\n    display: flex;\n    flex-flow: column nowrap;\n    height: 60vh;\n    overflow-y: scroll;\n    :first-child {\n      margin-top: auto !important;\n    }\n  `,\n  logsRowFade: css`\n    label: logs-row-fresh;\n    color: ${theme.colors.text};\n    background-color: ${tinycolor(theme.palette.blue95).setAlpha(0.25).toString()};\n    animation: fade 1s ease-out 1s 1 normal forwards;\n    @keyframes fade {\n      from {\n        background-color: ${tinycolor(theme.palette.blue95).setAlpha(0.25).toString()};\n      }\n      to {\n        background-color: transparent;\n      }\n    }\n  `,\n  logsRowsIndicator: css`\n    font-size: ${theme.typography.size.md};\n    padding-top: ${theme.spacing.sm};\n    display: flex;\n    align-items: center;\n  `,\n  button: css`\n    margin-right: ${theme.spacing.sm};\n  `,\n  fullWidth: css`\n    width: 100%;\n  `,\n});\n\nexport interface Props extends Themeable {\n  logRows?: LogRowModel[];\n  timeZone: TimeZone;\n  stopLive: () => void;\n  onPause: () => void;\n  onResume: () => void;\n  isPaused: boolean;\n}\n\ninterface State {\n  logRowsToRender?: LogRowModel[];\n}\n\nclass LiveLogs extends PureComponent<Props, State> {\n  private liveEndDiv: HTMLDivElement | null = null;\n  private scrollContainerRef = React.createRef<HTMLTableSectionElement>();\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      logRowsToRender: props.logRows,\n    };\n  }\n\n  static getDerivedStateFromProps(nextProps: Props, state: State) {\n    if (!nextProps.isPaused) {\n      return {\n        // We update what we show only if not paused. We keep any background subscriptions running and keep updating\n        // our state, but we do not show the updates, this allows us start again showing correct result after resuming\n        // without creating a gap in the log results.\n        logRowsToRender: nextProps.logRows,\n      };\n    } else {\n      return null;\n    }\n  }\n\n  /**\n   * Handle pausing when user scrolls up so that we stop resetting his position to the bottom when new row arrives.\n   * We do not need to throttle it here much, adding new rows should be throttled/buffered itself in the query epics\n   * and after you pause we remove the handler and add it after you manually resume, so this should not be fired often.\n   */\n  onScroll = (event: React.SyntheticEvent) => {\n    const { isPaused, onPause } = this.props;\n    const { scrollTop, clientHeight, scrollHeight } = event.currentTarget;\n    const distanceFromBottom = scrollHeight - (scrollTop + clientHeight);\n    if (distanceFromBottom >= 5 && !isPaused) {\n      onPause();\n    }\n  };\n\n  rowsToRender = () => {\n    const { isPaused } = this.props;\n    let { logRowsToRender: rowsToRender = [] } = this.state;\n    if (!isPaused) {\n      // A perf optimisation here. Show just 100 rows when streaming and full length when the streaming is paused.\n      rowsToRender = rowsToRender.slice(-100);\n    }\n    return rowsToRender;\n  };\n\n  render() {\n    const { theme, timeZone, onPause, onResume, isPaused } = this.props;\n    const styles = getStyles(theme);\n    const { logsRow, logsRowLocalTime, logsRowMessage } = getLogRowStyles(theme);\n\n    return (\n      <div>\n        <table className={styles.fullWidth}>\n          <tbody\n            onScroll={isPaused ? undefined : this.onScroll}\n            className={cx(['logs-rows', styles.logsRowsLive])}\n            ref={this.scrollContainerRef}\n          >\n            {this.rowsToRender().map((row: LogRowModel) => {\n              return (\n                <tr className={cx(logsRow, styles.logsRowFade)} key={row.uid}>\n                  <td className={cx(logsRowLocalTime)}>{dateTimeFormat(row.timeEpochMs, { timeZone })}</td>\n                  <td className={cx(logsRowMessage)}>{row.hasAnsi ? <LogMessageAnsi value={row.raw} /> : row.entry}</td>\n                </tr>\n              );\n            })}\n            <tr\n              ref={(element) => {\n                this.liveEndDiv = element;\n                // This is triggered on every update so on every new row. It keeps the view scrolled at the bottom by\n                // default.\n                if (this.liveEndDiv && !isPaused) {\n                  this.scrollContainerRef.current?.scrollTo(0, this.scrollContainerRef.current.scrollHeight);\n                }\n              }}\n            />\n          </tbody>\n        </table>\n        <div className={cx([styles.logsRowsIndicator])}>\n          <button onClick={isPaused ? onResume : onPause} className={cx('btn btn-secondary', styles.button)}>\n            <Icon name={isPaused ? 'play' : 'pause'} />\n            &nbsp;\n            {isPaused ? 'Resume' : 'Pause'}\n          </button>\n          <button onClick={this.props.stopLive} className={cx('btn btn-inverse', styles.button)}>\n            <Icon name=\"square-shape\" size=\"lg\" type=\"mono\" />\n            &nbsp; Exit live mode\n          </button>\n          {isPaused || (\n            <span>\n              Last line received: <ElapsedTime resetKey={this.props.logRows} humanize={true} /> ago\n            </span>\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport const LiveLogsWithTheme = withTheme(LiveLogs);\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactIconBase = require('react-icon-base');\n\nvar _reactIconBase2 = _interopRequireDefault(_reactIconBase);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar MdFileUpload = function MdFileUpload(props) {\n    return _react2.default.createElement(\n        _reactIconBase2.default,\n        _extends({ viewBox: '0 0 40 40' }, props),\n        _react2.default.createElement(\n            'g',\n            null,\n            _react2.default.createElement('path', { d: 'm8.4 30h23.2v3.4h-23.2v-3.4z m6.6-3.4v-10h-6.6l11.6-11.6 11.6 11.6h-6.6v10h-10z' })\n        )\n    );\n};\n\nexports.default = MdFileUpload;\nmodule.exports = exports['default'];","/* eslint-env node, browser */\n'use strict'\n\n/**\n * actually calls the callback function\n *\n * if your callback function returns false this will use the jquery\n * convention - prevent default and stop propogation on the event\n *\n * @param {Function} callback\n * @param {Event} e\n * @returns void\n */\nmodule.exports = function (callback, e, combo, sequence) {\n  var self = this\n  var preventDefault\n  var stopPropagation\n\n  // if this event should not happen stop here\n  if (self.stopCallback(e, e.target || e.srcElement, combo, sequence)) {\n    return\n  }\n\n  if (callback(e, combo) === false) {\n    preventDefault = require('../../helpers/preventDefault')\n    preventDefault(e)\n    stopPropagation = require('../../helpers/stopPropagation')\n    stopPropagation(e)\n  }\n}\n","\nmodule.exports = function () {\n  var selection = document.getSelection();\n  if (!selection.rangeCount) {\n    return function () {};\n  }\n  var active = document.activeElement;\n\n  var ranges = [];\n  for (var i = 0; i < selection.rangeCount; i++) {\n    ranges.push(selection.getRangeAt(i));\n  }\n\n  switch (active.tagName.toUpperCase()) { // .toUpperCase handles XHTML\n    case 'INPUT':\n    case 'TEXTAREA':\n      active.blur();\n      break;\n\n    default:\n      active = null;\n      break;\n  }\n\n  selection.removeAllRanges();\n  return function () {\n    selection.type === 'Caret' &&\n    selection.removeAllRanges();\n\n    if (!selection.rangeCount) {\n      ranges.forEach(function(range) {\n        selection.addRange(range);\n      });\n    }\n\n    active &&\n    active.focus();\n  };\n};\n","/* eslint-env node, browser */\n'use strict'\n\n/**\n * takes a key event and figures out what the modifiers are\n *\n * @param {Event} e\n * @returns {Array}\n */\nmodule.exports = function (e) {\n  var modifiers = []\n\n  if (e.shiftKey) {\n    modifiers.push('shift')\n  }\n\n  if (e.altKey) {\n    modifiers.push('alt')\n  }\n\n  if (e.ctrlKey) {\n    modifiers.push('ctrl')\n  }\n\n  if (e.metaKey) {\n    modifiers.push('meta')\n  }\n\n  return modifiers\n}\n","/* eslint-env node, browser */\n'use strict'\n\n/**\n * stops propogation for this event\n *\n * @param {Event} e\n * @returns void\n */\nmodule.exports = function (e) {\n  if (e.stopPropagation) {\n    e.stopPropagation()\n    return\n  }\n\n  e.cancelBubble = true\n}\n","var baseExtremum = require('./_baseExtremum'),\n    baseGt = require('./_baseGt'),\n    baseIteratee = require('./_baseIteratee');\n\n/**\n * This method is like `_.max` except that it accepts `iteratee` which is\n * invoked for each element in `array` to generate the criterion by which\n * the value is ranked. The iteratee is invoked with one argument: (value).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Math\n * @param {Array} array The array to iterate over.\n * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n * @returns {*} Returns the maximum value.\n * @example\n *\n * var objects = [{ 'n': 1 }, { 'n': 2 }];\n *\n * _.maxBy(objects, function(o) { return o.n; });\n * // => { 'n': 2 }\n *\n * // The `_.property` iteratee shorthand.\n * _.maxBy(objects, 'n');\n * // => { 'n': 2 }\n */\nfunction maxBy(array, iteratee) {\n  return (array && array.length)\n    ? baseExtremum(array, baseIteratee(iteratee, 2), baseGt)\n    : undefined;\n}\n\nmodule.exports = maxBy;\n","'use strict';\n\n/**\n * Copyright 2015, Yahoo! Inc.\n * Copyrights licensed under the New BSD License. See the accompanying LICENSE file for terms.\n */\nvar REACT_STATICS = {\n    childContextTypes: true,\n    contextTypes: true,\n    defaultProps: true,\n    displayName: true,\n    getDefaultProps: true,\n    getDerivedStateFromProps: true,\n    mixins: true,\n    propTypes: true,\n    type: true\n};\n\nvar KNOWN_STATICS = {\n    name: true,\n    length: true,\n    prototype: true,\n    caller: true,\n    callee: true,\n    arguments: true,\n    arity: true\n};\n\nvar defineProperty = Object.defineProperty;\nvar getOwnPropertyNames = Object.getOwnPropertyNames;\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\nvar getPrototypeOf = Object.getPrototypeOf;\nvar objectPrototype = getPrototypeOf && getPrototypeOf(Object);\n\nfunction hoistNonReactStatics(targetComponent, sourceComponent, blacklist) {\n    if (typeof sourceComponent !== 'string') { // don't hoist over string (html) components\n\n        if (objectPrototype) {\n            var inheritedComponent = getPrototypeOf(sourceComponent);\n            if (inheritedComponent && inheritedComponent !== objectPrototype) {\n                hoistNonReactStatics(targetComponent, inheritedComponent, blacklist);\n            }\n        }\n\n        var keys = getOwnPropertyNames(sourceComponent);\n\n        if (getOwnPropertySymbols) {\n            keys = keys.concat(getOwnPropertySymbols(sourceComponent));\n        }\n\n        for (var i = 0; i < keys.length; ++i) {\n            var key = keys[i];\n            if (!REACT_STATICS[key] && !KNOWN_STATICS[key] && (!blacklist || !blacklist[key])) {\n                var descriptor = getOwnPropertyDescriptor(sourceComponent, key);\n                try { // Avoid failures from read-only properties\n                    defineProperty(targetComponent, key, descriptor);\n                } catch (e) {}\n            }\n        }\n\n        return targetComponent;\n    }\n\n    return targetComponent;\n}\n\nmodule.exports = hoistNonReactStatics;\n","import React, { forwardRef } from 'react';\nimport { IconName, Icon } from '@grafana/ui';\n\nexport enum IconSide {\n  left = 'left',\n  right = 'right',\n}\n\ninterface Props extends React.HTMLAttributes<HTMLDivElement> {\n  splitted: boolean;\n  title: string;\n  onClick?: () => void;\n  buttonClassName?: string;\n  icon?: IconName;\n  iconClassName?: string;\n  iconSide?: IconSide;\n  disabled?: boolean;\n}\n\nfunction formatBtnTitle(title: string, iconSide?: string): string {\n  return iconSide === IconSide.left ? '\\xA0' + title : iconSide === IconSide.right ? title + '\\xA0' : title;\n}\n\nexport const ResponsiveButton = forwardRef<HTMLButtonElement, Props>((props, ref) => {\n  const defaultProps = {\n    iconSide: IconSide.left,\n  };\n\n  props = { ...defaultProps, ...props };\n  const {\n    title,\n    onClick,\n    buttonClassName,\n    icon,\n    iconClassName,\n    splitted,\n    iconSide,\n    disabled,\n    ...divElementProps\n  } = props;\n\n  return (\n    <div {...divElementProps}>\n      <button\n        ref={ref}\n        className={`btn navbar-button ${buttonClassName ? buttonClassName : ''}`}\n        onClick={onClick ?? undefined}\n        disabled={disabled || false}\n      >\n        {icon && iconSide === IconSide.left ? <Icon name={icon} className={iconClassName} size=\"lg\" /> : null}\n        <span className=\"btn-title\">{!splitted ? formatBtnTitle(title, iconSide) : ''}</span>\n        {icon && iconSide === IconSide.right ? <Icon name={icon} className={iconClassName} size=\"lg\" /> : null}\n      </button>\n    </div>\n  );\n});\n\nResponsiveButton.displayName = 'ResponsiveButton';\n","/* eslint-env node, browser */\n'use strict'\n\n/**\n * reverses the map lookup so that we can look for specific keys\n * to see what can and can't use keypress\n *\n * @return {Object}\n */\nmodule.exports = function () {\n  var self = this\n  var constructor = self.constructor\n  var SPECIAL_KEYS_MAP\n\n  if (!constructor.REVERSE_MAP) {\n    constructor.REVERSE_MAP = {}\n    SPECIAL_KEYS_MAP = require('../../helpers/special-keys-map')\n    for (var key in SPECIAL_KEYS_MAP) {\n      // pull out the numeric keypad from here cause keypress should\n      // be able to detect the keys from the character\n      if (key > 95 && key < 112) {\n        continue\n      }\n\n      if (SPECIAL_KEYS_MAP.hasOwnProperty(key)) {\n        constructor.REVERSE_MAP[SPECIAL_KEYS_MAP[key]] = key\n      }\n    }\n  }\n  return constructor.REVERSE_MAP\n}\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as React from 'react';\nimport { css } from 'emotion';\nimport cx from 'classnames';\n\nimport { createStyle, isLight, Theme, useTheme } from '../Theme';\nimport { UIDivider } from '../uiElementsContext';\n\nconst getStyles = createStyle((theme: Theme) => {\n  return {\n    LabeledList: css`\n      label: LabeledList;\n      list-style: none;\n      margin: 0;\n      padding: 0;\n    `,\n    LabeledListItem: css`\n      label: LabeledListItem;\n      display: inline-block;\n    `,\n    LabeledListLabel: css`\n      label: LabeledListLabel;\n      color: ${isLight(theme) ? '#999' : '#666'};\n      margin-right: 0.25rem;\n    `,\n  };\n});\n\ntype LabeledListProps = {\n  className?: string;\n  dividerClassName?: string;\n  items: Array<{ key: string; label: React.ReactNode; value: React.ReactNode }>;\n};\n\nexport default function LabeledList(props: LabeledListProps) {\n  const { className, dividerClassName, items } = props;\n  const styles = getStyles(useTheme());\n  return (\n    <ul className={cx(styles.LabeledList, className)}>\n      {items.map(({ key, label, value }, i) => {\n        const divider = i < items.length - 1 && (\n          <li className={styles.LabeledListItem} key={`${key}--divider`}>\n            <UIDivider className={dividerClassName} type=\"vertical\" />\n          </li>\n        );\n        return [\n          <li className={styles.LabeledListItem} key={key}>\n            <span className={styles.LabeledListLabel}>{label}</span>\n            <strong>{value}</strong>\n          </li>,\n          divider,\n        ];\n      })}\n    </ul>\n  );\n}\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n// // export default {\n// const updateTypes = {\n//   DRAG_END: 'DRAG_END',\n//   DRAG_MOVE: 'DRAG_MOVE',\n//   DRAG_START: 'DRAG_START',\n//   MOUSE_ENTER: 'MOUSE_ENTER',\n//   MOUSE_LEAVE: 'MOUSE_LEAVE',\n//   MOUSE_MOVE: 'MOUSE_MOVE',\n// };\n\n// const typeUpdateTypes = updateTypes as { [K in keyof typeof updateTypes]: K };\n\nenum EUpdateTypes {\n  DragEnd = 'DragEnd',\n  DragMove = 'DragMove',\n  DragStart = 'DragStart',\n  MouseEnter = 'MouseEnter',\n  MouseLeave = 'MouseLeave',\n  MouseMove = 'MouseMove',\n}\n\nexport default EUpdateTypes;\n","/* eslint-env node, browser */\n'use strict'\n/**\n * triggers an event that has already been bound\n *\n * @param {string} keys\n * @param {string=} action\n * @returns void\n */\nmodule.exports = function (keys, action) {\n  var self = this\n  if (self.directMap[keys + ':' + action]) {\n    self.directMap[keys + ':' + action]({}, keys)\n  }\n  return this\n}\n","var compareAscending = require('./_compareAscending');\n\n/**\n * Used by `_.orderBy` to compare multiple properties of a value to another\n * and stable sort them.\n *\n * If `orders` is unspecified, all values are sorted in ascending order. Otherwise,\n * specify an order of \"desc\" for descending or \"asc\" for ascending sort order\n * of corresponding values.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {boolean[]|string[]} orders The order to sort by for each property.\n * @returns {number} Returns the sort order indicator for `object`.\n */\nfunction compareMultiple(object, other, orders) {\n  var index = -1,\n      objCriteria = object.criteria,\n      othCriteria = other.criteria,\n      length = objCriteria.length,\n      ordersLength = orders.length;\n\n  while (++index < length) {\n    var result = compareAscending(objCriteria[index], othCriteria[index]);\n    if (result) {\n      if (index >= ordersLength) {\n        return result;\n      }\n      var order = orders[index];\n      return result * (order == 'desc' ? -1 : 1);\n    }\n  }\n  // Fixes an `Array#sort` bug in the JS engine embedded in Adobe applications\n  // that causes it, under certain circumstances, to provide the same value for\n  // `object` and `other`. See https://github.com/jashkenas/underscore/pull/1247\n  // for more details.\n  //\n  // This also ensures a stable sort in V8 and other engines.\n  // See https://bugs.chromium.org/p/v8/issues/detail?id=90 for more details.\n  return object.index - other.index;\n}\n\nmodule.exports = compareMultiple;\n","/* eslint-env node, browser */\n'use strict'\n\n/**\n * determines if the keycode specified is a modifier key or not\n *\n * @param {string} key\n * @returns {boolean}\n */\nmodule.exports = function (key) {\n  return key === 'shift' || key === 'ctrl' || key === 'alt' || key === 'meta'\n}\n","// Libraries\nimport React, { useState } from 'react';\nimport { connect } from 'react-redux';\nimport { hot } from 'react-hot-loader';\n\n// Services & Utils\nimport store from 'app/core/store';\nimport { RICH_HISTORY_SETTING_KEYS } from 'app/core/utils/richHistory';\n\n// Types\nimport { ExploreItemState, StoreState } from 'app/types';\nimport { ExploreId, RichHistoryQuery } from 'app/types/explore';\n\n// Components, enums\nimport { RichHistory, Tabs } from './RichHistory';\n\n//Actions\nimport { deleteRichHistory } from '../state/history';\nimport { ExploreDrawer } from '../ExploreDrawer';\n\nexport interface Props {\n  width: number;\n  exploreId: ExploreId;\n  activeDatasourceInstance: string;\n  richHistory: RichHistoryQuery[];\n  firstTab: Tabs;\n  deleteRichHistory: typeof deleteRichHistory;\n  onClose: () => void;\n}\n\nexport function RichHistoryContainer(props: Props) {\n  const [height, setHeight] = useState(400);\n\n  const { richHistory, width, firstTab, activeDatasourceInstance, exploreId, deleteRichHistory, onClose } = props;\n\n  return (\n    <ExploreDrawer\n      width={width}\n      onResize={(_e, _dir, ref) => {\n        setHeight(Number(ref.style.height.slice(0, -2)));\n      }}\n    >\n      <RichHistory\n        richHistory={richHistory}\n        firstTab={firstTab}\n        activeDatasourceInstance={activeDatasourceInstance}\n        exploreId={exploreId}\n        deleteRichHistory={deleteRichHistory}\n        onClose={onClose}\n        height={height}\n      />\n    </ExploreDrawer>\n  );\n}\n\nfunction mapStateToProps(state: StoreState, { exploreId }: { exploreId: ExploreId }) {\n  const explore = state.explore;\n  // @ts-ignore\n  const item: ExploreItemState = explore[exploreId];\n  const { datasourceInstance } = item;\n  const firstTab = store.getBool(RICH_HISTORY_SETTING_KEYS.starredTabAsFirstTab, false)\n    ? Tabs.Starred\n    : Tabs.RichHistory;\n  const { richHistory } = explore;\n  return {\n    richHistory,\n    firstTab,\n    activeDatasourceInstance: datasourceInstance?.name,\n  };\n}\n\nconst mapDispatchToProps = {\n  deleteRichHistory,\n};\n\nexport default hot(module)(connect(mapStateToProps, mapDispatchToProps)(RichHistoryContainer));\n","import React, { useState } from 'react';\nimport { Button, JSONFormatter, LoadingPlaceholder, TabbedContainer, TabConfig } from '@grafana/ui';\nimport { AppEvents, PanelData, TimeZone } from '@grafana/data';\n\nimport appEvents from 'app/core/app_events';\nimport { CopyToClipboard } from 'app/core/components/CopyToClipboard/CopyToClipboard';\nimport { StoreState, ExploreItemState, ExploreId } from 'app/types';\nimport { hot } from 'react-hot-loader';\nimport { connect } from 'react-redux';\nimport { ExploreDrawer } from 'app/features/explore/ExploreDrawer';\nimport { useEffectOnce } from 'react-use';\nimport { getBackendSrv } from 'app/core/services/backend_srv';\nimport { InspectStatsTab } from '../dashboard/components/Inspector/InspectStatsTab';\nimport { getPanelInspectorStyles } from '../dashboard/components/Inspector/styles';\n\nfunction stripPropsFromResponse(response: any) {\n  // ignore silent requests and return early\n  if (response.config?.hideFromInspector) {\n    return;\n  }\n\n  const clonedResponse = { ...response }; // clone - dont modify the response\n\n  if (clonedResponse.headers) {\n    delete clonedResponse.headers;\n  }\n\n  if (clonedResponse.config) {\n    clonedResponse.request = clonedResponse.config;\n\n    delete clonedResponse.config;\n    delete clonedResponse.request.transformRequest;\n    delete clonedResponse.request.transformResponse;\n    delete clonedResponse.request.paramSerializer;\n    delete clonedResponse.request.jsonpCallbackParam;\n    delete clonedResponse.request.headers;\n    delete clonedResponse.request.requestId;\n    delete clonedResponse.request.inspect;\n    delete clonedResponse.request.retry;\n    delete clonedResponse.request.timeout;\n  }\n\n  if (clonedResponse.data) {\n    clonedResponse.response = clonedResponse.data;\n\n    delete clonedResponse.config;\n    delete clonedResponse.data;\n    delete clonedResponse.status;\n    delete clonedResponse.statusText;\n    delete clonedResponse.ok;\n    delete clonedResponse.url;\n    delete clonedResponse.redirected;\n    delete clonedResponse.type;\n    delete clonedResponse.$$config;\n  }\n\n  return clonedResponse;\n}\n\ninterface Props {\n  loading: boolean;\n  width: number;\n  exploreId: ExploreId;\n  queryResponse?: PanelData;\n  onClose: () => void;\n}\n\nexport function ExploreQueryInspector(props: Props) {\n  const [formattedJSON, setFormattedJSON] = useState({});\n\n  const getTextForClipboard = () => {\n    return JSON.stringify(formattedJSON, null, 2);\n  };\n\n  const onClipboardSuccess = () => {\n    appEvents.emit(AppEvents.alertSuccess, ['Content copied to clipboard']);\n  };\n\n  const [allNodesExpanded, setAllNodesExpanded] = useState(false);\n  const getOpenNodeCount = () => {\n    if (allNodesExpanded === null) {\n      return 3; // 3 is default, ie when state is null\n    } else if (allNodesExpanded) {\n      return 20;\n    }\n    return 1;\n  };\n\n  const onToggleExpand = () => {\n    setAllNodesExpanded(!allNodesExpanded);\n  };\n\n  const { loading, width, onClose, queryResponse } = props;\n\n  const [response, setResponse] = useState<PanelData>({} as PanelData);\n  useEffectOnce(() => {\n    const inspectorStreamSub = getBackendSrv()\n      .getInspectorStream()\n      .subscribe((resp) => {\n        const strippedResponse = stripPropsFromResponse(resp);\n        if (strippedResponse) {\n          setResponse(strippedResponse);\n        }\n      });\n\n    return () => {\n      inspectorStreamSub?.unsubscribe();\n    };\n  });\n\n  const haveData = response && Object.keys(response).length > 0;\n  const styles = getPanelInspectorStyles();\n  const statsTab: TabConfig = {\n    label: 'Stats',\n    value: 'stats',\n    icon: 'chart-line',\n    content: <InspectStatsTab data={queryResponse!} timeZone={queryResponse?.request?.timezone as TimeZone} />,\n  };\n\n  const inspectorTab: TabConfig = {\n    label: 'Query Inspector',\n    value: 'query_inspector',\n    icon: 'info-circle',\n    content: (\n      <>\n        <div className={styles.toolbar}>\n          {haveData && (\n            <>\n              <Button\n                icon={allNodesExpanded ? 'minus' : 'plus'}\n                variant=\"secondary\"\n                className={styles.toolbarItem}\n                onClick={onToggleExpand}\n              >\n                {allNodesExpanded ? 'Collapse' : 'Expand'} all\n              </Button>\n\n              <CopyToClipboard\n                text={getTextForClipboard}\n                onSuccess={onClipboardSuccess}\n                elType=\"div\"\n                className={styles.toolbarItem}\n              >\n                <Button icon=\"copy\" variant=\"secondary\">\n                  Copy to clipboard\n                </Button>\n              </CopyToClipboard>\n            </>\n          )}\n          <div className=\"flex-grow-1\" />\n        </div>\n        <div className={styles.contentQueryInspector}>\n          {loading && <LoadingPlaceholder text=\"Loading query inspector...\" />}\n          {!loading && haveData && (\n            <JSONFormatter json={response!} open={getOpenNodeCount()} onDidRender={setFormattedJSON} />\n          )}\n          {!loading && !haveData && (\n            <p className=\"muted\">No request & response collected yet. Run query to collect request & response.</p>\n          )}\n        </div>\n      </>\n    ),\n  };\n\n  const tabs = [statsTab, inspectorTab];\n  return (\n    <ExploreDrawer width={width} onResize={() => {}}>\n      <TabbedContainer tabs={tabs} onClose={onClose} closeIconTooltip=\"Close query inspector\" />\n    </ExploreDrawer>\n  );\n}\n\nfunction mapStateToProps(state: StoreState, { exploreId }: { exploreId: ExploreId }) {\n  const explore = state.explore;\n  const item: ExploreItemState = explore[exploreId];\n  const { loading, queryResponse } = item;\n\n  return {\n    loading,\n    queryResponse,\n  };\n}\n\nexport default hot(module)(connect(mapStateToProps)(ExploreQueryInspector));\n","import React, { Component } from 'react';\nimport shallowEqual from 'fbjs/lib/shallowEqual';\nimport hoistNonReactStatics from 'hoist-non-react-statics';\nimport { createChangeEmitter } from 'change-emitter';\nimport $$observable from 'symbol-observable';\n\nvar setStatic = function setStatic(key, value) {\n  return function (BaseComponent) {\n    /* eslint-disable no-param-reassign */\n    BaseComponent[key] = value;\n    /* eslint-enable no-param-reassign */\n    return BaseComponent;\n  };\n};\n\nvar setDisplayName = function setDisplayName(displayName) {\n  return setStatic('displayName', displayName);\n};\n\nvar getDisplayName = function getDisplayName(Component$$1) {\n  if (typeof Component$$1 === 'string') {\n    return Component$$1;\n  }\n\n  if (!Component$$1) {\n    return undefined;\n  }\n\n  return Component$$1.displayName || Component$$1.name || 'Component';\n};\n\nvar wrapDisplayName = function wrapDisplayName(BaseComponent, hocName) {\n  return hocName + '(' + getDisplayName(BaseComponent) + ')';\n};\n\nvar classCallCheck = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\n\n\n\n\n\n\n\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\n\n\nvar inherits = function (subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n};\n\n\n\n\n\n\n\n\n\nvar objectWithoutProperties = function (obj, keys) {\n  var target = {};\n\n  for (var i in obj) {\n    if (keys.indexOf(i) >= 0) continue;\n    if (!Object.prototype.hasOwnProperty.call(obj, i)) continue;\n    target[i] = obj[i];\n  }\n\n  return target;\n};\n\nvar possibleConstructorReturn = function (self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n};\n\nvar createEagerElementUtil = function createEagerElementUtil(hasKey, isReferentiallyTransparent, type, props, children) {\n  if (process.env.NODE_ENV === 'production' && !hasKey && isReferentiallyTransparent) {\n    if (children) {\n      return type(_extends({}, props, { children: children }));\n    }\n    return type(props);\n  }\n\n  var Component$$1 = type;\n\n  if (children) {\n    return React.createElement(\n      Component$$1,\n      props,\n      children\n    );\n  }\n\n  return React.createElement(Component$$1, props);\n};\n\nvar isClassComponent = function isClassComponent(Component$$1) {\n  return Boolean(Component$$1 && Component$$1.prototype && typeof Component$$1.prototype.render === 'function');\n};\n\nvar isReferentiallyTransparentFunctionComponent = function isReferentiallyTransparentFunctionComponent(Component$$1) {\n  return Boolean(typeof Component$$1 === 'function' && !isClassComponent(Component$$1) && !Component$$1.defaultProps && !Component$$1.contextTypes);\n};\n\nvar createFactory = function createFactory(type) {\n  var isReferentiallyTransparent = isReferentiallyTransparentFunctionComponent(type);\n  return function (p, c) {\n    return createEagerElementUtil(false, isReferentiallyTransparent, type, p, c);\n  };\n};\n\nvar mapProps = function mapProps(propsMapper) {\n  return function (BaseComponent) {\n    var factory = createFactory(BaseComponent);\n    var MapProps = function MapProps(props) {\n      return factory(propsMapper(props));\n    };\n    if (process.env.NODE_ENV !== 'production') {\n      return setDisplayName(wrapDisplayName(BaseComponent, 'mapProps'))(MapProps);\n    }\n    return MapProps;\n  };\n};\n\nvar withProps = function withProps(input) {\n  var hoc = mapProps(function (props) {\n    return _extends({}, props, typeof input === 'function' ? input(props) : input);\n  });\n  if (process.env.NODE_ENV !== 'production') {\n    return function (BaseComponent) {\n      return setDisplayName(wrapDisplayName(BaseComponent, 'withProps'))(hoc(BaseComponent));\n    };\n  }\n  return hoc;\n};\n\nvar pick = function pick(obj, keys) {\n  var result = {};\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i];\n    if (obj.hasOwnProperty(key)) {\n      result[key] = obj[key];\n    }\n  }\n  return result;\n};\n\nvar withPropsOnChange = function withPropsOnChange(shouldMapOrKeys, propsMapper) {\n  return function (BaseComponent) {\n    var factory = createFactory(BaseComponent);\n    var shouldMap = typeof shouldMapOrKeys === 'function' ? shouldMapOrKeys : function (props, nextProps) {\n      return !shallowEqual(pick(props, shouldMapOrKeys), pick(nextProps, shouldMapOrKeys));\n    };\n\n    var WithPropsOnChange = function (_Component) {\n      inherits(WithPropsOnChange, _Component);\n\n      function WithPropsOnChange() {\n        var _temp, _this, _ret;\n\n        classCallCheck(this, WithPropsOnChange);\n\n        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n          args[_key] = arguments[_key];\n        }\n\n        return _ret = (_temp = (_this = possibleConstructorReturn(this, _Component.call.apply(_Component, [this].concat(args))), _this), _this.computedProps = propsMapper(_this.props), _temp), possibleConstructorReturn(_this, _ret);\n      }\n\n      WithPropsOnChange.prototype.componentWillReceiveProps = function componentWillReceiveProps(nextProps) {\n        if (shouldMap(this.props, nextProps)) {\n          this.computedProps = propsMapper(nextProps);\n        }\n      };\n\n      WithPropsOnChange.prototype.render = function render() {\n        return factory(_extends({}, this.props, this.computedProps));\n      };\n\n      return WithPropsOnChange;\n    }(Component);\n\n    if (process.env.NODE_ENV !== 'production') {\n      return setDisplayName(wrapDisplayName(BaseComponent, 'withPropsOnChange'))(WithPropsOnChange);\n    }\n    return WithPropsOnChange;\n  };\n};\n\nvar mapValues = function mapValues(obj, func) {\n  var result = {};\n  /* eslint-disable no-restricted-syntax */\n  for (var key in obj) {\n    if (obj.hasOwnProperty(key)) {\n      result[key] = func(obj[key], key);\n    }\n  }\n  /* eslint-enable no-restricted-syntax */\n  return result;\n};\n\n/* eslint-disable no-console */\nvar withHandlers = function withHandlers(handlers) {\n  return function (BaseComponent) {\n    var factory = createFactory(BaseComponent);\n\n    var WithHandlers = function (_Component) {\n      inherits(WithHandlers, _Component);\n\n      function WithHandlers() {\n        var _temp, _this, _ret;\n\n        classCallCheck(this, WithHandlers);\n\n        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n          args[_key] = arguments[_key];\n        }\n\n        return _ret = (_temp = (_this = possibleConstructorReturn(this, _Component.call.apply(_Component, [this].concat(args))), _this), _initialiseProps.call(_this), _temp), possibleConstructorReturn(_this, _ret);\n      }\n\n      WithHandlers.prototype.componentWillReceiveProps = function componentWillReceiveProps() {\n        this.cachedHandlers = {};\n      };\n\n      WithHandlers.prototype.render = function render() {\n        return factory(_extends({}, this.props, this.handlers));\n      };\n\n      return WithHandlers;\n    }(Component);\n\n    var _initialiseProps = function _initialiseProps() {\n      var _this2 = this;\n\n      this.cachedHandlers = {};\n      this.handlers = mapValues(typeof handlers === 'function' ? handlers(this.props) : handlers, function (createHandler, handlerName) {\n        return function () {\n          var cachedHandler = _this2.cachedHandlers[handlerName];\n          if (cachedHandler) {\n            return cachedHandler.apply(undefined, arguments);\n          }\n\n          var handler = createHandler(_this2.props);\n          _this2.cachedHandlers[handlerName] = handler;\n\n          if (process.env.NODE_ENV !== 'production' && typeof handler !== 'function') {\n            console.error(\n            // eslint-disable-line no-console\n            'withHandlers(): Expected a map of higher-order functions. ' + 'Refer to the docs for more info.');\n          }\n\n          return handler.apply(undefined, arguments);\n        };\n      });\n    };\n\n    if (process.env.NODE_ENV !== 'production') {\n      return setDisplayName(wrapDisplayName(BaseComponent, 'withHandlers'))(WithHandlers);\n    }\n    return WithHandlers;\n  };\n};\n\nvar defaultProps = function defaultProps(props) {\n  return function (BaseComponent) {\n    var factory = createFactory(BaseComponent);\n    var DefaultProps = function DefaultProps(ownerProps) {\n      return factory(ownerProps);\n    };\n    DefaultProps.defaultProps = props;\n    if (process.env.NODE_ENV !== 'production') {\n      return setDisplayName(wrapDisplayName(BaseComponent, 'defaultProps'))(DefaultProps);\n    }\n    return DefaultProps;\n  };\n};\n\nvar omit = function omit(obj, keys) {\n  var rest = objectWithoutProperties(obj, []);\n\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i];\n    if (rest.hasOwnProperty(key)) {\n      delete rest[key];\n    }\n  }\n  return rest;\n};\n\nvar renameProp = function renameProp(oldName, newName) {\n  var hoc = mapProps(function (props) {\n    var _babelHelpers$extends;\n\n    return _extends({}, omit(props, [oldName]), (_babelHelpers$extends = {}, _babelHelpers$extends[newName] = props[oldName], _babelHelpers$extends));\n  });\n  if (process.env.NODE_ENV !== 'production') {\n    return function (BaseComponent) {\n      return setDisplayName(wrapDisplayName(BaseComponent, 'renameProp'))(hoc(BaseComponent));\n    };\n  }\n  return hoc;\n};\n\nvar keys = Object.keys;\n\n\nvar mapKeys = function mapKeys(obj, func) {\n  return keys(obj).reduce(function (result, key) {\n    var val = obj[key];\n    /* eslint-disable no-param-reassign */\n    result[func(val, key)] = val;\n    /* eslint-enable no-param-reassign */\n    return result;\n  }, {});\n};\n\nvar renameProps = function renameProps(nameMap) {\n  var hoc = mapProps(function (props) {\n    return _extends({}, omit(props, keys(nameMap)), mapKeys(pick(props, keys(nameMap)), function (_, oldName) {\n      return nameMap[oldName];\n    }));\n  });\n  if (process.env.NODE_ENV !== 'production') {\n    return function (BaseComponent) {\n      return setDisplayName(wrapDisplayName(BaseComponent, 'renameProps'))(hoc(BaseComponent));\n    };\n  }\n  return hoc;\n};\n\nvar flattenProp = function flattenProp(propName) {\n  return function (BaseComponent) {\n    var factory = createFactory(BaseComponent);\n    var FlattenProp = function FlattenProp(props) {\n      return factory(_extends({}, props, props[propName]));\n    };\n\n    if (process.env.NODE_ENV !== 'production') {\n      return setDisplayName(wrapDisplayName(BaseComponent, 'flattenProp'))(FlattenProp);\n    }\n    return FlattenProp;\n  };\n};\n\nvar withState = function withState(stateName, stateUpdaterName, initialState) {\n  return function (BaseComponent) {\n    var factory = createFactory(BaseComponent);\n\n    var WithState = function (_Component) {\n      inherits(WithState, _Component);\n\n      function WithState() {\n        var _temp, _this, _ret;\n\n        classCallCheck(this, WithState);\n\n        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n          args[_key] = arguments[_key];\n        }\n\n        return _ret = (_temp = (_this = possibleConstructorReturn(this, _Component.call.apply(_Component, [this].concat(args))), _this), _this.state = {\n          stateValue: typeof initialState === 'function' ? initialState(_this.props) : initialState\n        }, _this.updateStateValue = function (updateFn, callback) {\n          return _this.setState(function (_ref) {\n            var stateValue = _ref.stateValue;\n            return {\n              stateValue: typeof updateFn === 'function' ? updateFn(stateValue) : updateFn\n            };\n          }, callback);\n        }, _temp), possibleConstructorReturn(_this, _ret);\n      }\n\n      WithState.prototype.render = function render() {\n        var _babelHelpers$extends;\n\n        return factory(_extends({}, this.props, (_babelHelpers$extends = {}, _babelHelpers$extends[stateName] = this.state.stateValue, _babelHelpers$extends[stateUpdaterName] = this.updateStateValue, _babelHelpers$extends)));\n      };\n\n      return WithState;\n    }(Component);\n\n    if (process.env.NODE_ENV !== 'production') {\n      return setDisplayName(wrapDisplayName(BaseComponent, 'withState'))(WithState);\n    }\n    return WithState;\n  };\n};\n\nvar withStateHandlers = function withStateHandlers(initialState, stateUpdaters) {\n  return function (BaseComponent) {\n    var factory = createFactory(BaseComponent);\n\n    var WithStateHandlers = function (_Component) {\n      inherits(WithStateHandlers, _Component);\n\n      function WithStateHandlers() {\n        var _temp, _this, _ret;\n\n        classCallCheck(this, WithStateHandlers);\n\n        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n          args[_key] = arguments[_key];\n        }\n\n        return _ret = (_temp = (_this = possibleConstructorReturn(this, _Component.call.apply(_Component, [this].concat(args))), _this), _initialiseProps.call(_this), _temp), possibleConstructorReturn(_this, _ret);\n      }\n\n      WithStateHandlers.prototype.shouldComponentUpdate = function shouldComponentUpdate(nextProps, nextState) {\n        var propsChanged = nextProps !== this.props;\n        // the idea is to skip render if stateUpdater handler return undefined\n        // this allows to create no state update handlers with access to state and props\n        var stateChanged = !shallowEqual(nextState, this.state);\n        return propsChanged || stateChanged;\n      };\n\n      WithStateHandlers.prototype.render = function render() {\n        return factory(_extends({}, this.props, this.state, this.stateUpdaters));\n      };\n\n      return WithStateHandlers;\n    }(Component);\n\n    var _initialiseProps = function _initialiseProps() {\n      var _this2 = this;\n\n      this.state = typeof initialState === 'function' ? initialState(this.props) : initialState;\n      this.stateUpdaters = mapValues(stateUpdaters, function (handler) {\n        return function (mayBeEvent) {\n          for (var _len2 = arguments.length, args = Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n            args[_key2 - 1] = arguments[_key2];\n          }\n\n          // Having that functional form of setState can be called async\n          // we need to persist SyntheticEvent\n          if (mayBeEvent && typeof mayBeEvent.persist === 'function') {\n            mayBeEvent.persist();\n          }\n\n          _this2.setState(function (state, props) {\n            return handler(state, props).apply(undefined, [mayBeEvent].concat(args));\n          });\n        };\n      });\n    };\n\n    if (process.env.NODE_ENV !== 'production') {\n      return setDisplayName(wrapDisplayName(BaseComponent, 'withStateHandlers'))(WithStateHandlers);\n    }\n    return WithStateHandlers;\n  };\n};\n\nvar withReducer = function withReducer(stateName, dispatchName, reducer, initialState) {\n  return function (BaseComponent) {\n    var factory = createFactory(BaseComponent);\n\n    var WithReducer = function (_Component) {\n      inherits(WithReducer, _Component);\n\n      function WithReducer() {\n        var _temp, _this, _ret;\n\n        classCallCheck(this, WithReducer);\n\n        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n          args[_key] = arguments[_key];\n        }\n\n        return _ret = (_temp = (_this = possibleConstructorReturn(this, _Component.call.apply(_Component, [this].concat(args))), _this), _this.state = {\n          stateValue: _this.initializeStateValue()\n        }, _this.dispatch = function (action) {\n          return _this.setState(function (_ref) {\n            var stateValue = _ref.stateValue;\n            return {\n              stateValue: reducer(stateValue, action)\n            };\n          });\n        }, _temp), possibleConstructorReturn(_this, _ret);\n      }\n\n      WithReducer.prototype.initializeStateValue = function initializeStateValue() {\n        if (initialState !== undefined) {\n          return typeof initialState === 'function' ? initialState(this.props) : initialState;\n        }\n        return reducer(undefined, { type: '@@recompose/INIT' });\n      };\n\n      WithReducer.prototype.render = function render() {\n        var _babelHelpers$extends;\n\n        return factory(_extends({}, this.props, (_babelHelpers$extends = {}, _babelHelpers$extends[stateName] = this.state.stateValue, _babelHelpers$extends[dispatchName] = this.dispatch, _babelHelpers$extends)));\n      };\n\n      return WithReducer;\n    }(Component);\n\n    if (process.env.NODE_ENV !== 'production') {\n      return setDisplayName(wrapDisplayName(BaseComponent, 'withReducer'))(WithReducer);\n    }\n    return WithReducer;\n  };\n};\n\nvar identity = function identity(Component$$1) {\n  return Component$$1;\n};\n\nvar branch = function branch(test, left) {\n  var right = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : identity;\n  return function (BaseComponent) {\n    var leftFactory = void 0;\n    var rightFactory = void 0;\n    var Branch = function Branch(props) {\n      if (test(props)) {\n        leftFactory = leftFactory || createFactory(left(BaseComponent));\n        return leftFactory(props);\n      }\n      rightFactory = rightFactory || createFactory(right(BaseComponent));\n      return rightFactory(props);\n    };\n\n    if (process.env.NODE_ENV !== 'production') {\n      return setDisplayName(wrapDisplayName(BaseComponent, 'branch'))(Branch);\n    }\n    return Branch;\n  };\n};\n\nvar renderComponent = function renderComponent(Component$$1) {\n  return function (_) {\n    var factory = createFactory(Component$$1);\n    var RenderComponent = function RenderComponent(props) {\n      return factory(props);\n    };\n    if (process.env.NODE_ENV !== 'production') {\n      RenderComponent.displayName = wrapDisplayName(Component$$1, 'renderComponent');\n    }\n    return RenderComponent;\n  };\n};\n\nvar Nothing = function (_Component) {\n  inherits(Nothing, _Component);\n\n  function Nothing() {\n    classCallCheck(this, Nothing);\n    return possibleConstructorReturn(this, _Component.apply(this, arguments));\n  }\n\n  Nothing.prototype.render = function render() {\n    return null;\n  };\n\n  return Nothing;\n}(Component);\n\nvar renderNothing = function renderNothing(_) {\n  return Nothing;\n};\n\nvar shouldUpdate = function shouldUpdate(test) {\n  return function (BaseComponent) {\n    var factory = createFactory(BaseComponent);\n\n    var ShouldUpdate = function (_Component) {\n      inherits(ShouldUpdate, _Component);\n\n      function ShouldUpdate() {\n        classCallCheck(this, ShouldUpdate);\n        return possibleConstructorReturn(this, _Component.apply(this, arguments));\n      }\n\n      ShouldUpdate.prototype.shouldComponentUpdate = function shouldComponentUpdate(nextProps) {\n        return test(this.props, nextProps);\n      };\n\n      ShouldUpdate.prototype.render = function render() {\n        return factory(this.props);\n      };\n\n      return ShouldUpdate;\n    }(Component);\n\n    if (process.env.NODE_ENV !== 'production') {\n      return setDisplayName(wrapDisplayName(BaseComponent, 'shouldUpdate'))(ShouldUpdate);\n    }\n    return ShouldUpdate;\n  };\n};\n\nvar pure = function pure(BaseComponent) {\n  var hoc = shouldUpdate(function (props, nextProps) {\n    return !shallowEqual(props, nextProps);\n  });\n\n  if (process.env.NODE_ENV !== 'production') {\n    return setDisplayName(wrapDisplayName(BaseComponent, 'pure'))(hoc(BaseComponent));\n  }\n\n  return hoc(BaseComponent);\n};\n\nvar onlyUpdateForKeys = function onlyUpdateForKeys(propKeys) {\n  var hoc = shouldUpdate(function (props, nextProps) {\n    return !shallowEqual(pick(nextProps, propKeys), pick(props, propKeys));\n  });\n\n  if (process.env.NODE_ENV !== 'production') {\n    return function (BaseComponent) {\n      return setDisplayName(wrapDisplayName(BaseComponent, 'onlyUpdateForKeys'))(hoc(BaseComponent));\n    };\n  }\n  return hoc;\n};\n\nvar onlyUpdateForPropTypes = function onlyUpdateForPropTypes(BaseComponent) {\n  var propTypes = BaseComponent.propTypes;\n\n  if (process.env.NODE_ENV !== 'production') {\n    if (!propTypes) {\n      /* eslint-disable */\n      console.error('A component without any `propTypes` was passed to ' + '`onlyUpdateForPropTypes()`. Check the implementation of the ' + ('component with display name \"' + getDisplayName(BaseComponent) + '\".'));\n      /* eslint-enable */\n    }\n  }\n\n  var propKeys = Object.keys(propTypes || {});\n  var OnlyUpdateForPropTypes = onlyUpdateForKeys(propKeys)(BaseComponent);\n\n  if (process.env.NODE_ENV !== 'production') {\n    return setDisplayName(wrapDisplayName(BaseComponent, 'onlyUpdateForPropTypes'))(OnlyUpdateForPropTypes);\n  }\n  return OnlyUpdateForPropTypes;\n};\n\nvar withContext = function withContext(childContextTypes, getChildContext) {\n  return function (BaseComponent) {\n    var factory = createFactory(BaseComponent);\n\n    var WithContext = function (_Component) {\n      inherits(WithContext, _Component);\n\n      function WithContext() {\n        var _temp, _this, _ret;\n\n        classCallCheck(this, WithContext);\n\n        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n          args[_key] = arguments[_key];\n        }\n\n        return _ret = (_temp = (_this = possibleConstructorReturn(this, _Component.call.apply(_Component, [this].concat(args))), _this), _this.getChildContext = function () {\n          return getChildContext(_this.props);\n        }, _temp), possibleConstructorReturn(_this, _ret);\n      }\n\n      WithContext.prototype.render = function render() {\n        return factory(this.props);\n      };\n\n      return WithContext;\n    }(Component);\n\n    WithContext.childContextTypes = childContextTypes;\n\n    if (process.env.NODE_ENV !== 'production') {\n      return setDisplayName(wrapDisplayName(BaseComponent, 'withContext'))(WithContext);\n    }\n    return WithContext;\n  };\n};\n\nvar getContext = function getContext(contextTypes) {\n  return function (BaseComponent) {\n    var factory = createFactory(BaseComponent);\n    var GetContext = function GetContext(ownerProps, context) {\n      return factory(_extends({}, ownerProps, context));\n    };\n\n    GetContext.contextTypes = contextTypes;\n\n    if (process.env.NODE_ENV !== 'production') {\n      return setDisplayName(wrapDisplayName(BaseComponent, 'getContext'))(GetContext);\n    }\n    return GetContext;\n  };\n};\n\n/* eslint-disable no-console */\nvar lifecycle = function lifecycle(spec) {\n  return function (BaseComponent) {\n    var factory = createFactory(BaseComponent);\n\n    if (process.env.NODE_ENV !== 'production' && spec.hasOwnProperty('render')) {\n      console.error('lifecycle() does not support the render method; its behavior is to ' + 'pass all props and state to the base component.');\n    }\n\n    var Lifecycle = function (_Component) {\n      inherits(Lifecycle, _Component);\n\n      function Lifecycle() {\n        classCallCheck(this, Lifecycle);\n        return possibleConstructorReturn(this, _Component.apply(this, arguments));\n      }\n\n      Lifecycle.prototype.render = function render() {\n        return factory(_extends({}, this.props, this.state));\n      };\n\n      return Lifecycle;\n    }(Component);\n\n    Object.keys(spec).forEach(function (hook) {\n      return Lifecycle.prototype[hook] = spec[hook];\n    });\n\n    if (process.env.NODE_ENV !== 'production') {\n      return setDisplayName(wrapDisplayName(BaseComponent, 'lifecycle'))(Lifecycle);\n    }\n    return Lifecycle;\n  };\n};\n\nvar toClass = function toClass(baseComponent) {\n  if (isClassComponent(baseComponent)) {\n    return baseComponent;\n  }\n\n  var ToClass = function (_Component) {\n    inherits(ToClass, _Component);\n\n    function ToClass() {\n      classCallCheck(this, ToClass);\n      return possibleConstructorReturn(this, _Component.apply(this, arguments));\n    }\n\n    ToClass.prototype.render = function render() {\n      if (typeof baseComponent === 'string') {\n        return React.createElement(baseComponent, this.props);\n      }\n      return baseComponent(this.props, this.context);\n    };\n\n    return ToClass;\n  }(Component);\n\n  ToClass.displayName = getDisplayName(baseComponent);\n  ToClass.propTypes = baseComponent.propTypes;\n  ToClass.contextTypes = baseComponent.contextTypes;\n  ToClass.defaultProps = baseComponent.defaultProps;\n\n  return ToClass;\n};\n\nvar setPropTypes = function setPropTypes(propTypes) {\n  return setStatic('propTypes', propTypes);\n};\n\nfunction compose() {\n  for (var _len = arguments.length, funcs = Array(_len), _key = 0; _key < _len; _key++) {\n    funcs[_key] = arguments[_key];\n  }\n\n  if (funcs.length === 0) {\n    return function (arg) {\n      return arg;\n    };\n  }\n\n  if (funcs.length === 1) {\n    return funcs[0];\n  }\n\n  return funcs.reduce(function (a, b) {\n    return function () {\n      return a(b.apply(undefined, arguments));\n    };\n  });\n}\n\nvar createEagerElement = function createEagerElement(type, props, children) {\n  var isReferentiallyTransparent = isReferentiallyTransparentFunctionComponent(type);\n  /* eslint-disable */\n  var hasKey = props && props.hasOwnProperty('key');\n  /* eslint-enable */\n  return createEagerElementUtil(hasKey, isReferentiallyTransparent, type, props, children);\n};\n\nvar createSink = function createSink(callback) {\n  return function (_Component) {\n    inherits(Sink, _Component);\n\n    function Sink() {\n      classCallCheck(this, Sink);\n      return possibleConstructorReturn(this, _Component.apply(this, arguments));\n    }\n\n    Sink.prototype.componentWillMount = function componentWillMount() {\n      callback(this.props);\n    };\n\n    Sink.prototype.componentWillReceiveProps = function componentWillReceiveProps(nextProps) {\n      callback(nextProps);\n    };\n\n    Sink.prototype.render = function render() {\n      return null;\n    };\n\n    return Sink;\n  }(Component);\n};\n\nvar componentFromProp = function componentFromProp(propName) {\n  var Component$$1 = function Component$$1(props) {\n    return createEagerElement(props[propName], omit(props, [propName]));\n  };\n  Component$$1.displayName = 'componentFromProp(' + propName + ')';\n  return Component$$1;\n};\n\nvar nest = function nest() {\n  for (var _len = arguments.length, Components = Array(_len), _key = 0; _key < _len; _key++) {\n    Components[_key] = arguments[_key];\n  }\n\n  var factories = Components.map(createFactory);\n  var Nest = function Nest(_ref) {\n    var props = objectWithoutProperties(_ref, []),\n        children = _ref.children;\n    return factories.reduceRight(function (child, factory) {\n      return factory(props, child);\n    }, children);\n  };\n\n  if (process.env.NODE_ENV !== 'production') {\n    var displayNames = Components.map(getDisplayName);\n    Nest.displayName = 'nest(' + displayNames.join(', ') + ')';\n  }\n\n  return Nest;\n};\n\nvar hoistStatics = function hoistStatics(higherOrderComponent) {\n  return function (BaseComponent) {\n    var NewComponent = higherOrderComponent(BaseComponent);\n    hoistNonReactStatics(NewComponent, BaseComponent);\n    return NewComponent;\n  };\n};\n\nvar _config = {\n  fromESObservable: null,\n  toESObservable: null\n};\n\nvar configureObservable = function configureObservable(c) {\n  _config = c;\n};\n\nvar config = {\n  fromESObservable: function fromESObservable(observable) {\n    return typeof _config.fromESObservable === 'function' ? _config.fromESObservable(observable) : observable;\n  },\n  toESObservable: function toESObservable(stream) {\n    return typeof _config.toESObservable === 'function' ? _config.toESObservable(stream) : stream;\n  }\n};\n\nvar componentFromStreamWithConfig = function componentFromStreamWithConfig(config$$1) {\n  return function (propsToVdom) {\n    return function (_Component) {\n      inherits(ComponentFromStream, _Component);\n\n      function ComponentFromStream() {\n        var _config$fromESObserva;\n\n        var _temp, _this, _ret;\n\n        classCallCheck(this, ComponentFromStream);\n\n        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n          args[_key] = arguments[_key];\n        }\n\n        return _ret = (_temp = (_this = possibleConstructorReturn(this, _Component.call.apply(_Component, [this].concat(args))), _this), _this.state = { vdom: null }, _this.propsEmitter = createChangeEmitter(), _this.props$ = config$$1.fromESObservable((_config$fromESObserva = {\n          subscribe: function subscribe(observer) {\n            var unsubscribe = _this.propsEmitter.listen(function (props) {\n              if (props) {\n                observer.next(props);\n              } else {\n                observer.complete();\n              }\n            });\n            return { unsubscribe: unsubscribe };\n          }\n        }, _config$fromESObserva[$$observable] = function () {\n          return this;\n        }, _config$fromESObserva)), _this.vdom$ = config$$1.toESObservable(propsToVdom(_this.props$)), _temp), possibleConstructorReturn(_this, _ret);\n      }\n\n      // Stream of props\n\n\n      // Stream of vdom\n\n\n      ComponentFromStream.prototype.componentWillMount = function componentWillMount() {\n        var _this2 = this;\n\n        // Subscribe to child prop changes so we know when to re-render\n        this.subscription = this.vdom$.subscribe({\n          next: function next(vdom) {\n            _this2.setState({ vdom: vdom });\n          }\n        });\n        this.propsEmitter.emit(this.props);\n      };\n\n      ComponentFromStream.prototype.componentWillReceiveProps = function componentWillReceiveProps(nextProps) {\n        // Receive new props from the owner\n        this.propsEmitter.emit(nextProps);\n      };\n\n      ComponentFromStream.prototype.shouldComponentUpdate = function shouldComponentUpdate(nextProps, nextState) {\n        return nextState.vdom !== this.state.vdom;\n      };\n\n      ComponentFromStream.prototype.componentWillUnmount = function componentWillUnmount() {\n        // Call without arguments to complete stream\n        this.propsEmitter.emit();\n\n        // Clean-up subscription before un-mounting\n        this.subscription.unsubscribe();\n      };\n\n      ComponentFromStream.prototype.render = function render() {\n        return this.state.vdom;\n      };\n\n      return ComponentFromStream;\n    }(Component);\n  };\n};\n\nvar componentFromStream = function componentFromStream(propsToVdom) {\n  return componentFromStreamWithConfig(config)(propsToVdom);\n};\n\nvar identity$1 = function identity(t) {\n  return t;\n};\n\nvar mapPropsStreamWithConfig = function mapPropsStreamWithConfig(config$$1) {\n  var componentFromStream = componentFromStreamWithConfig({\n    fromESObservable: identity$1,\n    toESObservable: identity$1\n  });\n  return function (transform) {\n    return function (BaseComponent) {\n      var factory = createFactory(BaseComponent);\n      var fromESObservable = config$$1.fromESObservable,\n          toESObservable = config$$1.toESObservable;\n\n      return componentFromStream(function (props$) {\n        var _ref;\n\n        return _ref = {\n          subscribe: function subscribe(observer) {\n            var subscription = toESObservable(transform(fromESObservable(props$))).subscribe({\n              next: function next(childProps) {\n                return observer.next(factory(childProps));\n              }\n            });\n            return {\n              unsubscribe: function unsubscribe() {\n                return subscription.unsubscribe();\n              }\n            };\n          }\n        }, _ref[$$observable] = function () {\n          return this;\n        }, _ref;\n      });\n    };\n  };\n};\n\nvar mapPropsStream = function mapPropsStream(transform) {\n  var hoc = mapPropsStreamWithConfig(config)(transform);\n\n  if (process.env.NODE_ENV !== 'production') {\n    return function (BaseComponent) {\n      return setDisplayName(wrapDisplayName(BaseComponent, 'mapPropsStream'))(hoc(BaseComponent));\n    };\n  }\n  return hoc;\n};\n\nvar createEventHandlerWithConfig = function createEventHandlerWithConfig(config$$1) {\n  return function () {\n    var _config$fromESObserva;\n\n    var emitter = createChangeEmitter();\n    var stream = config$$1.fromESObservable((_config$fromESObserva = {\n      subscribe: function subscribe(observer) {\n        var unsubscribe = emitter.listen(function (value) {\n          return observer.next(value);\n        });\n        return { unsubscribe: unsubscribe };\n      }\n    }, _config$fromESObserva[$$observable] = function () {\n      return this;\n    }, _config$fromESObserva));\n    return {\n      handler: emitter.emit,\n      stream: stream\n    };\n  };\n};\n\nvar createEventHandler = createEventHandlerWithConfig(config);\n\n// Higher-order component helpers\n\nexport { mapProps, withProps, withPropsOnChange, withHandlers, defaultProps, renameProp, renameProps, flattenProp, withState, withStateHandlers, withReducer, branch, renderComponent, renderNothing, shouldUpdate, pure, onlyUpdateForKeys, onlyUpdateForPropTypes, withContext, getContext, lifecycle, toClass, setStatic, setPropTypes, setDisplayName, compose, getDisplayName, wrapDisplayName, shallowEqual, isClassComponent, createEagerElement, createFactory as createEagerFactory, createSink, componentFromProp, nest, hoistStatics, componentFromStream, componentFromStreamWithConfig, mapPropsStream, mapPropsStreamWithConfig, createEventHandler, createEventHandlerWithConfig, configureObservable as setObservableConfig };\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n    result[\"default\"] = mod;\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar React = __importStar(require(\"react\"));\nvar styles = {\n    top: {\n        width: '100%',\n        height: '10px',\n        top: '-5px',\n        left: '0px',\n        cursor: 'row-resize',\n    },\n    right: {\n        width: '10px',\n        height: '100%',\n        top: '0px',\n        right: '-5px',\n        cursor: 'col-resize',\n    },\n    bottom: {\n        width: '100%',\n        height: '10px',\n        bottom: '-5px',\n        left: '0px',\n        cursor: 'row-resize',\n    },\n    left: {\n        width: '10px',\n        height: '100%',\n        top: '0px',\n        left: '-5px',\n        cursor: 'col-resize',\n    },\n    topRight: {\n        width: '20px',\n        height: '20px',\n        position: 'absolute',\n        right: '-10px',\n        top: '-10px',\n        cursor: 'ne-resize',\n    },\n    bottomRight: {\n        width: '20px',\n        height: '20px',\n        position: 'absolute',\n        right: '-10px',\n        bottom: '-10px',\n        cursor: 'se-resize',\n    },\n    bottomLeft: {\n        width: '20px',\n        height: '20px',\n        position: 'absolute',\n        left: '-10px',\n        bottom: '-10px',\n        cursor: 'sw-resize',\n    },\n    topLeft: {\n        width: '20px',\n        height: '20px',\n        position: 'absolute',\n        left: '-10px',\n        top: '-10px',\n        cursor: 'nw-resize',\n    },\n};\nvar Resizer = /** @class */ (function (_super) {\n    __extends(Resizer, _super);\n    function Resizer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.onMouseDown = function (e) {\n            _this.props.onResizeStart(e, _this.props.direction);\n        };\n        _this.onTouchStart = function (e) {\n            _this.props.onResizeStart(e, _this.props.direction);\n        };\n        return _this;\n    }\n    Resizer.prototype.render = function () {\n        return (React.createElement(\"div\", { className: this.props.className || '', style: __assign(__assign({ position: 'absolute', userSelect: 'none' }, styles[this.props.direction]), (this.props.replaceStyles || {})), onMouseDown: this.onMouseDown, onTouchStart: this.onTouchStart }, this.props.children));\n    };\n    return Resizer;\n}(React.PureComponent));\nexports.Resizer = Resizer;\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nexport const getProcessServiceName = (proc) => proc.serviceName;\nexport const getProcessTags = (proc) => proc.tags;\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { createSelector } from 'reselect';\nimport fuzzy from 'fuzzy';\n\nimport { getProcessServiceName } from './process';\n\nexport const getSpanId = (span) => span.spanID;\nexport const getSpanName = (span) => span.operationName;\nexport const getSpanDuration = (span) => span.duration;\nexport const getSpanTimestamp = (span) => span.startTime;\nexport const getSpanProcessId = (span) => span.processID;\nexport const getSpanReferences = (span) => span.references || [];\nexport const getSpanReferenceByType = createSelector(\n  createSelector(({ span }) => span, getSpanReferences),\n  ({ type }) => type,\n  (references, type) => references.find((ref) => ref.refType === type)\n);\nexport const getSpanParentId = createSelector(\n  (span) => getSpanReferenceByType({ span, type: 'CHILD_OF' }),\n  (childOfRef) => (childOfRef ? childOfRef.spanID : null)\n);\n\nexport const getSpanProcess = (span) => {\n  if (!span.process) {\n    throw new Error(\n      `\n      you must hydrate the spans with the processes, perhaps\n      using hydrateSpansWithProcesses(), before accessing a span's process\n    `\n    );\n  }\n\n  return span.process;\n};\n\nexport const getSpanServiceName = createSelector(getSpanProcess, getProcessServiceName);\n\nexport const filterSpansForTimestamps = createSelector(\n  ({ spans }) => spans,\n  ({ leftBound }) => leftBound,\n  ({ rightBound }) => rightBound,\n  (spans, leftBound, rightBound) =>\n    spans.filter((span) => getSpanTimestamp(span) >= leftBound && getSpanTimestamp(span) <= rightBound)\n);\n\nexport const filterSpansForText = createSelector(\n  ({ spans }) => spans,\n  ({ text }) => text,\n  (spans, text) =>\n    fuzzy\n      .filter(text, spans, {\n        extract: (span) => `${getSpanServiceName(span)} ${getSpanName(span)}`,\n      })\n      .map(({ original }) => original)\n);\n\nconst getTextFilterdSpansAsMap = createSelector(filterSpansForText, (matchingSpans) =>\n  matchingSpans.reduce(\n    (obj, span) => ({\n      ...obj,\n      [getSpanId(span)]: span,\n    }),\n    {}\n  )\n);\n\nexport const highlightSpansForTextFilter = createSelector(\n  ({ spans }) => spans,\n  getTextFilterdSpansAsMap,\n  (spans, textFilteredSpansMap) =>\n    spans.map((span) => ({\n      ...span,\n      muted: !textFilteredSpansMap[getSpanId(span)],\n    }))\n);\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nexport default class TreeNode {\n  static iterFunction(fn, depth = 0) {\n    return (node) => fn(node.value, node, depth);\n  }\n\n  static searchFunction(search) {\n    if (typeof search === 'function') {\n      return search;\n    }\n\n    return (value, node) => (search instanceof TreeNode ? node === search : value === search);\n  }\n\n  constructor(value, children = []) {\n    this.value = value;\n    this.children = children;\n  }\n\n  get depth() {\n    return this.children.reduce((depth, child) => Math.max(child.depth + 1, depth), 1);\n  }\n\n  get size() {\n    let i = 0;\n    this.walk(() => i++);\n    return i;\n  }\n\n  addChild(child) {\n    this.children.push(child instanceof TreeNode ? child : new TreeNode(child));\n    return this;\n  }\n\n  find(search) {\n    const searchFn = TreeNode.iterFunction(TreeNode.searchFunction(search));\n    if (searchFn(this)) {\n      return this;\n    }\n    for (let i = 0; i < this.children.length; i++) {\n      const result = this.children[i].find(search);\n      if (result) {\n        return result;\n      }\n    }\n    return null;\n  }\n\n  getPath(search) {\n    const searchFn = TreeNode.iterFunction(TreeNode.searchFunction(search));\n\n    const findPath = (currentNode, currentPath) => {\n      // skip if we already found the result\n      const attempt = currentPath.concat([currentNode]);\n      // base case: return the array when there is a match\n      if (searchFn(currentNode)) {\n        return attempt;\n      }\n      for (let i = 0; i < currentNode.children.length; i++) {\n        const child = currentNode.children[i];\n        const match = findPath(child, attempt);\n        if (match) {\n          return match;\n        }\n      }\n      return null;\n    };\n\n    return findPath(this, []);\n  }\n\n  walk(fn, depth = 0) {\n    const nodeStack = [];\n    let actualDepth = depth;\n    nodeStack.push({ node: this, depth: actualDepth });\n    while (nodeStack.length) {\n      const { node, depth: nodeDepth } = nodeStack.pop();\n      fn(node.value, node, nodeDepth);\n      actualDepth = nodeDepth + 1;\n      let i = node.children.length - 1;\n      while (i >= 0) {\n        nodeStack.push({ node: node.children[i], depth: actualDepth });\n        i--;\n      }\n    }\n  }\n}\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { createSelector, createStructuredSelector } from 'reselect';\n\nimport {\n  getSpanId,\n  getSpanName,\n  getSpanServiceName,\n  getSpanTimestamp,\n  getSpanDuration,\n  getSpanProcessId,\n} from './span';\nimport { getProcessServiceName } from './process';\nimport { formatMillisecondTime, formatSecondTime, ONE_SECOND } from '../utils/date';\nimport { numberSortComparator } from '../utils/sort';\nimport TreeNode from '../utils/TreeNode';\n\nexport const getTraceId = (trace) => trace.traceID;\n\nexport const getTraceSpans = (trace) => trace.spans;\n\nconst getTraceProcesses = (trace) => trace.processes;\n\nconst getSpanWithProcess = createSelector(\n  (state) => state.span,\n  (state) => state.processes,\n  (span, processes) => ({\n    ...span,\n    process: processes[getSpanProcessId(span)],\n  })\n);\n\nexport const getTraceSpansAsMap = createSelector(getTraceSpans, (spans) =>\n  spans.reduce((map, span) => map.set(getSpanId(span), span), new Map())\n);\n\nexport const TREE_ROOT_ID = '__root__';\n\n/**\n * Build a tree of { value: spanID, children } items derived from the\n * `span.references` information. The tree represents the grouping of parent /\n * child relationships. The root-most node is nominal in that\n * `.value === TREE_ROOT_ID`. This is done because a root span (the main trace\n * span) is not always included with the trace data. Thus, there can be\n * multiple top-level spans, and the root node acts as their common parent.\n *\n * The children are sorted by `span.startTime` after the tree is built.\n *\n * @param  {Trace} trace The trace to build the tree of spanIDs.\n * @return {TreeNode}    A tree of spanIDs derived from the relationships\n *                       between spans in the trace.\n */\nexport function getTraceSpanIdsAsTree(trace) {\n  const nodesById = new Map(trace.spans.map((span) => [span.spanID, new TreeNode(span.spanID)]));\n  const spansById = new Map(trace.spans.map((span) => [span.spanID, span]));\n  const root = new TreeNode(TREE_ROOT_ID);\n  trace.spans.forEach((span) => {\n    const node = nodesById.get(span.spanID);\n    if (Array.isArray(span.references) && span.references.length) {\n      const { refType, spanID: parentID } = span.references[0];\n      if (refType === 'CHILD_OF' || refType === 'FOLLOWS_FROM') {\n        const parent = nodesById.get(parentID) || root;\n        parent.children.push(node);\n      } else {\n        throw new Error(`Unrecognized ref type: ${refType}`);\n      }\n    } else {\n      root.children.push(node);\n    }\n  });\n  const comparator = (nodeA, nodeB) => {\n    const a = spansById.get(nodeA.value);\n    const b = spansById.get(nodeB.value);\n    return +(a.startTime > b.startTime) || +(a.startTime === b.startTime) - 1;\n  };\n  trace.spans.forEach((span) => {\n    const node = nodesById.get(span.spanID);\n    if (node.children.length > 1) {\n      node.children.sort(comparator);\n    }\n  });\n  root.children.sort(comparator);\n  return root;\n}\n\n// attach \"process\" as an object to each span.\nexport const hydrateSpansWithProcesses = (trace) => {\n  const spans = getTraceSpans(trace);\n  const processes = getTraceProcesses(trace);\n\n  return {\n    ...trace,\n    spans: spans.map((span) => getSpanWithProcess({ span, processes })),\n  };\n};\n\nexport const getTraceSpanCount = createSelector(getTraceSpans, (spans) => spans.length);\n\nexport const getTraceTimestamp = createSelector(getTraceSpans, (spans) =>\n  spans.reduce(\n    (prevTimestamp, span) => (prevTimestamp ? Math.min(prevTimestamp, getSpanTimestamp(span)) : getSpanTimestamp(span)),\n    null\n  )\n);\n\nexport const getTraceDuration = createSelector(getTraceSpans, getTraceTimestamp, (spans, timestamp) =>\n  spans.reduce(\n    (prevDuration, span) =>\n      prevDuration\n        ? Math.max(getSpanTimestamp(span) - timestamp + getSpanDuration(span), prevDuration)\n        : getSpanDuration(span),\n    null\n  )\n);\n\nexport const getTraceEndTimestamp = createSelector(\n  getTraceTimestamp,\n  getTraceDuration,\n  (timestamp, duration) => timestamp + duration\n);\n\nexport const getParentSpan = createSelector(\n  getTraceSpanIdsAsTree,\n  getTraceSpansAsMap,\n  (tree, spanMap) =>\n    tree.children\n      .map((node) => spanMap.get(node.value))\n      .sort((spanA, spanB) => numberSortComparator(getSpanTimestamp(spanA), getSpanTimestamp(spanB)))[0]\n);\n\nexport const getTraceDepth = createSelector(getTraceSpanIdsAsTree, (spanTree) => spanTree.depth - 1);\n\nexport const getSpanDepthForTrace = createSelector(\n  createSelector((state) => state.trace, getTraceSpanIdsAsTree),\n  createSelector((state) => state.span, getSpanId),\n  (node, spanID) => node.getPath(spanID).length - 1\n);\n\nexport const getTraceServices = createSelector(getTraceProcesses, (processes) =>\n  Object.keys(processes).reduce(\n    (services, processID) => services.add(getProcessServiceName(processes[processID])),\n    new Set()\n  )\n);\n\nexport const getTraceServiceCount = createSelector(getTraceServices, (services) => services.size);\n\n// establish constants to determine how math should be handled\n// for nanosecond-to-millisecond conversions.\nexport const DURATION_FORMATTERS = {\n  ms: formatMillisecondTime,\n  s: formatSecondTime,\n};\n\nconst getDurationFormatterForTrace = createSelector(getTraceDuration, (totalDuration) =>\n  totalDuration >= ONE_SECOND ? DURATION_FORMATTERS.s : DURATION_FORMATTERS.ms\n);\n\nexport const formatDurationForUnit = createSelector(\n  ({ duration }) => duration,\n  ({ unit }) => DURATION_FORMATTERS[unit],\n  (duration, formatter) => formatter(duration)\n);\n\nexport const formatDurationForTrace = createSelector(\n  ({ duration }) => duration,\n  createSelector(({ trace }) => trace, getDurationFormatterForTrace),\n  (duration, formatter) => formatter(duration)\n);\n\nexport const getSortedSpans = createSelector(\n  ({ trace }) => trace,\n  ({ spans }) => spans,\n  ({ sort }) => sort,\n  (trace, spans, { dir, comparator, selector }) =>\n    [...spans].sort((spanA, spanB) => dir * comparator(selector(spanA, trace), selector(spanB, trace)))\n);\n\nconst getTraceSpansByHierarchyPosition = createSelector(getTraceSpanIdsAsTree, (tree) => {\n  const hierarchyPositionMap = new Map();\n  let i = 0;\n  tree.walk((spanID) => hierarchyPositionMap.set(spanID, i++));\n  return hierarchyPositionMap;\n});\n\nexport const getTreeSizeForTraceSpan = createSelector(\n  createSelector((state) => state.trace, getTraceSpanIdsAsTree),\n  createSelector((state) => state.span, getSpanId),\n  (tree, spanID) => {\n    const node = tree.find(spanID);\n    if (!node) {\n      return -1;\n    }\n    return node.size - 1;\n  }\n);\n\nexport const getSpanHierarchySortPositionForTrace = createSelector(\n  createSelector(({ trace }) => trace, getTraceSpansByHierarchyPosition),\n  ({ span }) => span,\n  (hierarchyPositionMap, span) => hierarchyPositionMap.get(getSpanId(span))\n);\n\nexport const getTraceName = createSelector(\n  createSelector(\n    createSelector(hydrateSpansWithProcesses, getParentSpan),\n    createStructuredSelector({\n      name: getSpanName,\n      serviceName: getSpanServiceName,\n    })\n  ),\n  ({ name, serviceName }) => `${serviceName}: ${name}`\n);\n\nexport const omitCollapsedSpans = createSelector(\n  ({ spans }) => spans,\n  createSelector(({ trace }) => trace, getTraceSpanIdsAsTree),\n  ({ collapsed }) => collapsed,\n  (spans, tree, collapse) => {\n    const hiddenSpanIds = collapse.reduce((result, collapsedSpanId) => {\n      tree.find(collapsedSpanId).walk((id) => id !== collapsedSpanId && result.add(id));\n      return result;\n    }, new Set());\n\n    return hiddenSpanIds.size > 0 ? spans.filter((span) => !hiddenSpanIds.has(getSpanId(span))) : spans;\n  }\n);\n\nexport const DEFAULT_TICK_INTERVAL = 4;\nexport const DEFAULT_TICK_WIDTH = 3;\nexport const getTicksForTrace = createSelector(\n  ({ trace }) => trace,\n  ({ interval = DEFAULT_TICK_INTERVAL }) => interval,\n  ({ width = DEFAULT_TICK_WIDTH }) => width,\n  (\n    trace,\n    interval,\n    width\n    // timestamps will be spaced over the interval, starting from the initial timestamp\n  ) =>\n    [...Array(interval + 1).keys()].map((num) => ({\n      timestamp: getTraceTimestamp(trace) + getTraceDuration(trace) * (num / interval),\n      width,\n    }))\n);\n\n// TODO: delete this when the backend can ensure uniqueness\n/* istanbul ignore next */\nexport const enforceUniqueSpanIds = createSelector(\n  /* istanbul ignore next */ (trace) => trace,\n  getTraceSpans,\n  /* istanbul ignore next */ (trace, spans) => {\n    const map = new Map();\n\n    return {\n      ...trace,\n      spans: spans.reduce((result, span) => {\n        const spanID = map.has(getSpanId(span)) ? `${getSpanId(span)}_${map.get(getSpanId(span))}` : getSpanId(span);\n        const updatedSpan = { ...span, spanID };\n\n        if (spanID !== getSpanId(span)) {\n          // eslint-disable-next-line no-console\n          console.warn('duplicate spanID in trace replaced', getSpanId(span), 'new:', spanID);\n        }\n\n        // set the presence of the span in the map or increment the number\n        map.set(getSpanId(span), (map.get(getSpanId(span)) || 0) + 1);\n\n        return result.concat([updatedSpan]);\n      }, []),\n    };\n  }\n);\n\n// TODO: delete this when the backend can ensure uniqueness\nexport const dropEmptyStartTimeSpans = createSelector(\n  /* istanbul ignore next */ (trace) => trace,\n  getTraceSpans,\n  /* istanbul ignore next */ (trace, spans) => ({\n    ...trace,\n    spans: spans.filter((span) => !!getSpanTimestamp(span)),\n  })\n);\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nexport function localeStringComparator(itemA, itemB) {\n  return itemA.localeCompare(itemB);\n}\n\nexport function numberSortComparator(itemA, itemB) {\n  return itemA - itemB;\n}\n\nexport function classNameForSortDir(dir) {\n  return `sorted ${dir === 1 ? 'ascending' : 'descending'}`;\n}\n\nexport function getNewSortForClick(prevSort, column) {\n  const { defaultDir = 1 } = column;\n\n  return {\n    key: column.name,\n    dir: prevSort.key === column.name ? -1 * prevSort.dir : defaultDir,\n  };\n}\n\nexport function createSortClickHandler(column, currentSortKey, currentSortDir, updateSort) {\n  return function onClickSortingElement() {\n    const { key, dir } = getNewSortForClick({ key: currentSortKey, dir: currentSortDir }, column);\n    updateSort(key, dir);\n  };\n}\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport _isEqual from 'lodash/isEqual';\n\n// @ts-ignore\nimport { getTraceSpanIdsAsTree } from '../selectors/trace';\nimport { getConfigValue } from '../utils/config/get-config';\nimport { TraceKeyValuePair, TraceSpan, Trace, TraceViewData } from '@grafana/data';\n// @ts-ignore\nimport TreeNode from '../utils/TreeNode';\n\n// exported for tests\nexport function deduplicateTags(spanTags: TraceKeyValuePair[]) {\n  const warningsHash: Map<string, string> = new Map<string, string>();\n  const tags: TraceKeyValuePair[] = spanTags.reduce<TraceKeyValuePair[]>((uniqueTags, tag) => {\n    if (!uniqueTags.some((t) => t.key === tag.key && t.value === tag.value)) {\n      uniqueTags.push(tag);\n    } else {\n      warningsHash.set(`${tag.key}:${tag.value}`, `Duplicate tag \"${tag.key}:${tag.value}\"`);\n    }\n    return uniqueTags;\n  }, []);\n  const warnings = Array.from(warningsHash.values());\n  return { tags, warnings };\n}\n\n// exported for tests\nexport function orderTags(spanTags: TraceKeyValuePair[], topPrefixes?: string[]) {\n  const orderedTags: TraceKeyValuePair[] = spanTags.slice();\n  const tp = (topPrefixes || []).map((p: string) => p.toLowerCase());\n\n  orderedTags.sort((a, b) => {\n    const aKey = a.key.toLowerCase();\n    const bKey = b.key.toLowerCase();\n\n    for (let i = 0; i < tp.length; i++) {\n      const p = tp[i];\n      if (aKey.startsWith(p) && !bKey.startsWith(p)) {\n        return -1;\n      }\n      if (!aKey.startsWith(p) && bKey.startsWith(p)) {\n        return 1;\n      }\n    }\n\n    if (aKey > bKey) {\n      return 1;\n    }\n    if (aKey < bKey) {\n      return -1;\n    }\n    return 0;\n  });\n\n  return orderedTags;\n}\n\n/**\n * NOTE: Mutates `data` - Transform the HTTP response data into the form the app\n * generally requires.\n */\nexport default function transformTraceData(data: TraceViewData | undefined): Trace | null {\n  if (!data?.traceID) {\n    return null;\n  }\n  const traceID = data.traceID.toLowerCase();\n\n  let traceEndTime = 0;\n  let traceStartTime = Number.MAX_SAFE_INTEGER;\n  const spanIdCounts = new Map();\n  const spanMap = new Map<string, TraceSpan>();\n  // filter out spans with empty start times\n  // eslint-disable-next-line no-param-reassign\n  data.spans = data.spans.filter((span) => Boolean(span.startTime));\n\n  const max = data.spans.length;\n  for (let i = 0; i < max; i++) {\n    const span: TraceSpan = data.spans[i] as TraceSpan;\n    const { startTime, duration, processID } = span;\n    //\n    let spanID = span.spanID;\n    // check for start / end time for the trace\n    if (startTime < traceStartTime) {\n      traceStartTime = startTime;\n    }\n    if (startTime + duration > traceEndTime) {\n      traceEndTime = startTime + duration;\n    }\n    // make sure span IDs are unique\n    const idCount = spanIdCounts.get(spanID);\n    if (idCount != null) {\n      // eslint-disable-next-line no-console\n      console.warn(`Dupe spanID, ${idCount + 1} x ${spanID}`, span, spanMap.get(spanID));\n      if (_isEqual(span, spanMap.get(spanID))) {\n        // eslint-disable-next-line no-console\n        console.warn('\\t two spans with same ID have `isEqual(...) === true`');\n      }\n      spanIdCounts.set(spanID, idCount + 1);\n      spanID = `${spanID}_${idCount}`;\n      span.spanID = spanID;\n    } else {\n      spanIdCounts.set(spanID, 1);\n    }\n    span.process = data.processes[processID];\n    spanMap.set(spanID, span);\n  }\n  // tree is necessary to sort the spans, so children follow parents, and\n  // siblings are sorted by start time\n  const tree = getTraceSpanIdsAsTree(data);\n  const spans: TraceSpan[] = [];\n  const svcCounts: Record<string, number> = {};\n  let traceName = '';\n\n  // Eslint complains about number type not needed but then TS complains it is implicitly any.\n  // eslint-disable-next-line @typescript-eslint/no-inferrable-types\n  tree.walk((spanID: string, node: TreeNode, depth: number = 0) => {\n    if (spanID === '__root__') {\n      return;\n    }\n    const span = spanMap.get(spanID) as TraceSpan;\n    if (!span) {\n      return;\n    }\n    const { serviceName } = span.process;\n    svcCounts[serviceName] = (svcCounts[serviceName] || 0) + 1;\n    if (!span.references || !span.references.length) {\n      traceName = `${serviceName}: ${span.operationName}`;\n    }\n    span.relativeStartTime = span.startTime - traceStartTime;\n    span.depth = depth - 1;\n    span.hasChildren = node.children.length > 0;\n    span.warnings = span.warnings || [];\n    span.tags = span.tags || [];\n    span.references = span.references || [];\n    const tagsInfo = deduplicateTags(span.tags);\n    span.tags = orderTags(tagsInfo.tags, getConfigValue('topTagPrefixes'));\n    span.warnings = span.warnings.concat(tagsInfo.warnings);\n    span.references.forEach((ref, index) => {\n      const refSpan = spanMap.get(ref.spanID) as TraceSpan;\n      if (refSpan) {\n        // eslint-disable-next-line no-param-reassign\n        ref.span = refSpan;\n        if (index > 0) {\n          // Don't take into account the parent, just other references.\n          refSpan.subsidiarilyReferencedBy = refSpan.subsidiarilyReferencedBy || [];\n          refSpan.subsidiarilyReferencedBy.push({\n            spanID,\n            traceID,\n            span,\n            refType: ref.refType,\n          });\n        }\n      }\n    });\n    spans.push(span);\n  });\n  const services = Object.keys(svcCounts).map((name) => ({ name, numberOfSpans: svcCounts[name] }));\n  return {\n    services,\n    spans,\n    traceID,\n    traceName,\n    // can't use spread operator for intersection types\n    // repl: https://goo.gl/4Z23MJ\n    // issue: https://github.com/facebook/flow/issues/1511\n    processes: data.processes,\n    duration: traceEndTime - traceStartTime,\n    startTime: traceStartTime,\n    endTime: traceEndTime,\n  };\n}\n","import React, { useCallback } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { RefreshPicker } from '@grafana/ui';\n\nimport { changeRefreshInterval } from './state/time';\nimport { setPausedStateAction } from './state/query';\nimport { ExploreId } from '../../types';\nimport { runQueries } from './state/query';\n\n/**\n * Hook that gives you all the functions needed to control the live tailing.\n */\nexport function useLiveTailControls(exploreId: ExploreId) {\n  const dispatch = useDispatch();\n\n  const pause = useCallback(() => {\n    dispatch(setPausedStateAction({ exploreId, isPaused: true }));\n  }, [exploreId, dispatch]);\n\n  const resume = useCallback(() => {\n    dispatch(setPausedStateAction({ exploreId, isPaused: false }));\n  }, [exploreId, dispatch]);\n\n  const stop = useCallback(() => {\n    // We need to pause here first because there is transition where we are not live but live logs are still shown\n    // to cross fade with the normal view. This will prevent reordering of the logs in the live view during the\n    // transition.\n    pause();\n\n    // TODO referencing this from perspective of refresh picker when there is designated button for it now is not\n    //  great. Needs a bit of refactoring.\n    dispatch(changeRefreshInterval(exploreId, RefreshPicker.offOption.value));\n    dispatch(runQueries(exploreId));\n  }, [exploreId, dispatch, pause]);\n\n  const start = useCallback(() => {\n    dispatch(changeRefreshInterval(exploreId, RefreshPicker.liveOption.value));\n  }, [exploreId, dispatch]);\n\n  return {\n    pause,\n    resume,\n    stop,\n    start,\n  };\n}\n\ntype Props = {\n  exploreId: ExploreId;\n  children: (controls: ReturnType<typeof useLiveTailControls>) => React.ReactElement;\n};\n\n/**\n * If you can't use the hook you can use this as a render prop pattern.\n */\nexport function LiveTailControls(props: Props) {\n  const controls = useLiveTailControls(props.exploreId);\n  return props.children(controls);\n}\n","/*\n * Fuzzy\n * https://github.com/myork/fuzzy\n *\n * Copyright (c) 2012 Matt York\n * Licensed under the MIT license.\n */\n\n(function() {\n\nvar root = this;\n\nvar fuzzy = {};\n\n// Use in node or in browser\nif (typeof exports !== 'undefined') {\n  module.exports = fuzzy;\n} else {\n  root.fuzzy = fuzzy;\n}\n\n// Return all elements of `array` that have a fuzzy\n// match against `pattern`.\nfuzzy.simpleFilter = function(pattern, array) {\n  return array.filter(function(str) {\n    return fuzzy.test(pattern, str);\n  });\n};\n\n// Does `pattern` fuzzy match `str`?\nfuzzy.test = function(pattern, str) {\n  return fuzzy.match(pattern, str) !== null;\n};\n\n// If `pattern` matches `str`, wrap each matching character\n// in `opts.pre` and `opts.post`. If no match, return null\nfuzzy.match = function(pattern, str, opts) {\n  opts = opts || {};\n  var patternIdx = 0\n    , result = []\n    , len = str.length\n    , totalScore = 0\n    , currScore = 0\n    // prefix\n    , pre = opts.pre || ''\n    // suffix\n    , post = opts.post || ''\n    // String to compare against. This might be a lowercase version of the\n    // raw string\n    , compareString =  opts.caseSensitive && str || str.toLowerCase()\n    , ch;\n\n  pattern = opts.caseSensitive && pattern || pattern.toLowerCase();\n\n  // For each character in the string, either add it to the result\n  // or wrap in template if it's the next string in the pattern\n  for(var idx = 0; idx < len; idx++) {\n    ch = str[idx];\n    if(compareString[idx] === pattern[patternIdx]) {\n      ch = pre + ch + post;\n      patternIdx += 1;\n\n      // consecutive characters should increase the score more than linearly\n      currScore += 1 + currScore;\n    } else {\n      currScore = 0;\n    }\n    totalScore += currScore;\n    result[result.length] = ch;\n  }\n\n  // return rendered string if we have a match for every char\n  if(patternIdx === pattern.length) {\n    // if the string is an exact match with pattern, totalScore should be maxed\n    totalScore = (compareString === pattern) ? Infinity : totalScore;\n    return {rendered: result.join(''), score: totalScore};\n  }\n\n  return null;\n};\n\n// The normal entry point. Filters `arr` for matches against `pattern`.\n// It returns an array with matching values of the type:\n//\n//     [{\n//         string:   '<b>lah' // The rendered string\n//       , index:    2        // The index of the element in `arr`\n//       , original: 'blah'   // The original element in `arr`\n//     }]\n//\n// `opts` is an optional argument bag. Details:\n//\n//    opts = {\n//        // string to put before a matching character\n//        pre:     '<b>'\n//\n//        // string to put after matching character\n//      , post:    '</b>'\n//\n//        // Optional function. Input is an entry in the given arr`,\n//        // output should be the string to test `pattern` against.\n//        // In this example, if `arr = [{crying: 'koala'}]` we would return\n//        // 'koala'.\n//      , extract: function(arg) { return arg.crying; }\n//    }\nfuzzy.filter = function(pattern, arr, opts) {\n  if(!arr || arr.length === 0) {\n    return [];\n  }\n  if (typeof pattern !== 'string') {\n    return arr;\n  }\n  opts = opts || {};\n  return arr\n    .reduce(function(prev, element, idx, arr) {\n      var str = element;\n      if(opts.extract) {\n        str = opts.extract(element);\n      }\n      var rendered = fuzzy.match(pattern, str, opts);\n      if(rendered != null) {\n        prev[prev.length] = {\n            string: rendered.rendered\n          , score: rendered.score\n          , index: idx\n          , original: element\n        };\n      }\n      return prev;\n    }, [])\n\n    // Sort by score. Browsers are inconsistent wrt stable/unstable\n    // sorting, so force stable by using the index in the case of tie.\n    // See http://ofb.net/~sethml/is-sort-stable.html\n    .sort(function(a,b) {\n      var compare = b.score - a.score;\n      if(compare) return compare;\n      return a.index - b.index;\n    });\n};\n\n\n}());\n\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport React from 'react';\n\nexport type TooltipPlacement =\n  | 'top'\n  | 'left'\n  | 'right'\n  | 'bottom'\n  | 'topLeft'\n  | 'topRight'\n  | 'bottomLeft'\n  | 'bottomRight'\n  | 'leftTop'\n  | 'leftBottom'\n  | 'rightTop'\n  | 'rightBottom';\nexport type PopoverProps = {\n  content?: React.ReactNode;\n  arrowPointAtCenter?: boolean;\n  overlayClassName?: string;\n  placement?: TooltipPlacement;\n  children?: React.ReactNode;\n};\n\nexport const UIPopover: React.ComponentType<PopoverProps> = function UIPopover(props: PopoverProps) {\n  return (\n    <GetElementsContext>\n      {(elements: Elements) => {\n        return <elements.Popover {...props} />;\n      }}\n    </GetElementsContext>\n  );\n};\n\ntype RenderFunction = () => React.ReactNode;\nexport type TooltipProps = {\n  title?: React.ReactNode | RenderFunction;\n  getPopupContainer?: (triggerNode: Element) => HTMLElement;\n  overlayClassName?: string;\n  children?: React.ReactNode;\n  placement?: TooltipPlacement;\n  mouseLeaveDelay?: number;\n  arrowPointAtCenter?: boolean;\n  onVisibleChange?: (visible: boolean) => void;\n};\n\nexport const UITooltip: React.ComponentType<TooltipProps> = function UITooltip(props: TooltipProps) {\n  return (\n    <GetElementsContext>\n      {(elements: Elements) => {\n        return <elements.Tooltip {...props} />;\n      }}\n    </GetElementsContext>\n  );\n};\n\nexport type IconProps = {\n  type: string;\n  className?: string;\n  onClick?: React.MouseEventHandler<any>;\n};\n\nexport const UIIcon: React.ComponentType<IconProps> = function UIIcon(props: IconProps) {\n  return (\n    <GetElementsContext>\n      {(elements: Elements) => {\n        return <elements.Icon {...props} />;\n      }}\n    </GetElementsContext>\n  );\n};\n\nexport type DropdownProps = {\n  overlay: React.ReactNode;\n  placement?: 'topLeft' | 'topCenter' | 'topRight' | 'bottomLeft' | 'bottomCenter' | 'bottomRight';\n  trigger?: Array<'click' | 'hover' | 'contextMenu'>;\n  children?: React.ReactNode;\n};\n\nexport const UIDropdown = function UIDropdown(props: DropdownProps) {\n  return (\n    <GetElementsContext>\n      {(elements: Elements) => {\n        return <elements.Dropdown {...props} />;\n      }}\n    </GetElementsContext>\n  );\n};\n\nexport type MenuProps = {\n  children?: React.ReactNode;\n};\n\nexport const UIMenu = function UIMenu(props: MenuProps) {\n  return (\n    <GetElementsContext>\n      {(elements: Elements) => {\n        return <elements.Menu {...props} />;\n      }}\n    </GetElementsContext>\n  );\n};\n\nexport type MenuItemProps = {\n  children?: React.ReactNode;\n};\n\nexport const UIMenuItem = function UIMenuItem(props: MenuItemProps) {\n  return (\n    <GetElementsContext>\n      {(elements: Elements) => {\n        return <elements.MenuItem {...props} />;\n      }}\n    </GetElementsContext>\n  );\n};\n\nexport type ButtonHTMLType = 'submit' | 'button' | 'reset';\nexport type ButtonProps = {\n  children?: React.ReactNode;\n  className?: string;\n  htmlType?: ButtonHTMLType;\n  icon?: string;\n  onClick?: React.MouseEventHandler<HTMLButtonElement>;\n  disabled?: boolean;\n};\n\nexport const UIButton = function UIButton(props: ButtonProps) {\n  return (\n    <GetElementsContext>\n      {(elements: Elements) => {\n        return <elements.Button {...props} />;\n      }}\n    </GetElementsContext>\n  );\n};\n\nexport type DividerProps = {\n  className?: string;\n  type?: 'vertical' | 'horizontal';\n};\n\nexport const UIDivider = function UIDivider(props: DividerProps) {\n  return (\n    <GetElementsContext>\n      {(elements: Elements) => {\n        return <elements.Divider {...props} />;\n      }}\n    </GetElementsContext>\n  );\n};\n\nexport type InputProps = {\n  autosize?: boolean | null;\n  placeholder?: string;\n  onChange: (value: React.ChangeEvent<HTMLInputElement>) => void;\n  suffix: React.ReactNode;\n  value?: string;\n};\n\nexport const UIInput: React.FC<InputProps> = function UIInput(props: InputProps) {\n  return (\n    <GetElementsContext>\n      {(elements: Elements) => {\n        return <elements.Input {...props} />;\n      }}\n    </GetElementsContext>\n  );\n};\n\nexport type InputGroupProps = {\n  className?: string;\n  compact?: boolean;\n  style?: React.CSSProperties;\n  children?: React.ReactNode;\n};\n\nexport const UIInputGroup = function UIInputGroup(props: InputGroupProps) {\n  return (\n    <GetElementsContext>\n      {(elements: Elements) => {\n        return <elements.InputGroup {...props} />;\n      }}\n    </GetElementsContext>\n  );\n};\n\nexport type Elements = {\n  Popover: React.ComponentType<PopoverProps>;\n  Tooltip: React.ComponentType<TooltipProps>;\n  Icon: React.ComponentType<IconProps>;\n  Dropdown: React.ComponentType<DropdownProps>;\n  Menu: React.ComponentType<MenuProps>;\n  MenuItem: React.ComponentType<MenuItemProps>;\n  Button: React.ComponentType<ButtonProps>;\n  Divider: React.ComponentType<DividerProps>;\n  Input: React.ComponentType<InputProps>;\n  InputGroup: React.ComponentType<InputGroupProps>;\n};\n\n/**\n * Allows for injecting custom UI elements that will be used. Mainly for styling and removing dependency on\n * any specific UI library but can also inject specific behaviour.\n */\nconst UIElementsContext = React.createContext<Elements | undefined>(undefined);\nUIElementsContext.displayName = 'UIElementsContext';\nexport default UIElementsContext;\n\ntype GetElementsContextProps = {\n  children: (elements: Elements) => React.ReactNode;\n};\n\n/**\n * Convenience render prop style component to handle error state when elements are not defined.\n */\nexport function GetElementsContext(props: GetElementsContextProps) {\n  return (\n    <UIElementsContext.Consumer>\n      {(value: Elements | undefined) => {\n        if (!value) {\n          throw new Error('Elements context is required. You probably forget to use UIElementsContext.Provider');\n        }\n        return props.children(value);\n      }}\n    </UIElementsContext.Consumer>\n  );\n}\n","export { default as TraceTimelineViewer } from './TraceTimelineViewer';\nexport { default as TracePageHeader } from './TracePageHeader';\nexport { default as UIElementsContext } from './uiElementsContext';\nexport * from './uiElementsContext';\nexport * from './types';\nexport * from './TraceTimelineViewer/types';\nexport { default as DetailState } from './TraceTimelineViewer/SpanDetail/DetailState';\nexport { default as transformTraceData } from './model/transform-trace-data';\nexport { default as filterSpans } from './utils/filter-spans';\nexport * from './Theme';\n\nimport { onlyUpdateForKeys } from 'recompose';\n\nexport default {\n  onlyUpdateForKeys,\n} as any;\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { Theme } from '../Theme';\nimport memoizeOne from 'memoize-one';\n\n// TS needs the precise return type\nfunction strToRgb(s: string): [number, number, number] {\n  if (s.length !== 7) {\n    return [0, 0, 0];\n  }\n  const r = s.slice(1, 3);\n  const g = s.slice(3, 5);\n  const b = s.slice(5);\n  return [parseInt(r, 16), parseInt(g, 16), parseInt(b, 16)];\n}\n\nclass ColorGenerator {\n  colorsHex: string[];\n  colorsRgb: Array<[number, number, number]>;\n  cache: Map<string, number>;\n  currentIdx: number;\n\n  constructor(colorsHex: string[]) {\n    this.colorsHex = colorsHex;\n    this.colorsRgb = colorsHex.map(strToRgb);\n    this.cache = new Map();\n    this.currentIdx = 0;\n  }\n\n  _getColorIndex(key: string): number {\n    let i = this.cache.get(key);\n    if (i == null) {\n      i = this.currentIdx;\n      this.cache.set(key, this.currentIdx);\n      this.currentIdx = ++this.currentIdx % this.colorsHex.length;\n    }\n    return i;\n  }\n\n  /**\n   * Will assign a color to an arbitrary key.\n   * If the key has been used already, it will\n   * use the same color.\n   */\n  getColorByKey(key: string) {\n    const i = this._getColorIndex(key);\n    return this.colorsHex[i];\n  }\n\n  /**\n   * Retrieve the RGB values associated with a key. Adds the key and associates\n   * it with a color if the key is not recognized.\n   * @returns {number[]} An array of three ints [0, 255] representing a color.\n   */\n  getRgbColorByKey(key: string): [number, number, number] {\n    const i = this._getColorIndex(key);\n    return this.colorsRgb[i];\n  }\n\n  clear() {\n    this.cache.clear();\n    this.currentIdx = 0;\n  }\n}\n\nconst getGenerator = memoizeOne((colors: string[]) => {\n  return new ColorGenerator(colors);\n});\n\nexport function clear() {\n  getGenerator([]);\n}\n\nexport function getColorByKey(key: string, theme: Theme) {\n  return getGenerator(theme.servicesColorPalette).getColorByKey(key);\n}\n\nexport function getRgbColorByKey(key: string, theme: Theme): [number, number, number] {\n  return getGenerator(theme.servicesColorPalette).getRgbColorByKey(key);\n}\n","import React from 'react';\nimport {\n  FieldType,\n  formattedValueToString,\n  getDisplayProcessor,\n  GrafanaTheme,\n  QueryResultMetaStat,\n  TimeZone,\n} from '@grafana/data';\nimport { config } from 'app/core/config';\nimport { stylesFactory, useTheme } from '@grafana/ui';\nimport { css } from 'emotion';\n\ninterface InspectStatsTableProps {\n  timeZone: TimeZone;\n  name: string;\n  stats: QueryResultMetaStat[];\n}\n\nexport const InspectStatsTable: React.FC<InspectStatsTableProps> = ({ timeZone, name, stats }) => {\n  const theme = useTheme();\n  const styles = getStyles(theme);\n\n  if (!stats || !stats.length) {\n    return null;\n  }\n\n  return (\n    <div className={styles.wrapper}>\n      <div className=\"section-heading\">{name}</div>\n      <table className=\"filter-table width-30\">\n        <tbody>\n          {stats.map((stat, index) => {\n            return (\n              <tr key={`${stat.displayName}-${index}`}>\n                <td>{stat.displayName}</td>\n                <td className={styles.cell}>{formatStat(stat, timeZone)}</td>\n              </tr>\n            );\n          })}\n        </tbody>\n      </table>\n    </div>\n  );\n};\n\nfunction formatStat(stat: QueryResultMetaStat, timeZone?: TimeZone): string {\n  const display = getDisplayProcessor({\n    field: {\n      type: FieldType.number,\n      config: stat,\n    },\n    theme: config.theme,\n    timeZone,\n  });\n  return formattedValueToString(display(stat.value));\n}\n\nconst getStyles = stylesFactory((theme: GrafanaTheme) => {\n  return {\n    wrapper: css`\n      padding-bottom: ${theme.spacing.md};\n    `,\n    cell: css`\n      text-align: right;\n    `,\n  };\n});\n","import { PanelData, QueryResultMetaStat, TimeZone } from '@grafana/data';\nimport { selectors } from '@grafana/e2e-selectors';\nimport { InspectStatsTable } from './InspectStatsTable';\nimport React from 'react';\n\ninterface InspectStatsTabProps {\n  data: PanelData;\n  timeZone: TimeZone;\n}\n\nexport const InspectStatsTab: React.FC<InspectStatsTabProps> = ({ data, timeZone }) => {\n  if (!data.request) {\n    return null;\n  }\n\n  let stats: QueryResultMetaStat[] = [];\n\n  const requestTime = data.request.endTime ? data.request.endTime - data.request.startTime : -1;\n  const processingTime = data.timings?.dataProcessingTime || -1;\n  let dataRows = 0;\n\n  for (const frame of data.series) {\n    dataRows += frame.length;\n  }\n\n  if (requestTime > 0) {\n    stats.push({ displayName: 'Total request time', value: requestTime, unit: 'ms' });\n  }\n  if (processingTime > 0) {\n    stats.push({ displayName: 'Data processing time', value: processingTime, unit: 'ms' });\n  }\n  stats.push({ displayName: 'Number of queries', value: data.request.targets.length });\n  stats.push({ displayName: 'Total number rows', value: dataRows });\n\n  let dataStats: QueryResultMetaStat[] = [];\n\n  for (const series of data.series) {\n    if (series.meta && series.meta.stats) {\n      dataStats = dataStats.concat(series.meta.stats);\n    }\n  }\n\n  return (\n    <div aria-label={selectors.components.PanelInspector.Stats.content}>\n      <InspectStatsTable timeZone={timeZone} name={'Stats'} stats={stats} />\n      <InspectStatsTable timeZone={timeZone} name={'Data source stats'} stats={dataStats} />\n    </div>\n  );\n};\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\nvar IconBase = function IconBase(_ref, _ref2) {\n  var children = _ref.children;\n  var color = _ref.color;\n  var size = _ref.size;\n  var style = _ref.style;\n  var width = _ref.width;\n  var height = _ref.height;\n\n  var props = _objectWithoutProperties(_ref, ['children', 'color', 'size', 'style', 'width', 'height']);\n\n  var _ref2$reactIconBase = _ref2.reactIconBase;\n  var reactIconBase = _ref2$reactIconBase === undefined ? {} : _ref2$reactIconBase;\n\n  var computedSize = size || reactIconBase.size || '1em';\n  return _react2.default.createElement('svg', _extends({\n    children: children,\n    fill: 'currentColor',\n    preserveAspectRatio: 'xMidYMid meet',\n    height: height || computedSize,\n    width: width || computedSize\n  }, reactIconBase, props, {\n    style: _extends({\n      verticalAlign: 'middle',\n      color: color || reactIconBase.color\n    }, reactIconBase.style || {}, style)\n  }));\n};\n\nIconBase.propTypes = {\n  color: _propTypes2.default.string,\n  size: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.number]),\n  width: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.number]),\n  height: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.number]),\n  style: _propTypes2.default.object\n};\n\nIconBase.contextTypes = {\n  reactIconBase: _propTypes2.default.shape(IconBase.propTypes)\n};\n\nexports.default = IconBase;\nmodule.exports = exports['default'];","import React, { useContext } from 'react';\nimport { css } from 'emotion';\nimport { ThemeContext, LinkButton, CallToActionCard, Icon } from '@grafana/ui';\n\nexport const NoDataSourceCallToAction = () => {\n  const theme = useContext(ThemeContext);\n\n  const message =\n    'Explore requires at least one data source. Once you have added a data source, you can query it here.';\n  const footer = (\n    <>\n      <Icon name=\"rocket\" />\n      <> ProTip: You can also define data sources through configuration files. </>\n      <a\n        href=\"http://docs.grafana.org/administration/provisioning/#datasources?utm_source=explore\"\n        target=\"_blank\"\n        rel=\"noreferrer\"\n        className=\"text-link\"\n      >\n        Learn more\n      </a>\n    </>\n  );\n\n  const ctaElement = (\n    <LinkButton size=\"lg\" href=\"datasources/new\" icon=\"database\">\n      Add data source\n    </LinkButton>\n  );\n\n  const cardClassName = css`\n    max-width: ${theme.breakpoints.lg};\n    margin-top: ${theme.spacing.md};\n    align-self: center;\n  `;\n\n  return (\n    <CallToActionCard\n      callToActionElement={ctaElement}\n      className={cardClassName}\n      footer={footer}\n      message={message}\n      theme={theme}\n    />\n  );\n};\n","/* eslint-env node, browser */\n'use strict'\n\n/**\n * finds all callbacks that match based on the keycode, modifiers,\n * and action\n *\n * @param {string} character\n * @param {Array} modifiers\n * @param {Event|Object} e\n * @param {string=} sequenceName - name of the sequence we are looking for\n * @param {string=} combination\n * @param {number=} level\n * @returns {Array}\n */\nmodule.exports = function (character, modifiers, e, sequenceName, combination, level) {\n  var self = this\n  var j\n  var callback\n  var matches = []\n  var action = e.type\n  var isModifier\n  var modifiersMatch\n\n  if (\n      action === 'keypress' &&\n      // Firefox fires keypress for arrows\n      !(e.code && e.code.slice(0, 5) === 'Arrow')\n  ) {\n    // 'any-character' callbacks are only on `keypress`\n    var anyCharCallbacks = self.callbacks['any-character'] || []\n    anyCharCallbacks.forEach(function (callback) {\n      matches.push(callback)\n    })\n  }\n\n  if (!self.callbacks[character]) { return matches }\n\n  isModifier = require('../../helpers/isModifier')\n  // if a modifier key is coming up on its own we should allow it\n  if (action === 'keyup' && isModifier(character)) {\n    modifiers = [character]\n  }\n\n  // loop through all callbacks for the key that was pressed\n  // and see if any of them match\n  for (j = 0; j < self.callbacks[character].length; ++j) {\n    callback = self.callbacks[character][j]\n\n    // if a sequence name is not specified, but this is a sequence at\n    // the wrong level then move onto the next match\n    if (!sequenceName && callback.seq && self.sequenceLevels[callback.seq] !== callback.level) {\n      continue\n    }\n\n    // if the action we are looking for doesn't match the action we got\n    // then we should keep going\n    if (action !== callback.action) {\n      continue\n    }\n\n    // if this is a keypress event and the meta key and control key\n    // are not pressed that means that we need to only look at the\n    // character, otherwise check the modifiers as well\n    //\n    // chrome will not fire a keypress if meta or control is down\n    // safari will fire a keypress if meta or meta+shift is down\n    // firefox will fire a keypress if meta or control is down\n    modifiersMatch = require('./modifiersMatch')\n    if ((action === 'keypress' && !e.metaKey && !e.ctrlKey) || modifiersMatch(modifiers, callback.modifiers)) {\n      // when you bind a combination or sequence a second time it\n      // should overwrite the first one.  if a sequenceName or\n      // combination is specified in this call it does just that\n      //\n      // @todo make deleting its own method?\n      var deleteCombo = !sequenceName && callback.combo === combination\n      var deleteSequence = sequenceName && callback.seq === sequenceName && callback.level === level\n      if (deleteCombo || deleteSequence) {\n        self.callbacks[character].splice(j, 1)\n      }\n\n      matches.push(callback)\n    }\n  }\n\n  return matches\n}\n","/* eslint-env node, browser */\n'use strict'\n\nmodule.exports = function () {\n  var self = this\n\n  self.instances.forEach(function (combokeys) {\n    combokeys.reset()\n  })\n}\n","/**\n * The base implementation of `_.gt` which doesn't coerce arguments.\n *\n * @private\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if `value` is greater than `other`,\n *  else `false`.\n */\nfunction baseGt(value, other) {\n  return value > other;\n}\n\nmodule.exports = baseGt;\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactIconBase = require('react-icon-base');\n\nvar _reactIconBase2 = _interopRequireDefault(_reactIconBase);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar IoIosArrowDown = function IoIosArrowDown(props) {\n    return _react2.default.createElement(\n        _reactIconBase2.default,\n        _extends({ viewBox: '0 0 40 40' }, props),\n        _react2.default.createElement(\n            'g',\n            null,\n            _react2.default.createElement('path', { d: 'm31 12.5l1.5 1.6-12.5 13.4-12.5-13.4 1.5-1.6 11 11.7z' })\n        )\n    );\n};\n\nexports.default = IoIosArrowDown;\nmodule.exports = exports['default'];","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n    result[\"default\"] = mod;\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar React = __importStar(require(\"react\"));\nvar resizer_1 = require(\"./resizer\");\nvar fast_memoize_1 = __importDefault(require(\"fast-memoize\"));\nvar DEFAULT_SIZE = {\n    width: 'auto',\n    height: 'auto',\n};\nvar clamp = fast_memoize_1.default(function (n, min, max) { return Math.max(Math.min(n, max), min); });\nvar snap = fast_memoize_1.default(function (n, size) { return Math.round(n / size) * size; });\nvar hasDirection = fast_memoize_1.default(function (dir, target) {\n    return new RegExp(dir, 'i').test(target);\n});\nvar findClosestSnap = fast_memoize_1.default(function (n, snapArray, snapGap) {\n    if (snapGap === void 0) { snapGap = 0; }\n    var closestGapIndex = snapArray.reduce(function (prev, curr, index) { return (Math.abs(curr - n) < Math.abs(snapArray[prev] - n) ? index : prev); }, 0);\n    var gap = Math.abs(snapArray[closestGapIndex] - n);\n    return snapGap === 0 || gap < snapGap ? snapArray[closestGapIndex] : n;\n});\nvar endsWith = fast_memoize_1.default(function (str, searchStr) {\n    return str.substr(str.length - searchStr.length, searchStr.length) === searchStr;\n});\nvar getStringSize = fast_memoize_1.default(function (n) {\n    n = n.toString();\n    if (n === 'auto') {\n        return n;\n    }\n    if (endsWith(n, 'px')) {\n        return n;\n    }\n    if (endsWith(n, '%')) {\n        return n;\n    }\n    if (endsWith(n, 'vh')) {\n        return n;\n    }\n    if (endsWith(n, 'vw')) {\n        return n;\n    }\n    if (endsWith(n, 'vmax')) {\n        return n;\n    }\n    if (endsWith(n, 'vmin')) {\n        return n;\n    }\n    return n + \"px\";\n});\nvar getPixelSize = function (size, parentSize) {\n    if (size && typeof size === 'string') {\n        if (endsWith(size, '%')) {\n            var ratio = Number(size.replace('%', '')) / 100;\n            return parentSize * ratio;\n        }\n        else if (endsWith(size, 'vw')) {\n            var ratio = Number(size.replace('vw', '')) / 100;\n            return window.innerWidth * ratio;\n        }\n        else if (endsWith(size, 'vh')) {\n            var ratio = Number(size.replace('vh', '')) / 100;\n            return window.innerHeight * ratio;\n        }\n    }\n    return size;\n};\nvar calculateNewMax = fast_memoize_1.default(function (parentSize, maxWidth, maxHeight, minWidth, minHeight) {\n    maxWidth = getPixelSize(maxWidth, parentSize.width);\n    maxHeight = getPixelSize(maxHeight, parentSize.height);\n    minWidth = getPixelSize(minWidth, parentSize.width);\n    minHeight = getPixelSize(minHeight, parentSize.height);\n    return {\n        maxWidth: typeof maxWidth === 'undefined' ? undefined : Number(maxWidth),\n        maxHeight: typeof maxHeight === 'undefined' ? undefined : Number(maxHeight),\n        minWidth: typeof minWidth === 'undefined' ? undefined : Number(minWidth),\n        minHeight: typeof minHeight === 'undefined' ? undefined : Number(minHeight),\n    };\n});\nvar definedProps = [\n    'style',\n    'className',\n    'grid',\n    'snap',\n    'bounds',\n    'size',\n    'defaultSize',\n    'minWidth',\n    'minHeight',\n    'maxWidth',\n    'maxHeight',\n    'lockAspectRatio',\n    'lockAspectRatioExtraWidth',\n    'lockAspectRatioExtraHeight',\n    'enable',\n    'handleStyles',\n    'handleClasses',\n    'handleWrapperStyle',\n    'handleWrapperClass',\n    'children',\n    'onResizeStart',\n    'onResize',\n    'onResizeStop',\n    'handleComponent',\n    'scale',\n    'resizeRatio',\n    'snapGap',\n];\n// HACK: This class is used to calculate % size.\nvar baseClassName = '__resizable_base__';\nvar Resizable = /** @class */ (function (_super) {\n    __extends(Resizable, _super);\n    function Resizable(props) {\n        var _this = _super.call(this, props) || this;\n        _this.ratio = 1;\n        _this.resizable = null;\n        // For parent boundary\n        _this.parentLeft = 0;\n        _this.parentTop = 0;\n        // For boundary\n        _this.resizableLeft = 0;\n        _this.resizableTop = 0;\n        // For target boundary\n        _this.targetLeft = 0;\n        _this.targetTop = 0;\n        _this.ref = function (c) {\n            if (c) {\n                _this.resizable = c;\n            }\n        };\n        _this.state = {\n            isResizing: false,\n            width: typeof (_this.propsSize && _this.propsSize.width) === 'undefined'\n                ? 'auto'\n                : _this.propsSize && _this.propsSize.width,\n            height: typeof (_this.propsSize && _this.propsSize.height) === 'undefined'\n                ? 'auto'\n                : _this.propsSize && _this.propsSize.height,\n            direction: 'right',\n            original: {\n                x: 0,\n                y: 0,\n                width: 0,\n                height: 0,\n            },\n            backgroundStyle: {\n                height: '100%',\n                width: '100%',\n                backgroundColor: 'rgba(0,0,0,0)',\n                cursor: 'auto',\n                opacity: 0,\n                position: 'fixed',\n                zIndex: 9999,\n                top: '0',\n                left: '0',\n                bottom: '0',\n                right: '0',\n            },\n        };\n        _this.onResizeStart = _this.onResizeStart.bind(_this);\n        _this.onMouseMove = _this.onMouseMove.bind(_this);\n        _this.onMouseUp = _this.onMouseUp.bind(_this);\n        return _this;\n    }\n    Object.defineProperty(Resizable.prototype, \"parentNode\", {\n        get: function () {\n            if (!this.resizable) {\n                return null;\n            }\n            return this.resizable.parentNode;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Resizable.prototype, \"propsSize\", {\n        get: function () {\n            return this.props.size || this.props.defaultSize || DEFAULT_SIZE;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Resizable.prototype, \"base\", {\n        get: function () {\n            var parent = this.parentNode;\n            if (!parent) {\n                return undefined;\n            }\n            var children = [].slice.call(parent.children);\n            for (var _i = 0, children_1 = children; _i < children_1.length; _i++) {\n                var n = children_1[_i];\n                if (n instanceof HTMLElement) {\n                    if (n.classList.contains(baseClassName)) {\n                        return n;\n                    }\n                }\n            }\n            return undefined;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Resizable.prototype, \"size\", {\n        get: function () {\n            var width = 0;\n            var height = 0;\n            if (typeof window !== 'undefined' && this.resizable) {\n                var orgWidth = this.resizable.offsetWidth;\n                var orgHeight = this.resizable.offsetHeight;\n                // HACK: Set position `relative` to get parent size.\n                //       This is because when re-resizable set `absolute`, I can not get base width correctly.\n                var orgPosition = this.resizable.style.position;\n                if (orgPosition !== 'relative') {\n                    this.resizable.style.position = 'relative';\n                }\n                // INFO: Use original width or height if set auto.\n                width = this.resizable.style.width !== 'auto' ? this.resizable.offsetWidth : orgWidth;\n                height = this.resizable.style.height !== 'auto' ? this.resizable.offsetHeight : orgHeight;\n                // Restore original position\n                this.resizable.style.position = orgPosition;\n            }\n            return { width: width, height: height };\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Resizable.prototype, \"sizeStyle\", {\n        get: function () {\n            var _this = this;\n            var size = this.props.size;\n            var getSize = function (key) {\n                if (typeof _this.state[key] === 'undefined' || _this.state[key] === 'auto') {\n                    return 'auto';\n                }\n                if (_this.propsSize && _this.propsSize[key] && endsWith(_this.propsSize[key].toString(), '%')) {\n                    if (endsWith(_this.state[key].toString(), '%')) {\n                        return _this.state[key].toString();\n                    }\n                    var parentSize = _this.getParentSize();\n                    var value = Number(_this.state[key].toString().replace('px', ''));\n                    var percent = (value / parentSize[key]) * 100;\n                    return percent + \"%\";\n                }\n                return getStringSize(_this.state[key]);\n            };\n            var width = size && typeof size.width !== 'undefined' && !this.state.isResizing\n                ? getStringSize(size.width)\n                : getSize('width');\n            var height = size && typeof size.height !== 'undefined' && !this.state.isResizing\n                ? getStringSize(size.height)\n                : getSize('height');\n            return { width: width, height: height };\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Resizable.prototype.getParentSize = function () {\n        if (!this.base || !this.parentNode) {\n            return { width: window.innerWidth, height: window.innerHeight };\n        }\n        // INFO: To calculate parent width with flex layout\n        var wrapChanged = false;\n        var wrap = this.parentNode.style.flexWrap;\n        var minWidth = this.base.style.minWidth;\n        if (wrap !== 'wrap') {\n            wrapChanged = true;\n            this.parentNode.style.flexWrap = 'wrap';\n            // HACK: Use relative to get parent padding size\n        }\n        this.base.style.position = 'relative';\n        this.base.style.minWidth = '100%';\n        var size = {\n            width: this.base.offsetWidth,\n            height: this.base.offsetHeight,\n        };\n        this.base.style.position = 'absolute';\n        if (wrapChanged) {\n            this.parentNode.style.flexWrap = wrap;\n        }\n        this.base.style.minWidth = minWidth;\n        return size;\n    };\n    Resizable.prototype.bindEvents = function () {\n        if (typeof window !== 'undefined') {\n            window.addEventListener('mouseup', this.onMouseUp);\n            window.addEventListener('mousemove', this.onMouseMove);\n            window.addEventListener('mouseleave', this.onMouseUp);\n            window.addEventListener('touchmove', this.onMouseMove);\n            window.addEventListener('touchend', this.onMouseUp);\n        }\n    };\n    Resizable.prototype.unbindEvents = function () {\n        if (typeof window !== 'undefined') {\n            window.removeEventListener('mouseup', this.onMouseUp);\n            window.removeEventListener('mousemove', this.onMouseMove);\n            window.removeEventListener('mouseleave', this.onMouseUp);\n            window.removeEventListener('touchmove', this.onMouseMove);\n            window.removeEventListener('touchend', this.onMouseUp);\n        }\n    };\n    Resizable.prototype.componentDidMount = function () {\n        if (!this.resizable) {\n            return;\n        }\n        var computedStyle = window.getComputedStyle(this.resizable);\n        this.setState({\n            width: this.state.width || this.size.width,\n            height: this.state.height || this.size.height,\n            flexBasis: computedStyle.flexBasis !== 'auto' ? computedStyle.flexBasis : undefined,\n        });\n        var parent = this.parentNode;\n        if (!(parent instanceof HTMLElement)) {\n            return;\n        }\n        if (this.base) {\n            return;\n        }\n        var element = document.createElement('div');\n        element.style.width = '100%';\n        element.style.height = '100%';\n        element.style.position = 'absolute';\n        element.style.transform = 'scale(0, 0)';\n        element.style.left = '0';\n        element.style.flex = '0';\n        if (element.classList) {\n            element.classList.add(baseClassName);\n        }\n        else {\n            element.className += baseClassName;\n        }\n        parent.appendChild(element);\n    };\n    Resizable.prototype.componentWillUnmount = function () {\n        if (typeof window !== 'undefined') {\n            this.unbindEvents();\n            var parent_1 = this.parentNode;\n            if (!this.base || !parent_1) {\n                return;\n            }\n            if (!(parent_1 instanceof HTMLElement) || !(this.base instanceof Node)) {\n                return;\n            }\n            parent_1.removeChild(this.base);\n        }\n    };\n    Resizable.prototype.createSizeForCssProperty = function (newSize, kind) {\n        var propsSize = this.propsSize && this.propsSize[kind];\n        return this.state[kind] === 'auto' &&\n            this.state.original[kind] === newSize &&\n            (typeof propsSize === 'undefined' || propsSize === 'auto')\n            ? 'auto'\n            : newSize;\n    };\n    Resizable.prototype.calculateNewMaxFromBoundary = function (maxWidth, maxHeight) {\n        if (this.props.bounds === 'parent') {\n            var parent_2 = this.parentNode;\n            if (parent_2 instanceof HTMLElement) {\n                var boundWidth = parent_2.offsetWidth + (this.parentLeft - this.resizableLeft);\n                var boundHeight = parent_2.offsetHeight + (this.parentTop - this.resizableTop);\n                maxWidth = maxWidth && maxWidth < boundWidth ? maxWidth : boundWidth;\n                maxHeight = maxHeight && maxHeight < boundHeight ? maxHeight : boundHeight;\n            }\n        }\n        else if (this.props.bounds === 'window') {\n            if (typeof window !== 'undefined') {\n                var boundWidth = window.innerWidth - this.resizableLeft;\n                var boundHeight = window.innerHeight - this.resizableTop;\n                maxWidth = maxWidth && maxWidth < boundWidth ? maxWidth : boundWidth;\n                maxHeight = maxHeight && maxHeight < boundHeight ? maxHeight : boundHeight;\n            }\n        }\n        else if (this.props.bounds instanceof HTMLElement) {\n            var boundWidth = this.props.bounds.offsetWidth + (this.targetLeft - this.resizableLeft);\n            var boundHeight = this.props.bounds.offsetHeight + (this.targetTop - this.resizableTop);\n            maxWidth = maxWidth && maxWidth < boundWidth ? maxWidth : boundWidth;\n            maxHeight = maxHeight && maxHeight < boundHeight ? maxHeight : boundHeight;\n        }\n        return { maxWidth: maxWidth, maxHeight: maxHeight };\n    };\n    Resizable.prototype.calculateNewSizeFromDirection = function (clientX, clientY) {\n        var scale = this.props.scale || 1;\n        var resizeRatio = this.props.resizeRatio || 1;\n        var _a = this.state, direction = _a.direction, original = _a.original;\n        var _b = this.props, lockAspectRatio = _b.lockAspectRatio, lockAspectRatioExtraHeight = _b.lockAspectRatioExtraHeight, lockAspectRatioExtraWidth = _b.lockAspectRatioExtraWidth;\n        var newWidth = original.width;\n        var newHeight = original.height;\n        var extraHeight = lockAspectRatioExtraHeight || 0;\n        var extraWidth = lockAspectRatioExtraWidth || 0;\n        if (hasDirection('right', direction)) {\n            newWidth = original.width + ((clientX - original.x) * resizeRatio) / scale;\n            if (lockAspectRatio) {\n                newHeight = (newWidth - extraWidth) / this.ratio + extraHeight;\n            }\n        }\n        if (hasDirection('left', direction)) {\n            newWidth = original.width - ((clientX - original.x) * resizeRatio) / scale;\n            if (lockAspectRatio) {\n                newHeight = (newWidth - extraWidth) / this.ratio + extraHeight;\n            }\n        }\n        if (hasDirection('bottom', direction)) {\n            newHeight = original.height + ((clientY - original.y) * resizeRatio) / scale;\n            if (lockAspectRatio) {\n                newWidth = (newHeight - extraHeight) * this.ratio + extraWidth;\n            }\n        }\n        if (hasDirection('top', direction)) {\n            newHeight = original.height - ((clientY - original.y) * resizeRatio) / scale;\n            if (lockAspectRatio) {\n                newWidth = (newHeight - extraHeight) * this.ratio + extraWidth;\n            }\n        }\n        return { newWidth: newWidth, newHeight: newHeight };\n    };\n    Resizable.prototype.calculateNewSizeFromAspectRatio = function (newWidth, newHeight, max, min) {\n        var _a = this.props, lockAspectRatio = _a.lockAspectRatio, lockAspectRatioExtraHeight = _a.lockAspectRatioExtraHeight, lockAspectRatioExtraWidth = _a.lockAspectRatioExtraWidth;\n        var computedMinWidth = typeof min.width === 'undefined' ? 10 : min.width;\n        var computedMaxWidth = typeof max.width === 'undefined' || max.width < 0 ? newWidth : max.width;\n        var computedMinHeight = typeof min.height === 'undefined' ? 10 : min.height;\n        var computedMaxHeight = typeof max.height === 'undefined' || max.height < 0 ? newHeight : max.height;\n        var extraHeight = lockAspectRatioExtraHeight || 0;\n        var extraWidth = lockAspectRatioExtraWidth || 0;\n        if (lockAspectRatio) {\n            var extraMinWidth = (computedMinHeight - extraHeight) * this.ratio + extraWidth;\n            var extraMaxWidth = (computedMaxHeight - extraHeight) * this.ratio + extraWidth;\n            var extraMinHeight = (computedMinWidth - extraWidth) / this.ratio + extraHeight;\n            var extraMaxHeight = (computedMaxWidth - extraWidth) / this.ratio + extraHeight;\n            var lockedMinWidth = Math.max(computedMinWidth, extraMinWidth);\n            var lockedMaxWidth = Math.min(computedMaxWidth, extraMaxWidth);\n            var lockedMinHeight = Math.max(computedMinHeight, extraMinHeight);\n            var lockedMaxHeight = Math.min(computedMaxHeight, extraMaxHeight);\n            newWidth = clamp(newWidth, lockedMinWidth, lockedMaxWidth);\n            newHeight = clamp(newHeight, lockedMinHeight, lockedMaxHeight);\n        }\n        else {\n            newWidth = clamp(newWidth, computedMinWidth, computedMaxWidth);\n            newHeight = clamp(newHeight, computedMinHeight, computedMaxHeight);\n        }\n        return { newWidth: newWidth, newHeight: newHeight };\n    };\n    Resizable.prototype.setBoundingClientRect = function () {\n        // For parent boundary\n        if (this.props.bounds === 'parent') {\n            var parent_3 = this.parentNode;\n            if (parent_3 instanceof HTMLElement) {\n                var parentRect = parent_3.getBoundingClientRect();\n                this.parentLeft = parentRect.left;\n                this.parentTop = parentRect.top;\n            }\n        }\n        // For target(html element) boundary\n        if (this.props.bounds instanceof HTMLElement) {\n            var targetRect = this.props.bounds.getBoundingClientRect();\n            this.targetLeft = targetRect.left;\n            this.targetTop = targetRect.top;\n        }\n        // For boundary\n        if (this.resizable) {\n            var _a = this.resizable.getBoundingClientRect(), left = _a.left, top_1 = _a.top;\n            this.resizableLeft = left;\n            this.resizableTop = top_1;\n        }\n    };\n    Resizable.prototype.onResizeStart = function (event, direction) {\n        if (!this.resizable) {\n            return;\n        }\n        var clientX = 0;\n        var clientY = 0;\n        if (event.nativeEvent instanceof MouseEvent) {\n            clientX = event.nativeEvent.clientX;\n            clientY = event.nativeEvent.clientY;\n            // When user click with right button the resize is stuck in resizing mode\n            // until users clicks again, dont continue if right click is used.\n            // HACK: MouseEvent does not have `which` from flow-bin v0.68.\n            if (event.nativeEvent.which === 3) {\n                return;\n            }\n        }\n        else if (event.nativeEvent instanceof TouchEvent) {\n            clientX = event.nativeEvent.touches[0].clientX;\n            clientY = event.nativeEvent.touches[0].clientY;\n        }\n        if (this.props.onResizeStart) {\n            if (this.resizable) {\n                var startResize = this.props.onResizeStart(event, direction, this.resizable);\n                if (startResize === false) {\n                    return;\n                }\n            }\n        }\n        // Fix #168\n        if (this.props.size) {\n            if (typeof this.props.size.height !== 'undefined' && this.props.size.height !== this.state.height) {\n                this.setState({ height: this.props.size.height });\n            }\n            if (typeof this.props.size.width !== 'undefined' && this.props.size.width !== this.state.width) {\n                this.setState({ width: this.props.size.width });\n            }\n        }\n        // For lockAspectRatio case\n        this.ratio =\n            typeof this.props.lockAspectRatio === 'number' ? this.props.lockAspectRatio : this.size.width / this.size.height;\n        var flexBasis;\n        var computedStyle = window.getComputedStyle(this.resizable);\n        if (computedStyle.flexBasis !== 'auto') {\n            var parent_4 = this.parentNode;\n            if (parent_4) {\n                var dir = window.getComputedStyle(parent_4).flexDirection;\n                this.flexDir = dir.startsWith('row') ? 'row' : 'column';\n                flexBasis = computedStyle.flexBasis;\n            }\n        }\n        // For boundary\n        this.setBoundingClientRect();\n        this.bindEvents();\n        var state = {\n            original: {\n                x: clientX,\n                y: clientY,\n                width: this.size.width,\n                height: this.size.height,\n            },\n            isResizing: true,\n            backgroundStyle: __assign(__assign({}, this.state.backgroundStyle), { cursor: window.getComputedStyle(event.target).cursor || 'auto' }),\n            direction: direction,\n            flexBasis: flexBasis,\n        };\n        this.setState(state);\n    };\n    Resizable.prototype.onMouseMove = function (event) {\n        if (!this.state.isResizing || !this.resizable) {\n            return;\n        }\n        var _a = this.props, maxWidth = _a.maxWidth, maxHeight = _a.maxHeight, minWidth = _a.minWidth, minHeight = _a.minHeight;\n        var clientX = event instanceof MouseEvent ? event.clientX : event.touches[0].clientX;\n        var clientY = event instanceof MouseEvent ? event.clientY : event.touches[0].clientY;\n        var _b = this.state, direction = _b.direction, original = _b.original, width = _b.width, height = _b.height;\n        var parentSize = this.getParentSize();\n        var max = calculateNewMax(parentSize, maxWidth, maxHeight, minWidth, minHeight);\n        maxWidth = max.maxWidth;\n        maxHeight = max.maxHeight;\n        minWidth = max.minWidth;\n        minHeight = max.minHeight;\n        // Calculate new size\n        var _c = this.calculateNewSizeFromDirection(clientX, clientY), newHeight = _c.newHeight, newWidth = _c.newWidth;\n        // Calculate max size from boundary settings\n        var boundaryMax = this.calculateNewMaxFromBoundary(maxWidth, maxHeight);\n        // Calculate new size from aspect ratio\n        var newSize = this.calculateNewSizeFromAspectRatio(newWidth, newHeight, { width: boundaryMax.maxWidth, height: boundaryMax.maxHeight }, { width: minWidth, height: minHeight });\n        newWidth = newSize.newWidth;\n        newHeight = newSize.newHeight;\n        if (this.props.grid) {\n            var newGridWidth = snap(newWidth, this.props.grid[0]);\n            var newGridHeight = snap(newHeight, this.props.grid[1]);\n            var gap = this.props.snapGap || 0;\n            newWidth = gap === 0 || Math.abs(newGridWidth - newWidth) <= gap ? newGridWidth : newWidth;\n            newHeight = gap === 0 || Math.abs(newGridHeight - newHeight) <= gap ? newGridHeight : newHeight;\n        }\n        if (this.props.snap && this.props.snap.x) {\n            newWidth = findClosestSnap(newWidth, this.props.snap.x, this.props.snapGap);\n        }\n        if (this.props.snap && this.props.snap.y) {\n            newHeight = findClosestSnap(newHeight, this.props.snap.y, this.props.snapGap);\n        }\n        var delta = {\n            width: newWidth - original.width,\n            height: newHeight - original.height,\n        };\n        if (width && typeof width === 'string') {\n            if (endsWith(width, '%')) {\n                var percent = (newWidth / parentSize.width) * 100;\n                newWidth = percent + \"%\";\n            }\n            else if (endsWith(width, 'vw')) {\n                var vw = (newWidth / window.innerWidth) * 100;\n                newWidth = vw + \"vw\";\n            }\n            else if (endsWith(width, 'vh')) {\n                var vh = (newWidth / window.innerHeight) * 100;\n                newWidth = vh + \"vh\";\n            }\n        }\n        if (height && typeof height === 'string') {\n            if (endsWith(height, '%')) {\n                var percent = (newHeight / parentSize.height) * 100;\n                newHeight = percent + \"%\";\n            }\n            else if (endsWith(height, 'vw')) {\n                var vw = (newHeight / window.innerWidth) * 100;\n                newHeight = vw + \"vw\";\n            }\n            else if (endsWith(height, 'vh')) {\n                var vh = (newHeight / window.innerHeight) * 100;\n                newHeight = vh + \"vh\";\n            }\n        }\n        var newState = {\n            width: this.createSizeForCssProperty(newWidth, 'width'),\n            height: this.createSizeForCssProperty(newHeight, 'height'),\n        };\n        if (this.flexDir === 'row') {\n            newState.flexBasis = newState.width;\n        }\n        else if (this.flexDir === 'column') {\n            newState.flexBasis = newState.height;\n        }\n        this.setState(newState);\n        if (this.props.onResize) {\n            this.props.onResize(event, direction, this.resizable, delta);\n        }\n    };\n    Resizable.prototype.onMouseUp = function (event) {\n        var _a = this.state, isResizing = _a.isResizing, direction = _a.direction, original = _a.original;\n        if (!isResizing || !this.resizable) {\n            return;\n        }\n        var delta = {\n            width: this.size.width - original.width,\n            height: this.size.height - original.height,\n        };\n        if (this.props.onResizeStop) {\n            this.props.onResizeStop(event, direction, this.resizable, delta);\n        }\n        if (this.props.size) {\n            this.setState(this.props.size);\n        }\n        this.unbindEvents();\n        this.setState({\n            isResizing: false,\n            backgroundStyle: __assign(__assign({}, this.state.backgroundStyle), { cursor: 'auto' }),\n        });\n    };\n    Resizable.prototype.updateSize = function (size) {\n        this.setState({ width: size.width, height: size.height });\n    };\n    Resizable.prototype.renderResizer = function () {\n        var _this = this;\n        var _a = this.props, enable = _a.enable, handleStyles = _a.handleStyles, handleClasses = _a.handleClasses, handleWrapperStyle = _a.handleWrapperStyle, handleWrapperClass = _a.handleWrapperClass, handleComponent = _a.handleComponent;\n        if (!enable) {\n            return null;\n        }\n        var resizers = Object.keys(enable).map(function (dir) {\n            if (enable[dir] !== false) {\n                return (React.createElement(resizer_1.Resizer, { key: dir, direction: dir, onResizeStart: _this.onResizeStart, replaceStyles: handleStyles && handleStyles[dir], className: handleClasses && handleClasses[dir] }, handleComponent && handleComponent[dir] ? handleComponent[dir] : null));\n            }\n            return null;\n        });\n        // #93 Wrap the resize box in span (will not break 100% width/height)\n        return (React.createElement(\"span\", { className: handleWrapperClass, style: handleWrapperStyle }, resizers));\n    };\n    Resizable.prototype.render = function () {\n        var _this = this;\n        var extendsProps = Object.keys(this.props).reduce(function (acc, key) {\n            if (definedProps.indexOf(key) !== -1) {\n                return acc;\n            }\n            acc[key] = _this.props[key];\n            return acc;\n        }, {});\n        var style = __assign(__assign(__assign({ position: 'relative', userSelect: this.state.isResizing ? 'none' : 'auto' }, this.props.style), this.sizeStyle), { maxWidth: this.props.maxWidth, maxHeight: this.props.maxHeight, minWidth: this.props.minWidth, minHeight: this.props.minHeight, boxSizing: 'border-box', flexShrink: 0 });\n        if (this.state.flexBasis) {\n            style.flexBasis = this.state.flexBasis;\n        }\n        return (React.createElement(\"div\", __assign({ ref: this.ref, style: style, className: this.props.className }, extendsProps),\n            this.state.isResizing && React.createElement(\"div\", { style: this.state.backgroundStyle }),\n            this.props.children,\n            this.renderResizer()));\n    };\n    Resizable.defaultProps = {\n        onResizeStart: function () { },\n        onResize: function () { },\n        onResizeStop: function () { },\n        enable: {\n            top: true,\n            right: true,\n            bottom: true,\n            left: true,\n            topRight: true,\n            bottomRight: true,\n            bottomLeft: true,\n            topLeft: true,\n        },\n        style: {},\n        grid: [1, 1],\n        lockAspectRatio: false,\n        lockAspectRatioExtraWidth: 0,\n        lockAspectRatioExtraHeight: 0,\n        scale: 1,\n        resizeRatio: 1,\n        snapGap: 0,\n    };\n    return Resizable;\n}(React.PureComponent));\nexports.Resizable = Resizable;\n","import {\n  AbsoluteTimeRange,\n  applyFieldOverrides,\n  createFieldConfigRegistry,\n  DataFrame,\n  dateTime,\n  Field,\n  FieldColorModeId,\n  FieldConfigSource,\n  GrafanaTheme,\n  TimeZone,\n} from '@grafana/data';\nimport {\n  Collapse,\n  DrawStyle,\n  GraphNG,\n  GraphNGLegendEvent,\n  Icon,\n  LegendDisplayMode,\n  TooltipPlugin,\n  useStyles,\n  useTheme,\n  ZoomPlugin,\n} from '@grafana/ui';\nimport { defaultGraphConfig, getGraphFieldConfig } from 'app/plugins/panel/timeseries/config';\nimport { hideSeriesConfigFactory } from 'app/plugins/panel/timeseries/overrides/hideSeriesConfigFactory';\nimport { ContextMenuPlugin } from 'app/plugins/panel/timeseries/plugins/ContextMenuPlugin';\nimport { ExemplarsPlugin } from 'app/plugins/panel/timeseries/plugins/ExemplarsPlugin';\nimport { css, cx } from 'emotion';\nimport React, { useCallback, useMemo, useState } from 'react';\nimport { splitOpen } from './state/main';\nimport { getFieldLinksForExplore } from './utils/links';\n\nconst MAX_NUMBER_OF_TIME_SERIES = 20;\n\ninterface Props {\n  data: DataFrame[];\n  annotations?: DataFrame[];\n  isLoading: boolean;\n  width: number;\n  absoluteRange: AbsoluteTimeRange;\n  timeZone: TimeZone;\n  onUpdateTimeRange: (absoluteRange: AbsoluteTimeRange) => void;\n  splitOpenFn: typeof splitOpen;\n}\n\nexport function ExploreGraphNGPanel({\n  width,\n  data,\n  timeZone,\n  absoluteRange,\n  onUpdateTimeRange,\n  isLoading,\n  annotations,\n  splitOpenFn,\n}: Props) {\n  const theme = useTheme();\n  const [showAllTimeSeries, setShowAllTimeSeries] = useState(false);\n  const [fieldConfig, setFieldConfig] = useState<FieldConfigSource>({\n    defaults: {\n      color: {\n        mode: FieldColorModeId.PaletteClassic,\n      },\n      custom: {\n        drawStyle: DrawStyle.Line,\n        fillOpacity: 0,\n        pointSize: 5,\n        spanNulls: true,\n      },\n    },\n    overrides: [],\n  });\n\n  const style = useStyles(getStyles);\n  const timeRange = {\n    from: dateTime(absoluteRange.from),\n    to: dateTime(absoluteRange.to),\n    raw: {\n      from: dateTime(absoluteRange.from),\n      to: dateTime(absoluteRange.to),\n    },\n  };\n\n  const dataWithConfig = useMemo(() => {\n    const registry = createFieldConfigRegistry(getGraphFieldConfig(defaultGraphConfig), 'Explore');\n    return applyFieldOverrides({\n      fieldConfig,\n      data,\n      timeZone,\n      replaceVariables: (value) => value, // We don't need proper replace here as it is only used in getLinks and we use getFieldLinks\n      theme,\n      fieldConfigRegistry: registry,\n    });\n  }, [fieldConfig, data, timeZone, theme]);\n\n  const onLegendClick = useCallback(\n    (event: GraphNGLegendEvent) => {\n      setFieldConfig(hideSeriesConfigFactory(event, fieldConfig, data));\n    },\n    [fieldConfig, data]\n  );\n\n  const seriesToShow = showAllTimeSeries ? dataWithConfig : dataWithConfig.slice(0, MAX_NUMBER_OF_TIME_SERIES);\n\n  const getFieldLinks = (field: Field, rowIndex: number) => {\n    return getFieldLinksForExplore({ field, rowIndex, splitOpenFn, range: timeRange });\n  };\n\n  return (\n    <>\n      {dataWithConfig.length > MAX_NUMBER_OF_TIME_SERIES && !showAllTimeSeries && (\n        <div className={cx([style.timeSeriesDisclaimer])}>\n          <Icon className={style.disclaimerIcon} name=\"exclamation-triangle\" />\n          {`Showing only ${MAX_NUMBER_OF_TIME_SERIES} time series. `}\n          <span\n            className={cx([style.showAllTimeSeries])}\n            onClick={() => setShowAllTimeSeries(true)}\n          >{`Show all ${dataWithConfig.length}`}</span>\n        </div>\n      )}\n\n      <Collapse label=\"Graph\" loading={isLoading} isOpen>\n        <GraphNG\n          data={seriesToShow}\n          width={width}\n          height={400}\n          timeRange={timeRange}\n          onLegendClick={onLegendClick}\n          legend={{ displayMode: LegendDisplayMode.List, placement: 'bottom', calcs: [] }}\n          timeZone={timeZone}\n        >\n          <TooltipPlugin mode=\"single\" timeZone={timeZone} />\n          <ZoomPlugin onZoom={onUpdateTimeRange} />\n          <ContextMenuPlugin timeZone={timeZone} />\n          {annotations ? (\n            <ExemplarsPlugin exemplars={annotations} timeZone={timeZone} getFieldLinks={getFieldLinks} />\n          ) : (\n            <></>\n          )}\n        </GraphNG>\n      </Collapse>\n    </>\n  );\n}\n\nconst getStyles = (theme: GrafanaTheme) => ({\n  timeSeriesDisclaimer: css`\n    label: time-series-disclaimer;\n    width: 300px;\n    margin: ${theme.spacing.sm} auto;\n    padding: 10px 0;\n    border-radius: ${theme.border.radius.md};\n    text-align: center;\n    background-color: ${theme.colors.bg1};\n  `,\n  disclaimerIcon: css`\n    label: disclaimer-icon;\n    color: ${theme.palette.yellow};\n    margin-right: ${theme.spacing.xs};\n  `,\n  showAllTimeSeries: css`\n    label: show-all-time-series;\n    cursor: pointer;\n    color: ${theme.colors.linkExternal};\n  `,\n});\n","var off = require('./dom-event').off\nmodule.exports = function () {\n  var self = this\n  var element = self.element\n\n  off(element, 'keypress', self.eventHandler)\n  off(element, 'keydown', self.eventHandler)\n  off(element, 'keyup', self.eventHandler)\n}\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport React, { useContext } from 'react';\nimport hoistNonReactStatics from 'hoist-non-react-statics';\nimport memoizeOne from 'memoize-one';\nimport tinycolor from 'tinycolor2';\n\nconst COLORS_HEX = [\n  '#17B8BE',\n  '#F8DCA1',\n  '#B7885E',\n  '#FFCB99',\n  '#F89570',\n  '#829AE3',\n  '#E79FD5',\n  '#1E96BE',\n  '#89DAC1',\n  '#B3AD9E',\n  '#12939A',\n  '#DDB27C',\n  '#88572C',\n  '#FF9833',\n  '#EF5D28',\n  '#162A65',\n  '#DA70BF',\n  '#125C77',\n  '#4DC19C',\n  '#776E57',\n];\n\nconst COLORS_HEX_DARK = [\n  '#17B8BE',\n  '#F8DCA1',\n  '#B7885E',\n  '#FFCB99',\n  '#F89570',\n  '#829AE3',\n  '#E79FD5',\n  '#1E96BE',\n  '#89DAC1',\n  '#B3AD9E',\n  '#12939A',\n  '#DDB27C',\n  '#88572C',\n  '#FF9833',\n  '#EF5D28',\n  '#DA70BF',\n  '#4DC19C',\n  '#776E57',\n];\n\nexport type ThemeOptions = Partial<Theme>;\n\nexport enum ThemeType {\n  Dark,\n  Light,\n}\n\nexport type Theme = {\n  type: ThemeType;\n  servicesColorPalette: string[];\n  borderStyle: string;\n  components?: {\n    TraceName?: {\n      fontSize?: number | string;\n    };\n  };\n};\n\nexport const defaultTheme: Theme = {\n  type: ThemeType.Light,\n  borderStyle: '1px solid #bbb',\n  servicesColorPalette: COLORS_HEX,\n};\n\nexport function isLight(theme?: Theme | ThemeOptions) {\n  // Light theme is default type not set which only happens if called for ThemeOptions.\n  return theme && theme.type ? theme.type === ThemeType.Light : false;\n}\n\nconst ThemeContext = React.createContext<ThemeOptions | undefined>(undefined);\nThemeContext.displayName = 'ThemeContext';\n\nexport const ThemeProvider = ThemeContext.Provider;\n\ntype ThemeConsumerProps = {\n  children: (theme: Theme) => React.ReactNode;\n};\nexport function ThemeConsumer(props: ThemeConsumerProps) {\n  return (\n    <ThemeContext.Consumer>\n      {(value: ThemeOptions | undefined) => {\n        const theme = memoizedThemeMerge(value);\n        return props.children(theme);\n      }}\n    </ThemeContext.Consumer>\n  );\n}\n\nconst memoizedThemeMerge = memoizeOne((value?: ThemeOptions) => {\n  const darkOverrides: Partial<Theme> = {};\n  if (!isLight(value)) {\n    darkOverrides.servicesColorPalette = COLORS_HEX_DARK;\n  }\n  return value\n    ? {\n        ...defaultTheme,\n        ...darkOverrides,\n        ...value,\n      }\n    : defaultTheme;\n});\n\ntype WrappedWithThemeComponent<Props> = React.ComponentType<Omit<Props, 'theme'>> & {\n  wrapped: React.ComponentType<Props>;\n};\n\nexport const withTheme = <Props extends { theme: Theme }, Statics extends {} = {}>(\n  Component: React.ComponentType<Props>\n): WrappedWithThemeComponent<Props> => {\n  let WithTheme: React.ComponentType<Omit<Props, 'theme'>> = (props) => {\n    return (\n      <ThemeConsumer>\n        {(theme: Theme) => {\n          return (\n            <Component\n              {...({\n                ...props,\n                theme,\n              } as Props & { theme: Theme })}\n            />\n          );\n        }}\n      </ThemeConsumer>\n    );\n  };\n\n  WithTheme.displayName = `WithTheme(${Component.displayName})`;\n  WithTheme = hoistNonReactStatics<React.ComponentType<Omit<Props, 'theme'>>, React.ComponentType<Props>>(\n    WithTheme,\n    Component\n  );\n  (WithTheme as WrappedWithThemeComponent<Props>).wrapped = Component;\n  return WithTheme as WrappedWithThemeComponent<Props>;\n};\n\nexport function useTheme(): Theme {\n  const theme = useContext(ThemeContext);\n  return {\n    ...defaultTheme,\n    ...theme,\n  };\n}\n\nexport const createStyle = <Fn extends (this: any, ...newArgs: any[]) => ReturnType<Fn>>(fn: Fn) => {\n  return memoizeOne(fn);\n};\n\n/**\n * Tries to get a dark variant color. Either by simply inverting the luminosity and darkening or lightening the color\n * a bit, or if base is provided, tries 2 variants of lighter and darker colors and checks which is more readable with\n * the base.\n * @param theme\n * @param hex\n * @param base\n */\nexport function autoColor(theme: Theme, hex: string, base?: string) {\n  if (isLight(theme)) {\n    return hex;\n  } else {\n    if (base) {\n      const color = tinycolor(hex);\n      return tinycolor\n        .mostReadable(\n          base,\n          [\n            color.clone().lighten(25),\n            color.clone().lighten(10),\n            color,\n            color.clone().darken(10),\n            color.clone().darken(25),\n          ],\n          {\n            includeFallbackColors: false,\n          }\n        )\n        .toHex8String();\n    }\n    const color = tinycolor(hex).toHsl();\n    color.l = 1 - color.l;\n    const newColor = tinycolor(color);\n    return newColor.isLight() ? newColor.darken(5).toHex8String() : newColor.lighten(5).toHex8String();\n  }\n}\n\n/**\n * With theme overrides you can use both number or string (for things like rem units) so this makes sure we convert\n * the value accordingly or use fallback if not set\n */\nexport function safeSize(size: number | string | undefined, fallback: string): string {\n  if (!size) {\n    return fallback;\n  }\n\n  if (typeof size === 'string') {\n    return size;\n  } else {\n    return `${size}px`;\n  }\n}\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { TraceLog } from '@grafana/data';\n\n/**\n * Which items of a {@link SpanDetail} component are expanded.\n */\nexport default class DetailState {\n  isTagsOpen: boolean;\n  isProcessOpen: boolean;\n  logs: { isOpen: boolean; openedItems: Set<TraceLog> };\n  isWarningsOpen: boolean;\n  isStackTracesOpen: boolean;\n  isReferencesOpen: boolean;\n\n  constructor(oldState?: DetailState) {\n    const {\n      isTagsOpen,\n      isProcessOpen,\n      isReferencesOpen,\n      isWarningsOpen,\n      isStackTracesOpen,\n      logs,\n    }: DetailState | Record<string, undefined> = oldState || {};\n    this.isTagsOpen = Boolean(isTagsOpen);\n    this.isProcessOpen = Boolean(isProcessOpen);\n    this.isReferencesOpen = Boolean(isReferencesOpen);\n    this.isWarningsOpen = Boolean(isWarningsOpen);\n    this.isStackTracesOpen = Boolean(isStackTracesOpen);\n    this.logs = {\n      isOpen: Boolean(logs && logs.isOpen),\n      openedItems: logs && logs.openedItems ? new Set(logs.openedItems) : new Set(),\n    };\n  }\n\n  toggleTags() {\n    const next = new DetailState(this);\n    next.isTagsOpen = !this.isTagsOpen;\n    return next;\n  }\n\n  toggleProcess() {\n    const next = new DetailState(this);\n    next.isProcessOpen = !this.isProcessOpen;\n    return next;\n  }\n\n  toggleReferences() {\n    const next = new DetailState(this);\n    next.isReferencesOpen = !this.isReferencesOpen;\n    return next;\n  }\n\n  toggleWarnings() {\n    const next = new DetailState(this);\n    next.isWarningsOpen = !this.isWarningsOpen;\n    return next;\n  }\n\n  toggleStackTraces() {\n    const next = new DetailState(this);\n    next.isStackTracesOpen = !this.isStackTracesOpen;\n    return next;\n  }\n\n  toggleLogs() {\n    const next = new DetailState(this);\n    next.logs.isOpen = !this.logs.isOpen;\n    return next;\n  }\n\n  toggleLogItem(logItem: TraceLog) {\n    const next = new DetailState(this);\n    if (next.logs.openedItems.has(logItem)) {\n      next.logs.openedItems.delete(logItem);\n    } else {\n      next.logs.openedItems.add(logItem);\n    }\n    return next;\n  }\n}\n","/* eslint-env node, browser */\n'use strict'\n\n/**\n * binds multiple combinations to the same callback\n *\n * @param {Array} combinations\n * @param {Function} callback\n * @param {string|undefined} action\n * @returns void\n */\nmodule.exports = function (combinations, callback, action) {\n  var self = this\n\n  for (var j = 0; j < combinations.length; ++j) {\n    self.bindSingle(combinations[j], callback, action)\n  }\n}\n","import { useEffect } from 'react';\nvar useEffectOnce = function (effect) {\n    useEffect(effect, []);\n};\nexport default useEffectOnce;\n","import React, { PureComponent } from 'react';\nimport { hot } from 'react-hot-loader';\nimport { connect, ConnectedProps } from 'react-redux';\nimport { Collapse } from '@grafana/ui';\n\nimport { AbsoluteTimeRange, Field, LogLevel, LogRowModel, LogsDedupStrategy, RawTimeRange } from '@grafana/data';\n\nimport { ExploreId, ExploreItemState } from 'app/types/explore';\nimport { StoreState } from 'app/types';\n\nimport { splitOpen } from './state/main';\nimport { updateTimeRange } from './state/time';\nimport { toggleLogLevelAction, changeDedupStrategy } from './state/explorePane';\nimport { deduplicatedRowsSelector } from './state/selectors';\nimport { getTimeZone } from '../profile/state/selectors';\nimport { LiveLogsWithTheme } from './LiveLogs';\nimport { Logs } from './Logs';\nimport { LogsCrossFadeTransition } from './utils/LogsCrossFadeTransition';\nimport { LiveTailControls } from './useLiveTailControls';\nimport { getFieldLinksForExplore } from './utils/links';\n\ninterface LogsContainerProps {\n  exploreId: ExploreId;\n  scanRange?: RawTimeRange;\n  width: number;\n  syncedTimes: boolean;\n  onClickFilterLabel?: (key: string, value: string) => void;\n  onClickFilterOutLabel?: (key: string, value: string) => void;\n  onStartScanning: () => void;\n  onStopScanning: () => void;\n}\n\nexport class LogsContainer extends PureComponent<PropsFromRedux & LogsContainerProps> {\n  onChangeTime = (absoluteRange: AbsoluteTimeRange) => {\n    const { exploreId, updateTimeRange } = this.props;\n    updateTimeRange({ exploreId, absoluteRange });\n  };\n\n  handleDedupStrategyChange = (dedupStrategy: LogsDedupStrategy) => {\n    this.props.changeDedupStrategy(this.props.exploreId, dedupStrategy);\n  };\n\n  handleToggleLogLevel = (hiddenLogLevels: LogLevel[]) => {\n    const { exploreId } = this.props;\n    this.props.toggleLogLevelAction({\n      exploreId,\n      hiddenLogLevels,\n    });\n  };\n\n  getLogRowContext = async (row: LogRowModel, options?: any): Promise<any> => {\n    const { datasourceInstance } = this.props;\n\n    if (datasourceInstance?.getLogRowContext) {\n      return datasourceInstance.getLogRowContext(row, options);\n    }\n\n    return [];\n  };\n\n  showContextToggle = (row?: LogRowModel): boolean => {\n    const { datasourceInstance } = this.props;\n\n    if (datasourceInstance?.showContextToggle) {\n      return datasourceInstance.showContextToggle(row);\n    }\n\n    return false;\n  };\n\n  getFieldLinks = (field: Field, rowIndex: number) => {\n    const { splitOpen: splitOpenFn, range } = this.props;\n    return getFieldLinksForExplore({ field, rowIndex, splitOpenFn, range });\n  };\n\n  render() {\n    const {\n      loading,\n      logsHighlighterExpressions,\n      logRows,\n      logsMeta,\n      logsSeries,\n      dedupedRows,\n      onClickFilterLabel,\n      onClickFilterOutLabel,\n      onStartScanning,\n      onStopScanning,\n      absoluteRange,\n      timeZone,\n      visibleRange,\n      scanning,\n      range,\n      width,\n      isLive,\n      exploreId,\n    } = this.props;\n\n    if (!logRows) {\n      return null;\n    }\n\n    return (\n      <>\n        <LogsCrossFadeTransition visible={isLive}>\n          <Collapse label=\"Logs\" loading={false} isOpen>\n            <LiveTailControls exploreId={exploreId}>\n              {(controls) => (\n                <LiveLogsWithTheme\n                  logRows={logRows}\n                  timeZone={timeZone}\n                  stopLive={controls.stop}\n                  isPaused={this.props.isPaused}\n                  onPause={controls.pause}\n                  onResume={controls.resume}\n                />\n              )}\n            </LiveTailControls>\n          </Collapse>\n        </LogsCrossFadeTransition>\n        <LogsCrossFadeTransition visible={!isLive}>\n          <Collapse label=\"Logs\" loading={loading} isOpen>\n            <Logs\n              dedupStrategy={this.props.dedupStrategy || LogsDedupStrategy.none}\n              logRows={logRows}\n              logsMeta={logsMeta}\n              logsSeries={logsSeries}\n              dedupedRows={dedupedRows}\n              highlighterExpressions={logsHighlighterExpressions}\n              loading={loading}\n              onChangeTime={this.onChangeTime}\n              onClickFilterLabel={onClickFilterLabel}\n              onClickFilterOutLabel={onClickFilterOutLabel}\n              onStartScanning={onStartScanning}\n              onStopScanning={onStopScanning}\n              onDedupStrategyChange={this.handleDedupStrategyChange}\n              onToggleLogLevel={this.handleToggleLogLevel}\n              absoluteRange={absoluteRange}\n              visibleRange={visibleRange}\n              timeZone={timeZone}\n              scanning={scanning}\n              scanRange={range.raw}\n              showContextToggle={this.showContextToggle}\n              width={width}\n              getRowContext={this.getLogRowContext}\n              getFieldLinks={this.getFieldLinks}\n            />\n          </Collapse>\n        </LogsCrossFadeTransition>\n      </>\n    );\n  }\n}\n\nfunction mapStateToProps(state: StoreState, { exploreId }: { exploreId: string }) {\n  const explore = state.explore;\n  // @ts-ignore\n  const item: ExploreItemState = explore[exploreId];\n  const {\n    logsHighlighterExpressions,\n    logsResult,\n    loading,\n    scanning,\n    datasourceInstance,\n    isLive,\n    isPaused,\n    range,\n    absoluteRange,\n    dedupStrategy,\n  } = item;\n  const dedupedRows = deduplicatedRowsSelector(item) || undefined;\n  const timeZone = getTimeZone(state.user);\n\n  return {\n    loading,\n    logsHighlighterExpressions,\n    logRows: logsResult?.rows,\n    logsMeta: logsResult?.meta,\n    logsSeries: logsResult?.series,\n    visibleRange: logsResult?.visibleRange,\n    scanning,\n    timeZone,\n    dedupStrategy,\n    dedupedRows,\n    datasourceInstance,\n    isLive,\n    isPaused,\n    range,\n    absoluteRange,\n  };\n}\n\nconst mapDispatchToProps = {\n  changeDedupStrategy,\n  toggleLogLevelAction,\n  updateTimeRange,\n  splitOpen,\n};\n\nconst connector = connect(mapStateToProps, mapDispatchToProps);\ntype PropsFromRedux = ConnectedProps<typeof connector>;\n\nexport default hot(module)(connector(LogsContainer));\n","var arrayMap = require('./_arrayMap'),\n    baseGet = require('./_baseGet'),\n    baseIteratee = require('./_baseIteratee'),\n    baseMap = require('./_baseMap'),\n    baseSortBy = require('./_baseSortBy'),\n    baseUnary = require('./_baseUnary'),\n    compareMultiple = require('./_compareMultiple'),\n    identity = require('./identity'),\n    isArray = require('./isArray');\n\n/**\n * The base implementation of `_.orderBy` without param guards.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function[]|Object[]|string[]} iteratees The iteratees to sort by.\n * @param {string[]} orders The sort orders of `iteratees`.\n * @returns {Array} Returns the new sorted array.\n */\nfunction baseOrderBy(collection, iteratees, orders) {\n  if (iteratees.length) {\n    iteratees = arrayMap(iteratees, function(iteratee) {\n      if (isArray(iteratee)) {\n        return function(value) {\n          return baseGet(value, iteratee.length === 1 ? iteratee[0] : iteratee);\n        }\n      }\n      return iteratee;\n    });\n  } else {\n    iteratees = [identity];\n  }\n\n  var index = -1;\n  iteratees = arrayMap(iteratees, baseUnary(baseIteratee));\n\n  var result = baseMap(collection, function(value, key, collection) {\n    var criteria = arrayMap(iteratees, function(iteratee) {\n      return iteratee(value);\n    });\n    return { 'criteria': criteria, 'index': ++index, 'value': value };\n  });\n\n  return baseSortBy(result, function(object, other) {\n    return compareMultiple(object, other, orders);\n  });\n}\n\nmodule.exports = baseOrderBy;\n","import React, { PureComponent } from 'react';\nimport { connect } from 'react-redux';\nimport { hot } from 'react-hot-loader';\nimport memoizeOne from 'memoize-one';\nimport classNames from 'classnames';\nimport { css } from 'emotion';\n\nimport { ExploreId, ExploreItemState } from 'app/types/explore';\nimport { Icon, IconButton, SetInterval, Tooltip } from '@grafana/ui';\nimport { DataSourceInstanceSettings, RawTimeRange, TimeRange, TimeZone } from '@grafana/data';\nimport { DataSourcePicker } from 'app/core/components/Select/DataSourcePicker';\nimport { StoreState } from 'app/types/store';\nimport { createAndCopyShortLink } from 'app/core/utils/shortLinks';\nimport { changeDatasource } from './state/datasource';\nimport { splitClose, splitOpen } from './state/main';\nimport { syncTimes, changeRefreshInterval } from './state/time';\nimport { getTimeZone } from '../profile/state/selectors';\nimport { updateTimeZoneForSession } from '../profile/state/reducers';\nimport { ExploreTimeControls } from './ExploreTimeControls';\nimport { LiveTailButton } from './LiveTailButton';\nimport { ResponsiveButton } from './ResponsiveButton';\nimport { RunButton } from './RunButton';\nimport { LiveTailControls } from './useLiveTailControls';\nimport { cancelQueries, clearQueries, runQueries } from './state/query';\nimport ReturnToDashboardButton from './ReturnToDashboardButton';\n\nconst getStyles = memoizeOne(() => {\n  return {\n    liveTailButtons: css`\n      margin-left: 10px;\n      @media (max-width: 1110px) {\n        margin-left: 4px;\n      }\n    `,\n  };\n});\n\ninterface OwnProps {\n  exploreId: ExploreId;\n  onChangeTime: (range: RawTimeRange, changedByScanner?: boolean) => void;\n}\n\ninterface StateProps {\n  datasourceMissing: boolean;\n  loading: boolean;\n  range: TimeRange;\n  timeZone: TimeZone;\n  splitted: boolean;\n  syncedTimes: boolean;\n  refreshInterval?: string;\n  hasLiveOption: boolean;\n  isLive: boolean;\n  isPaused: boolean;\n  datasourceLoading?: boolean | null;\n  containerWidth: number;\n  datasourceName?: string;\n}\n\ninterface DispatchProps {\n  changeDatasource: typeof changeDatasource;\n  clearAll: typeof clearQueries;\n  cancelQueries: typeof cancelQueries;\n  runQueries: typeof runQueries;\n  closeSplit: typeof splitClose;\n  split: typeof splitOpen;\n  syncTimes: typeof syncTimes;\n  changeRefreshInterval: typeof changeRefreshInterval;\n  onChangeTimeZone: typeof updateTimeZoneForSession;\n}\n\ntype Props = StateProps & DispatchProps & OwnProps;\n\nexport class UnConnectedExploreToolbar extends PureComponent<Props> {\n  onChangeDatasource = async (dsSettings: DataSourceInstanceSettings) => {\n    this.props.changeDatasource(this.props.exploreId, dsSettings.name, { importQueries: true });\n  };\n\n  onClearAll = () => {\n    this.props.clearAll(this.props.exploreId);\n  };\n\n  onRunQuery = (loading = false) => {\n    if (loading) {\n      return this.props.cancelQueries(this.props.exploreId);\n    } else {\n      return this.props.runQueries(this.props.exploreId);\n    }\n  };\n\n  onChangeRefreshInterval = (item: string) => {\n    const { changeRefreshInterval, exploreId } = this.props;\n    changeRefreshInterval(exploreId, item);\n  };\n\n  onChangeTimeSync = () => {\n    const { syncTimes, exploreId } = this.props;\n    syncTimes(exploreId);\n  };\n\n  render() {\n    const {\n      datasourceMissing,\n      closeSplit,\n      exploreId,\n      loading,\n      range,\n      timeZone,\n      splitted,\n      syncedTimes,\n      refreshInterval,\n      onChangeTime,\n      split,\n      hasLiveOption,\n      isLive,\n      isPaused,\n      containerWidth,\n      onChangeTimeZone,\n    } = this.props;\n\n    const styles = getStyles();\n    const showSmallDataSourcePicker = (splitted ? containerWidth < 700 : containerWidth < 800) || false;\n    const showSmallTimePicker = splitted || containerWidth < 1210;\n\n    return (\n      <div className={splitted ? 'explore-toolbar splitted' : 'explore-toolbar'}>\n        <div className=\"explore-toolbar-item\">\n          <div className=\"explore-toolbar-header\">\n            <div className=\"explore-toolbar-header-title\">\n              {exploreId === 'left' && (\n                <span className=\"navbar-page-btn\">\n                  <Icon\n                    name=\"compass\"\n                    size=\"lg\"\n                    className={css`\n                      margin-right: 6px;\n                      margin-bottom: 3px;\n                    `}\n                  />\n                  Explore\n                </span>\n              )}\n            </div>\n            {splitted && (\n              <IconButton className=\"explore-toolbar-header-close\" onClick={() => closeSplit(exploreId)} name=\"times\" />\n            )}\n          </div>\n        </div>\n        <div className=\"explore-toolbar-item\">\n          <div className=\"explore-toolbar-content\">\n            {!datasourceMissing ? (\n              <div className=\"explore-toolbar-content-item\">\n                <div\n                  className={classNames(\n                    'explore-ds-picker',\n                    showSmallDataSourcePicker ? 'explore-ds-picker--small' : ''\n                  )}\n                >\n                  <DataSourcePicker\n                    onChange={this.onChangeDatasource}\n                    current={this.props.datasourceName}\n                    hideTextValue={showSmallDataSourcePicker}\n                  />\n                </div>\n              </div>\n            ) : null}\n            <ReturnToDashboardButton exploreId={exploreId} />\n            {exploreId === 'left' && !splitted ? (\n              <div className=\"explore-toolbar-content-item explore-icon-align\">\n                <ResponsiveButton\n                  splitted={splitted}\n                  title=\"Split\"\n                  /* This way ResponsiveButton doesn't add event as a parameter when invoking split function\n                   * which breaks splitting functionality\n                   */\n                  onClick={() => split()}\n                  icon=\"columns\"\n                  iconClassName=\"icon-margin-right\"\n                  disabled={isLive}\n                />\n              </div>\n            ) : null}\n            <div className={'explore-toolbar-content-item'}>\n              <Tooltip content={'Copy shortened link'} placement=\"bottom\">\n                <button className={'btn navbar-button'} onClick={() => createAndCopyShortLink(window.location.href)}>\n                  <Icon name=\"share-alt\" />\n                </button>\n              </Tooltip>\n            </div>\n            {!isLive && (\n              <div className=\"explore-toolbar-content-item\">\n                <ExploreTimeControls\n                  exploreId={exploreId}\n                  range={range}\n                  timeZone={timeZone}\n                  onChangeTime={onChangeTime}\n                  splitted={splitted}\n                  syncedTimes={syncedTimes}\n                  onChangeTimeSync={this.onChangeTimeSync}\n                  hideText={showSmallTimePicker}\n                  onChangeTimeZone={onChangeTimeZone}\n                />\n              </div>\n            )}\n\n            {!isLive && (\n              <div className=\"explore-toolbar-content-item explore-icon-align\">\n                <ResponsiveButton\n                  splitted={splitted}\n                  title=\"Clear All\"\n                  onClick={this.onClearAll}\n                  icon=\"trash-alt\"\n                  iconClassName=\"icon-margin-right\"\n                />\n              </div>\n            )}\n            <div className=\"explore-toolbar-content-item\">\n              <RunButton\n                refreshInterval={refreshInterval}\n                onChangeRefreshInterval={this.onChangeRefreshInterval}\n                splitted={splitted}\n                isLive={isLive}\n                loading={loading || (isLive && !isPaused)}\n                onRun={this.onRunQuery}\n                showDropdown={!isLive}\n              />\n              {refreshInterval && <SetInterval func={this.onRunQuery} interval={refreshInterval} loading={loading} />}\n            </div>\n\n            {hasLiveOption && (\n              <div className={`explore-toolbar-content-item ${styles.liveTailButtons}`}>\n                <LiveTailControls exploreId={exploreId}>\n                  {(controls) => (\n                    <LiveTailButton\n                      splitted={splitted}\n                      isLive={isLive}\n                      isPaused={isPaused}\n                      start={controls.start}\n                      pause={controls.pause}\n                      resume={controls.resume}\n                      stop={controls.stop}\n                    />\n                  )}\n                </LiveTailControls>\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state: StoreState, { exploreId }: OwnProps): StateProps => {\n  const splitted = state.explore.split;\n  const syncedTimes = state.explore.syncedTimes;\n  const exploreItem: ExploreItemState = state.explore[exploreId];\n  const {\n    datasourceInstance,\n    datasourceMissing,\n    range,\n    refreshInterval,\n    loading,\n    isLive,\n    isPaused,\n    containerWidth,\n  } = exploreItem;\n\n  const hasLiveOption = !!datasourceInstance?.meta?.streaming;\n\n  return {\n    datasourceMissing,\n    datasourceName: datasourceInstance?.name,\n    loading,\n    range,\n    timeZone: getTimeZone(state.user),\n    splitted,\n    refreshInterval,\n    hasLiveOption,\n    isLive,\n    isPaused,\n    syncedTimes,\n    containerWidth,\n  };\n};\n\nconst mapDispatchToProps: DispatchProps = {\n  changeDatasource,\n  changeRefreshInterval,\n  clearAll: clearQueries,\n  cancelQueries,\n  runQueries,\n  closeSplit: splitClose,\n  split: splitOpen,\n  syncTimes,\n  onChangeTimeZone: updateTimeZoneForSession,\n};\n\nexport const ExploreToolbar = hot(module)(connect(mapStateToProps, mapDispatchToProps)(UnConnectedExploreToolbar));\n","// Libraries\nimport React, { PureComponent } from 'react';\n\n// Components\nimport QueryRow from './QueryRow';\n\n// Types\nimport { EventBusExtended } from '@grafana/data';\nimport { ExploreId } from 'app/types/explore';\n\ninterface QueryRowsProps {\n  className?: string;\n  exploreEvents: EventBusExtended;\n  exploreId: ExploreId;\n  queryKeys: string[];\n}\n\nexport default class QueryRows extends PureComponent<QueryRowsProps> {\n  render() {\n    const { className = '', exploreEvents, exploreId, queryKeys } = this.props;\n    return (\n      <div className={className}>\n        {queryKeys.map((key, index) => {\n          return <QueryRow key={key} exploreEvents={exploreEvents} exploreId={exploreId} index={index} />;\n        })}\n      </div>\n    );\n  }\n}\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactIconBase = require('react-icon-base');\n\nvar _reactIconBase2 = _interopRequireDefault(_reactIconBase);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar IoAlert = function IoAlert(props) {\n    return _react2.default.createElement(\n        _reactIconBase2.default,\n        _extends({ viewBox: '0 0 40 40' }, props),\n        _react2.default.createElement(\n            'g',\n            null,\n            _react2.default.createElement('path', { d: 'm25 37.5h-10v-7.5h10v7.5z m-1.2-12.5h-7.5l-1.3-22.5h10z' })\n        )\n    );\n};\n\nexports.default = IoAlert;\nmodule.exports = exports['default'];","var isSymbol = require('./isSymbol');\n\n/**\n * The base implementation of methods like `_.max` and `_.min` which accepts a\n * `comparator` to determine the extremum value.\n *\n * @private\n * @param {Array} array The array to iterate over.\n * @param {Function} iteratee The iteratee invoked per iteration.\n * @param {Function} comparator The comparator used to compare values.\n * @returns {*} Returns the extremum value.\n */\nfunction baseExtremum(array, iteratee, comparator) {\n  var index = -1,\n      length = array.length;\n\n  while (++index < length) {\n    var value = array[index],\n        current = iteratee(value);\n\n    if (current != null && (computed === undefined\n          ? (current === current && !isSymbol(current))\n          : comparator(current, computed)\n        )) {\n      var computed = current,\n          result = value;\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseExtremum;\n","import React, { Component } from 'react';\nimport { hot } from 'react-hot-loader';\nimport { connect } from 'react-redux';\n\nimport { StoreState } from 'app/types';\nimport { ExploreId } from 'app/types/explore';\n\nimport { CustomScrollbar, ErrorBoundaryAlert } from '@grafana/ui';\nimport { resetExploreAction, richHistoryUpdatedAction } from './state/main';\nimport Explore from './Explore';\nimport { getRichHistory } from '../../core/utils/richHistory';\n\ninterface WrapperProps {\n  split: boolean;\n  resetExploreAction: typeof resetExploreAction;\n  richHistoryUpdatedAction: typeof richHistoryUpdatedAction;\n}\n\nexport class Wrapper extends Component<WrapperProps> {\n  componentWillUnmount() {\n    this.props.resetExploreAction({});\n  }\n\n  componentDidMount() {\n    const richHistory = getRichHistory();\n    this.props.richHistoryUpdatedAction({ richHistory });\n  }\n\n  render() {\n    const { split } = this.props;\n\n    return (\n      <div className=\"page-scrollbar-wrapper\">\n        <CustomScrollbar autoHeightMin={'100%'} autoHeightMax={''} className=\"custom-scrollbar--page\">\n          <div className=\"explore-wrapper\">\n            <ErrorBoundaryAlert style=\"page\">\n              <Explore exploreId={ExploreId.left} />\n            </ErrorBoundaryAlert>\n            {split && (\n              <ErrorBoundaryAlert style=\"page\">\n                <Explore exploreId={ExploreId.right} />\n              </ErrorBoundaryAlert>\n            )}\n          </div>\n        </CustomScrollbar>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state: StoreState) => {\n  const { split } = state.explore;\n  return { split };\n};\n\nconst mapDispatchToProps = {\n  resetExploreAction,\n  richHistoryUpdatedAction,\n};\n\nexport default hot(module)(connect(mapStateToProps, mapDispatchToProps)(Wrapper));\n","/* eslint-env node, browser */\n'use strict'\n\n/**\n * Converts from a string key combination to an array\n *\n * @param  {string} combination like \"command+shift+l\"\n * @return {Array}\n */\nmodule.exports = function (combination) {\n  if (combination === '+') {\n    return ['+']\n  }\n\n  return combination.split('+')\n}\n","import React, { PureComponent } from 'react';\nimport { css, cx } from 'emotion';\nimport { GrafanaTheme, TimeZone, AbsoluteTimeRange, GraphSeriesXY, dateTime } from '@grafana/data';\n\nimport {\n  selectThemeVariant,\n  Themeable,\n  GraphWithLegend,\n  LegendDisplayMode,\n  withTheme,\n  Collapse,\n  GraphSeriesToggler,\n  GraphSeriesTogglerAPI,\n  Chart,\n  Icon,\n} from '@grafana/ui';\n\nconst MAX_NUMBER_OF_TIME_SERIES = 20;\n\nconst getStyles = (theme: GrafanaTheme) => ({\n  timeSeriesDisclaimer: css`\n    label: time-series-disclaimer;\n    width: 300px;\n    margin: ${theme.spacing.sm} auto;\n    padding: 10px 0;\n    border-radius: ${theme.border.radius.md};\n    text-align: center;\n    background-color: ${selectThemeVariant({ light: theme.palette.white, dark: theme.palette.dark4 }, theme.type)};\n  `,\n  disclaimerIcon: css`\n    label: disclaimer-icon;\n    color: ${theme.palette.yellow};\n    margin-right: ${theme.spacing.xs};\n  `,\n  showAllTimeSeries: css`\n    label: show-all-time-series;\n    cursor: pointer;\n    color: ${theme.colors.linkExternal};\n  `,\n});\n\ninterface Props extends Themeable {\n  ariaLabel?: string;\n  series?: GraphSeriesXY[] | null;\n  width: number;\n  absoluteRange: AbsoluteTimeRange;\n  loading?: boolean;\n  showPanel: boolean;\n  showBars: boolean;\n  showLines: boolean;\n  isStacked: boolean;\n  timeZone?: TimeZone;\n  onUpdateTimeRange: (absoluteRange: AbsoluteTimeRange) => void;\n  onHiddenSeriesChanged?: (hiddenSeries: string[]) => void;\n}\n\ninterface State {\n  hiddenSeries: string[];\n  showAllTimeSeries: boolean;\n}\n\nclass UnThemedExploreGraphPanel extends PureComponent<Props, State> {\n  state: State = {\n    hiddenSeries: [],\n    showAllTimeSeries: false,\n  };\n\n  onShowAllTimeSeries = () => {\n    this.setState({\n      showAllTimeSeries: true,\n    });\n  };\n\n  onChangeTime = (from: number, to: number) => {\n    const { onUpdateTimeRange } = this.props;\n    onUpdateTimeRange({ from, to });\n  };\n\n  renderGraph = () => {\n    const {\n      ariaLabel,\n      width,\n      series,\n      onHiddenSeriesChanged,\n      timeZone,\n      absoluteRange,\n      showPanel,\n      showBars,\n      showLines,\n      isStacked,\n    } = this.props;\n    const { showAllTimeSeries } = this.state;\n\n    if (!series) {\n      return null;\n    }\n\n    const timeRange = {\n      from: dateTime(absoluteRange.from),\n      to: dateTime(absoluteRange.to),\n      raw: {\n        from: dateTime(absoluteRange.from),\n        to: dateTime(absoluteRange.to),\n      },\n    };\n\n    const height = showPanel ? 200 : 100;\n    const lineWidth = showLines ? 1 : 5;\n    const seriesToShow = showAllTimeSeries ? series : series.slice(0, MAX_NUMBER_OF_TIME_SERIES);\n    return (\n      <GraphSeriesToggler series={seriesToShow} onHiddenSeriesChanged={onHiddenSeriesChanged}>\n        {({ onSeriesToggle, toggledSeries }: GraphSeriesTogglerAPI) => {\n          return (\n            <GraphWithLegend\n              ariaLabel={ariaLabel}\n              legendDisplayMode={LegendDisplayMode.List}\n              height={height}\n              placement={'bottom'}\n              width={width}\n              timeRange={timeRange}\n              timeZone={timeZone}\n              showBars={showBars}\n              showLines={showLines}\n              showPoints={false}\n              onToggleSort={() => {}}\n              series={toggledSeries}\n              isStacked={isStacked}\n              lineWidth={lineWidth}\n              onSeriesToggle={onSeriesToggle}\n              onHorizontalRegionSelected={this.onChangeTime}\n            >\n              {/* For logs we are using mulit mode until we refactor logs histogram to use barWidth instead of lineWidth to render bars */}\n              <Chart.Tooltip mode={showBars ? 'multi' : 'single'} />\n            </GraphWithLegend>\n          );\n        }}\n      </GraphSeriesToggler>\n    );\n  };\n\n  render() {\n    const { series, showPanel, loading, theme } = this.props;\n    const { showAllTimeSeries } = this.state;\n    const style = getStyles(theme);\n\n    return (\n      <>\n        {series && series.length > MAX_NUMBER_OF_TIME_SERIES && !showAllTimeSeries && (\n          <div className={cx([style.timeSeriesDisclaimer])}>\n            <Icon className={style.disclaimerIcon} name=\"exclamation-triangle\" />\n            {`Showing only ${MAX_NUMBER_OF_TIME_SERIES} time series. `}\n            <span\n              className={cx([style.showAllTimeSeries])}\n              onClick={this.onShowAllTimeSeries}\n            >{`Show all ${series.length}`}</span>\n          </div>\n        )}\n\n        {showPanel && (\n          <Collapse label=\"Graph\" loading={loading} isOpen>\n            {this.renderGraph()}\n          </Collapse>\n        )}\n\n        {!showPanel && this.renderGraph()}\n      </>\n    );\n  }\n}\n\nexport const ExploreGraphPanel = withTheme(UnThemedExploreGraphPanel);\nExploreGraphPanel.displayName = 'ExploreGraphPanel';\n","import React, { PureComponent } from 'react';\nimport { css } from 'emotion';\nimport { capitalize } from 'lodash';\n\nimport {\n  rangeUtil,\n  RawTimeRange,\n  LogLevel,\n  TimeZone,\n  AbsoluteTimeRange,\n  LogsMetaKind,\n  LogsDedupStrategy,\n  LogRowModel,\n  LogsDedupDescription,\n  LogsMetaItem,\n  LogsSortOrder,\n  GraphSeriesXY,\n  LinkModel,\n  Field,\n  GrafanaTheme,\n} from '@grafana/data';\nimport {\n  LogLabels,\n  RadioButtonGroup,\n  LogRows,\n  Button,\n  InlineField,\n  InlineFieldRow,\n  InlineSwitch,\n  withTheme,\n  stylesFactory,\n} from '@grafana/ui';\nimport store from 'app/core/store';\nimport { ExploreGraphPanel } from './ExploreGraphPanel';\nimport { MetaInfoText } from './MetaInfoText';\nimport { RowContextOptions } from '@grafana/ui/src/components/Logs/LogRowContextProvider';\nimport { MAX_CHARACTERS } from '@grafana/ui/src/components/Logs/LogRowMessage';\n\nconst SETTINGS_KEYS = {\n  showLabels: 'grafana.explore.logs.showLabels',\n  showTime: 'grafana.explore.logs.showTime',\n  wrapLogMessage: 'grafana.explore.logs.wrapLogMessage',\n};\n\nfunction renderMetaItem(value: any, kind: LogsMetaKind) {\n  if (kind === LogsMetaKind.LabelsMap) {\n    return (\n      <span className=\"logs-meta-item__labels\">\n        <LogLabels labels={value} />\n      </span>\n    );\n  } else if (kind === LogsMetaKind.Error) {\n    return <span className=\"logs-meta-item__error\">{value}</span>;\n  }\n  return value;\n}\n\ninterface Props {\n  logRows: LogRowModel[];\n  logsMeta?: LogsMetaItem[];\n  logsSeries?: GraphSeriesXY[];\n  dedupedRows?: LogRowModel[];\n  visibleRange?: AbsoluteTimeRange;\n  width: number;\n  theme: GrafanaTheme;\n  highlighterExpressions?: string[];\n  loading: boolean;\n  absoluteRange: AbsoluteTimeRange;\n  timeZone: TimeZone;\n  scanning?: boolean;\n  scanRange?: RawTimeRange;\n  dedupStrategy: LogsDedupStrategy;\n  showContextToggle?: (row?: LogRowModel) => boolean;\n  onChangeTime: (range: AbsoluteTimeRange) => void;\n  onClickFilterLabel?: (key: string, value: string) => void;\n  onClickFilterOutLabel?: (key: string, value: string) => void;\n  onStartScanning?: () => void;\n  onStopScanning?: () => void;\n  onDedupStrategyChange: (dedupStrategy: LogsDedupStrategy) => void;\n  onToggleLogLevel: (hiddenLogLevels: LogLevel[]) => void;\n  getRowContext?: (row: LogRowModel, options?: RowContextOptions) => Promise<any>;\n  getFieldLinks: (field: Field, rowIndex: number) => Array<LinkModel<Field>>;\n}\n\ninterface State {\n  showLabels: boolean;\n  showTime: boolean;\n  wrapLogMessage: boolean;\n  logsSortOrder: LogsSortOrder | null;\n  isFlipping: boolean;\n  showDetectedFields: string[];\n}\n\nexport class UnthemedLogs extends PureComponent<Props, State> {\n  flipOrderTimer: NodeJS.Timeout;\n  cancelFlippingTimer: NodeJS.Timeout;\n\n  state: State = {\n    showLabels: store.getBool(SETTINGS_KEYS.showLabels, false),\n    showTime: store.getBool(SETTINGS_KEYS.showTime, true),\n    wrapLogMessage: store.getBool(SETTINGS_KEYS.wrapLogMessage, true),\n    logsSortOrder: null,\n    isFlipping: false,\n    showDetectedFields: [],\n  };\n\n  componentWillUnmount() {\n    clearTimeout(this.flipOrderTimer);\n    clearTimeout(this.cancelFlippingTimer);\n  }\n\n  onChangeLogsSortOrder = () => {\n    this.setState({ isFlipping: true });\n    // we are using setTimeout here to make sure that disabled button is rendered before the rendering of reordered logs\n    this.flipOrderTimer = setTimeout(() => {\n      this.setState((prevState) => {\n        if (prevState.logsSortOrder === null || prevState.logsSortOrder === LogsSortOrder.Descending) {\n          return { logsSortOrder: LogsSortOrder.Ascending };\n        }\n        return { logsSortOrder: LogsSortOrder.Descending };\n      });\n    }, 0);\n    this.cancelFlippingTimer = setTimeout(() => this.setState({ isFlipping: false }), 1000);\n  };\n\n  onChangeDedup = (dedup: LogsDedupStrategy) => {\n    const { onDedupStrategyChange } = this.props;\n    if (this.props.dedupStrategy === dedup) {\n      return onDedupStrategyChange(LogsDedupStrategy.none);\n    }\n    return onDedupStrategyChange(dedup);\n  };\n\n  onChangeLabels = (event?: React.SyntheticEvent) => {\n    const target = event && (event.target as HTMLInputElement);\n    if (target) {\n      const showLabels = target.checked;\n      this.setState({\n        showLabels,\n      });\n      store.set(SETTINGS_KEYS.showLabels, showLabels);\n    }\n  };\n\n  onChangeTime = (event?: React.SyntheticEvent) => {\n    const target = event && (event.target as HTMLInputElement);\n    if (target) {\n      const showTime = target.checked;\n      this.setState({\n        showTime,\n      });\n      store.set(SETTINGS_KEYS.showTime, showTime);\n    }\n  };\n\n  onChangewrapLogMessage = (event?: React.SyntheticEvent) => {\n    const target = event && (event.target as HTMLInputElement);\n    if (target) {\n      const wrapLogMessage = target.checked;\n      this.setState({\n        wrapLogMessage,\n      });\n      store.set(SETTINGS_KEYS.wrapLogMessage, wrapLogMessage);\n    }\n  };\n\n  onToggleLogLevel = (hiddenRawLevels: string[]) => {\n    const hiddenLogLevels: LogLevel[] = hiddenRawLevels.map((level) => LogLevel[level as LogLevel]);\n    this.props.onToggleLogLevel(hiddenLogLevels);\n  };\n\n  onClickScan = (event: React.SyntheticEvent) => {\n    event.preventDefault();\n    if (this.props.onStartScanning) {\n      this.props.onStartScanning();\n    }\n  };\n\n  onClickStopScan = (event: React.SyntheticEvent) => {\n    event.preventDefault();\n    if (this.props.onStopScanning) {\n      this.props.onStopScanning();\n    }\n  };\n\n  showDetectedField = (key: string) => {\n    const index = this.state.showDetectedFields.indexOf(key);\n\n    if (index === -1) {\n      this.setState((state) => {\n        return {\n          showDetectedFields: state.showDetectedFields.concat(key),\n        };\n      });\n    }\n  };\n\n  hideDetectedField = (key: string) => {\n    const index = this.state.showDetectedFields.indexOf(key);\n    if (index > -1) {\n      this.setState((state) => {\n        return {\n          showDetectedFields: state.showDetectedFields.filter((k) => key !== k),\n        };\n      });\n    }\n  };\n\n  clearDetectedFields = () => {\n    this.setState((state) => {\n      return {\n        showDetectedFields: [],\n      };\n    });\n  };\n\n  render() {\n    const {\n      logRows,\n      logsMeta,\n      logsSeries,\n      visibleRange,\n      highlighterExpressions,\n      loading = false,\n      onClickFilterLabel,\n      onClickFilterOutLabel,\n      timeZone,\n      scanning,\n      scanRange,\n      showContextToggle,\n      width,\n      dedupedRows,\n      absoluteRange,\n      onChangeTime,\n      getFieldLinks,\n      dedupStrategy,\n      theme,\n    } = this.props;\n\n    const { showLabels, showTime, wrapLogMessage, logsSortOrder, isFlipping, showDetectedFields } = this.state;\n\n    if (!logRows) {\n      return null;\n    }\n\n    const hasData = logRows && logRows.length > 0;\n    const dedupCount = dedupedRows\n      ? dedupedRows.reduce((sum, row) => (row.duplicates ? sum + row.duplicates : sum), 0)\n      : 0;\n    const meta = logsMeta ? [...logsMeta] : [];\n\n    if (dedupStrategy !== LogsDedupStrategy.none) {\n      meta.push({\n        label: 'Dedup count',\n        value: dedupCount,\n        kind: LogsMetaKind.Number,\n      });\n    }\n\n    if (logRows.some((r) => r.entry.length > MAX_CHARACTERS)) {\n      meta.push({\n        label: 'Info',\n        value: 'Logs with more than 100,000 characters could not be parsed and highlighted',\n        kind: LogsMetaKind.String,\n      });\n    }\n\n    const scanText = scanRange ? `Scanning ${rangeUtil.describeTimeRange(scanRange)}` : 'Scanning...';\n    const series = logsSeries ? logsSeries : [];\n    const styles = getStyles(theme);\n\n    return (\n      <>\n        <ExploreGraphPanel\n          series={series}\n          width={width}\n          onHiddenSeriesChanged={this.onToggleLogLevel}\n          loading={loading}\n          absoluteRange={visibleRange || absoluteRange}\n          isStacked={true}\n          showPanel={false}\n          timeZone={timeZone}\n          showBars={true}\n          showLines={false}\n          onUpdateTimeRange={onChangeTime}\n        />\n        <div className={styles.logOptions}>\n          <InlineFieldRow>\n            <InlineField label=\"Time\" transparent>\n              <InlineSwitch value={showTime} onChange={this.onChangeTime} transparent />\n            </InlineField>\n            <InlineField label=\"Unique labels\" transparent>\n              <InlineSwitch value={showLabels} onChange={this.onChangeLabels} transparent />\n            </InlineField>\n            <InlineField label=\"Wrap lines\" transparent>\n              <InlineSwitch value={wrapLogMessage} onChange={this.onChangewrapLogMessage} transparent />\n            </InlineField>\n            <InlineField label=\"Dedup\" transparent>\n              <RadioButtonGroup\n                options={Object.keys(LogsDedupStrategy).map((dedupType: LogsDedupStrategy) => ({\n                  label: capitalize(dedupType),\n                  value: dedupType,\n                  description: LogsDedupDescription[dedupType],\n                }))}\n                value={dedupStrategy}\n                onChange={this.onChangeDedup}\n                className={styles.radioButtons}\n              />\n            </InlineField>\n          </InlineFieldRow>\n          <Button\n            variant=\"secondary\"\n            disabled={isFlipping}\n            title={logsSortOrder === LogsSortOrder.Ascending ? 'Change to newest first' : 'Change to oldest first'}\n            aria-label=\"Flip results order\"\n            className={styles.flipButton}\n            onClick={this.onChangeLogsSortOrder}\n          >\n            {isFlipping ? 'Flipping...' : 'Flip results order'}\n          </Button>\n        </div>\n\n        {meta && (\n          <MetaInfoText\n            metaItems={meta.map((item) => {\n              return {\n                label: item.label,\n                value: renderMetaItem(item.value, item.kind),\n              };\n            })}\n          />\n        )}\n\n        {showDetectedFields?.length > 0 && (\n          <MetaInfoText\n            metaItems={[\n              {\n                label: 'Showing only detected fields',\n                value: renderMetaItem(showDetectedFields, LogsMetaKind.LabelsMap),\n              },\n              {\n                label: '',\n                value: (\n                  <Button variant=\"secondary\" size=\"sm\" onClick={this.clearDetectedFields}>\n                    Show all detected fields\n                  </Button>\n                ),\n              },\n            ]}\n          />\n        )}\n\n        <LogRows\n          logRows={logRows}\n          deduplicatedRows={dedupedRows}\n          dedupStrategy={dedupStrategy}\n          getRowContext={this.props.getRowContext}\n          highlighterExpressions={highlighterExpressions}\n          rowLimit={logRows ? logRows.length : undefined}\n          onClickFilterLabel={onClickFilterLabel}\n          onClickFilterOutLabel={onClickFilterOutLabel}\n          showContextToggle={showContextToggle}\n          showLabels={showLabels}\n          showTime={showTime}\n          wrapLogMessage={wrapLogMessage}\n          timeZone={timeZone}\n          getFieldLinks={getFieldLinks}\n          logsSortOrder={logsSortOrder}\n          showDetectedFields={showDetectedFields}\n          onClickShowDetectedField={this.showDetectedField}\n          onClickHideDetectedField={this.hideDetectedField}\n        />\n\n        {!loading && !hasData && !scanning && (\n          <div className={styles.noData}>\n            No logs found.\n            <Button size=\"xs\" variant=\"link\" onClick={this.onClickScan}>\n              Scan for older logs\n            </Button>\n          </div>\n        )}\n\n        {scanning && (\n          <div className={styles.noData}>\n            <span>{scanText}</span>\n            <Button size=\"xs\" variant=\"link\" onClick={this.onClickStopScan}>\n              Stop scan\n            </Button>\n          </div>\n        )}\n      </>\n    );\n  }\n}\n\nexport const Logs = withTheme(UnthemedLogs);\n\nconst getStyles = stylesFactory((theme: GrafanaTheme) => {\n  return {\n    noData: css`\n      > * {\n        margin-left: 0.5em;\n      }\n    `,\n    logOptions: css`\n      display: flex;\n      justify-content: space-between;\n      align-items: baseline;\n      flex-wrap: wrap;\n      background-color: ${theme.colors.bg1};\n      padding: ${theme.spacing.sm} ${theme.spacing.md};\n      border-radius: ${theme.border.radius.md};\n      margin: ${theme.spacing.md} 0 ${theme.spacing.sm};\n      border: 1px solid ${theme.colors.panelBorder};\n    `,\n    flipButton: css`\n      margin: ${theme.spacing.xs} 0 0 ${theme.spacing.sm};\n    `,\n    radioButtons: css`\n      margin: 0 ${theme.spacing.sm};\n    `,\n  };\n});\n","import React, { memo, useContext } from 'react';\nimport { css } from 'emotion';\nimport { GrafanaTheme } from '@grafana/data';\nimport { stylesFactory, ThemeContext } from '@grafana/ui';\n\nconst getStyles = stylesFactory((theme: GrafanaTheme) => ({\n  metaContainer: css`\n    flex: 1;\n    color: ${theme.colors.textWeak};\n    margin-bottom: ${theme.spacing.d};\n    min-width: 30%;\n    display: flex;\n  `,\n  metaItem: css`\n    margin-right: ${theme.spacing.d};\n    display: flex;\n    align-items: baseline;\n\n    .logs-meta-item__error {\n      color: ${theme.palette.red};\n    }\n  `,\n  metaLabel: css`\n    margin-right: calc(${theme.spacing.d} / 2);\n    font-size: ${theme.typography.size.sm};\n    font-weight: ${theme.typography.weight.semibold};\n  `,\n  metaValue: css`\n    font-family: ${theme.typography.fontFamily.monospace};\n  `,\n}));\n\nexport interface MetaItemProps {\n  label?: string;\n  value: string;\n}\n\nexport const MetaInfoItem = memo(function MetaInfoItem(props: MetaItemProps) {\n  const theme = useContext(ThemeContext);\n  const style = getStyles(theme);\n  const { label, value } = props;\n\n  return (\n    <div className={style.metaItem}>\n      {label && <span className={style.metaLabel}>{label}:</span>}\n      <span className={style.metaValue}>{value}</span>\n    </div>\n  );\n});\n\nexport interface MetaInfoTextProps {\n  metaItems: MetaItemProps[];\n}\n\nexport const MetaInfoText = memo(function MetaInfoText(props: MetaInfoTextProps) {\n  const theme = useContext(ThemeContext);\n  const style = getStyles(theme);\n  const { metaItems } = props;\n\n  return (\n    <div className={style.metaContainer}>\n      {metaItems.map((item, index) => (\n        <MetaInfoItem key={`${index}-${item.label}`} label={item.label} value={item.value} />\n      ))}\n    </div>\n  );\n});\n\nexport default MetaInfoText;\n","/* eslint-env node, browser */\n'use strict'\n\n/**\n * handles a character key event\n *\n * @param {string} character\n * @param {Array} modifiers\n * @param {Event} e\n * @returns void\n */\nmodule.exports = function (character, modifiers, e) {\n  var self = this\n  var callbacks\n  var j\n  var doNotReset = {}\n  var maxLevel = 0\n  var processedSequenceCallback = false\n  var isModifier\n  var ignoreThisKeypress\n\n  callbacks = self.getMatches(character, modifiers, e)\n  // Calculate the maxLevel for sequences so we can only execute the longest callback sequence\n  for (j = 0; j < callbacks.length; ++j) {\n    if (callbacks[j].seq) {\n      maxLevel = Math.max(maxLevel, callbacks[j].level)\n    }\n  }\n\n  // loop through matching callbacks for this key event\n  for (j = 0; j < callbacks.length; ++j) {\n    // fire for all sequence callbacks\n    // this is because if for example you have multiple sequences\n    // bound such as \"g i\" and \"g t\" they both need to fire the\n    // callback for matching g cause otherwise you can only ever\n    // match the first one\n    if (callbacks[j].seq) {\n      // only fire callbacks for the maxLevel to prevent\n      // subsequences from also firing\n      //\n      // for example 'a option b' should not cause 'option b' to fire\n      // even though 'option b' is part of the other sequence\n      //\n      // any sequences that do not match here will be discarded\n      // below by the resetSequences call\n      if (callbacks[j].level !== maxLevel) {\n        continue\n      }\n\n      processedSequenceCallback = true\n\n      // keep a list of which sequences were matches for later\n      doNotReset[callbacks[j].seq] = 1\n      self.fireCallback(callbacks[j].callback, e, callbacks[j].combo, callbacks[j].seq)\n      continue\n    }\n\n    // if there were no sequence matches but we are still here\n    // that means this is a regular match so we should fire that\n    if (!processedSequenceCallback) {\n      self.fireCallback(callbacks[j].callback, e, callbacks[j].combo)\n    }\n  }\n\n  // if the key you pressed matches the type of sequence without\n  // being a modifier (ie \"keyup\" or \"keypress\") then we should\n  // reset all sequences that were not matched by this event\n  //\n  // this is so, for example, if you have the sequence \"h a t\" and you\n  // type \"h e a r t\" it does not match.  in this case the \"e\" will\n  // cause the sequence to reset\n  //\n  // modifier keys are ignored because you can have a sequence\n  // that contains modifiers such as \"enter ctrl+space\" and in most\n  // cases the modifier key will be pressed before the next key\n  //\n  // also if you have a sequence such as \"ctrl+b a\" then pressing the\n  // \"b\" key will trigger a \"keypress\" and a \"keydown\"\n  //\n  // the \"keydown\" is expected when there is a modifier, but the\n  // \"keypress\" ends up matching the nextExpectedAction since it occurs\n  // after and that causes the sequence to reset\n  //\n  // we ignore keypresses in a sequence that directly follow a keydown\n  // for the same character\n  ignoreThisKeypress = e.type === 'keypress' && self.ignoreNextKeypress\n  isModifier = require('../../helpers/isModifier')\n  if (e.type === self.nextExpectedAction && !isModifier(character) && !ignoreThisKeypress) {\n    self.resetSequences(doNotReset)\n  }\n\n  self.ignoreNextKeypress = processedSequenceCallback && e.type === 'keydown'\n}\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as React from 'react';\nimport { css } from 'emotion';\n\nimport renderIntoCanvas from './render-into-canvas';\nimport { getRgbColorByKey } from '../../utils/color-generator';\nimport { TNil } from '../../types';\n\nimport { autoColor, createStyle, Theme, withTheme } from '../../Theme';\n\nconst getStyles = createStyle((theme: Theme) => {\n  return {\n    CanvasSpanGraph: css`\n      label: CanvasSpanGraph;\n      background: ${autoColor(theme, '#fafafa')};\n      height: 60px;\n      position: absolute;\n      width: 100%;\n    `,\n  };\n});\n\ntype CanvasSpanGraphProps = {\n  items: Array<{ valueWidth: number; valueOffset: number; serviceName: string }>;\n  valueWidth: number;\n  theme: Theme;\n};\n\nexport class UnthemedCanvasSpanGraph extends React.PureComponent<CanvasSpanGraphProps> {\n  _canvasElm: HTMLCanvasElement | TNil;\n\n  constructor(props: CanvasSpanGraphProps) {\n    super(props);\n    this._canvasElm = undefined;\n  }\n\n  getColor = (key: string) => getRgbColorByKey(key, this.props.theme);\n\n  componentDidMount() {\n    this._draw();\n  }\n\n  componentDidUpdate() {\n    this._draw();\n  }\n\n  _setCanvasRef = (elm: HTMLCanvasElement | TNil) => {\n    this._canvasElm = elm;\n  };\n\n  _draw() {\n    if (this._canvasElm) {\n      const { valueWidth: totalValueWidth, items } = this.props;\n      renderIntoCanvas(this._canvasElm, items, totalValueWidth, this.getColor, autoColor(this.props.theme, '#fff'));\n    }\n  }\n\n  render() {\n    return <canvas className={getStyles(this.props.theme).CanvasSpanGraph} ref={this._setCanvasRef} />;\n  }\n}\n\nexport default withTheme(UnthemedCanvasSpanGraph);\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { TNil } from '../..';\n\n// exported for tests\nexport const ITEM_ALPHA = 0.8;\nexport const MIN_ITEM_HEIGHT = 2;\nexport const MAX_TOTAL_HEIGHT = 200;\nexport const MIN_ITEM_WIDTH = 10;\nexport const MIN_TOTAL_HEIGHT = 60;\nexport const MAX_ITEM_HEIGHT = 6;\n\nexport default function renderIntoCanvas(\n  canvas: HTMLCanvasElement,\n  items: Array<{ valueWidth: number; valueOffset: number; serviceName: string }>,\n  totalValueWidth: number,\n  getFillColor: (serviceName: string) => [number, number, number],\n  bgColor: string\n) {\n  const fillCache: Map<string, string | TNil> = new Map();\n  const cHeight = items.length < MIN_TOTAL_HEIGHT ? MIN_TOTAL_HEIGHT : Math.min(items.length, MAX_TOTAL_HEIGHT);\n  const cWidth = window.innerWidth * 2;\n  // eslint-disable-next-line no-param-reassign\n  canvas.width = cWidth;\n  // eslint-disable-next-line no-param-reassign\n  canvas.height = cHeight;\n  const itemHeight = Math.min(MAX_ITEM_HEIGHT, Math.max(MIN_ITEM_HEIGHT, cHeight / items.length));\n  const itemYChange = cHeight / items.length;\n\n  const ctx = canvas.getContext('2d', { alpha: false }) as CanvasRenderingContext2D;\n  ctx.fillStyle = bgColor;\n  ctx.fillRect(0, 0, cWidth, cHeight);\n  for (let i = 0; i < items.length; i++) {\n    const { valueWidth, valueOffset, serviceName } = items[i];\n    const x = (valueOffset / totalValueWidth) * cWidth;\n    let width = (valueWidth / totalValueWidth) * cWidth;\n    if (width < MIN_ITEM_WIDTH) {\n      width = MIN_ITEM_WIDTH;\n    }\n    let fillStyle = fillCache.get(serviceName);\n    if (!fillStyle) {\n      fillStyle = `rgba(${getFillColor(serviceName).concat(ITEM_ALPHA).join()})`;\n      fillCache.set(serviceName, fillStyle);\n    }\n    ctx.fillStyle = fillStyle;\n    ctx.fillRect(x, i * itemYChange, width, itemHeight);\n  }\n}\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport React from 'react';\n\nimport { formatDuration } from '../../utils/date';\n\nimport { createStyle } from '../../Theme';\nimport { css } from 'emotion';\n\nconst getStyles = createStyle(() => {\n  return {\n    TickLabels: css`\n      label: TickLabels;\n      height: 1rem;\n      position: relative;\n    `,\n    TickLabelsLabel: css`\n      label: TickLabelsLabel;\n      color: #717171;\n      font-size: 0.7rem;\n      position: absolute;\n      user-select: none;\n    `,\n  };\n});\n\ntype TickLabelsProps = {\n  numTicks: number;\n  duration: number;\n};\n\nexport default function TickLabels(props: TickLabelsProps) {\n  const { numTicks, duration } = props;\n  const styles = getStyles();\n\n  const ticks = [];\n  for (let i = 0; i < numTicks + 1; i++) {\n    const portion = i / numTicks;\n    const style = portion === 1 ? { right: '0%' } : { left: `${portion * 100}%` };\n    ticks.push(\n      <div key={portion} className={styles.TickLabelsLabel} style={style} data-test=\"tick\">\n        {formatDuration(duration * portion)}\n      </div>\n    );\n  }\n\n  return <div className={styles.TickLabels}>{ticks}</div>;\n}\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport React from 'react';\nimport { css } from 'emotion';\nimport { createStyle } from '../../Theme';\n\nconst getStyles = createStyle(() => {\n  return {\n    GraphTick: css`\n      label: GraphTick;\n      stroke: #aaa;\n      stroke-width: 1px;\n    `,\n  };\n});\n\ntype GraphTicksProps = {\n  numTicks: number;\n};\n\nexport default function GraphTicks(props: GraphTicksProps) {\n  const { numTicks } = props;\n  const ticks = [];\n  // i starts at 1, limit is `i < numTicks` so the first and last ticks aren't drawn\n  for (let i = 1; i < numTicks; i++) {\n    const x = `${(i / numTicks) * 100}%`;\n    ticks.push(<line className={getStyles().GraphTick} x1={x} y1=\"0%\" x2={x} y2=\"100%\" key={i / numTicks} />);\n  }\n\n  return (\n    <g data-test=\"ticks\" aria-hidden=\"true\">\n      {ticks}\n    </g>\n  );\n}\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport React from 'react';\nimport cx from 'classnames';\n\nimport { createStyle } from '../../Theme';\nimport { css } from 'emotion';\n\nexport const getStyles = createStyle(() => {\n  const ScrubberHandleExpansion = css`\n    label: ScrubberHandleExpansion;\n    cursor: col-resize;\n    fill-opacity: 0;\n    fill: #44f;\n  `;\n  const ScrubberHandle = css`\n    label: ScrubberHandle;\n    cursor: col-resize;\n    fill: #555;\n  `;\n  const ScrubberLine = css`\n    label: ScrubberLine;\n    pointer-events: none;\n    stroke: #555;\n  `;\n  return {\n    ScrubberDragging: css`\n      label: ScrubberDragging;\n      & .${ScrubberHandleExpansion} {\n        fill-opacity: 1;\n      }\n      & .${ScrubberHandle} {\n        fill: #44f;\n      }\n      & > .${ScrubberLine} {\n        stroke: #44f;\n      }\n    `,\n    ScrubberHandles: css`\n      label: ScrubberHandles;\n      &:hover > .${ScrubberHandleExpansion} {\n        fill-opacity: 1;\n      }\n      &:hover > .${ScrubberHandle} {\n        fill: #44f;\n      }\n      &:hover + .${ScrubberLine} {\n        stroke: #44f;\n      }\n    `,\n    ScrubberHandleExpansion,\n    ScrubberHandle,\n    ScrubberLine,\n  };\n});\n\ntype ScrubberProps = {\n  isDragging: boolean;\n  position: number;\n  onMouseDown: (evt: React.MouseEvent<any>) => void;\n  onMouseEnter: (evt: React.MouseEvent<any>) => void;\n  onMouseLeave: (evt: React.MouseEvent<any>) => void;\n};\n\nexport default function Scrubber({ isDragging, onMouseDown, onMouseEnter, onMouseLeave, position }: ScrubberProps) {\n  const xPercent = `${position * 100}%`;\n  const styles = getStyles();\n  const className = cx({ [styles.ScrubberDragging]: isDragging });\n  return (\n    <g className={className}>\n      <g\n        className={styles.ScrubberHandles}\n        onMouseDown={onMouseDown}\n        onMouseEnter={onMouseEnter}\n        onMouseLeave={onMouseLeave}\n      >\n        {/* handleExpansion is only visible when `isDragging` is true */}\n        <rect\n          x={xPercent}\n          className={styles.ScrubberHandleExpansion}\n          style={{ transform: `translate(-4.5px)` }}\n          width=\"9\"\n          height=\"20\"\n        />\n        <rect\n          x={xPercent}\n          className={styles.ScrubberHandle}\n          style={{ transform: `translate(-1.5px)` }}\n          width=\"3\"\n          height=\"20\"\n        />\n      </g>\n      <line className={styles.ScrubberLine} y2=\"100%\" x1={xPercent} x2={xPercent} />\n    </g>\n  );\n}\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport cx from 'classnames';\nimport * as React from 'react';\nimport { css } from 'emotion';\n\nimport GraphTicks from './GraphTicks';\nimport Scrubber from './Scrubber';\nimport { TUpdateViewRangeTimeFunction, UIButton, ViewRange, ViewRangeTimeUpdate } from '../..';\nimport { withTheme, Theme, autoColor } from '../../Theme';\nimport { TNil } from '../..';\nimport DraggableManager, { DraggableBounds, DraggingUpdate, EUpdateTypes } from '../../utils/DraggableManager';\n\nimport { createStyle } from '../../Theme';\n\nexport const getStyles = createStyle((theme: Theme) => {\n  // Need this cause emotion will merge emotion generated classes into single className if used with cx from emotion\n  // package and the selector won't work\n  const ViewingLayerResetZoomHoverClassName = 'JaegerUiComponents__ViewingLayerResetZoomHoverClassName';\n  const ViewingLayerResetZoom = css`\n    label: ViewingLayerResetZoom;\n    display: none;\n    position: absolute;\n    right: 1%;\n    top: 10%;\n    z-index: 1;\n  `;\n  return {\n    ViewingLayer: css`\n      label: ViewingLayer;\n      cursor: vertical-text;\n      position: relative;\n      z-index: 1;\n      &:hover > .${ViewingLayerResetZoomHoverClassName} {\n        display: unset;\n      }\n    `,\n    ViewingLayerGraph: css`\n      label: ViewingLayerGraph;\n      border: 1px solid ${autoColor(theme, '#999')};\n      /* need !important here to overcome something from semantic UI */\n      overflow: visible !important;\n      position: relative;\n      transform-origin: 0 0;\n      width: 100%;\n    `,\n    ViewingLayerInactive: css`\n      label: ViewingLayerInactive;\n      fill: ${autoColor(theme, 'rgba(214, 214, 214, 0.5)')};\n    `,\n    ViewingLayerCursorGuide: css`\n      label: ViewingLayerCursorGuide;\n      stroke: ${autoColor(theme, '#f44')};\n      stroke-width: 1;\n    `,\n    ViewingLayerDraggedShift: css`\n      label: ViewingLayerDraggedShift;\n      fill-opacity: 0.2;\n    `,\n    ViewingLayerDrag: css`\n      label: ViewingLayerDrag;\n      fill: ${autoColor(theme, '#44f')};\n    `,\n    ViewingLayerFullOverlay: css`\n      label: ViewingLayerFullOverlay;\n      bottom: 0;\n      cursor: col-resize;\n      left: 0;\n      position: fixed;\n      right: 0;\n      top: 0;\n      user-select: none;\n    `,\n    ViewingLayerResetZoom,\n    ViewingLayerResetZoomHoverClassName,\n  };\n});\n\ntype ViewingLayerProps = {\n  height: number;\n  numTicks: number;\n  updateViewRangeTime: TUpdateViewRangeTimeFunction;\n  updateNextViewRangeTime: (update: ViewRangeTimeUpdate) => void;\n  viewRange: ViewRange;\n  theme: Theme;\n};\n\ntype ViewingLayerState = {\n  /**\n   * Cursor line should not be drawn when the mouse is over the scrubber handle.\n   */\n  preventCursorLine: boolean;\n};\n\n/**\n * Designate the tags for the different dragging managers. Exported for tests.\n */\nexport const dragTypes = {\n  /**\n   * Tag for dragging the right scrubber, e.g. end of the current view range.\n   */\n  SHIFT_END: 'SHIFT_END',\n  /**\n   * Tag for dragging the left scrubber, e.g. start of the current view range.\n   */\n  SHIFT_START: 'SHIFT_START',\n  /**\n   * Tag for dragging a new view range.\n   */\n  REFRAME: 'REFRAME',\n};\n\n/**\n * Returns the layout information for drawing the view-range differential, e.g.\n * show what will change when the mouse is released. Basically, this is the\n * difference from the start of the drag to the current position.\n *\n * @returns {{ x: string, width: string, leadginX: string }}\n */\nfunction getNextViewLayout(start: number, position: number) {\n  const [left, right] = start < position ? [start, position] : [position, start];\n  return {\n    x: `${left * 100}%`,\n    width: `${(right - left) * 100}%`,\n    leadingX: `${position * 100}%`,\n  };\n}\n\n/**\n * `ViewingLayer` is rendered on top of the Canvas rendering of the minimap and\n * handles showing the current view range and handles mouse UX for modifying it.\n */\nexport class UnthemedViewingLayer extends React.PureComponent<ViewingLayerProps, ViewingLayerState> {\n  state: ViewingLayerState;\n\n  _root: Element | TNil;\n\n  /**\n   * `_draggerReframe` handles clicking and dragging on the `ViewingLayer` to\n   * redefined the view range.\n   */\n  _draggerReframe: DraggableManager;\n\n  /**\n   * `_draggerStart` handles dragging the left scrubber to adjust the start of\n   * the view range.\n   */\n  _draggerStart: DraggableManager;\n\n  /**\n   * `_draggerEnd` handles dragging the right scrubber to adjust the end of\n   * the view range.\n   */\n  _draggerEnd: DraggableManager;\n\n  constructor(props: ViewingLayerProps) {\n    super(props);\n\n    this._draggerReframe = new DraggableManager({\n      getBounds: this._getDraggingBounds,\n      onDragEnd: this._handleReframeDragEnd,\n      onDragMove: this._handleReframeDragUpdate,\n      onDragStart: this._handleReframeDragUpdate,\n      onMouseMove: this._handleReframeMouseMove,\n      onMouseLeave: this._handleReframeMouseLeave,\n      tag: dragTypes.REFRAME,\n    });\n\n    this._draggerStart = new DraggableManager({\n      getBounds: this._getDraggingBounds,\n      onDragEnd: this._handleScrubberDragEnd,\n      onDragMove: this._handleScrubberDragUpdate,\n      onDragStart: this._handleScrubberDragUpdate,\n      onMouseEnter: this._handleScrubberEnterLeave,\n      onMouseLeave: this._handleScrubberEnterLeave,\n      tag: dragTypes.SHIFT_START,\n    });\n\n    this._draggerEnd = new DraggableManager({\n      getBounds: this._getDraggingBounds,\n      onDragEnd: this._handleScrubberDragEnd,\n      onDragMove: this._handleScrubberDragUpdate,\n      onDragStart: this._handleScrubberDragUpdate,\n      onMouseEnter: this._handleScrubberEnterLeave,\n      onMouseLeave: this._handleScrubberEnterLeave,\n      tag: dragTypes.SHIFT_END,\n    });\n\n    this._root = undefined;\n    this.state = {\n      preventCursorLine: false,\n    };\n  }\n\n  componentWillUnmount() {\n    this._draggerReframe.dispose();\n    this._draggerEnd.dispose();\n    this._draggerStart.dispose();\n  }\n\n  _setRoot = (elm: SVGElement | TNil) => {\n    this._root = elm;\n  };\n\n  _getDraggingBounds = (tag: string | TNil): DraggableBounds => {\n    if (!this._root) {\n      throw new Error('invalid state');\n    }\n    const { left: clientXLeft, width } = this._root.getBoundingClientRect();\n    const [viewStart, viewEnd] = this.props.viewRange.time.current;\n    let maxValue = 1;\n    let minValue = 0;\n    if (tag === dragTypes.SHIFT_START) {\n      maxValue = viewEnd;\n    } else if (tag === dragTypes.SHIFT_END) {\n      minValue = viewStart;\n    }\n    return { clientXLeft, maxValue, minValue, width };\n  };\n\n  _handleReframeMouseMove = ({ value }: DraggingUpdate) => {\n    this.props.updateNextViewRangeTime({ cursor: value });\n  };\n\n  _handleReframeMouseLeave = () => {\n    this.props.updateNextViewRangeTime({ cursor: null });\n  };\n\n  _handleReframeDragUpdate = ({ value }: DraggingUpdate) => {\n    const shift = value;\n    const { time } = this.props.viewRange;\n    const anchor = time.reframe ? time.reframe.anchor : shift;\n    const update = { reframe: { anchor, shift } };\n    this.props.updateNextViewRangeTime(update);\n  };\n\n  _handleReframeDragEnd = ({ manager, value }: DraggingUpdate) => {\n    const { time } = this.props.viewRange;\n    const anchor = time.reframe ? time.reframe.anchor : value;\n    const [start, end] = value < anchor ? [value, anchor] : [anchor, value];\n    manager.resetBounds();\n    this.props.updateViewRangeTime(start, end, 'minimap');\n  };\n\n  _handleScrubberEnterLeave = ({ type }: DraggingUpdate) => {\n    const preventCursorLine = type === EUpdateTypes.MouseEnter;\n    this.setState({ preventCursorLine });\n  };\n\n  _handleScrubberDragUpdate = ({ event, tag, type, value }: DraggingUpdate) => {\n    if (type === EUpdateTypes.DragStart) {\n      event.stopPropagation();\n    }\n    if (tag === dragTypes.SHIFT_START) {\n      this.props.updateNextViewRangeTime({ shiftStart: value });\n    } else if (tag === dragTypes.SHIFT_END) {\n      this.props.updateNextViewRangeTime({ shiftEnd: value });\n    }\n  };\n\n  _handleScrubberDragEnd = ({ manager, tag, value }: DraggingUpdate) => {\n    const [viewStart, viewEnd] = this.props.viewRange.time.current;\n    let update: [number, number];\n    if (tag === dragTypes.SHIFT_START) {\n      update = [value, viewEnd];\n    } else if (tag === dragTypes.SHIFT_END) {\n      update = [viewStart, value];\n    } else {\n      // to satisfy flow\n      throw new Error('bad state');\n    }\n    manager.resetBounds();\n    this.setState({ preventCursorLine: false });\n    this.props.updateViewRangeTime(update[0], update[1], 'minimap');\n  };\n\n  /**\n   * Resets the zoom to fully zoomed out.\n   */\n  _resetTimeZoomClickHandler = () => {\n    this.props.updateViewRangeTime(0, 1);\n  };\n\n  /**\n   * Renders the difference between where the drag started and the current\n   * position, e.g. the red or blue highlight.\n   *\n   * @returns React.Node[]\n   */\n  _getMarkers(from: number, to: number) {\n    const styles = getStyles(this.props.theme);\n    const layout = getNextViewLayout(from, to);\n    return [\n      <rect\n        key=\"fill\"\n        className={cx(styles.ViewingLayerDraggedShift, styles.ViewingLayerDrag)}\n        x={layout.x}\n        y=\"0\"\n        width={layout.width}\n        height={this.props.height - 2}\n      />,\n      <rect\n        key=\"edge\"\n        className={cx(styles.ViewingLayerDrag)}\n        x={layout.leadingX}\n        y=\"0\"\n        width=\"1\"\n        height={this.props.height - 2}\n      />,\n    ];\n  }\n\n  render() {\n    const { height, viewRange, numTicks, theme } = this.props;\n    const { preventCursorLine } = this.state;\n    const { current, cursor, shiftStart, shiftEnd, reframe } = viewRange.time;\n    const haveNextTimeRange = shiftStart != null || shiftEnd != null || reframe != null;\n    const [viewStart, viewEnd] = current;\n    let leftInactive = 0;\n    if (viewStart) {\n      leftInactive = viewStart * 100;\n    }\n    let rightInactive = 100;\n    if (viewEnd) {\n      rightInactive = 100 - viewEnd * 100;\n    }\n    let cursorPosition: string | undefined;\n    if (!haveNextTimeRange && cursor != null && !preventCursorLine) {\n      cursorPosition = `${cursor * 100}%`;\n    }\n    const styles = getStyles(theme);\n\n    return (\n      <div aria-hidden className={styles.ViewingLayer} style={{ height }}>\n        {(viewStart !== 0 || viewEnd !== 1) && (\n          <UIButton\n            onClick={this._resetTimeZoomClickHandler}\n            className={cx(styles.ViewingLayerResetZoom, styles.ViewingLayerResetZoomHoverClassName)}\n            htmlType=\"button\"\n          >\n            Reset Selection\n          </UIButton>\n        )}\n        <svg\n          height={height}\n          className={styles.ViewingLayerGraph}\n          ref={this._setRoot}\n          onMouseDown={this._draggerReframe.handleMouseDown}\n          onMouseLeave={this._draggerReframe.handleMouseLeave}\n          onMouseMove={this._draggerReframe.handleMouseMove}\n        >\n          {leftInactive > 0 && (\n            <rect x={0} y={0} height=\"100%\" width={`${leftInactive}%`} className={styles.ViewingLayerInactive} />\n          )}\n          {rightInactive > 0 && (\n            <rect\n              x={`${100 - rightInactive}%`}\n              y={0}\n              height=\"100%\"\n              width={`${rightInactive}%`}\n              className={styles.ViewingLayerInactive}\n            />\n          )}\n          <GraphTicks numTicks={numTicks} />\n          {cursorPosition && (\n            <line\n              className={styles.ViewingLayerCursorGuide}\n              x1={cursorPosition}\n              y1=\"0\"\n              x2={cursorPosition}\n              y2={height - 2}\n              strokeWidth=\"1\"\n            />\n          )}\n          {shiftStart != null && this._getMarkers(viewStart, shiftStart)}\n          {shiftEnd != null && this._getMarkers(viewEnd, shiftEnd)}\n          <Scrubber\n            isDragging={shiftStart != null}\n            onMouseDown={this._draggerStart.handleMouseDown}\n            onMouseEnter={this._draggerStart.handleMouseEnter}\n            onMouseLeave={this._draggerStart.handleMouseLeave}\n            position={viewStart || 0}\n          />\n          <Scrubber\n            isDragging={shiftEnd != null}\n            position={viewEnd || 1}\n            onMouseDown={this._draggerEnd.handleMouseDown}\n            onMouseEnter={this._draggerEnd.handleMouseEnter}\n            onMouseLeave={this._draggerEnd.handleMouseLeave}\n          />\n          {reframe != null && this._getMarkers(reframe.anchor, reframe.shift)}\n        </svg>\n        {/* fullOverlay updates the mouse cursor blocks mouse events */}\n        {haveNextTimeRange && <div className={styles.ViewingLayerFullOverlay} />}\n      </div>\n    );\n  }\n}\n\nexport default withTheme(UnthemedViewingLayer);\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as React from 'react';\nimport cx from 'classnames';\n\nimport CanvasSpanGraph from './CanvasSpanGraph';\nimport TickLabels from './TickLabels';\nimport ViewingLayer from './ViewingLayer';\nimport { TUpdateViewRangeTimeFunction, ViewRange, ViewRangeTimeUpdate } from '../..';\nimport { TraceSpan, Trace } from '@grafana/data';\nimport { ubPb2, ubPx2, ubRelative } from '../../uberUtilityStyles';\n\nconst DEFAULT_HEIGHT = 60;\nconst TIMELINE_TICK_INTERVAL = 4;\n\ntype SpanGraphProps = {\n  height?: number;\n  trace: Trace;\n  viewRange: ViewRange;\n  updateViewRangeTime: TUpdateViewRangeTimeFunction;\n  updateNextViewRangeTime: (nextUpdate: ViewRangeTimeUpdate) => void;\n};\n\n/**\n * Store `items` in state so they are not regenerated every render. Otherwise,\n * the canvas graph will re-render itself every time.\n */\ntype SpanGraphState = {\n  items: Array<{\n    valueOffset: number;\n    valueWidth: number;\n    serviceName: string;\n  }>;\n};\n\nfunction getItem(span: TraceSpan) {\n  return {\n    valueOffset: span.relativeStartTime,\n    valueWidth: span.duration,\n    serviceName: span.process.serviceName,\n  };\n}\n\nexport default class SpanGraph extends React.PureComponent<SpanGraphProps, SpanGraphState> {\n  state: SpanGraphState;\n\n  static defaultProps = {\n    height: DEFAULT_HEIGHT,\n  };\n\n  constructor(props: SpanGraphProps) {\n    super(props);\n    const { trace } = props;\n    this.state = {\n      items: trace ? trace.spans.map(getItem) : [],\n    };\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps: SpanGraphProps) {\n    const { trace } = nextProps;\n    if (this.props.trace !== trace) {\n      this.setState({\n        items: trace ? trace.spans.map(getItem) : [],\n      });\n    }\n  }\n\n  render() {\n    const { height, trace, viewRange, updateNextViewRangeTime, updateViewRangeTime } = this.props;\n    if (!trace) {\n      return <div />;\n    }\n    const { items } = this.state;\n    return (\n      <div className={cx(ubPb2, ubPx2)}>\n        <TickLabels numTicks={TIMELINE_TICK_INTERVAL} duration={trace.duration} />\n        <div className={ubRelative}>\n          <CanvasSpanGraph valueWidth={trace.duration} items={items} />\n          <ViewingLayer\n            viewRange={viewRange}\n            numTicks={TIMELINE_TICK_INTERVAL}\n            height={height || DEFAULT_HEIGHT}\n            updateViewRangeTime={updateViewRangeTime}\n            updateNextViewRangeTime={updateNextViewRangeTime}\n          />\n        </div>\n      </div>\n    );\n  }\n}\n","// Copyright (c) 2019 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as React from 'react';\n\nimport { TNil } from '../types/index';\nimport { UIIcon, UIInput } from '../uiElementsContext';\n\ntype Props = {\n  allowClear?: boolean;\n  inputProps: Record<string, any>;\n  location: Location;\n  match: any;\n  trackFindFunction?: (str: string | TNil) => void;\n  value: string | undefined;\n  onChange: (value: string) => void;\n};\n\nexport default class UiFindInput extends React.PureComponent<Props> {\n  static defaultProps: Partial<Props> = {\n    inputProps: {},\n    trackFindFunction: undefined,\n    value: undefined,\n  };\n\n  clearUiFind = () => {\n    this.props.onChange('');\n  };\n\n  render() {\n    const { allowClear, inputProps, value } = this.props;\n\n    const suffix = (\n      <>\n        {allowClear && value && value.length && <UIIcon type=\"close\" onClick={this.clearUiFind} />}\n        {inputProps.suffix}\n      </>\n    );\n\n    return (\n      <UIInput\n        autosize={null}\n        placeholder=\"Find...\"\n        {...inputProps}\n        onChange={(e) => this.props.onChange(e.target.value)}\n        suffix={suffix}\n        value={value}\n      />\n    );\n  }\n}\n","// Copyright (c) 2018 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as React from 'react';\nimport cx from 'classnames';\nimport IoAndroidLocate from 'react-icons/lib/io/android-locate';\nimport { css } from 'emotion';\n\nimport * as markers from './TracePageSearchBar.markers';\nimport UiFindInput from '../common/UiFindInput';\nimport { TNil } from '../types';\n\nimport { UIButton, UIInputGroup } from '../uiElementsContext';\nimport { createStyle } from '../Theme';\nimport { ubFlexAuto, ubJustifyEnd } from '../uberUtilityStyles';\nimport { memo } from 'react';\n\nexport const getStyles = createStyle(() => {\n  return {\n    TracePageSearchBar: css`\n      label: TracePageSearchBar;\n    `,\n    TracePageSearchBarBar: css`\n      label: TracePageSearchBarBar;\n      max-width: 20rem;\n      transition: max-width 0.5s;\n      &:focus-within {\n        max-width: 100%;\n      }\n    `,\n    TracePageSearchBarCount: css`\n      label: TracePageSearchBarCount;\n      opacity: 0.6;\n    `,\n    TracePageSearchBarBtn: css`\n      label: TracePageSearchBarBtn;\n      border-left: none;\n      transition: 0.2s;\n    `,\n    TracePageSearchBarBtnDisabled: css`\n      label: TracePageSearchBarBtnDisabled;\n      opacity: 0.5;\n    `,\n    TracePageSearchBarLocateBtn: css`\n      label: TracePageSearchBarLocateBtn;\n      padding: 1px 8px 4px;\n    `,\n  };\n});\n\ntype TracePageSearchBarProps = {\n  textFilter: string | TNil;\n  prevResult: () => void;\n  nextResult: () => void;\n  clearSearch: () => void;\n  focusUiFindMatches: () => void;\n  resultCount: number;\n  navigable: boolean;\n  searchValue: string;\n  onSearchValueChange: (value: string) => void;\n  hideSearchButtons?: boolean;\n};\n\nexport default memo(function TracePageSearchBar(props: TracePageSearchBarProps) {\n  const {\n    clearSearch,\n    focusUiFindMatches,\n    navigable,\n    nextResult,\n    prevResult,\n    resultCount,\n    textFilter,\n    onSearchValueChange,\n    searchValue,\n    hideSearchButtons,\n  } = props;\n  const styles = getStyles();\n\n  const count = textFilter ? <span className={styles.TracePageSearchBarCount}>{resultCount}</span> : null;\n\n  const btnClass = cx(styles.TracePageSearchBarBtn, { [styles.TracePageSearchBarBtnDisabled]: !textFilter });\n  const uiFindInputInputProps = {\n    'data-test': markers.IN_TRACE_SEARCH,\n    className: cx(styles.TracePageSearchBarBar, ubFlexAuto),\n    name: 'search',\n    suffix: count,\n  };\n\n  return (\n    <div className={styles.TracePageSearchBar}>\n      {/* style inline because compact overwrites the display */}\n      <UIInputGroup className={ubJustifyEnd} compact style={{ display: 'flex' }}>\n        <UiFindInput onChange={onSearchValueChange} value={searchValue} inputProps={uiFindInputInputProps} />\n        {!hideSearchButtons && (\n          <>\n            {navigable && (\n              <>\n                <UIButton\n                  className={cx(btnClass, styles.TracePageSearchBarLocateBtn)}\n                  disabled={!textFilter}\n                  htmlType=\"button\"\n                  onClick={focusUiFindMatches}\n                >\n                  <IoAndroidLocate />\n                </UIButton>\n                <UIButton\n                  className={btnClass}\n                  disabled={!textFilter}\n                  htmlType=\"button\"\n                  icon=\"up\"\n                  onClick={prevResult}\n                />\n                <UIButton\n                  className={btnClass}\n                  disabled={!textFilter}\n                  htmlType=\"button\"\n                  icon=\"down\"\n                  onClick={nextResult}\n                />\n              </>\n            )}\n            <UIButton\n              className={btnClass}\n              disabled={!textFilter}\n              htmlType=\"button\"\n              icon=\"close\"\n              onClick={clearSearch}\n            />\n          </>\n        )}\n      </UIInputGroup>\n    </div>\n  );\n});\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nexport const IN_TRACE_SEARCH = 'in-trace-search';\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as React from 'react';\nimport { css } from 'emotion';\n\nimport { createStyle } from '../Theme';\n\nconst getStyles = createStyle(() => {\n  return {\n    BreakableText: css`\n      label: BreakableText;\n      display: inline-block;\n      white-space: pre;\n    `,\n  };\n});\n\nconst WORD_RX = /\\W*\\w+\\W*/g;\n\ntype Props = {\n  text: string;\n  className?: string;\n  wordRegexp?: RegExp;\n};\n\n// TODO typescript doesn't understand text or null as react nodes\n// https://github.com/Microsoft/TypeScript/issues/21699\nexport default function BreakableText(\n  props: Props\n): any /* React.ReactNode /* React.ReactElement | React.ReactElement[] \\*\\/ */ {\n  const { className, text, wordRegexp = WORD_RX } = props;\n  if (!text) {\n    return typeof text === 'string' ? text : null;\n  }\n  const spans = [];\n  wordRegexp.exec('');\n  // if the given text has no words, set the first match to the entire text\n  let match: RegExpExecArray | string[] | null = wordRegexp.exec(text) || [text];\n  while (match) {\n    spans.push(\n      <span key={`${text}-${spans.length}`} className={className || getStyles().BreakableText}>\n        {match[0]}\n      </span>\n    );\n    match = wordRegexp.exec(text);\n  }\n  return spans;\n}\n\nBreakableText.defaultProps = {\n  wordRegexp: WORD_RX,\n};\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport React from 'react';\nimport cx from 'classnames';\nimport { css, keyframes } from 'emotion';\n\nimport { createStyle } from '../Theme';\nimport { UIIcon } from '../uiElementsContext';\n\nconst getStyles = createStyle(() => {\n  const LoadingIndicatorColorAnim = keyframes`\n    /*\n    rgb(0, 128, 128) == teal\n    rgba(0, 128, 128, 0.3) == #bedfdf\n    */\n    from {\n      color: #bedfdf;\n    }\n    to {\n      color: teal;\n    }\n  `;\n  return {\n    LoadingIndicator: css`\n      label: LoadingIndicator;\n      animation: ${LoadingIndicatorColorAnim} 1s infinite alternate;\n      font-size: 36px;\n      /* outline / stroke the loading indicator */\n      text-shadow: -0.5px 0 rgba(0, 128, 128, 0.6), 0 0.5px rgba(0, 128, 128, 0.6), 0.5px 0 rgba(0, 128, 128, 0.6),\n        0 -0.5px rgba(0, 128, 128, 0.6);\n    `,\n    LoadingIndicatorCentered: css`\n      label: LoadingIndicatorCentered;\n      display: block;\n      margin-left: auto;\n      margin-right: auto;\n    `,\n    LoadingIndicatorSmall: css`\n      label: LoadingIndicatorSmall;\n      font-size: 0.7em;\n    `,\n  };\n});\n\ntype LoadingIndicatorProps = {\n  centered?: boolean;\n  className?: string;\n  small?: boolean;\n};\n\nexport default function LoadingIndicator(props: LoadingIndicatorProps) {\n  const { centered, className, small, ...rest } = props;\n  const styles = getStyles();\n  const cls = cx(styles.LoadingIndicator, {\n    [styles.LoadingIndicatorCentered]: centered,\n    [styles.LoadingIndicatorSmall]: small,\n    className,\n  });\n  return <UIIcon type=\"loading\" className={cls} {...rest} />;\n}\n\nLoadingIndicator.defaultProps = {\n  centered: false,\n  className: undefined,\n  small: false,\n};\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as React from 'react';\nimport { css } from 'emotion';\nimport cx from 'classnames';\n\nimport BreakableText from './BreakableText';\nimport LoadingIndicator from './LoadingIndicator';\nimport { fetchedState, FALLBACK_TRACE_NAME } from '../constants';\n\nimport { FetchedState, TNil } from '../types';\nimport { ApiError } from '../types/api-error';\nimport { createStyle, safeSize, Theme, useTheme } from '../Theme';\n\nconst getStyles = createStyle((theme: Theme) => {\n  return {\n    TraceName: css`\n      label: TraceName;\n      font-size: ${safeSize(theme.components?.TraceName?.fontSize, 'unset')};\n    `,\n    TraceNameError: css`\n      label: TraceNameError;\n      color: #c00;\n    `,\n  };\n});\n\ntype Props = {\n  className?: string;\n  error?: ApiError | TNil;\n  state?: FetchedState | TNil;\n  traceName?: string | TNil;\n};\n\nexport default function TraceName(props: Props) {\n  const { className, error, state, traceName } = props;\n  const isErred = state === fetchedState.ERROR;\n  let title: string | React.ReactNode = traceName || FALLBACK_TRACE_NAME;\n  const styles = getStyles(useTheme());\n  let errorCssClass = '';\n  if (isErred) {\n    errorCssClass = styles.TraceNameError;\n    let titleStr = '';\n    if (error) {\n      titleStr = typeof error === 'string' ? error : error.message || String(error);\n    }\n    if (!titleStr) {\n      titleStr = 'Error: Unknown error';\n    }\n    title = titleStr;\n    title = <BreakableText text={titleStr} />;\n  } else if (state === fetchedState.LOADING) {\n    title = <LoadingIndicator small />;\n  } else {\n    const text = String(traceName || FALLBACK_TRACE_NAME);\n    title = <BreakableText text={text} />;\n  }\n  return <span className={cx(styles.TraceName, errorCssClass, className)}>{title}</span>;\n}\n","//      \nvar hasOwn = function hasOwn(object, key) {\n  return Object.prototype.hasOwnProperty.call(object, key);\n};\n\nfunction deepEquals(equals, deepObjects) {\n  function deep(valueA, valueB) {\n    if (equals(valueA, valueB)) {\n      return true;\n    }\n\n    if (Array.isArray(valueA)) {\n      if (!Array.isArray(valueB) || valueA.length !== valueB.length) {\n        return false;\n      } // Check deep equality of each value in A against the same indexed value in B\n\n\n      if (!valueA.every(function (value, index) {\n        return deep(value, valueB[index]);\n      })) {\n        return false;\n      } // could not find unequal items\n\n\n      return true;\n    }\n\n    if (Array.isArray(valueB)) {\n      return false;\n    }\n\n    if (typeof valueA === \"object\") {\n      if (typeof valueB !== \"object\") {\n        return false;\n      }\n\n      var isANull = valueA === null;\n      var isBNull = valueB === null;\n\n      if (isANull || isBNull) {\n        return isANull === isBNull;\n      }\n\n      var aKeys = Object.keys(valueA);\n      var bKeys = Object.keys(valueB);\n\n      if (aKeys.length !== bKeys.length) {\n        return false;\n      } // Should we compare with shallow equivalence or deep equivalence?\n\n\n      var equalityChecker = deepObjects ? deep : equals; // Check if objects share same keys, and each of those keys are equal\n\n      if (!aKeys.every(function (aKey) {\n        return hasOwn(valueA, aKey) && hasOwn(valueB, aKey) && equalityChecker(valueA[aKey], valueB[aKey]);\n      })) {\n        return false;\n      } // could not find unequal keys or values\n\n\n      return true;\n    }\n\n    return false;\n  }\n\n  return deep;\n}\n\n//      \nvar findIndex = function findIndex(arr, fn) {\n  for (var i = 0; i < arr.length; i++) {\n    if (fn(arr[i])) {\n      return i;\n    }\n  }\n\n  return -1;\n};\n\nfunction lruCache(limit, equals) {\n  var entries = [];\n\n  function get(key) {\n    var cacheIndex = findIndex(entries, function (entry) {\n      return equals(key, entry.key);\n    }); // We found a cached entry\n\n    if (cacheIndex > -1) {\n      var entry = entries[cacheIndex]; // Cached entry not at top of cache, move it to the top\n\n      if (cacheIndex > 0) {\n        entries.splice(cacheIndex, 1);\n        entries.unshift(entry);\n      }\n\n      return entry.value;\n    } // No entry found in cache, return null\n\n\n    return undefined;\n  }\n\n  function put(key, value) {\n    if (!get(key)) {\n      entries.unshift({\n        key: key,\n        value: value\n      });\n\n      if (entries.length > limit) {\n        entries.pop();\n      }\n    }\n  }\n\n  return {\n    get: get,\n    put: put\n  };\n}\n\n//      \nfunction singletonCache(equals) {\n  var entry;\n  return {\n    get: function get(key) {\n      if (entry && equals(key, entry.key)) {\n        return entry.value;\n      }\n    },\n    put: function put(key, value) {\n      entry = {\n        key: key,\n        value: value\n      };\n    }\n  };\n}\n\n//      \n\nfunction createCache(limit, equals) {\n  return limit === 1 ? singletonCache(equals) : lruCache(limit, equals);\n}\n\nfunction createEqualsFn(basicEquals, deepObjects) {\n  // Choose strategy for basic or deep object equals\n  var equals = deepObjects ? deepEquals(basicEquals, deepObjects) : basicEquals;\n  return function (valueA, valueB) {\n    // The arguments are always the argument array-like objects\n    // Different lengths means they are not the same\n    if (valueA.length !== valueB.length) {\n      return false;\n    } // Compare the values\n\n\n    for (var index = 0; index < valueA.length; index += 1) {\n      if (!equals(valueA[index], valueB[index])) {\n        return false;\n      }\n    } // Found no conflicts\n\n\n    return true;\n  };\n}\n\nfunction memoize() {\n  var limit = 1;\n\n  var equals = function equals(valueA, valueB) {\n    return valueA === valueB;\n  };\n\n  var deepObjects = false;\n\n  for (var _len = arguments.length, config = new Array(_len), _key = 0; _key < _len; _key++) {\n    config[_key] = arguments[_key];\n  }\n\n  if (typeof config[0] === \"number\") {\n    limit = config.shift();\n  }\n\n  if (typeof config[0] === \"function\") {\n    equals = config.shift();\n  } else if (typeof config[0] === \"undefined\") {\n    // Support passing undefined equal argument;\n    config.shift();\n  }\n\n  if (typeof config[0] === \"boolean\") {\n    deepObjects = config[0];\n  }\n\n  var cache = createCache(limit, createEqualsFn(equals, deepObjects));\n  return function (fn) {\n    return function () {\n      for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        args[_key2] = arguments[_key2];\n      }\n\n      var value = cache.get(args);\n\n      if (value === undefined) {\n        value = fn.apply(fn, args);\n        cache.put(args, value);\n      }\n\n      return value;\n    };\n  };\n}\n\nexport default memoize;\n","// Copyright (c) 2017 The Jaeger Authors.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { TraceSpan } from '@grafana/data';\n\n/**\n * Searches the span.references to find 'CHILD_OF' reference type or returns null.\n * @param  {TraceSpan} span The span whose parent is to be returned.\n * @returns {TraceSpan|null} The parent span if there is one, null otherwise.\n */\nexport function getParent(span: TraceSpan) {\n  const parentRef = span.references ? span.references.find((ref) => ref.refType === 'CHILD_OF') : null;\n  return parentRef ? parentRef.span : null;\n}\n","// Copyright (c) 2017 The Jaeger Authors.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport _uniq from 'lodash/uniq';\nimport memoize from 'lru-memoize';\nimport { getConfigValue } from '../utils/config/get-config';\nimport { getParent } from './span';\nimport { TNil } from '../types';\nimport { TraceSpan, TraceLink, TraceKeyValuePair, Trace } from '@grafana/data';\n\nconst parameterRegExp = /#\\{([^{}]*)\\}/g;\n\ntype ProcessedTemplate = {\n  parameters: string[];\n  template: (template: { [key: string]: any }) => string;\n};\n\ntype ProcessedLinkPattern = {\n  object: any;\n  type: (link: string) => boolean;\n  key: (link: string) => boolean;\n  value: (value: any) => boolean;\n  url: ProcessedTemplate;\n  text: ProcessedTemplate;\n  parameters: string[];\n};\n\ntype TLinksRV = Array<{ url: string; text: string }>;\n\nfunction getParamNames(str: string) {\n  const names = new Set<string>();\n  str.replace(parameterRegExp, (match, name) => {\n    names.add(name);\n    return match;\n  });\n  return Array.from(names);\n}\n\nfunction stringSupplant(str: string, encodeFn: (unencoded: any) => string, map: Record<string, any>) {\n  return str.replace(parameterRegExp, (_, name) => {\n    const value = map[name];\n    return value == null ? '' : encodeFn(value);\n  });\n}\n\nexport function processTemplate(template: any, encodeFn: (unencoded: any) => string): ProcessedTemplate {\n  if (typeof template !== 'string') {\n    /*\n\n    // kept on ice until #123 is implemented:\n    if (template && Array.isArray(template.parameters) && (typeof template.template === 'function')) {\n      return template;\n    }\n\n    */\n    throw new Error('Invalid template');\n  }\n  return {\n    parameters: getParamNames(template),\n    template: stringSupplant.bind(null, template, encodeFn),\n  };\n}\n\nexport function createTestFunction(entry: any) {\n  if (typeof entry === 'string') {\n    return (arg: any) => arg === entry;\n  }\n  if (Array.isArray(entry)) {\n    return (arg: any) => entry.indexOf(arg) > -1;\n  }\n  /*\n\n  // kept on ice until #123 is implemented:\n  if (entry instanceof RegExp) {\n    return (arg: any) => entry.test(arg);\n  }\n  if (typeof entry === 'function') {\n    return entry;\n  }\n\n  */\n  if (entry == null) {\n    return () => true;\n  }\n  throw new Error(`Invalid value: ${entry}`);\n}\n\nconst identity = (a: any): typeof a => a;\n\nexport function processLinkPattern(pattern: any): ProcessedLinkPattern | TNil {\n  try {\n    const url = processTemplate(pattern.url, encodeURIComponent);\n    const text = processTemplate(pattern.text, identity);\n    return {\n      object: pattern,\n      type: createTestFunction(pattern.type),\n      key: createTestFunction(pattern.key),\n      value: createTestFunction(pattern.value),\n      url,\n      text,\n      parameters: _uniq(url.parameters.concat(text.parameters)),\n    };\n  } catch (error) {\n    // eslint-disable-next-line no-console\n    console.error(`Ignoring invalid link pattern: ${error}`, pattern);\n    return null;\n  }\n}\n\nexport function getParameterInArray(name: string, array: TraceKeyValuePair[]) {\n  if (array) {\n    return array.find((entry) => entry.key === name);\n  }\n  return undefined;\n}\n\nexport function getParameterInAncestor(name: string, span: TraceSpan) {\n  let currentSpan: TraceSpan | TNil = span;\n  while (currentSpan) {\n    const result = getParameterInArray(name, currentSpan.tags) || getParameterInArray(name, currentSpan.process.tags);\n    if (result) {\n      return result;\n    }\n    currentSpan = getParent(currentSpan);\n  }\n  return undefined;\n}\n\nfunction callTemplate(template: ProcessedTemplate, data: any) {\n  return template.template(data);\n}\n\nexport function computeTraceLink(linkPatterns: ProcessedLinkPattern[], trace: Trace) {\n  const result: TLinksRV = [];\n  const validKeys = (Object.keys(trace) as Array<keyof Trace>).filter(\n    (key) => typeof trace[key] === 'string' || trace[key] === 'number'\n  );\n\n  linkPatterns\n    .filter((pattern) => pattern.type('traces'))\n    .forEach((pattern) => {\n      const parameterValues: Record<string, any> = {};\n      const allParameters = pattern.parameters.every((parameter) => {\n        const key = parameter as keyof Trace;\n        if (validKeys.includes(key)) {\n          // At this point is safe to access to trace object using parameter variable because\n          // we validated parameter against validKeys, this implies that parameter a keyof Trace.\n          parameterValues[parameter] = trace[key];\n          return true;\n        }\n        return false;\n      });\n      if (allParameters) {\n        result.push({\n          url: callTemplate(pattern.url, parameterValues),\n          text: callTemplate(pattern.text, parameterValues),\n        });\n      }\n    });\n\n  return result;\n}\n\nexport function computeLinks(\n  linkPatterns: ProcessedLinkPattern[],\n  span: TraceSpan,\n  items: TraceKeyValuePair[],\n  itemIndex: number\n) {\n  const item = items[itemIndex];\n  let type = 'logs';\n  const processTags = span.process.tags === items;\n  if (processTags) {\n    type = 'process';\n  }\n  const spanTags = span.tags === items;\n  if (spanTags) {\n    type = 'tags';\n  }\n  const result: Array<{ url: string; text: string }> = [];\n  linkPatterns.forEach((pattern) => {\n    if (pattern.type(type) && pattern.key(item.key) && pattern.value(item.value)) {\n      const parameterValues: Record<string, any> = {};\n      const allParameters = pattern.parameters.every((parameter) => {\n        let entry = getParameterInArray(parameter, items);\n        if (!entry && !processTags) {\n          // do not look in ancestors for process tags because the same object may appear in different places in the hierarchy\n          // and the cache in getLinks uses that object as a key\n          entry = getParameterInAncestor(parameter, span);\n        }\n        if (entry) {\n          parameterValues[parameter] = entry.value;\n          return true;\n        }\n        // eslint-disable-next-line no-console\n        console.warn(\n          `Skipping link pattern, missing parameter ${parameter} for key ${item.key} in ${type}.`,\n          pattern.object\n        );\n        return false;\n      });\n      if (allParameters) {\n        result.push({\n          url: callTemplate(pattern.url, parameterValues),\n          text: callTemplate(pattern.text, parameterValues),\n        });\n      }\n    }\n  });\n  return result;\n}\n\nexport function createGetLinks(linkPatterns: ProcessedLinkPattern[], cache: WeakMap<TraceKeyValuePair, TraceLink[]>) {\n  return (span: TraceSpan, items: TraceKeyValuePair[], itemIndex: number) => {\n    if (linkPatterns.length === 0) {\n      return [];\n    }\n    const item = items[itemIndex];\n    let result = cache.get(item);\n    if (!result) {\n      result = computeLinks(linkPatterns, span, items, itemIndex);\n      cache.set(item, result);\n    }\n    return result;\n  };\n}\n\nconst processedLinks: ProcessedLinkPattern[] = (getConfigValue('linkPatterns') || [])\n  .map(processLinkPattern)\n  .filter(Boolean);\n\nexport const getTraceLinks: (trace: Trace | undefined) => TLinksRV = memoize(10)((trace: Trace | undefined) => {\n  const result: TLinksRV = [];\n  if (!trace) {\n    return result;\n  }\n  return computeTraceLink(processedLinks, trace);\n});\n\nexport default createGetLinks(processedLinks, new WeakMap());\n","// Copyright (c) 2019 The Jaeger Authors.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as React from 'react';\nimport { UIDropdown, UIMenu, UIMenuItem } from '..';\nimport NewWindowIcon from './NewWindowIcon';\n\ntype Link = {\n  text: string;\n  url: string;\n};\n\ntype ExternalLinksProps = {\n  links: Link[];\n  className?: string;\n};\n\nconst LinkValue = (props: { href: string; title?: string; children?: React.ReactNode; className?: string }) => (\n  <a href={props.href} title={props.title} target=\"_blank\" rel=\"noopener noreferrer\" className={props.className}>\n    {props.children} <NewWindowIcon />\n  </a>\n);\n\n// export for testing\nexport const linkValueList = (links: Link[]) => (\n  <UIMenu>\n    {links.map(({ text, url }, index) => (\n      // `index` is necessary in the key because url can repeat\n      <UIMenuItem key={`${url}-${index}`}>\n        <LinkValue href={url}>{text}</LinkValue>\n      </UIMenuItem>\n    ))}\n  </UIMenu>\n);\n\nexport default function ExternalLinks(props: ExternalLinksProps) {\n  const { links } = props;\n  if (links.length === 1) {\n    return <LinkValue href={links[0].url} title={links[0].text} className={props.className} />;\n  }\n  return (\n    <UIDropdown overlay={linkValueList(links)} placement=\"bottomRight\" trigger={['click']}>\n      <a className={props.className}>\n        <NewWindowIcon isLarge />\n      </a>\n    </UIDropdown>\n  );\n}\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport * as React from 'react';\nimport _get from 'lodash/get';\nimport _maxBy from 'lodash/maxBy';\nimport _values from 'lodash/values';\nimport MdKeyboardArrowRight from 'react-icons/lib/md/keyboard-arrow-right';\nimport { css } from 'emotion';\nimport cx from 'classnames';\n\nimport SpanGraph from './SpanGraph';\nimport TracePageSearchBar from './TracePageSearchBar';\nimport { autoColor, Theme, TUpdateViewRangeTimeFunction, useTheme, ViewRange, ViewRangeTimeUpdate } from '..';\nimport LabeledList from '../common/LabeledList';\nimport TraceName from '../common/TraceName';\nimport { getTraceName } from '../model/trace-viewer';\nimport { TNil } from '../types';\nimport { Trace } from '@grafana/data';\nimport { formatDatetime, formatDuration } from '../utils/date';\nimport { getTraceLinks } from '../model/link-patterns';\n\nimport ExternalLinks from '../common/ExternalLinks';\nimport { createStyle } from '../Theme';\nimport { uTxMuted } from '../uberUtilityStyles';\nimport { useMemo } from 'react';\n\nconst getStyles = createStyle((theme: Theme) => {\n  const TracePageHeaderOverviewItemValueDetail = css`\n    label: TracePageHeaderOverviewItemValueDetail;\n    color: #aaa;\n  `;\n  return {\n    TracePageHeader: css`\n      label: TracePageHeader;\n      & > :first-child {\n        border-bottom: 1px solid ${autoColor(theme, '#e8e8e8')};\n      }\n      & > :nth-child(2) {\n        background-color: ${autoColor(theme, '#eee')};\n        border-bottom: 1px solid ${autoColor(theme, '#e4e4e4')};\n      }\n      & > :last-child {\n        border-bottom: 1px solid ${autoColor(theme, '#ccc')};\n      }\n    `,\n    TracePageHeaderTitleRow: css`\n      label: TracePageHeaderTitleRow;\n      align-items: center;\n      display: flex;\n    `,\n    TracePageHeaderBack: css`\n      label: TracePageHeaderBack;\n      align-items: center;\n      align-self: stretch;\n      background-color: #fafafa;\n      border-bottom: 1px solid #ddd;\n      border-right: 1px solid #ddd;\n      color: inherit;\n      display: flex;\n      font-size: 1.4rem;\n      padding: 0 1rem;\n      margin-bottom: -1px;\n      &:hover {\n        background-color: #f0f0f0;\n        border-color: #ccc;\n      }\n    `,\n    TracePageHeaderTitleLink: css`\n      label: TracePageHeaderTitleLink;\n      align-items: center;\n      display: flex;\n      flex: 1;\n\n      &:hover * {\n        text-decoration: underline;\n      }\n      &:hover > *,\n      &:hover small {\n        text-decoration: none;\n      }\n    `,\n    TracePageHeaderDetailToggle: css`\n      label: TracePageHeaderDetailToggle;\n      font-size: 2.5rem;\n      transition: transform 0.07s ease-out;\n    `,\n    TracePageHeaderDetailToggleExpanded: css`\n      label: TracePageHeaderDetailToggleExpanded;\n      transform: rotate(90deg);\n    `,\n    TracePageHeaderTitle: css`\n      label: TracePageHeaderTitle;\n      color: inherit;\n      flex: 1;\n      font-size: 1.7em;\n      line-height: 1em;\n      margin: 0 0 0 0.5em;\n      padding: 0.5em 0;\n    `,\n    TracePageHeaderTitleCollapsible: css`\n      label: TracePageHeaderTitleCollapsible;\n      margin-left: 0;\n    `,\n    TracePageHeaderOverviewItems: css`\n      label: TracePageHeaderOverviewItems;\n      border-bottom: 1px solid #e4e4e4;\n      padding: 0.25rem 0.5rem !important;\n    `,\n    TracePageHeaderOverviewItemValueDetail,\n    TracePageHeaderOverviewItemValue: css`\n      label: TracePageHeaderOverviewItemValue;\n      &:hover > .${TracePageHeaderOverviewItemValueDetail} {\n        color: unset;\n      }\n    `,\n    TracePageHeaderArchiveIcon: css`\n      label: TracePageHeaderArchiveIcon;\n      font-size: 1.78em;\n      margin-right: 0.15em;\n    `,\n    TracePageHeaderTraceId: css`\n      label: TracePageHeaderTraceId;\n      white-space: nowrap;\n    `,\n  };\n});\n\ntype TracePageHeaderEmbedProps = {\n  canCollapse: boolean;\n  clearSearch: () => void;\n  focusUiFindMatches: () => void;\n  hideMap: boolean;\n  hideSummary: boolean;\n  nextResult: () => void;\n  onSlimViewClicked: () => void;\n  onTraceGraphViewClicked: () => void;\n  prevResult: () => void;\n  resultCount: number;\n  slimView: boolean;\n  textFilter: string | TNil;\n  trace: Trace;\n  traceGraphView: boolean;\n  updateNextViewRangeTime: (update: ViewRangeTimeUpdate) => void;\n  updateViewRangeTime: TUpdateViewRangeTimeFunction;\n  viewRange: ViewRange;\n  searchValue: string;\n  onSearchValueChange: (value: string) => void;\n  hideSearchButtons?: boolean;\n};\n\nexport const HEADER_ITEMS = [\n  {\n    key: 'timestamp',\n    label: 'Trace Start',\n    renderer(trace: Trace, styles?: ReturnType<typeof getStyles>) {\n      const dateStr = formatDatetime(trace.startTime);\n      const match = dateStr.match(/^(.+)(:\\d\\d\\.\\d+)$/);\n      return match ? (\n        <span className={styles?.TracePageHeaderOverviewItemValue}>\n          {match[1]}\n          <span className={styles?.TracePageHeaderOverviewItemValueDetail}>{match[2]}</span>\n        </span>\n      ) : (\n        dateStr\n      );\n    },\n  },\n  {\n    key: 'duration',\n    label: 'Duration',\n    renderer: (trace: Trace) => formatDuration(trace.duration),\n  },\n  {\n    key: 'service-count',\n    label: 'Services',\n    renderer: (trace: Trace) => new Set(_values(trace.processes).map((p) => p.serviceName)).size,\n  },\n  {\n    key: 'depth',\n    label: 'Depth',\n    renderer: (trace: Trace) => _get(_maxBy(trace.spans, 'depth'), 'depth', 0) + 1,\n  },\n  {\n    key: 'span-count',\n    label: 'Total Spans',\n    renderer: (trace: Trace) => trace.spans.length,\n  },\n];\n\nexport default function TracePageHeader(props: TracePageHeaderEmbedProps) {\n  const {\n    canCollapse,\n    clearSearch,\n    focusUiFindMatches,\n    hideMap,\n    hideSummary,\n    nextResult,\n    onSlimViewClicked,\n    prevResult,\n    resultCount,\n    slimView,\n    textFilter,\n    trace,\n    traceGraphView,\n    updateNextViewRangeTime,\n    updateViewRangeTime,\n    viewRange,\n    searchValue,\n    onSearchValueChange,\n    hideSearchButtons,\n  } = props;\n\n  const styles = getStyles(useTheme());\n  const links = useMemo(() => {\n    if (!trace) {\n      return [];\n    }\n    return getTraceLinks(trace);\n  }, [trace]);\n\n  if (!trace) {\n    return null;\n  }\n\n  const summaryItems =\n    !hideSummary &&\n    !slimView &&\n    HEADER_ITEMS.map((item) => {\n      const { renderer, ...rest } = item;\n      return { ...rest, value: renderer(trace, styles) };\n    });\n\n  const title = (\n    <h1 className={cx(styles.TracePageHeaderTitle, canCollapse && styles.TracePageHeaderTitleCollapsible)}>\n      <TraceName traceName={getTraceName(trace.spans)} />{' '}\n      <small className={cx(styles.TracePageHeaderTraceId, uTxMuted)}>{trace.traceID}</small>\n    </h1>\n  );\n\n  return (\n    <header className={styles.TracePageHeader}>\n      <div className={styles.TracePageHeaderTitleRow}>\n        {links && links.length > 0 && <ExternalLinks links={links} className={styles.TracePageHeaderBack} />}\n        {canCollapse ? (\n          <a\n            className={styles.TracePageHeaderTitleLink}\n            onClick={onSlimViewClicked}\n            role=\"switch\"\n            aria-checked={!slimView}\n          >\n            <MdKeyboardArrowRight\n              className={cx(\n                styles.TracePageHeaderDetailToggle,\n                !slimView && styles.TracePageHeaderDetailToggleExpanded\n              )}\n            />\n            {title}\n          </a>\n        ) : (\n          title\n        )}\n        <TracePageSearchBar\n          clearSearch={clearSearch}\n          focusUiFindMatches={focusUiFindMatches}\n          nextResult={nextResult}\n          prevResult={prevResult}\n          resultCount={resultCount}\n          textFilter={textFilter}\n          navigable={!traceGraphView}\n          searchValue={searchValue}\n          onSearchValueChange={onSearchValueChange}\n          hideSearchButtons={hideSearchButtons}\n        />\n      </div>\n      {summaryItems && <LabeledList className={styles.TracePageHeaderOverviewItems} items={summaryItems} />}\n      {!hideMap && !slimView && (\n        <SpanGraph\n          trace={trace}\n          viewRange={viewRange}\n          updateNextViewRangeTime={updateNextViewRangeTime}\n          updateViewRangeTime={updateViewRangeTime}\n        />\n      )}\n    </header>\n  );\n}\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { TraceSpan } from '@grafana/data';\n\nexport function getTraceName(spans: TraceSpan[]): string {\n  const span = spans.filter((sp) => !sp.references || !sp.references.length)[0];\n  return span ? `${span.process.serviceName}: ${span.operationName}` : '';\n}\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nexport { default } from './TracePageHeader';\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactIconBase = require('react-icon-base');\n\nvar _reactIconBase2 = _interopRequireDefault(_reactIconBase);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar IoIosArrowRight = function IoIosArrowRight(props) {\n    return _react2.default.createElement(\n        _reactIconBase2.default,\n        _extends({ viewBox: '0 0 40 40' }, props),\n        _react2.default.createElement(\n            'g',\n            null,\n            _react2.default.createElement('path', { d: 'm12.5 9l1.6-1.5 13.4 12.5-13.4 12.5-1.6-1.5 11.7-11z' })\n        )\n    );\n};\n\nexports.default = IoIosArrowRight;\nmodule.exports = exports['default'];","/* eslint-env node, browser */\n'use strict'\n/**\n * mapping of special keycodes to their corresponding keys\n *\n * everything in this dictionary cannot use keypress events\n * so it has to be here to map to the correct keycodes for\n * keyup/keydown events\n *\n * @type {Object}\n */\nmodule.exports = {\n  8: 'backspace',\n  9: 'tab',\n  13: 'enter',\n  16: 'shift',\n  17: 'ctrl',\n  18: 'alt',\n  20: 'capslock',\n  27: 'esc',\n  32: 'space',\n  33: 'pageup',\n  34: 'pagedown',\n  35: 'end',\n  36: 'home',\n  37: 'left',\n  38: 'up',\n  39: 'right',\n  40: 'down',\n  45: 'ins',\n  46: 'del',\n  91: 'meta',\n  93: 'meta',\n  173: 'minus',\n  187: 'plus',\n  189: 'minus',\n  224: 'meta'\n}\n\n/**\n * loop through the f keys, f1 to f19 and add them to the map\n * programatically\n */\nfor (var i = 1; i < 20; ++i) {\n  module.exports[111 + i] = 'f' + i\n}\n\n/**\n * loop through to map numbers on the numeric keypad\n */\nfor (i = 0; i <= 9; ++i) {\n  module.exports[i + 96] = i\n}\n","import React from 'react';\nimport { css, cx } from 'emotion';\nimport { GrafanaTheme } from '@grafana/data';\nimport { stylesFactory, Button, HorizontalGroup, useTheme } from '@grafana/ui';\n\ntype Props = {\n  addQueryRowButtonDisabled?: boolean;\n  addQueryRowButtonHidden?: boolean;\n  richHistoryButtonActive?: boolean;\n  queryInspectorButtonActive?: boolean;\n\n  onClickAddQueryRowButton: () => void;\n  onClickRichHistoryButton: () => void;\n  onClickQueryInspectorButton: () => void;\n};\n\nconst getStyles = stylesFactory((theme: GrafanaTheme) => {\n  return {\n    containerMargin: css`\n      margin-top: ${theme.spacing.md};\n    `,\n  };\n});\nexport function SecondaryActions(props: Props) {\n  const theme = useTheme();\n  const styles = getStyles(theme);\n  return (\n    <div className={styles.containerMargin}>\n      <HorizontalGroup>\n        {!props.addQueryRowButtonHidden && (\n          <Button\n            variant=\"secondary\"\n            aria-label=\"Add row button\"\n            onClick={props.onClickAddQueryRowButton}\n            disabled={props.addQueryRowButtonDisabled}\n            icon=\"plus\"\n          >\n            Add query\n          </Button>\n        )}\n        <Button\n          variant=\"secondary\"\n          aria-label=\"Rich history button\"\n          className={cx({ ['explore-active-button']: props.richHistoryButtonActive })}\n          onClick={props.onClickRichHistoryButton}\n          icon=\"history\"\n        >\n          Query history\n        </Button>\n        <Button\n          variant=\"secondary\"\n          aria-label=\"Query inspector button\"\n          className={cx({ ['explore-active-button']: props.queryInspectorButtonActive })}\n          onClick={props.onClickQueryInspectorButton}\n          icon=\"info-circle\"\n        >\n          Query inspector\n        </Button>\n      </HorizontalGroup>\n    </div>\n  );\n}\n","var root = require('./_root'),\n    toInteger = require('./toInteger'),\n    toNumber = require('./toNumber'),\n    toString = require('./toString');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeIsFinite = root.isFinite,\n    nativeMin = Math.min;\n\n/**\n * Creates a function like `_.round`.\n *\n * @private\n * @param {string} methodName The name of the `Math` method to use when rounding.\n * @returns {Function} Returns the new round function.\n */\nfunction createRound(methodName) {\n  var func = Math[methodName];\n  return function(number, precision) {\n    number = toNumber(number);\n    precision = precision == null ? 0 : nativeMin(toInteger(precision), 292);\n    if (precision && nativeIsFinite(number)) {\n      // Shift with exponential notation to avoid floating-point issues.\n      // See [MDN](https://mdn.io/round#Examples) for more details.\n      var pair = (toString(number) + 'e').split('e'),\n          value = func(pair[0] + 'e' + (+pair[1] + precision));\n\n      pair = (toString(value) + 'e').split('e');\n      return +(pair[0] + 'e' + (+pair[1] - precision));\n    }\n    return func(number);\n  };\n}\n\nmodule.exports = createRound;\n","/* eslint-env node, browser */\n'use strict'\n\n/**\n * binds a key sequence to an event\n *\n * @param {string} combo - combo specified in bind call\n * @param {Array} keys\n * @param {Function} callback\n * @param {string=} action\n * @returns void\n */\nmodule.exports = function (combo, keys, callback, action) {\n  var self = this\n\n  // start off by adding a sequence level record for this combination\n  // and setting the level to 0\n  self.sequenceLevels[combo] = 0\n\n  /**\n   * callback to increase the sequence level for this sequence and reset\n   * all other sequences that were active\n   *\n   * @param {string} nextAction\n   * @returns {Function}\n   */\n  function increaseSequence (nextAction) {\n    return function () {\n      self.nextExpectedAction = nextAction\n      ++self.sequenceLevels[combo]\n      self.resetSequenceTimer()\n    }\n  }\n\n  /**\n   * wraps the specified callback inside of another function in order\n   * to reset all sequence counters as soon as this sequence is done\n   *\n   * @param {Event} e\n   * @returns void\n   */\n  function callbackAndReset (e) {\n    var characterFromEvent\n    self.fireCallback(callback, e, combo)\n\n    // we should ignore the next key up if the action is key down\n    // or keypress.  this is so if you finish a sequence and\n    // release the key the final key will not trigger a keyup\n    if (action !== 'keyup') {\n      characterFromEvent = require('../../helpers/characterFromEvent')\n      self.ignoreNextKeyup = characterFromEvent(e)\n    }\n\n    // weird race condition if a sequence ends with the key\n    // another sequence begins with\n    setTimeout(\n      function () {\n        self.resetSequences()\n      },\n      10\n    )\n  }\n\n  // loop through keys one at a time and bind the appropriate callback\n  // function.  for any key leading up to the final one it should\n  // increase the sequence. after the final, it should reset all sequences\n  //\n  // if an action is specified in the original bind call then that will\n  // be used throughout.  otherwise we will pass the action that the\n  // next key in the sequence should match.  this allows a sequence\n  // to mix and match keypress and keydown events depending on which\n  // ones are better suited to the key provided\n  for (var j = 0; j < keys.length; ++j) {\n    var isFinal = j + 1 === keys.length\n    var wrappedCallback = isFinal ? callbackAndReset : increaseSequence(action || self.getKeyInfo(keys[j + 1]).action)\n    self.bindSingle(keys[j], wrappedCallback, action, combo, j)\n  }\n}\n","import React from 'react';\nimport { Icon } from '@grafana/ui';\n\nfunction formatLatency(value: number) {\n  return `${(value / 1000).toFixed(1)}s`;\n}\n\nexport type Props = {\n  canToggleEditorModes: boolean;\n  isDisabled?: boolean;\n  isNotStarted: boolean;\n  latency: number;\n  onClickToggleEditorMode: () => void;\n  onClickToggleDisabled: () => void;\n  onClickRemoveButton: () => void;\n};\n\nexport function QueryRowActions(props: Props) {\n  const {\n    canToggleEditorModes,\n    onClickToggleEditorMode,\n    onClickToggleDisabled,\n    onClickRemoveButton,\n    isDisabled,\n    isNotStarted,\n    latency,\n  } = props;\n\n  return (\n    <div className=\"gf-form-inline flex-shrink-0\">\n      {canToggleEditorModes && (\n        <div className=\"gf-form\">\n          <button\n            aria-label=\"Edit mode button\"\n            className=\"gf-form-label gf-form-label--btn\"\n            onClick={onClickToggleEditorMode}\n          >\n            <Icon name=\"pen\" />\n          </button>\n        </div>\n      )}\n      <div className=\"gf-form\">\n        <button disabled className=\"gf-form-label\" title=\"Query row latency\">\n          {formatLatency(latency)}\n        </button>\n      </div>\n      <div className=\"gf-form\">\n        <button\n          disabled={isNotStarted}\n          className=\"gf-form-label gf-form-label--btn\"\n          onClick={onClickToggleDisabled}\n          title={isDisabled ? 'Enable query' : 'Disable query'}\n        >\n          <Icon name={isDisabled ? 'eye-slash' : 'eye'} />\n        </button>\n      </div>\n      <div className=\"gf-form\">\n        <button className=\"gf-form-label gf-form-label--btn\" onClick={onClickRemoveButton} title=\"Remove query\">\n          <Icon name=\"minus\" />\n        </button>\n      </div>\n    </div>\n  );\n}\n","import React from 'react';\nimport classNames from 'classnames';\nimport { Tooltip, Icon } from '@grafana/ui';\n\ninterface TimeSyncButtonProps {\n  isSynced: boolean;\n  onClick: () => void;\n}\n\nexport function TimeSyncButton(props: TimeSyncButtonProps) {\n  const { onClick, isSynced } = props;\n\n  const syncTimesTooltip = () => {\n    const { isSynced } = props;\n    const tooltip = isSynced ? 'Unsync all views' : 'Sync all views to this time range';\n    return <>{tooltip}</>;\n  };\n\n  return (\n    <Tooltip content={syncTimesTooltip} placement=\"bottom\">\n      <button\n        className={classNames('btn navbar-button navbar-button--attached', {\n          [`explore-active-button`]: isSynced,\n        })}\n        aria-label={isSynced ? 'Synced times' : 'Unsynced times'}\n        onClick={() => onClick()}\n      >\n        <Icon name=\"link\" className={isSynced ? 'icon-brand-gradient' : ''} size=\"lg\" />\n      </button>\n    </Tooltip>\n  );\n}\n","// Libaries\nimport React, { Component } from 'react';\n\n// Types\nimport { ExploreId } from 'app/types';\nimport { TimeRange, TimeZone, RawTimeRange, dateTimeForTimeZone } from '@grafana/data';\n\n// State\n\n// Components\nimport { TimeSyncButton } from './TimeSyncButton';\nimport { TimePickerWithHistory } from 'app/core/components/TimePicker/TimePickerWithHistory';\n\n// Utils & Services\nimport { getShiftedTimeRange, getZoomedTimeRange } from 'app/core/utils/timePicker';\n\nexport interface Props {\n  exploreId: ExploreId;\n  hideText?: boolean;\n  range: TimeRange;\n  timeZone: TimeZone;\n  splitted: boolean;\n  syncedTimes: boolean;\n  onChangeTimeSync: () => void;\n  onChangeTime: (range: RawTimeRange) => void;\n  onChangeTimeZone: (timeZone: TimeZone) => void;\n}\n\nexport class ExploreTimeControls extends Component<Props> {\n  onMoveTimePicker = (direction: number) => {\n    const { range, onChangeTime, timeZone } = this.props;\n    const { from, to } = getShiftedTimeRange(direction, range);\n    const nextTimeRange = {\n      from: dateTimeForTimeZone(timeZone, from),\n      to: dateTimeForTimeZone(timeZone, to),\n    };\n\n    onChangeTime(nextTimeRange);\n  };\n\n  onMoveForward = () => this.onMoveTimePicker(1);\n  onMoveBack = () => this.onMoveTimePicker(-1);\n\n  onChangeTimePicker = (timeRange: TimeRange) => {\n    this.props.onChangeTime(timeRange.raw);\n  };\n\n  onZoom = () => {\n    const { range, onChangeTime, timeZone } = this.props;\n    const { from, to } = getZoomedTimeRange(range, 2);\n    const nextTimeRange = {\n      from: dateTimeForTimeZone(timeZone, from),\n      to: dateTimeForTimeZone(timeZone, to),\n    };\n\n    onChangeTime(nextTimeRange);\n  };\n\n  render() {\n    const { range, timeZone, splitted, syncedTimes, onChangeTimeSync, hideText, onChangeTimeZone } = this.props;\n    const timeSyncButton = splitted ? <TimeSyncButton onClick={onChangeTimeSync} isSynced={syncedTimes} /> : undefined;\n    const timePickerCommonProps = {\n      value: range,\n      timeZone,\n      onMoveBackward: this.onMoveBack,\n      onMoveForward: this.onMoveForward,\n      onZoom: this.onZoom,\n      hideText,\n    };\n\n    return (\n      <TimePickerWithHistory\n        {...timePickerCommonProps}\n        timeSyncButton={timeSyncButton}\n        isSynced={syncedTimes}\n        onChange={this.onChangeTimePicker}\n        onChangeTimeZone={onChangeTimeZone}\n      />\n    );\n  }\n}\n","/* eslint-env node, browser */\n'use strict'\n\n/**\n * checks if two arrays are equal\n *\n * @param {Array} modifiers1\n * @param {Array} modifiers2\n * @returns {boolean}\n */\nmodule.exports = function (modifiers1, modifiers2) {\n  return modifiers1.sort().join(',') === modifiers2.sort().join(',')\n}\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport moment from 'moment-timezone';\nimport _round from 'lodash/round';\n\nimport { toFloatPrecision } from './number';\n\nconst TODAY = 'Today';\nconst YESTERDAY = 'Yesterday';\n\nexport const STANDARD_DATE_FORMAT = 'YYYY-MM-DD';\nexport const STANDARD_TIME_FORMAT = 'HH:mm';\nexport const STANDARD_DATETIME_FORMAT = 'MMMM D YYYY, HH:mm:ss.SSS';\nexport const ONE_MILLISECOND = 1000;\nexport const ONE_SECOND = 1000 * ONE_MILLISECOND;\nexport const DEFAULT_MS_PRECISION = Math.log10(ONE_MILLISECOND);\n\n/**\n * @param {number} timestamp\n * @param {number} initialTimestamp\n * @param {number} totalDuration\n * @returns {number} 0-100 percentage\n */\nexport function getPercentageOfDuration(duration: number, totalDuration: number) {\n  return (duration / totalDuration) * 100;\n}\n\nconst quantizeDuration = (duration: number, floatPrecision: number, conversionFactor: number) =>\n  toFloatPrecision(duration / conversionFactor, floatPrecision) * conversionFactor;\n\n/**\n * @param {number} duration (in microseconds)\n * @returns {string} formatted, unit-labelled string with time in milliseconds\n */\nexport function formatDate(duration: number) {\n  return moment(duration / ONE_MILLISECOND).format(STANDARD_DATE_FORMAT);\n}\n\n/**\n * @param {number} duration (in microseconds)\n * @returns {string} formatted, unit-labelled string with time in milliseconds\n */\nexport function formatTime(duration: number) {\n  return moment(duration / ONE_MILLISECOND).format(STANDARD_TIME_FORMAT);\n}\n\n/**\n * @param {number} duration (in microseconds)\n * @returns {string} formatted, unit-labelled string with time in milliseconds\n */\nexport function formatDatetime(duration: number) {\n  return moment(duration / ONE_MILLISECOND).format(STANDARD_DATETIME_FORMAT);\n}\n\n/**\n * @param {number} duration (in microseconds)\n * @returns {string} formatted, unit-labelled string with time in milliseconds\n */\nexport function formatMillisecondTime(duration: number) {\n  const targetDuration = quantizeDuration(duration, DEFAULT_MS_PRECISION, ONE_MILLISECOND);\n  return `${moment.duration(targetDuration / ONE_MILLISECOND).asMilliseconds()}ms`;\n}\n\n/**\n * @param {number} duration (in microseconds)\n * @returns {string} formatted, unit-labelled string with time in seconds\n */\nexport function formatSecondTime(duration: number) {\n  const targetDuration = quantizeDuration(duration, DEFAULT_MS_PRECISION, ONE_SECOND);\n  return `${moment.duration(targetDuration / ONE_MILLISECOND).asSeconds()}s`;\n}\n\n/**\n * Humanizes the duration based on the inputUnit\n *\n * Example:\n * 5000ms => 5s\n * 1000μs => 1ms\n */\nexport function formatDuration(duration: number, inputUnit = 'microseconds'): string {\n  let d = duration;\n  if (inputUnit === 'microseconds') {\n    d = duration / 1000;\n  }\n  let units = 'ms';\n  if (d >= 1000) {\n    units = 's';\n    d /= 1000;\n  }\n  return _round(d, 2) + units;\n}\n\nexport function formatRelativeDate(value: any, fullMonthName = false) {\n  const m = moment.isMoment(value) ? value : moment(value);\n  const monthFormat = fullMonthName ? 'MMMM' : 'MMM';\n  const dt = new Date();\n  if (dt.getFullYear() !== m.year()) {\n    return m.format(`${monthFormat} D, YYYY`);\n  }\n  const mMonth = m.month();\n  const mDate = m.date();\n  const date = dt.getDate();\n  if (mMonth === dt.getMonth() && mDate === date) {\n    return TODAY;\n  }\n  dt.setDate(date - 1);\n  if (mMonth === dt.getMonth() && mDate === dt.getDate()) {\n    return YESTERDAY;\n  }\n  return m.format(`${monthFormat} D`);\n}\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * given a number and a desired precision for the floating\n * side, return the number at the new precision.\n *\n * toFloatPrecision(3.55, 1) // 3.5\n * toFloatPrecision(0.04422, 2) // 0.04\n * toFloatPrecision(6.24e6, 2) // 6240000.00\n *\n * does not support numbers that use \"e\" notation on toString.\n *\n * @param {number} number\n * @param {number} precision\n * @returns {number} number at new floating precision\n */\nexport function toFloatPrecision(number: number, precision: number): number {\n  const log10Length = Math.floor(Math.log10(Math.abs(number))) + 1;\n  const targetPrecision = precision + log10Length;\n\n  if (targetPrecision <= 0) {\n    return Math.trunc(number);\n  }\n\n  return Number(number.toPrecision(targetPrecision));\n}\n","var baseEach = require('./_baseEach'),\n    isArrayLike = require('./isArrayLike');\n\n/**\n * The base implementation of `_.map` without support for iteratee shorthands.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction baseMap(collection, iteratee) {\n  var index = -1,\n      result = isArrayLike(collection) ? Array(collection.length) : [];\n\n  baseEach(collection, function(value, key, collection) {\n    result[++index] = iteratee(value, key, collection);\n  });\n  return result;\n}\n\nmodule.exports = baseMap;\n","/* eslint-env node, browser */\n'use strict'\n\n/**\n * handles a keydown event\n *\n * @param {Event} e\n * @returns void\n */\nmodule.exports = function (e) {\n  var self = this\n  var characterFromEvent\n  var eventModifiers\n\n  // normalize e.which for key events\n  // @see http://stackoverflow.com/questions/4285627/javascript-keycode-vs-charcode-utter-confusion\n  if (typeof e.which !== 'number') {\n    e.which = e.keyCode\n  }\n  characterFromEvent = require('../../helpers/characterFromEvent')\n  var character = characterFromEvent(e)\n\n  // no character found then stop\n  if (character === undefined) {\n    return\n  }\n\n  // need to use === for the character check because the character can be 0\n  if (e.type === 'keyup' && self.ignoreNextKeyup === character) {\n    self.ignoreNextKeyup = false\n    return\n  }\n\n  eventModifiers = require('../../helpers/eventModifiers')\n  self.handleKey(character, eventModifiers(e), e)\n}\n","import React from 'react';\nimport memoizeOne from 'memoize-one';\nimport { css } from 'emotion';\nimport { CSSTransition } from 'react-transition-group';\n\nconst transitionDuration = 500;\n// We add a bit of delay to the transition as another perf optimisation. As at the start we need to render\n// quite a bit of new rows, if we start transition at the same time there can be frame rate drop. This gives time\n// for react to first render them and then do the animation.\nconst transitionDelay = 100;\n\nconst getStyles = memoizeOne(() => {\n  return {\n    logsEnter: css`\n      label: logsEnter;\n      position: absolute;\n      opacity: 0;\n      height: auto;\n      width: 100%;\n    `,\n    logsEnterActive: css`\n      label: logsEnterActive;\n      opacity: 1;\n      transition: opacity ${transitionDuration}ms ease-out ${transitionDelay}ms;\n    `,\n    logsExit: css`\n      label: logsExit;\n      position: absolute;\n      opacity: 1;\n      height: auto;\n      width: 100%;\n    `,\n    logsExitActive: css`\n      label: logsExitActive;\n      opacity: 0;\n      transition: opacity ${transitionDuration}ms ease-out ${transitionDelay}ms;\n    `,\n  };\n});\n\ntype Props = {\n  children: React.ReactNode;\n  visible: boolean;\n};\n\n/**\n * Cross fade transition component that is tied a bit too much to the logs containers so not very useful elsewhere\n * right now.\n */\nexport function LogsCrossFadeTransition(props: Props) {\n  const { visible, children } = props;\n  const styles = getStyles();\n  return (\n    <CSSTransition\n      in={visible}\n      mountOnEnter={true}\n      unmountOnExit={true}\n      timeout={transitionDuration + transitionDelay}\n      classNames={{\n        enter: styles.logsEnter,\n        enterActive: styles.logsEnterActive,\n        exit: styles.logsExit,\n        exitActive: styles.logsExitActive,\n      }}\n    >\n      {children}\n    </CSSTransition>\n  );\n}\n","import React from 'react';\nimport { Badge, NodeGraph } from '@grafana/ui';\nimport { DataFrame, TimeRange } from '@grafana/data';\nimport { ExploreId, StoreState } from '../../types';\nimport { splitOpen } from './state/main';\nimport { connect, ConnectedProps } from 'react-redux';\nimport { Collapse } from '@grafana/ui';\nimport { useLinks } from './utils/links';\n\ninterface Props {\n  // Edges and Nodes are separate frames\n  dataFrames: DataFrame[];\n  exploreId: ExploreId;\n  range: TimeRange;\n  splitOpen: typeof splitOpen;\n  short?: boolean;\n}\nexport function UnconnectedNodeGraphContainer(props: Props & ConnectedProps<typeof connector>) {\n  const { dataFrames, range, splitOpen, short } = props;\n  const getLinks = useLinks(range, splitOpen);\n\n  return (\n    <div style={{ height: short ? 300 : 600 }}>\n      <Collapse\n        label={\n          <span>\n            Node graph <Badge text={'Beta'} color={'blue'} icon={'rocket'} tooltip={'This visualization is in beta'} />\n          </span>\n        }\n        isOpen\n      >\n        <NodeGraph dataFrames={dataFrames} getLinks={getLinks} />\n      </Collapse>\n    </div>\n  );\n}\n\nfunction mapStateToProps(state: StoreState, { exploreId }: { exploreId: ExploreId }) {\n  return {\n    range: state.explore[exploreId].range,\n  };\n}\n\nconst mapDispatchToProps = {\n  splitOpen,\n};\n\nconst connector = connect(mapStateToProps, mapDispatchToProps);\nexport const NodeGraphContainer = connector(UnconnectedNodeGraphContainer);\n","import React from 'react';\nimport { RefreshPicker, defaultIntervals } from '@grafana/ui';\nimport { selectors } from '@grafana/e2e-selectors';\nimport memoizeOne from 'memoize-one';\nimport { css } from 'emotion';\nimport classNames from 'classnames';\n\nimport { ResponsiveButton } from './ResponsiveButton';\n\nimport { getTimeSrv } from 'app/features/dashboard/services/TimeSrv';\n\nconst getStyles = memoizeOne(() => {\n  return {\n    selectButtonOverride: css`\n      label: selectButtonOverride;\n      .select-button-value {\n        color: white !important;\n      }\n    `,\n  };\n});\n\nexport type Props = {\n  splitted: boolean;\n  loading: boolean;\n  isLive: boolean;\n  onRun: (loading: boolean) => void;\n  refreshInterval?: string;\n  onChangeRefreshInterval: (interval: string) => void;\n  showDropdown: boolean;\n};\n\nexport function RunButton(props: Props) {\n  const { splitted, loading, onRun, onChangeRefreshInterval, refreshInterval, showDropdown, isLive } = props;\n  const styles = getStyles();\n  const intervals = getTimeSrv().getValidIntervals(defaultIntervals);\n\n  const runButton = (\n    <ResponsiveButton\n      splitted={splitted}\n      title={loading && !isLive ? 'Cancel' : 'Run Query'}\n      onClick={() => onRun(loading)}\n      buttonClassName={classNames({\n        'navbar-button--primary': isLive || !loading,\n        'navbar-button--danger': loading && !isLive,\n        'btn--radius-right-0': showDropdown,\n      })}\n      icon={loading ? 'fa fa-spinner' : 'sync'}\n      iconClassName={loading ? ' fa-spin' : undefined}\n      aria-label={selectors.pages.Explore.General.runButton}\n    />\n  );\n\n  if (showDropdown) {\n    return (\n      <RefreshPicker\n        onIntervalChanged={onChangeRefreshInterval}\n        value={refreshInterval}\n        buttonSelectClassName={`${loading ? 'navbar-button--danger' : 'navbar-button--primary'} ${\n          styles.selectButtonOverride\n        }`}\n        refreshButton={runButton}\n        intervals={intervals}\n      />\n    );\n  }\n  return runButton;\n}\n","/* eslint-env node, browser */\n'use strict'\n/**\n * this is a mapping of keys that require shift on a US keypad\n * back to the non shift equivelents\n *\n * this is so you can use keyup events with these keys\n *\n * note that this will only work reliably on US keyboards\n *\n * @type {Object}\n */\nmodule.exports = {\n  '~': '`',\n  '!': '1',\n  '@': '2',\n  '#': '3',\n  '$': '4',\n  '%': '5',\n  '^': '6',\n  '&': '7',\n  '*': '8',\n  '(': '9',\n  ')': '0',\n  '_': '-',\n  '+': '=',\n  ':': ';',\n  '\"': \"'\",\n  '<': ',',\n  '>': '.',\n  '?': '/',\n  '|': '\\\\'\n}\n","/* eslint-env node, browser */\n'use strict'\n/**\n * mapping for special characters so they can support\n *\n * this dictionary is only used incase you want to bind a\n * keyup or keydown event to one of these keys\n *\n * @type {Object}\n */\nmodule.exports = {\n  106: '*',\n  107: 'plus',\n  109: 'minus',\n  110: '.',\n  111: '/',\n  186: ';',\n  187: '=',\n  188: ',',\n  189: '-',\n  190: '.',\n  191: '/',\n  192: '`',\n  219: '[',\n  220: '\\\\',\n  221: ']',\n  222: \"'\"\n}\n","/* eslint-env node, browser */\n'use strict'\n\n/**\n * Gets info for a specific key combination\n *\n * @param  {string} combination key combination (\"command+s\" or \"a\" or \"*\")\n * @param  {string=} action\n * @returns {Object}\n */\nmodule.exports = function (combination, action) {\n  var self = this\n  var keysFromString\n  var keys\n  var key\n  var j\n  var modifiers = []\n  var SPECIAL_ALIASES\n  var SHIFT_MAP\n  var isModifier\n\n  keysFromString = require('../../helpers/keysFromString')\n  // take the keys from this pattern and figure out what the actual\n  // pattern is all about\n  keys = keysFromString(combination)\n\n  SPECIAL_ALIASES = require('../../helpers/special-aliases')\n  SHIFT_MAP = require('../../helpers/shift-map')\n  isModifier = require('../../helpers/isModifier')\n  for (j = 0; j < keys.length; ++j) {\n    key = keys[j]\n\n    // normalize key names\n    if (SPECIAL_ALIASES[key]) {\n      key = SPECIAL_ALIASES[key]\n    }\n\n    // if this is not a keypress event then we should\n    // be smart about using shift keys\n    // this will only work for US keyboards however\n    if (action && action !== 'keypress' && SHIFT_MAP[key]) {\n      key = SHIFT_MAP[key]\n      modifiers.push('shift')\n    }\n\n    // if this key is a modifier then add it to the list of modifiers\n    if (isModifier(key)) {\n      modifiers.push(key)\n    }\n  }\n\n  // depending on what the key combination is\n  // we will try to pick the best event for it\n  action = self.pickBestAction(key, modifiers, action)\n\n  return {\n    key: key,\n    modifiers: modifiers,\n    action: action\n  }\n}\n","import { css } from 'emotion';\nimport { config } from 'app/core/config';\nimport { stylesFactory } from '@grafana/ui';\n\nexport const getPanelInspectorStyles = stylesFactory(() => {\n  return {\n    wrap: css`\n      display: flex;\n      flex-direction: column;\n      height: 100%;\n      width: 100%;\n      flex: 1 1 0;\n    `,\n    toolbar: css`\n      display: flex;\n      width: 100%;\n      flex-grow: 0;\n      align-items: center;\n      justify-content: flex-end;\n      margin-bottom: ${config.theme.spacing.sm};\n    `,\n    toolbarItem: css`\n      margin-left: ${config.theme.spacing.md};\n    `,\n    content: css`\n      flex-grow: 1;\n      padding-bottom: 16px;\n    `,\n    contentQueryInspector: css`\n      flex-grow: 1;\n      padding: ${config.theme.spacing.md} 0;\n    `,\n    editor: css`\n      font-family: monospace;\n      height: 100%;\n      flex-grow: 1;\n    `,\n    viewer: css`\n      overflow: scroll;\n    `,\n    dataFrameSelect: css`\n      flex-grow: 2;\n    `,\n    tabContent: css`\n      height: 100%;\n      display: flex;\n      flex-direction: column;\n    `,\n    dataTabContent: css`\n      display: flex;\n      flex-direction: column;\n      height: 100%;\n      width: 100%;\n    `,\n    actionsWrapper: css`\n      display: flex;\n    `,\n    leftActions: css`\n      display: flex;\n      flex-grow: 1;\n\n      max-width: 85%;\n      @media (max-width: 1345px) {\n        max-width: 75%;\n      }\n    `,\n    options: css`\n      padding-top: ${config.theme.spacing.sm};\n    `,\n    dataDisplayOptions: css`\n      flex-grow: 1;\n      min-width: 300px;\n      margin-right: ${config.theme.spacing.sm};\n    `,\n    selects: css`\n      display: flex;\n      > * {\n        margin-right: ${config.theme.spacing.sm};\n      }\n    `,\n  };\n});\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactIconBase = require('react-icon-base');\n\nvar _reactIconBase2 = _interopRequireDefault(_reactIconBase);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar MdKeyboardArrowRight = function MdKeyboardArrowRight(props) {\n    return _react2.default.createElement(\n        _reactIconBase2.default,\n        _extends({ viewBox: '0 0 40 40' }, props),\n        _react2.default.createElement(\n            'g',\n            null,\n            _react2.default.createElement('path', { d: 'm14.3 27.3l7.7-7.7-7.7-7.7 2.3-2.3 10 10-10 10z' })\n        )\n    );\n};\n\nexports.default = MdKeyboardArrowRight;\nmodule.exports = exports['default'];","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @typechecks\n * \n */\n\n/*eslint-disable no-self-compare */\n\n'use strict';\n\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\n\n/**\n * inlined Object.is polyfill to avoid requiring consumers ship their own\n * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is\n */\nfunction is(x, y) {\n  // SameValue algorithm\n  if (x === y) {\n    // Steps 1-5, 7-10\n    // Steps 6.b-6.e: +0 != -0\n    // Added the nonzero y check to make Flow happy, but it is redundant\n    return x !== 0 || y !== 0 || 1 / x === 1 / y;\n  } else {\n    // Step 6.a: NaN == NaN\n    return x !== x && y !== y;\n  }\n}\n\n/**\n * Performs equality by iterating through keys on an object and returning false\n * when any key has values which are not strictly equal between the arguments.\n * Returns true when the values of all keys are strictly equal.\n */\nfunction shallowEqual(objA, objB) {\n  if (is(objA, objB)) {\n    return true;\n  }\n\n  if (typeof objA !== 'object' || objA === null || typeof objB !== 'object' || objB === null) {\n    return false;\n  }\n\n  var keysA = Object.keys(objA);\n  var keysB = Object.keys(objB);\n\n  if (keysA.length !== keysB.length) {\n    return false;\n  }\n\n  // Test for A's keys different from B.\n  for (var i = 0; i < keysA.length; i++) {\n    if (!hasOwnProperty.call(objB, keysA[i]) || !is(objA[keysA[i]], objB[keysA[i]])) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nmodule.exports = shallowEqual;","import React from 'react';\nimport classNames from 'classnames';\nimport tinycolor from 'tinycolor2';\nimport { css } from 'emotion';\nimport { CSSTransition } from 'react-transition-group';\nimport { useTheme, Tooltip, stylesFactory, selectThemeVariant, Icon } from '@grafana/ui';\nimport { GrafanaTheme } from '@grafana/data';\n\n//Components\nimport { ResponsiveButton } from './ResponsiveButton';\n\nconst getStyles = stylesFactory((theme: GrafanaTheme) => {\n  const bgColor = selectThemeVariant({ light: theme.palette.gray5, dark: theme.palette.dark1 }, theme.type);\n  const orangeLighter = tinycolor(theme.palette.orangeDark).lighten(10).toString();\n  const pulseTextColor = tinycolor(theme.palette.orangeDark).desaturate(90).toString();\n  return {\n    noRightBorderStyle: css`\n      label: noRightBorderStyle;\n      border-right: 0;\n    `,\n    liveButton: css`\n      label: liveButton;\n      margin: 0;\n    `,\n    isLive: css`\n      label: isLive;\n      border-color: ${theme.palette.orangeDark};\n      color: ${theme.palette.orangeDark};\n      background: transparent;\n      &:focus {\n        background: transparent;\n        border-color: ${theme.palette.orangeDark};\n        color: ${theme.palette.orangeDark};\n      }\n      &:hover {\n        background-color: ${bgColor};\n      }\n      &:active,\n      &:hover {\n        border-color: ${orangeLighter};\n        color: ${orangeLighter};\n      }\n    `,\n    isPaused: css`\n      label: isPaused;\n      border-color: ${theme.palette.orangeDark};\n      background: transparent;\n      animation: pulse 3s ease-out 0s infinite normal forwards;\n      &:focus {\n        background: transparent;\n        border-color: ${theme.palette.orangeDark};\n      }\n      &:hover {\n        background-color: ${bgColor};\n      }\n      &:active,\n      &:hover {\n        border-color: ${orangeLighter};\n      }\n      @keyframes pulse {\n        0% {\n          color: ${pulseTextColor};\n        }\n        50% {\n          color: ${theme.palette.orangeDark};\n        }\n        100% {\n          color: ${pulseTextColor};\n        }\n      }\n    `,\n    stopButtonEnter: css`\n      label: stopButtonEnter;\n      width: 0;\n      opacity: 0;\n      overflow: hidden;\n    `,\n    stopButtonEnterActive: css`\n      label: stopButtonEnterActive;\n      opacity: 1;\n      width: 32px;\n    `,\n    stopButtonExit: css`\n      label: stopButtonExit;\n      width: 32px;\n      opacity: 1;\n      overflow: hidden;\n    `,\n    stopButtonExitActive: css`\n      label: stopButtonExitActive;\n      opacity: 0;\n      width: 0;\n    `,\n  };\n});\n\ntype LiveTailButtonProps = {\n  splitted: boolean;\n  start: () => void;\n  stop: () => void;\n  pause: () => void;\n  resume: () => void;\n  isLive: boolean;\n  isPaused: boolean;\n};\nexport function LiveTailButton(props: LiveTailButtonProps) {\n  const { start, pause, resume, isLive, isPaused, stop, splitted } = props;\n  const theme = useTheme();\n  const styles = getStyles(theme);\n\n  const onClickMain = isLive ? (isPaused ? resume : pause) : start;\n\n  return (\n    <>\n      <Tooltip content={isLive ? <>Pause the live stream</> : <>Live stream your logs</>} placement=\"bottom\">\n        <ResponsiveButton\n          splitted={splitted}\n          buttonClassName={classNames('btn navbar-button', styles.liveButton, {\n            [`btn--radius-right-0 explore-active-button ${styles.noRightBorderStyle}`]: isLive,\n            [styles.isLive]: isLive && !isPaused,\n            [styles.isPaused]: isLive && isPaused,\n          })}\n          icon={!isLive ? 'play' : 'pause'}\n          iconClassName={isLive ? 'icon-brand-gradient' : undefined}\n          onClick={onClickMain}\n          title={'\\xa0Live'}\n        />\n      </Tooltip>\n      <CSSTransition\n        mountOnEnter={true}\n        unmountOnExit={true}\n        timeout={100}\n        in={isLive}\n        classNames={{\n          enter: styles.stopButtonEnter,\n          enterActive: styles.stopButtonEnterActive,\n          exit: styles.stopButtonExit,\n          exitActive: styles.stopButtonExitActive,\n        }}\n      >\n        <div>\n          <Tooltip content={<>Stop and exit the live stream</>} placement=\"bottom\">\n            <button\n              className={`btn navbar-button navbar-button--attached explore-active-button ${styles.isLive}`}\n              onClick={stop}\n            >\n              <Icon className=\"icon-brand-gradient\" name=\"square-shape\" size=\"lg\" type=\"mono\" />\n            </button>\n          </Tooltip>\n        </div>\n      </CSSTransition>\n    </>\n  );\n}\n","import React from 'react';\nimport { hot } from 'react-hot-loader';\nimport { css, cx } from 'emotion';\nimport { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport AutoSizer from 'react-virtualized-auto-sizer';\nimport memoizeOne from 'memoize-one';\nimport { selectors } from '@grafana/e2e-selectors';\nimport { ErrorBoundaryAlert, stylesFactory, withTheme } from '@grafana/ui';\nimport {\n  AbsoluteTimeRange,\n  DataQuery,\n  DataSourceApi,\n  GrafanaTheme,\n  LoadingState,\n  PanelData,\n  RawTimeRange,\n  TimeRange,\n  TimeZone,\n  ExploreUrlState,\n  LogsModel,\n  EventBusExtended,\n  EventBusSrv,\n  TraceViewData,\n  DataFrame,\n} from '@grafana/data';\n\nimport store from 'app/core/store';\nimport LogsContainer from './LogsContainer';\nimport QueryRows from './QueryRows';\nimport TableContainer from './TableContainer';\nimport RichHistoryContainer from './RichHistory/RichHistoryContainer';\nimport ExploreQueryInspector from './ExploreQueryInspector';\nimport { splitOpen } from './state/main';\nimport { changeSize, initializeExplore, refreshExplore } from './state/explorePane';\nimport { updateTimeRange } from './state/time';\nimport { scanStopAction, addQueryRow, modifyQueries, setQueries, scanStart } from './state/query';\nimport { ExploreId, ExploreItemState, ExploreUpdateState } from 'app/types/explore';\nimport { StoreState } from 'app/types';\nimport {\n  DEFAULT_RANGE,\n  ensureQueries,\n  getFirstNonQueryRowSpecificError,\n  getTimeRange,\n  getTimeRangeFromUrl,\n  lastUsedDatasourceKeyForOrgId,\n} from 'app/core/utils/explore';\nimport { ExploreToolbar } from './ExploreToolbar';\nimport { NoDataSourceCallToAction } from './NoDataSourceCallToAction';\nimport { getTimeZone } from '../profile/state/selectors';\nimport { ErrorContainer } from './ErrorContainer';\n//TODO:unification\nimport { TraceView } from './TraceView/TraceView';\nimport { SecondaryActions } from './SecondaryActions';\nimport { FILTER_FOR_OPERATOR, FILTER_OUT_OPERATOR, FilterItem } from '@grafana/ui/src/components/Table/types';\nimport { ExploreGraphNGPanel } from './ExploreGraphNGPanel';\nimport { NodeGraphContainer } from './NodeGraphContainer';\n\nconst getStyles = stylesFactory((theme: GrafanaTheme) => {\n  return {\n    exploreMain: css`\n      label: exploreMain;\n      // Is needed for some transition animations to work.\n      position: relative;\n      margin-top: 21px;\n    `,\n    button: css`\n      label: button;\n      margin: 1em 4px 0 0;\n    `,\n    queryContainer: css`\n      label: queryContainer;\n      // Need to override normal css class and don't want to count on ordering of the classes in html.\n      height: auto !important;\n      flex: unset !important;\n      padding: ${theme.panelPadding}px;\n    `,\n  };\n});\n\nexport interface ExploreProps {\n  changeSize: typeof changeSize;\n  datasourceInstance: DataSourceApi | null;\n  datasourceMissing: boolean;\n  exploreId: ExploreId;\n  initializeExplore: typeof initializeExplore;\n  initialized: boolean;\n  modifyQueries: typeof modifyQueries;\n  update: ExploreUpdateState;\n  refreshExplore: typeof refreshExplore;\n  scanning?: boolean;\n  scanRange?: RawTimeRange;\n  scanStart: typeof scanStart;\n  scanStopAction: typeof scanStopAction;\n  setQueries: typeof setQueries;\n  split: boolean;\n  queryKeys: string[];\n  initialDatasource: string;\n  initialQueries: DataQuery[];\n  initialRange: TimeRange;\n  isLive: boolean;\n  syncedTimes: boolean;\n  updateTimeRange: typeof updateTimeRange;\n  graphResult: DataFrame[] | null;\n  logsResult?: LogsModel;\n  absoluteRange: AbsoluteTimeRange;\n  timeZone: TimeZone;\n  onHiddenSeriesChanged?: (hiddenSeries: string[]) => void;\n  queryResponse: PanelData;\n  originPanelId: number;\n  addQueryRow: typeof addQueryRow;\n  theme: GrafanaTheme;\n  loading: boolean;\n  showMetrics: boolean;\n  showTable: boolean;\n  showLogs: boolean;\n  showTrace: boolean;\n  showNodeGraph: boolean;\n  splitOpen: typeof splitOpen;\n}\n\nenum ExploreDrawer {\n  RichHistory,\n  QueryInspector,\n}\n\ninterface ExploreState {\n  openDrawer?: ExploreDrawer;\n}\n\n/**\n * Explore provides an area for quick query iteration for a given datasource.\n * Once a datasource is selected it populates the query section at the top.\n * When queries are run, their results are being displayed in the main section.\n * The datasource determines what kind of query editor it brings, and what kind\n * of results viewers it supports. The state is managed entirely in Redux.\n *\n * SPLIT VIEW\n *\n * Explore can have two Explore areas side-by-side. This is handled in `Wrapper.tsx`.\n * Since there can be multiple Explores (e.g., left and right) each action needs\n * the `exploreId` as first parameter so that the reducer knows which Explore state\n * is affected.\n *\n * DATASOURCE REQUESTS\n *\n * A click on Run Query creates transactions for all DataQueries for all expanded\n * result viewers. New runs are discarding previous runs. Upon completion a transaction\n * saves the result. The result viewers construct their data from the currently existing\n * transactions.\n *\n * The result viewers determine some of the query options sent to the datasource, e.g.,\n * `format`, to indicate eventual transformations by the datasources' result transformers.\n */\nexport class Explore extends React.PureComponent<ExploreProps, ExploreState> {\n  el: any;\n  exploreEvents: EventBusExtended;\n\n  constructor(props: ExploreProps) {\n    super(props);\n    this.exploreEvents = new EventBusSrv();\n    this.state = {\n      openDrawer: undefined,\n    };\n  }\n\n  componentDidMount() {\n    const { initialized, exploreId, initialDatasource, initialQueries, initialRange, originPanelId } = this.props;\n    const width = this.el ? this.el.offsetWidth : 0;\n\n    // initialize the whole explore first time we mount and if browser history contains a change in datasource\n    if (!initialized) {\n      this.props.initializeExplore(\n        exploreId,\n        initialDatasource,\n        initialQueries,\n        initialRange,\n        width,\n        this.exploreEvents,\n        originPanelId\n      );\n    }\n  }\n\n  componentWillUnmount() {\n    this.exploreEvents.removeAllListeners();\n  }\n\n  componentDidUpdate(prevProps: ExploreProps) {\n    this.refreshExplore();\n  }\n\n  getRef = (el: any) => {\n    this.el = el;\n  };\n\n  onChangeTime = (rawRange: RawTimeRange) => {\n    const { updateTimeRange, exploreId } = this.props;\n    updateTimeRange({ exploreId, rawRange });\n  };\n\n  // Use this in help pages to set page to a single query\n  onClickExample = (query: DataQuery) => {\n    this.props.setQueries(this.props.exploreId, [query]);\n  };\n\n  onCellFilterAdded = (filter: FilterItem) => {\n    const { value, key, operator } = filter;\n    if (operator === FILTER_FOR_OPERATOR) {\n      this.onClickFilterLabel(key, value);\n    }\n\n    if (operator === FILTER_OUT_OPERATOR) {\n      this.onClickFilterOutLabel(key, value);\n    }\n  };\n\n  onClickFilterLabel = (key: string, value: string) => {\n    this.onModifyQueries({ type: 'ADD_FILTER', key, value });\n  };\n\n  onClickFilterOutLabel = (key: string, value: string) => {\n    this.onModifyQueries({ type: 'ADD_FILTER_OUT', key, value });\n  };\n\n  onClickAddQueryRowButton = () => {\n    const { exploreId, queryKeys } = this.props;\n    this.props.addQueryRow(exploreId, queryKeys.length);\n  };\n\n  onModifyQueries = (action: any, index?: number) => {\n    const { datasourceInstance } = this.props;\n    if (datasourceInstance?.modifyQuery) {\n      const modifier = (queries: DataQuery, modification: any) =>\n        datasourceInstance.modifyQuery!(queries, modification);\n      this.props.modifyQueries(this.props.exploreId, action, modifier, index);\n    }\n  };\n\n  onResize = (size: { height: number; width: number }) => {\n    this.props.changeSize(this.props.exploreId, size);\n  };\n\n  onStartScanning = () => {\n    // Scanner will trigger a query\n    this.props.scanStart(this.props.exploreId);\n  };\n\n  onStopScanning = () => {\n    this.props.scanStopAction({ exploreId: this.props.exploreId });\n  };\n\n  onUpdateTimeRange = (absoluteRange: AbsoluteTimeRange) => {\n    const { exploreId, updateTimeRange } = this.props;\n    updateTimeRange({ exploreId, absoluteRange });\n  };\n\n  toggleShowRichHistory = () => {\n    this.setState((state) => {\n      return {\n        openDrawer: state.openDrawer === ExploreDrawer.RichHistory ? undefined : ExploreDrawer.RichHistory,\n      };\n    });\n  };\n\n  toggleShowQueryInspector = () => {\n    this.setState((state) => {\n      return {\n        openDrawer: state.openDrawer === ExploreDrawer.QueryInspector ? undefined : ExploreDrawer.QueryInspector,\n      };\n    });\n  };\n\n  refreshExplore = () => {\n    const { exploreId, update } = this.props;\n\n    if (update.queries || update.range || update.datasource || update.mode) {\n      this.props.refreshExplore(exploreId);\n    }\n  };\n\n  renderEmptyState() {\n    return (\n      <div className=\"explore-container\">\n        <NoDataSourceCallToAction />\n      </div>\n    );\n  }\n\n  renderGraphPanel(width: number) {\n    const { graphResult, absoluteRange, timeZone, splitOpen, queryResponse, loading } = this.props;\n    return (\n      <ExploreGraphNGPanel\n        data={graphResult!}\n        width={width}\n        absoluteRange={absoluteRange}\n        timeZone={timeZone}\n        onUpdateTimeRange={this.onUpdateTimeRange}\n        annotations={queryResponse.annotations}\n        splitOpenFn={splitOpen}\n        isLoading={loading}\n      />\n    );\n  }\n\n  renderTablePanel(width: number) {\n    const { exploreId, datasourceInstance } = this.props;\n    return (\n      <TableContainer\n        ariaLabel={selectors.pages.Explore.General.table}\n        width={width}\n        exploreId={exploreId}\n        onCellFilterAdded={datasourceInstance?.modifyQuery ? this.onCellFilterAdded : undefined}\n      />\n    );\n  }\n\n  renderLogsPanel(width: number) {\n    const { exploreId, syncedTimes } = this.props;\n    return (\n      <LogsContainer\n        width={width}\n        exploreId={exploreId}\n        syncedTimes={syncedTimes}\n        onClickFilterLabel={this.onClickFilterLabel}\n        onClickFilterOutLabel={this.onClickFilterOutLabel}\n        onStartScanning={this.onStartScanning}\n        onStopScanning={this.onStopScanning}\n      />\n    );\n  }\n\n  renderNodeGraphPanel() {\n    const { exploreId, showTrace, queryResponse } = this.props;\n    return (\n      <NodeGraphContainer\n        dataFrames={this.getNodeGraphDataFrames(queryResponse.series)}\n        exploreId={exploreId}\n        short={showTrace}\n      />\n    );\n  }\n\n  getNodeGraphDataFrames = memoizeOne((frames: DataFrame[]) => {\n    // TODO: this not in sync with how other types of responses are handled. Other types have a query response\n    //  processing pipeline which ends up populating redux state with proper data. As we move towards more dataFrame\n    //  oriented API it seems like a better direction to move such processing into to visualisations and do minimal\n    //  and lazy processing here. Needs bigger refactor so keeping nodeGraph and Traces as they are for now.\n    return frames.filter((frame) => frame.meta?.preferredVisualisationType === 'nodeGraph');\n  });\n\n  renderTraceViewPanel() {\n    const { queryResponse, splitOpen } = this.props;\n    const dataFrames = queryResponse.series.filter((series) => series.meta?.preferredVisualisationType === 'trace');\n\n    return (\n      // We expect only one trace at the moment to be in the dataframe\n      // If there is no data (like 404) we show a separate error so no need to show anything here\n      dataFrames[0] && (\n        <TraceView trace={dataFrames[0].fields[0].values.get(0) as TraceViewData | undefined} splitOpenFn={splitOpen} />\n      )\n    );\n  }\n\n  render() {\n    const {\n      datasourceInstance,\n      datasourceMissing,\n      exploreId,\n      split,\n      queryKeys,\n      graphResult,\n      queryResponse,\n      isLive,\n      theme,\n      showMetrics,\n      showTable,\n      showLogs,\n      showTrace,\n      showNodeGraph,\n    } = this.props;\n    const { openDrawer } = this.state;\n    const exploreClass = split ? 'explore explore-split' : 'explore';\n    const styles = getStyles(theme);\n    const showPanels = queryResponse && queryResponse.state !== LoadingState.NotStarted;\n\n    // gets an error without a refID, so non-query-row-related error, like a connection error\n    const queryErrors =\n      queryResponse.state === LoadingState.Error && queryResponse.error ? [queryResponse.error] : undefined;\n    const queryError = getFirstNonQueryRowSpecificError(queryErrors);\n\n    const showRichHistory = openDrawer === ExploreDrawer.RichHistory;\n    const showQueryInspector = openDrawer === ExploreDrawer.QueryInspector;\n\n    return (\n      <div className={exploreClass} ref={this.getRef} aria-label={selectors.pages.Explore.General.container}>\n        <ExploreToolbar exploreId={exploreId} onChangeTime={this.onChangeTime} />\n        {datasourceMissing ? this.renderEmptyState() : null}\n        {datasourceInstance && (\n          <div className=\"explore-container\">\n            <div className={cx('panel-container', styles.queryContainer)}>\n              <QueryRows exploreEvents={this.exploreEvents} exploreId={exploreId} queryKeys={queryKeys} />\n              <SecondaryActions\n                addQueryRowButtonDisabled={isLive}\n                // We cannot show multiple traces at the same time right now so we do not show add query button.\n                //TODO:unification\n                addQueryRowButtonHidden={false}\n                richHistoryButtonActive={showRichHistory}\n                queryInspectorButtonActive={showQueryInspector}\n                onClickAddQueryRowButton={this.onClickAddQueryRowButton}\n                onClickRichHistoryButton={this.toggleShowRichHistory}\n                onClickQueryInspectorButton={this.toggleShowQueryInspector}\n              />\n            </div>\n            <ErrorContainer queryError={queryError} />\n            <AutoSizer onResize={this.onResize} disableHeight>\n              {({ width }) => {\n                if (width === 0) {\n                  return null;\n                }\n\n                return (\n                  <main className={cx(styles.exploreMain)} style={{ width }}>\n                    <ErrorBoundaryAlert>\n                      {showPanels && (\n                        <>\n                          {showMetrics && graphResult && this.renderGraphPanel(width)}\n                          {showTable && this.renderTablePanel(width)}\n                          {showLogs && this.renderLogsPanel(width)}\n                          {showNodeGraph && this.renderNodeGraphPanel()}\n                          {showTrace && this.renderTraceViewPanel()}\n                        </>\n                      )}\n                      {showRichHistory && (\n                        <RichHistoryContainer\n                          width={width}\n                          exploreId={exploreId}\n                          onClose={this.toggleShowRichHistory}\n                        />\n                      )}\n                      {showQueryInspector && (\n                        <ExploreQueryInspector\n                          exploreId={exploreId}\n                          width={width}\n                          onClose={this.toggleShowQueryInspector}\n                        />\n                      )}\n                    </ErrorBoundaryAlert>\n                  </main>\n                );\n              }}\n            </AutoSizer>\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n\nconst ensureQueriesMemoized = memoizeOne(ensureQueries);\nconst getTimeRangeFromUrlMemoized = memoizeOne(getTimeRangeFromUrl);\n\nfunction mapStateToProps(state: StoreState, { exploreId }: ExploreProps): Partial<ExploreProps> {\n  const explore = state.explore;\n  const { split, syncedTimes } = explore;\n  const item: ExploreItemState = explore[exploreId];\n  const timeZone = getTimeZone(state.user);\n  const {\n    datasourceInstance,\n    datasourceMissing,\n    initialized,\n    queryKeys,\n    urlState,\n    update,\n    isLive,\n    graphResult,\n    logsResult,\n    showLogs,\n    showMetrics,\n    showTable,\n    showTrace,\n    absoluteRange,\n    queryResponse,\n    showNodeGraph,\n    loading,\n  } = item;\n\n  const { datasource, queries, range: urlRange, originPanelId } = (urlState || {}) as ExploreUrlState;\n  const initialDatasource = datasource || store.get(lastUsedDatasourceKeyForOrgId(state.user.orgId));\n  const initialQueries: DataQuery[] = ensureQueriesMemoized(queries);\n  const initialRange = urlRange\n    ? getTimeRangeFromUrlMemoized(urlRange, timeZone)\n    : getTimeRange(timeZone, DEFAULT_RANGE);\n\n  return {\n    datasourceInstance,\n    datasourceMissing,\n    initialized,\n    split,\n    queryKeys,\n    update,\n    initialDatasource,\n    initialQueries,\n    initialRange,\n    isLive,\n    graphResult,\n    logsResult: logsResult ?? undefined,\n    absoluteRange,\n    queryResponse,\n    originPanelId,\n    syncedTimes,\n    timeZone,\n    showLogs,\n    showMetrics,\n    showTable,\n    showTrace,\n    showNodeGraph,\n    loading,\n  };\n}\n\nconst mapDispatchToProps: Partial<ExploreProps> = {\n  changeSize,\n  initializeExplore,\n  modifyQueries,\n  refreshExplore,\n  scanStart,\n  scanStopAction,\n  setQueries,\n  updateTimeRange,\n  addQueryRow,\n  splitOpen,\n};\n\nexport default compose(\n  hot(module),\n  connect(mapStateToProps, mapDispatchToProps),\n  withTheme\n)(Explore) as React.ComponentType<{ exploreId: ExploreId }>;\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactIconBase = require('react-icon-base');\n\nvar _reactIconBase2 = _interopRequireDefault(_reactIconBase);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar IoAndroidOpen = function IoAndroidOpen(props) {\n    return _react2.default.createElement(\n        _reactIconBase2.default,\n        _extends({ viewBox: '0 0 40 40' }, props),\n        _react2.default.createElement(\n            'g',\n            null,\n            _react2.default.createElement('path', { d: 'm31.6 31.6v-10.3h3.4v10.3c0 1.8-1.6 3.4-3.4 3.4h-23.2c-1.8 0-3.4-1.6-3.4-3.4v-23.2c0-1.8 1.6-3.4 3.4-3.4h10.4v3.4h-10.4v23.2h23.2z m-9.1-26.6h12.5v12.5h-3.4v-6.8l-16.8 16.8-2.3-2.3 16.8-16.8h-6.8v-3.4z' })\n        )\n    );\n};\n\nexports.default = IoAndroidOpen;\nmodule.exports = exports['default'];","var createRound = require('./_createRound');\n\n/**\n * Computes `number` rounded to `precision`.\n *\n * @static\n * @memberOf _\n * @since 3.10.0\n * @category Math\n * @param {number} number The number to round.\n * @param {number} [precision=0] The precision to round to.\n * @returns {number} Returns the rounded number.\n * @example\n *\n * _.round(4.006);\n * // => 4\n *\n * _.round(4.006, 2);\n * // => 4.01\n *\n * _.round(4060, -2);\n * // => 4100\n */\nvar round = createRound('round');\n\nmodule.exports = round;\n","module.exports = function deepFreeze (o) {\n  Object.freeze(o);\n\n  Object.getOwnPropertyNames(o).forEach(function (prop) {\n    if (o.hasOwnProperty(prop)\n    && o[prop] !== null\n    && (typeof o[prop] === \"object\" || typeof o[prop] === \"function\")\n    && !Object.isFrozen(o[prop])) {\n      deepFreeze(o[prop]);\n    }\n  });\n  \n  return o;\n};\n","import React, { useState, useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport { hot } from 'react-hot-loader';\nimport { css, cx } from 'emotion';\nimport { stylesFactory, useTheme, TextArea, Button, IconButton } from '@grafana/ui';\nimport { getDataSourceSrv } from '@grafana/runtime';\nimport { GrafanaTheme, AppEvents, DataSourceApi } from '@grafana/data';\nimport { RichHistoryQuery, ExploreId, ExploreItemState } from 'app/types/explore';\nimport { createUrlFromRichHistory, createQueryText } from 'app/core/utils/richHistory';\nimport { createAndCopyShortLink } from 'app/core/utils/shortLinks';\nimport { copyStringToClipboard } from 'app/core/utils/explore';\nimport appEvents from 'app/core/app_events';\nimport { StoreState, CoreEvents } from 'app/types';\n\nimport { updateRichHistory } from '../state/history';\nimport { changeDatasource } from '../state/datasource';\nimport { setQueries } from '../state/query';\n\nexport interface Props {\n  query: RichHistoryQuery;\n  dsImg: string;\n  isRemoved: boolean;\n  changeDatasource: typeof changeDatasource;\n  updateRichHistory: typeof updateRichHistory;\n  setQueries: typeof setQueries;\n  exploreId: ExploreId;\n  datasourceInstance: DataSourceApi;\n}\n\nconst getStyles = stylesFactory((theme: GrafanaTheme, isRemoved: boolean) => {\n  /* Hard-coded value so all buttons and icons on right side of card are aligned */\n  const rigtColumnWidth = '240px';\n  const rigtColumnContentWidth = '170px';\n\n  /* If datasource was removed, card will have inactive color */\n  const cardColor = theme.isLight\n    ? isRemoved\n      ? theme.palette.gray95\n      : theme.palette.white\n    : isRemoved\n    ? theme.palette.gray15\n    : theme.palette.gray05;\n\n  return {\n    queryCard: css`\n      display: flex;\n      flex-direction: column;\n      border: 1px solid ${theme.colors.formInputBorder};\n      margin: ${theme.spacing.sm} 0;\n      background-color: ${cardColor};\n      border-radius: ${theme.border.radius.sm};\n      .starred {\n        color: ${theme.palette.orange};\n      }\n    `,\n    cardRow: css`\n      display: flex;\n      align-items: center;\n      justify-content: space-between;\n      padding: ${theme.spacing.sm};\n      border-bottom: none;\n      :first-of-type {\n        border-bottom: 1px solid ${theme.colors.formInputBorder};\n        padding: ${theme.spacing.xs} ${theme.spacing.sm};\n      }\n      img {\n        height: ${theme.typography.size.base};\n        max-width: ${theme.typography.size.base};\n        margin-right: ${theme.spacing.sm};\n      }\n    `,\n    datasourceContainer: css`\n      display: flex;\n      align-items: center;\n      font-size: ${theme.typography.size.sm};\n      font-weight: ${theme.typography.weight.semibold};\n    `,\n    queryActionButtons: css`\n      max-width: ${rigtColumnContentWidth};\n      display: flex;\n      justify-content: flex-end;\n      font-size: ${theme.typography.size.base};\n      button {\n        margin-left: ${theme.spacing.sm};\n      }\n    `,\n    queryContainer: css`\n      font-weight: ${theme.typography.weight.semibold};\n      width: calc(100% - ${rigtColumnWidth});\n    `,\n    queryRow: css`\n      border-top: 1px solid ${theme.colors.formInputBorder};\n      word-break: break-all;\n      padding: 4px 2px;\n      :first-child {\n        border-top: none;\n        padding: 0 0 4px 0;\n      }\n    `,\n    updateCommentContainer: css`\n      width: calc(100% + ${rigtColumnWidth});\n      margin-top: ${theme.spacing.sm};\n    `,\n    comment: css`\n      overflow-wrap: break-word;\n      font-size: ${theme.typography.size.sm};\n      font-weight: ${theme.typography.weight.regular};\n      margin-top: ${theme.spacing.xs};\n    `,\n    commentButtonRow: css`\n      > * {\n        margin-right: ${theme.spacing.sm};\n      }\n    `,\n    textArea: css`\n      border: 1px solid ${theme.colors.formInputBorder};\n      background: inherit;\n      color: inherit;\n      width: 100%;\n      font-size: ${theme.typography.size.sm};\n      &placeholder {\n        padding: 0 ${theme.spacing.sm};\n      }\n    `,\n    runButton: css`\n      max-width: ${rigtColumnContentWidth};\n      display: flex;\n      justify-content: flex-end;\n      button {\n        height: auto;\n        padding: ${theme.spacing.xs} ${theme.spacing.md};\n        line-height: 1.4;\n        span {\n          white-space: normal !important;\n        }\n      }\n    `,\n  };\n});\n\nexport function RichHistoryCard(props: Props) {\n  const {\n    query,\n    dsImg,\n    isRemoved,\n    updateRichHistory,\n    changeDatasource,\n    exploreId,\n    datasourceInstance,\n    setQueries,\n  } = props;\n  const [activeUpdateComment, setActiveUpdateComment] = useState(false);\n  const [comment, setComment] = useState<string | undefined>(query.comment);\n  const [queryDsInstance, setQueryDsInstance] = useState<DataSourceApi | undefined>(undefined);\n\n  useEffect(() => {\n    const getQueryDsInstance = async () => {\n      const ds = await getDataSourceSrv().get(query.datasourceName);\n      setQueryDsInstance(ds);\n    };\n\n    getQueryDsInstance();\n  }, [query.datasourceName]);\n\n  const theme = useTheme();\n  const styles = getStyles(theme, isRemoved);\n\n  const onRunQuery = async () => {\n    const queriesToRun = query.queries;\n    if (query.datasourceName !== datasourceInstance?.name) {\n      await changeDatasource(exploreId, query.datasourceName, { importQueries: true });\n      setQueries(exploreId, queriesToRun);\n    } else {\n      setQueries(exploreId, queriesToRun);\n    }\n  };\n\n  const onCopyQuery = () => {\n    const queriesToCopy = query.queries.map((q) => createQueryText(q, queryDsInstance)).join('\\n');\n    copyStringToClipboard(queriesToCopy);\n    appEvents.emit(AppEvents.alertSuccess, ['Query copied to clipboard']);\n  };\n\n  const onCreateShortLink = async () => {\n    const link = createUrlFromRichHistory(query);\n    await createAndCopyShortLink(link);\n  };\n\n  const onDeleteQuery = () => {\n    // For starred queries, we want confirmation. For non-starred, we don't.\n    if (query.starred) {\n      appEvents.emit(CoreEvents.showConfirmModal, {\n        title: 'Delete',\n        text: 'Are you sure you want to permanently delete your starred query?',\n        yesText: 'Delete',\n        icon: 'trash-alt',\n        onConfirm: () => {\n          updateRichHistory(query.ts, 'delete');\n          appEvents.emit(AppEvents.alertSuccess, ['Query deleted']);\n        },\n      });\n    } else {\n      updateRichHistory(query.ts, 'delete');\n      appEvents.emit(AppEvents.alertSuccess, ['Query deleted']);\n    }\n  };\n\n  const onStarrQuery = () => {\n    updateRichHistory(query.ts, 'starred');\n  };\n\n  const toggleActiveUpdateComment = () => setActiveUpdateComment(!activeUpdateComment);\n\n  const onUpdateComment = () => {\n    updateRichHistory(query.ts, 'comment', comment);\n    setActiveUpdateComment(false);\n  };\n\n  const onCancelUpdateComment = () => {\n    setActiveUpdateComment(false);\n    setComment(query.comment);\n  };\n\n  const onKeyDown = (keyEvent: React.KeyboardEvent) => {\n    if (keyEvent.key === 'Enter' && (keyEvent.shiftKey || keyEvent.ctrlKey)) {\n      onUpdateComment();\n    }\n\n    if (keyEvent.key === 'Escape') {\n      onCancelUpdateComment();\n    }\n  };\n\n  const updateComment = (\n    <div className={styles.updateCommentContainer} aria-label={comment ? 'Update comment form' : 'Add comment form'}>\n      <TextArea\n        value={comment}\n        placeholder={comment ? undefined : 'An optional description of what the query does.'}\n        onChange={(e) => setComment(e.currentTarget.value)}\n        className={styles.textArea}\n      />\n      <div className={styles.commentButtonRow}>\n        <Button onClick={onUpdateComment} aria-label=\"Submit button\">\n          Save comment\n        </Button>\n        <Button variant=\"secondary\" onClick={onCancelUpdateComment}>\n          Cancel\n        </Button>\n      </div>\n    </div>\n  );\n\n  const queryActionButtons = (\n    <div className={styles.queryActionButtons}>\n      <IconButton\n        name=\"comment-alt\"\n        onClick={toggleActiveUpdateComment}\n        title={query.comment?.length > 0 ? 'Edit comment' : 'Add comment'}\n      />\n      <IconButton name=\"copy\" onClick={onCopyQuery} title=\"Copy query to clipboard\" />\n      {!isRemoved && (\n        <IconButton name=\"share-alt\" onClick={onCreateShortLink} title=\"Copy shortened link to clipboard\" />\n      )}\n      <IconButton name=\"trash-alt\" title={'Delete query'} onClick={onDeleteQuery} />\n      <IconButton\n        name={query.starred ? 'favorite' : 'star'}\n        iconType={query.starred ? 'mono' : 'default'}\n        onClick={onStarrQuery}\n        title={query.starred ? 'Unstar query' : 'Star query'}\n      />\n    </div>\n  );\n\n  return (\n    <div className={styles.queryCard} onKeyDown={onKeyDown}>\n      <div className={styles.cardRow}>\n        <div className={styles.datasourceContainer}>\n          <img src={dsImg} aria-label=\"Data source icon\" />\n          <div aria-label=\"Data source name\">\n            {isRemoved ? 'Data source does not exist anymore' : query.datasourceName}\n          </div>\n        </div>\n        {queryActionButtons}\n      </div>\n      <div className={cx(styles.cardRow)}>\n        <div className={styles.queryContainer}>\n          {query.queries.map((q, i) => {\n            const queryText = createQueryText(q, queryDsInstance);\n            return (\n              <div aria-label=\"Query text\" key={`${q}-${i}`} className={styles.queryRow}>\n                {queryText}\n              </div>\n            );\n          })}\n          {!activeUpdateComment && query.comment && (\n            <div aria-label=\"Query comment\" className={styles.comment}>\n              {query.comment}\n            </div>\n          )}\n          {activeUpdateComment && updateComment}\n        </div>\n        {!activeUpdateComment && (\n          <div className={styles.runButton}>\n            <Button variant=\"secondary\" onClick={onRunQuery} disabled={isRemoved}>\n              {datasourceInstance?.name === query.datasourceName ? 'Run query' : 'Switch data source and run query'}\n            </Button>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\nfunction mapStateToProps(state: StoreState, { exploreId }: { exploreId: ExploreId }) {\n  const explore = state.explore;\n  const { datasourceInstance } = explore[exploreId];\n  // @ts-ignore\n  const item: ExploreItemState = explore[exploreId];\n  return {\n    exploreId,\n    datasourceInstance,\n  };\n}\n\nconst mapDispatchToProps = {\n  changeDatasource,\n  updateRichHistory,\n  setQueries,\n};\n\nexport default hot(module)(connect(mapStateToProps, mapDispatchToProps)(RichHistoryCard));\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nexport const TOP_NAV_HEIGHT = 46 as 46;\n\nexport const FALLBACK_DAG_MAX_NUM_SERVICES = 100 as 100;\nexport const FALLBACK_TRACE_NAME = '<trace-without-root-span>' as '<trace-without-root-span>';\n\nexport const FETCH_DONE = 'FETCH_DONE' as 'FETCH_DONE';\nexport const FETCH_ERROR = 'FETCH_ERROR' as 'FETCH_ERROR';\nexport const FETCH_LOADING = 'FETCH_LOADING' as 'FETCH_LOADING';\n\nexport const fetchedState = {\n  DONE: FETCH_DONE,\n  ERROR: FETCH_ERROR,\n  LOADING: FETCH_LOADING,\n};\n","// Libraries\nimport React from 'react';\nimport { Resizable, ResizeCallback } from 're-resizable';\nimport { css, cx, keyframes } from 'emotion';\n\n// Services & Utils\nimport { stylesFactory, useTheme } from '@grafana/ui';\n\n// Types\nimport { GrafanaTheme } from '@grafana/data';\n\nconst drawerSlide = keyframes`\n  0% {\n    transform: translateY(400px);\n  }\n\n  100% {\n    transform: translateY(0px);\n  }\n`;\n\nconst getStyles = stylesFactory((theme: GrafanaTheme) => {\n  const shadowColor = theme.isLight ? theme.palette.gray4 : theme.palette.black;\n\n  return {\n    container: css`\n      position: fixed !important;\n      bottom: 0;\n      background: ${theme.colors.pageHeaderBg};\n      border-top: 1px solid ${theme.colors.formInputBorder};\n      margin: 0px;\n      margin-right: -${theme.spacing.md};\n      margin-left: -${theme.spacing.md};\n      box-shadow: 0 0 4px ${shadowColor};\n      z-index: ${theme.zIndex.sidemenu};\n    `,\n    drawerActive: css`\n      opacity: 1;\n      animation: 0.5s ease-out ${drawerSlide};\n    `,\n    rzHandle: css`\n      background: ${theme.colors.formInputBorder};\n      transition: 0.3s background ease-in-out;\n      position: relative;\n      width: 200px !important;\n      height: 7px !important;\n      left: calc(50% - 100px) !important;\n      top: -4px !important;\n      cursor: grab;\n      border-radius: 4px;\n      &:hover {\n        background: ${theme.colors.formInputBorderHover};\n      }\n    `,\n  };\n});\n\nexport interface Props {\n  width: number;\n  children: React.ReactNode;\n  onResize?: ResizeCallback;\n}\n\nexport function ExploreDrawer(props: Props) {\n  const { width, children, onResize } = props;\n  const theme = useTheme();\n  const styles = getStyles(theme);\n  const drawerWidth = `${width + 31.5}px`;\n\n  return (\n    <Resizable\n      className={cx(styles.container, styles.drawerActive)}\n      defaultSize={{ width: drawerWidth, height: '400px' }}\n      handleClasses={{ top: styles.rzHandle }}\n      enable={{\n        top: true,\n        right: false,\n        bottom: false,\n        left: false,\n        topRight: false,\n        bottomRight: false,\n        bottomLeft: false,\n        topLeft: false,\n      }}\n      maxHeight=\"100vh\"\n      maxWidth={drawerWidth}\n      minWidth={drawerWidth}\n      onResize={onResize}\n    >\n      {children}\n    </Resizable>\n  );\n}\n","import { css } from 'emotion';\n\nexport const ubRelative = css`\n  position: relative;\n`;\n\nexport const ubMb1 = css`\n  margin-bottom: 0.25rem;\n`;\n\nexport const ubMy1 = css`\n  margin-top: 0.25rem;\n  margin-bottom: 0.25rem;\n`;\n\nexport const ubM0 = css`\n  margin: 0;\n`;\n\nexport const ubPx2 = css`\n  padding-left: 0.5rem;\n  padding-right: 0.5rem;\n`;\n\nexport const ubPb2 = css`\n  padding-bottom: 0.5rem;\n`;\n\nexport const ubFlex = css`\n  display: flex;\n`;\n\nexport const ubItemsCenter = css`\n  align-items: center;\n`;\n\nexport const ubFlexAuto = css`\n  flex: 1 1 auto;\n  min-width: 0; /* 1 */\n  min-height: 0; /* 1 */\n`;\n\nexport const ubTxRightAlign = css`\n  text-align: right;\n`;\n\nexport const ubInlineBlock = css`\n  display: inline-block;\n`;\n\nexport const uAlignIcon = css`\n  margin: -0.2rem 0.25rem 0 0;\n`;\n\nexport const uTxEllipsis = css`\n  text-overflow: ellipsis;\n`;\n\nexport const uWidth100 = css`\n  width: 100%;\n`;\n\nexport const uTxMuted = css`\n  color: #aaa;\n`;\n\nexport const ubJustifyEnd = css`\n  justify-content: flex-end;\n`;\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar createChangeEmitter = exports.createChangeEmitter = function createChangeEmitter() {\n  var currentListeners = [];\n  var nextListeners = currentListeners;\n\n  function ensureCanMutateNextListeners() {\n    if (nextListeners === currentListeners) {\n      nextListeners = currentListeners.slice();\n    }\n  }\n\n  function listen(listener) {\n    if (typeof listener !== 'function') {\n      throw new Error('Expected listener to be a function.');\n    }\n\n    var isSubscribed = true;\n\n    ensureCanMutateNextListeners();\n    nextListeners.push(listener);\n\n    return function () {\n      if (!isSubscribed) {\n        return;\n      }\n\n      isSubscribed = false;\n\n      ensureCanMutateNextListeners();\n      var index = nextListeners.indexOf(listener);\n      nextListeners.splice(index, 1);\n    };\n  }\n\n  function emit() {\n    currentListeners = nextListeners;\n    var listeners = currentListeners;\n    for (var i = 0; i < listeners.length; i++) {\n      listeners[i].apply(listeners, arguments);\n    }\n  }\n\n  return {\n    listen: listen,\n    emit: emit\n  };\n};","var baseFlatten = require('./_baseFlatten'),\n    baseOrderBy = require('./_baseOrderBy'),\n    baseRest = require('./_baseRest'),\n    isIterateeCall = require('./_isIterateeCall');\n\n/**\n * Creates an array of elements, sorted in ascending order by the results of\n * running each element in a collection thru each iteratee. This method\n * performs a stable sort, that is, it preserves the original sort order of\n * equal elements. The iteratees are invoked with one argument: (value).\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {...(Function|Function[])} [iteratees=[_.identity]]\n *  The iteratees to sort by.\n * @returns {Array} Returns the new sorted array.\n * @example\n *\n * var users = [\n *   { 'user': 'fred',   'age': 48 },\n *   { 'user': 'barney', 'age': 36 },\n *   { 'user': 'fred',   'age': 30 },\n *   { 'user': 'barney', 'age': 34 }\n * ];\n *\n * _.sortBy(users, [function(o) { return o.user; }]);\n * // => objects for [['barney', 36], ['barney', 34], ['fred', 48], ['fred', 30]]\n *\n * _.sortBy(users, ['user', 'age']);\n * // => objects for [['barney', 34], ['barney', 36], ['fred', 30], ['fred', 48]]\n */\nvar sortBy = baseRest(function(collection, iteratees) {\n  if (collection == null) {\n    return [];\n  }\n  var length = iteratees.length;\n  if (length > 1 && isIterateeCall(collection, iteratees[0], iteratees[1])) {\n    iteratees = [];\n  } else if (length > 2 && isIterateeCall(iteratees[0], iteratees[1], iteratees[2])) {\n    iteratees = [iteratees[0]];\n  }\n  return baseOrderBy(collection, baseFlatten(iteratees, 1), []);\n});\n\nmodule.exports = sortBy;\n","// Libraries\nimport React, { PureComponent } from 'react';\n\n// Services\nimport { getAngularLoader, AngularComponent } from '@grafana/runtime';\n\n// Types\nimport { DataQuery, TimeRange, EventBusExtended } from '@grafana/data';\nimport 'app/features/plugins/plugin_loader';\n\ninterface QueryEditorProps {\n  error?: any;\n  datasource: any;\n  onExecuteQuery?: () => void;\n  onQueryChange?: (value: DataQuery) => void;\n  initialQuery: DataQuery;\n  exploreEvents: EventBusExtended;\n  range: TimeRange;\n  textEditModeEnabled?: boolean;\n}\n\nexport default class QueryEditor extends PureComponent<QueryEditorProps, any> {\n  element: any;\n  component: AngularComponent;\n  angularScope: any;\n\n  async componentDidMount() {\n    if (!this.element) {\n      return;\n    }\n\n    const { datasource, initialQuery, exploreEvents } = this.props;\n\n    const loader = getAngularLoader();\n    const template = '<plugin-component type=\"query-ctrl\"> </plugin-component>';\n    const target = { datasource: datasource.name, ...initialQuery };\n    const scopeProps = {\n      ctrl: {\n        datasource,\n        target,\n        refresh: () => {\n          setTimeout(() => {\n            this.props.onQueryChange?.(target);\n            this.props.onExecuteQuery?.();\n          }, 1);\n        },\n        onQueryChange: () => {\n          setTimeout(() => {\n            this.props.onQueryChange?.(target);\n          }, 1);\n        },\n        events: exploreEvents,\n        panel: { datasource, targets: [target] },\n        dashboard: {},\n      },\n    };\n\n    this.component = loader.load(this.element, scopeProps, template);\n    this.angularScope = scopeProps.ctrl;\n\n    setTimeout(() => {\n      this.props.onQueryChange?.(target);\n      this.props.onExecuteQuery?.();\n    }, 1);\n  }\n\n  componentDidUpdate(prevProps: QueryEditorProps) {\n    const hasToggledEditorMode = prevProps.textEditModeEnabled !== this.props.textEditModeEnabled;\n    const hasNewError = prevProps.error !== this.props.error;\n\n    if (this.component) {\n      if (hasToggledEditorMode && this.angularScope && this.angularScope.toggleEditorMode) {\n        this.angularScope.toggleEditorMode();\n      }\n\n      if (hasNewError || hasToggledEditorMode) {\n        // Some query controllers listen to data error events and need a digest\n        // for some reason this needs to be done in next tick\n        setTimeout(this.component.digest);\n      }\n    }\n  }\n\n  componentWillUnmount() {\n    if (this.component) {\n      this.component.destroy();\n    }\n  }\n\n  render() {\n    return <div className=\"gf-form-query\" ref={(element) => (this.element = element)} style={{ width: '100%' }} />;\n  }\n}\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactIconBase = require('react-icon-base');\n\nvar _reactIconBase2 = _interopRequireDefault(_reactIconBase);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar IoAndroidLocate = function IoAndroidLocate(props) {\n    return _react2.default.createElement(\n        _reactIconBase2.default,\n        _extends({ viewBox: '0 0 40 40' }, props),\n        _react2.default.createElement(\n            'g',\n            null,\n            _react2.default.createElement('path', { d: 'm17.5 13.8c3.4 0 6.3 2.8 6.3 6.2s-2.9 6.3-6.3 6.3-6.2-2.9-6.2-6.3 2.8-6.2 6.2-6.2z m14.9 4.6h2.6v3.2h-2.6c-0.8 7-6.3 12.5-13.3 13.3v2.6h-3.2v-2.6c-7-0.8-12.5-6.3-13.3-13.3h-2.6v-3.2h2.6c0.8-7 6.3-12.5 13.3-13.3v-2.6h3.2v2.6c7 0.8 12.5 6.3 13.3 13.3z m-14.9 13.2c6.4 0 11.6-5.2 11.6-11.6s-5.2-11.6-11.6-11.6-11.6 5.2-11.6 11.6 5.2 11.6 11.6 11.6z' })\n        )\n    );\n};\n\nexports.default = IoAndroidLocate;\nmodule.exports = exports['default'];","var isSymbol = require('./isSymbol');\n\n/**\n * Compares values to sort them in ascending order.\n *\n * @private\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {number} Returns the sort order indicator for `value`.\n */\nfunction compareAscending(value, other) {\n  if (value !== other) {\n    var valIsDefined = value !== undefined,\n        valIsNull = value === null,\n        valIsReflexive = value === value,\n        valIsSymbol = isSymbol(value);\n\n    var othIsDefined = other !== undefined,\n        othIsNull = other === null,\n        othIsReflexive = other === other,\n        othIsSymbol = isSymbol(other);\n\n    if ((!othIsNull && !othIsSymbol && !valIsSymbol && value > other) ||\n        (valIsSymbol && othIsDefined && othIsReflexive && !othIsNull && !othIsSymbol) ||\n        (valIsNull && othIsDefined && othIsReflexive) ||\n        (!valIsDefined && othIsReflexive) ||\n        !valIsReflexive) {\n      return 1;\n    }\n    if ((!valIsNull && !valIsSymbol && !othIsSymbol && value < other) ||\n        (othIsSymbol && valIsDefined && valIsReflexive && !valIsNull && !valIsSymbol) ||\n        (othIsNull && valIsDefined && valIsReflexive) ||\n        (!othIsDefined && valIsReflexive) ||\n        !othIsReflexive) {\n      return -1;\n    }\n  }\n  return 0;\n}\n\nmodule.exports = compareAscending;\n","/* eslint-env node, browser */\n'use strict'\n/**\n * binds an event to Combokeys\n *\n * can be a single key, a combination of keys separated with +,\n * an array of keys, or a sequence of keys separated by spaces\n *\n * be sure to list the modifier keys first to make sure that the\n * correct key ends up getting bound (the last key in the pattern)\n *\n * @param {string|Array} keys\n * @param {Function} callback\n * @param {string=} action - \"keypress\", \"keydown\", or \"keyup\"\n * @returns void\n */\nmodule.exports = function (keys, callback, action) {\n  var self = this\n\n  keys = keys instanceof Array ? keys : [keys]\n  self.bindMultiple(keys, callback, action)\n  return self\n}\n","import React, { PureComponent } from 'react';\nimport { hot } from 'react-hot-loader';\nimport { connect } from 'react-redux';\nimport { DataFrame, TimeRange, ValueLinkConfig } from '@grafana/data';\nimport { Collapse, Table } from '@grafana/ui';\nimport { ExploreId, ExploreItemState } from 'app/types/explore';\nimport { StoreState } from 'app/types';\nimport { splitOpen } from './state/main';\nimport { config } from 'app/core/config';\nimport { PANEL_BORDER } from 'app/core/constants';\nimport { MetaInfoText } from './MetaInfoText';\nimport { FilterItem } from '@grafana/ui/src/components/Table/types';\nimport { getFieldLinksForExplore } from './utils/links';\n\ninterface TableContainerProps {\n  ariaLabel?: string;\n  exploreId: ExploreId;\n  loading: boolean;\n  width: number;\n  onCellFilterAdded?: (filter: FilterItem) => void;\n  tableResult?: DataFrame;\n  splitOpen: typeof splitOpen;\n  range: TimeRange;\n}\n\nexport class TableContainer extends PureComponent<TableContainerProps> {\n  getTableHeight() {\n    const { tableResult } = this.props;\n\n    if (!tableResult || tableResult.length === 0) {\n      return 200;\n    }\n\n    // tries to estimate table height\n    return Math.max(Math.min(600, tableResult.length * 35) + 35);\n  }\n\n  render() {\n    const { loading, onCellFilterAdded, tableResult, width, splitOpen, range, ariaLabel } = this.props;\n\n    const height = this.getTableHeight();\n    const tableWidth = width - config.theme.panelPadding * 2 - PANEL_BORDER;\n    const hasTableResult = tableResult?.length;\n\n    if (tableResult && tableResult.length) {\n      // Bit of code smell here. We need to add links here to the frame modifying the frame on every render.\n      // Should work fine in essence but still not the ideal way to pass props. In logs container we do this\n      // differently and sidestep this getLinks API on a dataframe\n      for (const field of tableResult.fields) {\n        field.getLinks = (config: ValueLinkConfig) => {\n          return getFieldLinksForExplore({ field, rowIndex: config.valueRowIndex!, splitOpenFn: splitOpen, range });\n        };\n      }\n    }\n\n    return (\n      <Collapse label=\"Table\" loading={loading} isOpen>\n        {hasTableResult ? (\n          <Table\n            ariaLabel={ariaLabel}\n            data={tableResult!}\n            width={tableWidth}\n            height={height}\n            onCellFilterAdded={onCellFilterAdded}\n          />\n        ) : (\n          <MetaInfoText metaItems={[{ value: '0 series returned' }]} />\n        )}\n      </Collapse>\n    );\n  }\n}\n\nfunction mapStateToProps(state: StoreState, { exploreId }: { exploreId: string }) {\n  const explore = state.explore;\n  // @ts-ignore\n  const item: ExploreItemState = explore[exploreId];\n  const { loading: loadingInState, tableResult, range } = item;\n  const loading = tableResult && tableResult.length > 0 ? false : loadingInState;\n  return { loading, tableResult, range };\n}\n\nconst mapDispatchToProps = {\n  splitOpen,\n};\n\nexport default hot(module)(connect(mapStateToProps, mapDispatchToProps)(TableContainer));\n","/* eslint-env node, browser */\n'use strict'\n\n/**\n * picks the best action based on the key combination\n *\n * @param {string} key - character for key\n * @param {Array} modifiers\n * @param {string=} action passed in\n */\nmodule.exports = function (key, modifiers, action) {\n  var self = this\n\n  // if no action was picked in we should try to pick the one\n  // that we think would work best for this key\n  if (!action) {\n    action = self.getReverseMap()[key] ? 'keydown' : 'keypress'\n  }\n\n  // modifier keys don't work as expected with keypress,\n  // switch to keydown\n  if (action === 'keypress' && modifiers.length) {\n    action = 'keydown'\n  }\n\n  return action\n}\n"],"sourceRoot":""}