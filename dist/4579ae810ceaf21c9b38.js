/*! For license information please see 4579ae810ceaf21c9b38.js.LICENSE.txt */
if(window.dhx&&(window.dhx_legacy=dhx,delete window.dhx),function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.dhx=e():t.dhx=e()}(window,(function(){return function(t){var e={};function n(i){if(e[i])return e[i].exports;var o=e[i]={i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(i,o,function(e){return t[e]}.bind(null,o));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/codebase/",n(n.s=27)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(43);e.el=i.defineElement,e.sv=i.defineSvgElement,e.view=i.defineView,e.create=i.createView,e.inject=i.injectView,e.disableHelp=function(){i.DEVMODE.mutations=!1,i.DEVMODE.warnings=!1,i.DEVMODE.verbose=!1,i.DEVMODE.UNKEYED_INPUT=!1},e.resizer=function(t){return e.el("iframe",{_hooks:{didInsert:function(e){var n=function(){var n=e.el.offsetHeight,i=e.el.offsetWidth;t(i,n)};e.el.contentWindow.onresize=n,n()}},style:"position:absolute;left:0;top:-100%;width:100%;height:100%;margin:1px 0 0;border:none;opacity:0;visibility:hidden;pointer-events:none;"})}},function(t,e,n){"use strict";function i(t,e){for(void 0===e&&(e="dhx_id"),t instanceof Event&&(t=t.target);t&&t.getAttribute;){if(t.getAttribute(e))return t;t=t.parentNode}}Object.defineProperty(e,"__esModule",{value:!0}),n(37),e.toNode=function(t){return"string"==typeof t&&(t=document.getElementById(t)||document.querySelector(t)),t||document.body},e.eventHandler=function(t,e){var n=Object.keys(e);return function(i){for(var o=t(i),r=i.target;r;){var a=r.getAttribute&&r.getAttribute("class")||"";if(a.length)for(var s=a.split(" "),l=0;l<n.length;l++)if(s.indexOf(n[l])>-1)return e[n[l]](i,o);r=r.parentNode}return!0}},e.locate=function(t,e){void 0===e&&(e="dhx_id");var n=i(t,e);return n?n.getAttribute(e):""},e.locateNode=i,e.getBox=function(t){var e=t.getBoundingClientRect(),n=document.body,i=window.pageYOffset||n.scrollTop,o=window.pageXOffset||n.scrollLeft;return{top:e.top+i,left:e.left+o,right:n.offsetWidth-e.right,bottom:n.offsetHeight-e.bottom,width:e.right-e.left,height:e.bottom-e.top}};var o=-1;e.getScrollbarWidth=function(){if(o>-1)return o;var t=document.createElement("div");return document.body.appendChild(t),t.style.cssText="position: absolute;left: -99999px;overflow:scroll;width: 100px;height: 100px;",o=t.offsetWidth-t.clientWidth,document.body.removeChild(t),o},e.fitPosition=function(t,e,n,i){var o=t.left+t.width,r=t.top+t.height;if("bottom"===e)return{position:"absolute",left:l=window.innerWidth<t.left+n?o-n:t.left,top:r+i>window.innerHeight?t.top-i+window.scrollY:r+window.scrollY,minWidth:n};var a=void 0,s=t.top+window.scrollY,l=window.innerWidth<o+n?t.left-n:o;return r+i>window.innerHeight&&(r-i>0?s=r-i+window.scrollY:(a="scroll",i=.8*(window.innerHeight-t.top))),{position:"absolute",left:l,top:s,minWidth:n,overflow:a,height:i}},e.isIE=function(){var t=window.navigator.userAgent;return t.indexOf("MSIE ")>-1||t.indexOf("Trident/")>-1}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),o=n(4);e.getCss=function(t){var e="";return t.type!==o.ItemType.button&&t.size&&(e+=" "+t.size),t.active&&(e+=" active"),t.$disabled&&(e+=" disabled"),t.css&&(e+=" "+t.css),e},e.getButtonCss=function(t){var e=" ";switch(e+="link"===t.name?"dhx_btn--link":"dhx_btn--flat",e+="large"===t.size?" dhx_btn--large":" dhx_btn--small",t.usage){case"danger":e+=" dhx_btn--danger";break;case"secondary":e+=" dhx_btn--secondary";break;case"success":e+=" dhx_btn--success"}return e},e.counter=function(t){if(t.count)return i.el(".counter",t.count)},e.icon=function(t){void 0===t&&(t="");var e="dhx-icon-block ";return"dxi"===t.slice(0,3)&&(e+="dxi "),i.el("div",{class:e+t})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=(new Date).valueOf();e.uid=function(){return"u"+i++},e.extend=function t(e,n,i){if(void 0===i&&(i=!0),n)for(var o in n){var r=n[o],a=e[o];!i||"object"!=typeof a||a instanceof Date||a instanceof Array?e[o]=r:t(a,r)}return e},e.copy=function(t){var e={};for(var n in t)e[n]=t[n];return e},e.naturalSort=function(t){return t.sort((function(t,e){return"string"==typeof t?t.localeCompare(e):t-e}))},e.findIndex=function(t,e){for(var n=t.length,i=0;i<n;i++)if(e(t[i]))return i;return-1},e.isEqualString=function(t,e){if(t.length>e.length)return!1;for(var n=0;n<t.length;n++)if(t[n].toLowerCase()!==e[n].toLowerCase())return!1;return!0},e.singleOuterClick=function(t){var e=function(n){t(n)&&document.removeEventListener("click",e)};document.addEventListener("click",e)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,o,r,a=n(5);e.DataEvents=a.DataEvents,(r=e.ItemType||(e.ItemType={})).button="button",r.input="input",r.separator="separator",r.text="text",r.iconButton="iconButton",r.imageButton="imageButton",r.spacer="spacer",r.menuItem="menuItem",r.imageButtonText="imageButtonText",r.block="block",r.customHTMLButton="customButton",r.selectButton="selectButton",r.dhxButton="dhx-button",(o=e.ToolbarEvents||(e.ToolbarEvents={})).inputCreated="inputcreated",o.click="click",(i=e.NavigationType||(e.NavigationType={})).pointer="pointer",i.click="click"},function(t,e,n){"use strict";var i,o,r,a,s;Object.defineProperty(e,"__esModule",{value:!0}),(s=e.DataEvents||(e.DataEvents={})).afterAdd="afteradd",s.beforeAdd="beforeadd",s.removeAll="removeall",s.beforeRemove="beforeremove",s.afterRemove="afterremove",s.change="change",s.load="load",(a=e.DragEvents||(e.DragEvents={})).beforeDrag="beforedrag",a.beforeDrop="beforeDrop",a.dragStart="dragstart",a.dragEnd="dragend",a.canDrop="candrop",a.cancelDrop="canceldrop",a.dropComplete="dropcomplete",a.dragOut="dragOut",a.dragIn="dragIn",(r=e.DragMode||(e.DragMode={})).target="target",r.both="both",r.source="source",(o=e.DragBehaviour||(e.DragBehaviour={})).child="child",o.sibling="sibling",o.complex="complex",(i=e.SelectionEvents||(e.SelectionEvents={})).beforeUnSelect="beforeunselect",i.afterUnSelect="afterunselect",i.beforeSelect="beforeselect",i.afterSelect="afterselect"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,o=n(5);e.DataEvents=o.DataEvents,e.DragBehaviour=o.DragBehaviour,e.DragMode=o.DragMode,(i=e.TreeFilterType||(e.TreeFilterType={}))[i.all=1]="all",i[i.specific=2]="specific",i[i.leafs=3]="leafs"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(11),o=n(21),r=n(22);e.isEqualObj=function(t,e){for(var n in t)if(t[n]!==e[n])return!1;return!0},e.naturalCompare=function(t,e){var n=[],i=[];for(t.replace(/(\d+)|(\D+)/g,(function(t,e,i){n.push([e||1/0,i||""])})),e.replace(/(\d+)|(\D+)/g,(function(t,e,n){i.push([e||1/0,n||""])}));n.length&&i.length;){var o=n.shift(),r=i.shift(),a=o[0]-r[0]||o[1].localeCompare(r[1]);if(a)return a}return n.length-i.length},e.findByConf=function(t,e){if("function"==typeof e){if(e.call(this,t))return t}else if(e.by&&e.match&&t[e.by]===e.match)return t},e.isDebug=function(){var t=window.dhx;if(void 0!==t)return void 0!==t.debug&&t.debug},e.dhxWarning=function(t){console.warn(t)},e.dhxError=function(t){throw new Error(t)},e.toProxy=function(t){var e=typeof t;return"string"===e?new i.DataProxy(t):"object"===e?t:void 0},e.toDataDriver=function(t){if("string"==typeof t)switch(t){case"csv":return new o.CsvDriver;case"json":return new r.JsonDriver;default:console.warn("incorrect driver type",t)}else if("object"==typeof t)return t}},function(t,e,n){"use strict";function i(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),i(n(6)),i(n(19)),i(n(23)),i(n(36)),i(n(11)),i(n(7)),i(n(21)),i(n(22)),i(n(39))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t){this.events={},this.context=t||this}return t.prototype.on=function(t,e,n){var i=t.toLowerCase();this.events[i]=this.events[i]||[],this.events[i].push({callback:e,context:n||this.context})},t.prototype.detach=function(t,e){var n=t.toLowerCase(),i=this.events[n];if(e)for(var o=i.length-1;o>=0;o--)i[o].context===e&&i.splice(o,1);else this.events[n]=[]},t.prototype.fire=function(t,e){void 0===e&&(e=[]);var n=t.toLowerCase();return!this.events[n]||this.events[n].map((function(t){return t.callback.apply(t.context,e)})).indexOf(!1)<0},t}();e.EventSystem=i,e.EventsMixin=function(t){var e=new i(t=t||{});t.detachEvent=e.detach.bind(e),t.attachEvent=e.on.bind(e),t.callEvent=e.fire.bind(e)}},function(t,e,n){(function(e,n){!function(){var i=1,o={},r=!1;function a(t){e.setImmediate?n(t):e.importScripts?setTimeout(t):(i++,o[i]=t,e.postMessage(i,"*"))}function s(t){"use strict";if("function"!=typeof t&&null!=t)throw TypeError();if("object"!=typeof this||this&&this.then)throw TypeError();var e,n,i=this,o=0,r=0,l=[];i.promise=i,i.resolve=function(t){return e=i.fn,n=i.er,o||(r=t,o=1,a(d)),i},i.reject=function(t){return e=i.fn,n=i.er,o||(r=t,o=2,a(d)),i},i._d=1,i.then=function(t,e){if(1!=this._d)throw TypeError();var n=new s;return n.fn=t,n.er=e,3==o?n.resolve(r):4==o?n.reject(r):l.push(n),n},i.catch=function(t){return i.then(null,t)};var u=function(t){o=t||4,l.map((function(t){3==o&&t.resolve(r)||t.reject(r)}))};try{"function"==typeof t&&t(i.resolve,i.reject)}catch(t){i.reject(t)}return i;function c(t,e,n,i){if(2==o)return i();if("object"!=typeof r&&"function"!=typeof r||"function"!=typeof t)i();else try{var a=0;t.call(r,(function(t){a++||(r=t,e())}),(function(t){a++||(r=t,n())}))}catch(t){r=t,n()}}function d(){var t;try{t=r&&r.then}catch(t){return r=t,o=2,d()}c(t,(function(){o=1,d()}),(function(){o=2,d()}),(function(){try{1==o&&"function"==typeof e?r=e(r):2==o&&"function"==typeof n&&(r=n(r),o=1)}catch(t){return r=t,u()}r==i?(r=TypeError(),u()):c(t,(function(){u(3)}),u,(function(){u(1==o&&3)}))}))}}(e=this).setImmediate||e.addEventListener("message",(function(t){if(t.source==e)if(r)a(o[t.data]);else{r=!0;try{o[t.data]()}catch(t){}delete o[t.data],r=!1}})),s.resolve=function(t){if(1!=this._d)throw TypeError();return t instanceof s?t:new s((function(e){e(t)}))},s.reject=function(t){if(1!=this._d)throw TypeError();return new s((function(e,n){n(t)}))},s.all=function(t){if(1!=this._d)throw TypeError();if(!(t instanceof Array))return s.reject(TypeError());var e=new s;return function n(i,o){return o?e.resolve(o):i?e.reject(i):(0==t.reduce((function(t,e){return e&&e.then?t+1:t}),0)&&e.resolve(t),void t.map((function(e,i){e&&e.then&&e.then((function(e){return t[i]=e,n(),e}),n)})))}(),e},s.race=function(t){if(1!=this._d)throw TypeError();if(!(t instanceof Array))return s.reject(TypeError());if(0==t.length)return new s;var e=new s;return function n(i,o){return o?e.resolve(o):i?e.reject(i):(0==t.reduce((function(t,e){return e&&e.then?t+1:t}),0)&&e.resolve(t),void t.map((function(t,e){t&&t.then&&t.then((function(t){n(null,t)}),n)})))}(),e},s._d=1,t.exports=s}()}).call(this,n(20),n(32).setImmediate)},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function e(t){this.url=t}return e.prototype.load=function(){return this._ajax(this.url)},e.prototype.save=function(t,e){return this._ajax(this.url,t,{insert:"POST",delete:"DELETE",update:"POST"}[e]||"POST")},e.prototype._ajax=function(e,n,i){return void 0===i&&(i="GET"),new t((function(t,o){var r=new XMLHttpRequest;switch(r.onload=function(){r.status>=200&&r.status<300?t(r.response||r.responseText):o({status:r.status,statusText:r.statusText})},r.onerror=function(){o({status:r.status,statusText:r.statusText})},r.open(i,e),r.setRequestHeader("Content-Type","application/json"),i){case"POST":case"DELETE":case"PUT":r.send(JSON.stringify(n));break;default:r.send()}}))},e}();e.DataProxy=n}).call(this,n(10))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(3),o=n(1),r=function(){function t(t,e){this._uid=i.uid(),this.config=e||{}}return t.prototype.mount=function(t,e){e&&(this._view=e),t&&this._view&&this._view.mount&&(this._container=o.toNode(t),this._container.tagName?this._view.mount(this._container):this._container.attach&&this._container.attach(this))},t.prototype.getRootView=function(){return this._view},t.prototype.paint=function(){this._view&&(this._view.node||this._container||!this._view.mount)&&(this._doNotRepaint=!1,this._view.redraw())},t}();e.View=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getRealPosition=function(t){var e=t.getBoundingClientRect();return{left:e.left+window.pageXOffset,right:e.right+window.pageXOffset,top:e.top+window.pageYOffset,bottom:e.bottom+window.pageYOffset}},e.calculatePosition=function(t,e){var n=window.pageXOffset+window.innerWidth,i=window.pageYOffset+window.innerHeight,o={left:null,top:null,minWidth:e.width+"px",position:"absolute"};return"bottom"===e.mode?(t.left+e.width>n?o.left=t.left-e.width+"px":o.left=t.left+"px",t.bottom+e.height>i?o.top=t.top-e.height+"px":o.top=t.bottom+"px"):(t.right+e.width>n?o.left=t.left-e.width+"px":o.left=t.right+"px",t.top+e.height>i?o.top=t.bottom-e.height+"px":o.top=t.top+"px"),o},e.addInGroups=function(t,e){t[e.group]?(e.active&&(t[e.group].active=e.id),t[e.group].elements.push(e.id)):t[e.group]={active:e.active?e.id:null,elements:[e.id]}}},function(t,e,n){"use strict";e.__esModule=!0,e.default={dragAndDrop:"Drag & drop",or:"or",browse:"Browse files",filesOrFoldersHere:"files or folders here",cancel:"Cancel",clearAll:"Clear all",clear:"Clear",add:"Add",upload:"Upload",download:"Download",error:"error",byte:"B",kilobyte:"KB",megabyte:"MB",gigabyte:"GB"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n(5);var i,o,r,a=n(5);e.DataEvents=a.DataEvents,(r=e.FileStatus||(e.FileStatus={})).queue="queue",r.uploaded="uploaded",r.failed="failed",r.inprogress="inprogress",(o=e.UploaderEvents||(e.UploaderEvents={})).uploadBegin="uploadbegin",o.beforeUploadFile="beforeuploadfile",o.uploadFile="uploadfile",o.uploadFail="uploadfail",o.uploadComplete="uploadcomplete",o.uploadProgress="uploadprogress",(e.ProgressBarEvents||(e.ProgressBarEvents={})).cancel="cancel",(i=e.VaultMode||(e.VaultMode={})).grid="grid",i.list="list"},function(t,e,n){"use strict";function i(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),i(n(24)),i(n(40)),i(n(25))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(49),o=n(50),r=n(51),a=n(52),s=n(53),l=n(54),u=n(55),c=n(56),d=n(57),f=n(58),p=n(59),h=n(4);function v(t,e){if(t.$hidden)return null;switch(t.type){case h.ItemType.button:return i.button(t);case h.ItemType.text:return p.text(t);case h.ItemType.separator:return d.separator(t);case h.ItemType.spacer:return f.spacer(t);case h.ItemType.input:return u.input(t,e);case h.ItemType.imageButton:return s.imageButton(t);case h.ItemType.iconButton:return a.iconButton(t);case h.ItemType.selectButton:case h.ItemType.menuItem:return c.menuItem(t);case h.ItemType.imageButtonText:return l.imageButtonText(t);case h.ItemType.customHTMLButton:return o.customHTMLButton(t);case h.ItemType.dhxButton:return r.dhx_button(t);case h.ItemType.block:default:throw new Error("unknown item type")}}e.itemfactory=v,e.createFactory=function(t,e){void 0===e&&(e=[]);var n={};return e.forEach((function(t){return n[t]=!0})),function(e,i){return e.type=e.type||t,n[e.type]&&(e.type=t),v(e,i)}}},function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__assign||Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t};Object.defineProperty(e,"__esModule",{value:!0});var a=n(3),s=n(0),l=n(9),u=n(60),c=n(1),d=n(12),f=n(8),p=n(13),h=n(17),v=n(4),_=function(t){function e(e,n){var i=t.call(this,e,a.extend({popupWidth:175},n))||this;return i._isContextMenu=!1,i._documentHaveListener=!1,i.events=new l.EventSystem,i.data=new f.TreeCollection({},i.events),i._documentClick=function(t){c.locate(t,"dhx_widget_id")!==i._uid&&i._documentHaveListener&&(document.removeEventListener("click",i._documentClick),i._documentHaveListener=!1,i._close())},i._currentRoot=i.data.getRoot(),i._factory=h.createFactory(v.ItemType.menuItem),i._init(),i._initHandlers(),i._initEvents(),i}return o(e,t),e.prototype.paint=function(){t.prototype.paint.call(this),this._vpopups.redraw()},e.prototype.disable=function(t){this._setProp(t,"$disabled",!0)},e.prototype.enable=function(t){this._setProp(t,"$disabled",!1)},e.prototype.show=function(t){this._setProp(t,"$hidden",!1)},e.prototype.hide=function(t){this._setProp(t,"$hidden",!0)},e.prototype.destructor=function(){u.keyManager.removeHotKey(null,this)},e.prototype._close=function(){this.config.navigationType===v.NavigationType.click&&(this._isActive=!1),clearTimeout(this._currentTimeout),this._activeMenu=null,this.paint()},e.prototype._init=function(){var t=this;this._vpopups=s.create({render:function(){return s.el("div",r({dhx_widget_id:t._uid,class:"menu-popups"+(t._isContextMenu?" context-menu":"")},t._handlers),t._drawPopups())}}),this._vpopups.mount(document.body)},e.prototype._initHandlers=function(){var t=this;this._isActive=this.config.navigationType!==v.NavigationType.click,this._handlers={onmousemove:function(e){if(t._isActive){var n=c.locateNode(e);if(n){var i=n.getAttribute("dhx_id");if(t._activeMenu!==i){if(t._activeMenu=i,t.data.haveChilds(i)){var o=p.getRealPosition(n);t.data.update(i,{$position:o},!1)}t._activeItemChange(i)}}else t._activeItemChange(null)}},onmouseleave:function(){t.config.navigationType!==v.NavigationType.click&&t._activeItemChange(null)},onclick:function(e){var n=c.locateNode(e);if(n){var i=n.getAttribute("dhx_id"),o=t.data.getItem(i);switch(o.type){case v.ItemType.selectButton:case v.ItemType.menuItem:if(i===t._currentRoot)return void t._close();if(t._isActive||(t._isActive=!0),t._setRoot(i),t._activeMenu=i,t.data.haveChilds(i)){var r=p.getRealPosition(n);t.data.update(i,{$position:r},!1),t._activeItemChange(i)}else t._onMenuItemClick(i,e);break;case v.ItemType.dhxButton:case v.ItemType.imageButtonText:case v.ItemType.iconButton:case v.ItemType.imageButton:case v.ItemType.button:case v.ItemType.customHTMLButton:o.twoState&&t.data.update(o.id,{active:!o.active}),t.events.fire(v.ToolbarEvents.click,[i,e]);case v.ItemType.separator:case v.ItemType.input:case v.ItemType.text:case v.ItemType.spacer:t._close();default:return}}}}},e.prototype._initEvents=function(){var t=this,e=null;this.data.events.on(v.DataEvents.change,(function(){t.paint(),e&&clearTimeout(e),e=setTimeout((function(){t._normalizeData(),t._resetHotkeys(),e=null,t.paint()}),100)})),this.events.on(v.ToolbarEvents.click,(function(e){var n=t.data.getItem(e),i=t.data.getItem(n.parent);if(i&&i.type===v.ItemType.selectButton&&t.data.update(n.parent,{value:n.value,icon:n.icon}),n.group){var o=t._groups[n.group];o.active&&t.data.update(o.active,{active:!1}),o.active=n.id,t.data.update(n.id,{active:!0})}}))},e.prototype._drawPopups=function(){var t=this,e=this._activeMenu;if(!this._isContextMenu&&!e)return null;var n=this._currentRoot;return this._isContextMenu&&!this._activePosition?null:this._getParents(e,n).map((function(e){if(!t.data.haveChilds(e))return null;var i=t.data.getItem(e)||{},o=0,r=0;t.data.eachChild(e,(function(t){t.$hidden||("separator"===t.type||t.separator?r++:o++)}),!1);var a=i.width||t.config.popupWidth,l=t._isContextMenu&&t._activePosition&&e===n?t._activePosition:i.$position,u=t._getMode(i,n,l===t._activePosition),c=(l.bottom-l.top)*o+5*r;return s.el("div",{class:"dhx_widget menu-popup",style:p.calculatePosition(l,{mode:u,width:a,height:c})},t._drawMenuItems(e))})).reverse()},e.prototype._onMenuItemClick=function(t,e){this.data.getItem(t).$disabled||(this.events.fire(v.ToolbarEvents.click,[t,e]),this._close())},e.prototype._activeItemChange=function(t){var e=this;t&&!this._documentHaveListener&&this._listenOuterClick(),t&&this.data.haveChilds(t)?(this._activeMenu=t,clearTimeout(this._currentTimeout),this.paint()):(this._activeMenu=t,clearTimeout(this._currentTimeout),this._currentTimeout=setTimeout((function(){return e.paint()}),400))},e.prototype._resetHotkeys=function(){var t=this;u.keyManager.removeHotKey(null,this),this.data.map((function(e){e.hotkey&&u.keyManager.addHotKey(e.hotkey,(function(){return t._onMenuItemClick(e.id,null)}),t)}))},e.prototype._listenOuterClick=function(){document.addEventListener("click",this._documentClick),this._documentHaveListener=!0},e.prototype._getMode=function(t,e,n){return void 0===n&&(n=!1),t.parent===e?"bottom":"right"},e.prototype._drawMenuItems=function(t){var e=this;return this.data.map((function(t){return e._factory(t,e.events)}),t,!1)},e.prototype._normalizeData=function(){var t=this,e=this.data.getRoot(),n={};this.data.eachChild(e,(function(e){t.data.haveChilds(e.id)&&e.parent!==t.data.getRoot()&&(e.$openIcon="right"),e.group&&p.addInGroups(n,e)}),!0),this._groups=n},e.prototype._setRoot=function(t){},e.prototype._getParents=function(t,e){var n=[],i=!1,o=this.data.getItem(t),r=o&&o.$disabled;return this.data.eachParent(t,(function(t){t.id===e?(n.push(t.id),i=!0):i||n.push(t.id)}),!r),this._isContextMenu&&this._activePosition&&n.push(e),n},e.prototype._setProp=function(t,e,n){var i,o=this;Array.isArray(t)?t.forEach((function(t){var i;return o.data.update(t,((i={})[e]=n,i))})):this.data.update(t,((i={})[e]=n,i))},e}(d.View);e.MenuBase=_},function(t,e,n){"use strict";var i=this&&this.__assign||Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t};Object.defineProperty(e,"__esModule",{value:!0});var o=n(9),r=n(31),a=n(35),s=n(11),l=n(7),u=n(6),c=n(3),d=function(){function t(t,e){this._order=[],this._pull={},this._changes={order:[]},this._initOrder=null,this.config=t||{},this._sort=new a.Sort,this._loader=new r.Loader(this,this._changes),this.events=e||new o.EventSystem(this)}return t.prototype.add=function(t,e){this.events.fire(u.DataEvents.beforeAdd,[t])&&(this._addCore(t,e),this._onChange("add",t.id,t),this.events.fire(u.DataEvents.afterAdd,[t]))},t.prototype.remove=function(t){var e=this._pull[t];if(e){if(!this.events.fire(u.DataEvents.beforeRemove,[e]))return;this._removeCore(e.id),this._onChange("remove",t,e)}this.events.fire(u.DataEvents.afterRemove,[e])},t.prototype.removeAll=function(){this._removeAll(),this.events.fire(u.DataEvents.removeAll),this.events.fire(u.DataEvents.change)},t.prototype.exists=function(t){return!!this._pull[t]},t.prototype.getNearId=function(t){if(!this._pull[t])return this._order[0].id||""},t.prototype.getItem=function(t){return this._pull[t]},t.prototype.update=function(t,e,n){var i=this.getItem(t);if(i){if(l.isEqualObj(e,i))return;e.id&&t!==e.id?(l.dhxWarning("this method doesn't allow change id"),l.isDebug()):(c.extend(this._pull[t],e,!1),this.config.update&&this.config.update(this._pull[t]),n||this._onChange("update",t,this._pull[t]))}else l.dhxWarning("item not found")},t.prototype.getIndex=function(t){var e=c.findIndex(this._order,(function(e){return e.id===t}));return this._pull[t]&&e>=0?e:-1},t.prototype.getId=function(t){if(this._order[t])return this._order[t].id},t.prototype.getLength=function(){return this._order.length},t.prototype.filter=function(t,e){var n=this;if((e=c.extend({add:!1,multiple:!0},e)).add||(this._order=this._initOrder||this._order,this._initOrder=null),this._filters=this._filters||{},e.multiple&&t||(this._filters={}),t){"function"==typeof t?this._filters._={match:"_",compare:t}:t.match?(t.compare=t.compare||function(t,e){return t===e},this._filters[t.by]=t):delete this._filters[t.by];var i=this._order.filter((function(t){return Object.keys(n._filters).every((function(e){return t[e]?n._filters[e].compare(t[e],n._filters[e].match,t):n._filters[e].compare(t)}))}));this._initOrder||(this._initOrder=this._order,this._order=i)}this.events.fire(u.DataEvents.change)},t.prototype.find=function(t){for(var e in this._pull){var n=l.findByConf(this._pull[e],t);if(n)return n}return null},t.prototype.findAll=function(t){var e=[];for(var n in this._pull){var i=l.findByConf(this._pull[n],t);i&&e.push(i)}return e},t.prototype.sort=function(t){this._sort.sort(this._order,t),this._initOrder&&this._initOrder.length&&this._sort.sort(this._initOrder,t),this.events.fire(u.DataEvents.change)},t.prototype.copy=function(t,e,n,o){if(!this.exists(t))return null;var r=c.uid();return n?o?void n.add(i({},this.getItem(t)),e,o):n.exists(t)?(n.add(i({},this.getItem(t),{id:r}),e),r):(n.add(this.getItem(t),e),t):(this.add(i({},this.getItem(t),{id:r}),e),r)},t.prototype.move=function(t,e,n,i){if(n&&n!==this&&this.exists(t)){var o=this.getItem(t);return n.exists(t)&&(o.id=c.uid()),i&&(o.parent=i),n.add(o,e),this.remove(o.id),o.id}if(this.getIndex(t)===e)return null;var r=this._order.splice(this.getIndex(t),1)[0];return-1===e&&(e=this._order.length),this._order.splice(e,0,r),this.events.fire(u.DataEvents.change),t},t.prototype.load=function(t,e){return"string"==typeof t&&(t=new s.DataProxy(t)),this._loader.load(t,e)},t.prototype.parse=function(t,e){return this._removeAll(),this._loader.parse(t,e)},t.prototype.$parse=function(t){var e=this.config.approximate;e&&(t=this._approximate(t,e.value,e.maxNum)),this._parse_data(t),this.events.fire(u.DataEvents.change),this.events.fire(u.DataEvents.load)},t.prototype.save=function(t){this._loader.save(t)},t.prototype.isSaved=function(){return!this._changes.order.length},t.prototype.map=function(t){for(var e=[],n=0;n<this._order.length;n++)e.push(t.call(this,this._order[n],n));return e},t.prototype.reduce=function(t,e){for(var n=0;n<this._order.length;n++)e=t.call(this,e,this._order[n],n);return e},t.prototype.serialize=function(){return this.map((function(t){var e=i({},t);return Object.keys(e).forEach((function(t){"$"===t[0]&&delete e[t]})),e}))},t.prototype.getInitialData=function(){return this._initOrder},t.prototype._removeAll=function(){this._pull={},this._order=[],this._changes.order=[],this._initOrder=null},t.prototype._addCore=function(t,e){this.config.init&&(t=this.config.init(t)),t.id=t.id?t.id.toString():c.uid(),this._pull[t.id]&&l.dhxError("Item already exist"),this._initOrder&&this._initOrder.length&&this._addToOrder(this._initOrder,t,e),this._addToOrder(this._order,t,e)},t.prototype._removeCore=function(t){this.getIndex(t)>=0&&(this._order=this._order.filter((function(e){return e.id!==t})),delete this._pull[t]),this._initOrder&&this._initOrder.length&&(this._initOrder=this._initOrder.filter((function(e){return e.id!==t})))},t.prototype._parse_data=function(t){var e=this._order.length;this.config.prep&&(t=this.config.prep(t));for(var n=0,i=t;n<i.length;n++){var o=i[n];this.config.init&&(o=this.config.init(o)),o.id=o.id||c.uid(),this._pull[o.id]=o,this._order[e++]=o}},t.prototype._approximate=function(t,e,n){for(var i=t.length,o=e.length,r=Math.floor(i/n),a=Array(Math.ceil(i/r)),s=0,l=0;l<i;l+=r){for(var u=c.copy(t[l]),d=Math.min(i,l+r),f=0;f<o;f++){for(var p=0,h=l;h<d;h++)p+=t[h][e[f]];u[e[f]]=p/(d-l)}a[s++]=u}return a},t.prototype._onChange=function(t,e,n){for(var o=0,r=this._changes.order;o<r.length;o++){var a=r[o];if(a.id===e&&!a.saving)return a.error&&(a.error=!1),a=i({},a,{obj:n,status:t}),void this.events.fire(u.DataEvents.change,[e,t,n])}this._changes.order.push({id:e,status:t,obj:i({},n),saving:!1}),this.events.fire(u.DataEvents.change,[e,t,n])},t.prototype._addToOrder=function(t,e,n){n>=0&&t[n]?(this._pull[e.id]=e,t.splice(n,0,e)):(this._pull[e.id]=e,t.push(e))},t}();e.DataCollection=d},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";var i=this&&this.__assign||Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t};Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t){void 0===t&&(t={}),this.config=i({},{skipHeader:0,nameByHeader:!1,row:"\n",column:","},t),this.config.nameByHeader&&(this.config.skipHeader=1)}return t.prototype.getFields=function(t,e){for(var n=t.trim().split(this.config.column),i={},o=0;o<n.length;o++)i[e?e[o]:o+1]=n[o];return i},t.prototype.getRows=function(t){return t.trim().split(this.config.row)},t.prototype.toJsonArray=function(t){var e=this,n=this.getRows(t),i=this.config.names;if(this.config.skipHeader){var o=n.splice(0,this.config.skipHeader);this.config.nameByHeader&&(i=o[0].trim().split(this.config.column))}return n.map((function(t){return e.getFields(t,i)}))},t}();e.CsvDriver=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(){}return t.prototype.toJsonArray=function(t){return this.getRows(t)},t.prototype.getFields=function(t){return t},t.prototype.getRows=function(t){return"string"==typeof t?JSON.parse(t):t},t}();e.JsonDriver=i},function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__assign||Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t};Object.defineProperty(e,"__esModule",{value:!0});var a=n(3),s=n(19),l=n(11),u=n(7),c=n(6);function d(t,e,n,i){void 0!==i&&-1!==i&&t[n]&&t[n][i]?t[n].splice(i,0,e):(t[n]||(t[n]=[]),t[n].push(e))}var f=function(t){function e(e,n){var i,o=t.call(this,e,n)||this,r=o._root="_ROOT_"+a.uid();return o._childs=((i={})[r]=[],i),o._initChilds=null,o}return o(e,t),e.prototype.add=function(e,n,i){void 0===n&&(n=-1),void 0===i&&(i=this._root),"object"!=typeof e&&(e={value:e}),e.parent=e.parent?e.parent.toString():i,t.prototype.add.call(this,e,n)},e.prototype.getRoot=function(){return this._root},e.prototype.getParent=function(t,e){if(void 0===e&&(e=!1),!this._pull[t])return null;var n=this._pull[t].parent;return e?this._pull[n]:n},e.prototype.getChilds=function(t){return this._childs&&this._childs[t]?this._childs[t]:[]},e.prototype.getLength=function(t){return void 0===t&&(t=this._root),this._childs[t]?this._childs[t].length:null},e.prototype.removeAll=function(e){var n;if(e)for(var i=0,o=this._childs[e].slice();i<o.length;i++){var r=o[i];this.remove(r.id)}else{t.prototype.removeAll.call(this);var a=this._root;this._initChilds=null,this._childs=((n={})[a]=[],n)}},e.prototype.getIndex=function(t){var e=this.getParent(t);return e&&this._childs[e]?a.findIndex(this._childs[e],(function(e){return e.id===t})):-1},e.prototype.sort=function(t){var e=this._childs;for(var n in e)this._sort.sort(e[n],t);this.events.fire(c.DataEvents.change)},e.prototype.map=function(t,e,n){void 0===e&&(e=this._root),void 0===n&&(n=!0);var i=[];if(!this.haveChilds(e))return i;for(var o=0;o<this._childs[e].length;o++)if(i.push(t.call(this,this._childs[e][o],o)),n){var r=this.map(t,this._childs[e][o].id,n);i=i.concat(r)}return i},e.prototype.filter=function(t){if(t){this._initChilds||(this._initChilds=this._childs),t.type=t.type||c.TreeFilterType.all;var e={};this._recursiveFilter(t,this._root,0,e),this._childs=e,this.events.fire(c.DataEvents.change)}else this.restoreOrder()},e.prototype.restoreOrder=function(){this._initChilds&&(this._childs=this._initChilds,this._initChilds=null),this.events.fire(c.DataEvents.change)},e.prototype.copy=function(t,n,i,o){if(void 0===i&&(i=this),void 0===o&&(o=this._root),!this.exists(t))return null;var s=r({},this._childs)[t];if(i===this&&!this.canCopy(t,o))return null;if(i instanceof e){if(this.exists(t)){var l=r({},this.getItem(t));i.exists(t)?l.id=a.uid():l.id=t,l.parent=o,i.add(l,n),t=l.id}if(s)for(var u=0,c=s;u<c.length;u++){var d=c[u].id,f=this.getIndex(d);this.copy(d,f,i,t)}return t}i.add(this._pull[t])},e.prototype.move=function(t,n,i,o){if(void 0===i&&(i=this),void 0===o&&(o=this._root),!this.exists(t))return null;if(i!==this){if(!(i instanceof e))return i.add(this._pull[t]),void this.remove(t);var r=this.copy(t,n,i,o);return this.remove(t),r}if(!this.canCopy(t,o))return null;var a=this.getParent(t),s=this.getIndex(t),l=this._childs[a].splice(s,1)[0];return l.parent=o,this._childs[a].length||delete this._childs[a],this.haveChilds(o)||(this._childs[o]=[]),-1===n?n=this._childs[o].push(l):this._childs[o].splice(n,0,l),this.events.fire(c.DataEvents.change),t},e.prototype.eachChild=function(t,e,n){if(void 0===n&&(n=!0),this.haveChilds(t))for(var i=0;i<this._childs[t].length;i++)e.call(this,this._childs[t][i],i),n&&!1!==this.getItem(this._childs[t][i].id).$opened&&this.eachChild(this._childs[t][i].id,e,n)},e.prototype.getNearId=function(t){return t},e.prototype.loadChilds=function(t,e){var n=this;void 0===e&&(e="json");var i=this.config.autoload+"?id="+t;new l.DataProxy(i).load().then((function(i){i=(e=u.toDataDriver(e)).toJsonArray(i),n._parse_data(i,t),n.events.fire(c.DataEvents.change)}))},e.prototype.refreshChilds=function(t,e){void 0===e&&(e="json"),this.removeAll(t),this.loadChilds(t,e)},e.prototype.eachParent=function(t,e,n){void 0===n&&(n=!1);var i=this.getItem(t);if(i&&(n&&e.call(this,i),i.parent!==this._root)){var o=this.getItem(i.parent);e.call(this,o),this.eachParent(i.parent,e)}},e.prototype.haveChilds=function(t){return t in this._childs},e.prototype.canCopy=function(t,e){if(t===e)return!1;var n=!0;return this.eachParent(e,(function(e){return e.id===t?n=!1:null})),n},e.prototype.serialize=function(t){return this._serialize(this._root,t)},e.prototype.getId=function(t,e){if(void 0===e&&(e=this._root),this._childs[e]&&this._childs[e][t])return this._childs[e][t].id},e.prototype._removeAll=function(e){var n;if(e)for(var i=0,o=this._childs[e].slice();i<o.length;i++){var r=o[i];this.remove(r.id)}else{t.prototype._removeAll.call(this);var a=this._root;this._initChilds=null,this._childs=((n={})[a]=[],n)}},e.prototype._removeCore=function(t){if(this._pull[t]){var e=this.getParent(t);this._childs[e]=this._childs[e].filter((function(e){return e.id!==t})),e===this._root||this._childs[e].length||delete this._childs[e],this._initChilds&&this._initChilds[e]&&(this._initChilds[e]=this._initChilds[e].filter((function(e){return e.id!==t})),e===this._root||this._initChilds[e].length||delete this._initChilds[e]),this._fastDeleteChilds(this._childs,t),this._initChilds&&this._fastDeleteChilds(this._initChilds,t)}},e.prototype._addToOrder=function(t,e,n){var i=this._childs,o=this._initChilds,r=e.parent;this._pull[e.id]=e,d(i,e,r,n),o&&d(o,e,r,n)},e.prototype._parse_data=function(t,e){void 0===e&&(e=this._root);for(var n=0,i=t;n<i.length;n++){var o=i[n];this.config.init&&(o=this.config.init(o)),"object"!=typeof o&&(o={value:o}),o.id=o.id?o.id.toString():a.uid(),o.parent=o.parent?o.parent.toString():e,this._pull[o.id]=o,this._childs[o.parent]||(this._childs[o.parent]=[]),this._childs[o.parent].push(o),o.childs&&o.childs instanceof Object&&this._parse_data(o.childs,o.id)}},e.prototype._fastDeleteChilds=function(t,e){if(this._pull[e]&&delete this._pull[e],t[e]){for(var n=0;n<t[e].length;n++)this._fastDeleteChilds(t,t[e][n].id);delete t[e]}},e.prototype._recursiveFilter=function(t,e,n,i){var o=this,r=this._childs[e];if(r){var a=function(e){switch(t.type){case c.TreeFilterType.all:return!0;case c.TreeFilterType.specific:return n===t.specific;case c.TreeFilterType.leafs:return!o.haveChilds(e.id)}};if(t.by&&t.match){var s=function(e){return!a(e)||-1!==e[t.by].toString().toLowerCase().indexOf(t.match.toString().toLowerCase())};i[e]=r.filter(s)}else if(t.rule&&"function"==typeof t.rule){s=function(e){return!a(e)||t.rule(e)};var l=r.filter(s);l.length&&(i[e]=l)}for(var u=0,d=r;u<d.length;u++){var f=d[u];this._recursiveFilter(t,f.id,n+1,i)}}},e.prototype._serialize=function(t,e){var n=this;return void 0===t&&(t=this._root),this.map((function(t){var i={};for(var o in t)"parent"!==o&&"childs"!==o&&(i[o]=t[o]);return e&&(i=e(i)),n.haveChilds(t.id)&&(i.childs=n._serialize(t.id,e)),i}),t,!1)},e}(s.DataCollection);e.TreeCollection=f},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,o=n(1),r=n(25);(i=e.Position||(e.Position={})).right="right",i.bottom="bottom",i.center="center";var a=new WeakMap,s=[],l=document.createElement("div");function u(t,e){e&&clearTimeout(a.get(t));var n=s.indexOf(t);n<0?document.body.removeChild(t):(l.removeChild(t),s.splice(n,1),0===s.length&&document.body.removeChild(l))}l.className="dhx-message-container",e.message=function(t){"string"==typeof t&&(t={text:t});var e=document.createElement("div");if(e.className="dhx-message "+(t.css||""),e.innerHTML='<span class="message-text">'+t.text+'</span> <div class="dxi '+t.icon+'"></div>',t.at){e.style.position="absolute";var n=t.at,i=n.node,c=n.position,d=o.toNode(i).getBoundingClientRect();document.body.appendChild(e);var f=e.getBoundingClientRect(),p=f.width,h=f.height,v=r.findPosition(d,c,p,h),_=v.left,g=v.top,y=v.pos;e.className+=" "+y,e.style.left=_+"px",e.style.top=g+"px"}else 0===s.length&&document.body.appendChild(l),s.push(e),l.appendChild(e);if(t.expire){var m=setTimeout((function(){return u(e)}),t.expire);a.set(e,m)}e.onclick=function(){return u(e,!0)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,o=n(1),r=n(24);function a(t,e,n,o){var a,s,l;switch(e){case r.Position.center:return(s=t.left+window.pageXOffset+(t.width-n)/2)+8<window.pageXOffset&&(s=t.left+window.pageXOffset),{left:s,top:l=t.top+window.pageYOffset+(t.height-o)/2,pos:a=i.center};case r.Position.right:return a=i.right,(s=t.right+window.pageXOffset)+n+8>window.innerWidth+window.pageXOffset&&(s=window.pageXOffset+t.left-n,a=i.left),{left:s,top:l=window.pageYOffset+t.top+(t.height-o)/2,pos:a};case r.Position.bottom:return(s=window.pageXOffset+t.left+(t.width-n)/2)<window.pageXOffset&&(s=window.pageXOffset+t.left),a=i.bottom,(l=window.pageYOffset+t.bottom)+o+8>window.innerHeight+window.pageYOffset&&(l=window.pageYOffset+t.top-o,a=i.top),{left:s,top:l,pos:a}}}!function(t){t.left="left",t.right="right",t.top="top",t.bottom="bottom",t.center="center"}(i=e.RealPosition||(e.RealPosition={})),e.findPosition=a;var s=document.createElement("div"),l=document.createElement("span");l.className="tooltip-text",s.appendChild(l),s.style.position="absolute";var u=null,c=null,d=!1,f=null;function p(t,e,n,o,r){void 0===r&&(r=!1);var u=t.getBoundingClientRect();l.textContent=e,document.body.appendChild(s),s.className="dhx-tooltip"+(r?" forced":"");var c=s.getBoundingClientRect(),f=a(u,n,c.width,c.height),p=f.left,h=f.top,v=f.pos;switch(v){case i.bottom:case i.top:case i.left:case i.right:case i.center:s.style.left=p+"px",s.style.top=h+"px"}s.className+=" "+v+" "+(o||""),d=!0,r||setTimeout((function(){s.className+=" animate-tooltip"}))}function h(t,e,n,i,o){void 0===o&&(o=!1);var r=function(){d||(u&&clearTimeout(u),u=setTimeout((function(){p(t,e,n,i)}),750))},a=function(){d&&c&&(f=setTimeout((function(){document.body.removeChild(s),d=!1,f=null}),200)),clearTimeout(u),o||document.removeEventListener("mousemove",r),document.removeEventListener("mouseout",a),document.removeEventListener("click",a),c=null};o?p(t,e,n,i,o):document.addEventListener("mousemove",r),document.addEventListener("mouseout",a),document.addEventListener("click",a)}function v(t,e){var n=o.toNode(e.node);n!==c&&(c=n,f?(clearTimeout(f),f=null,h(n,t,e.position,e.css,!0)):h(n,t,e.position||r.Position.bottom,e.css))}function _(t){var e=o.locateNode(t,"dhx_tooltip_text");e&&v(e.getAttribute("dhx_tooltip_text"),{position:e.getAttribute("dhx_tooltip_position")||r.Position.bottom,node:e})}e.tooltip=v,e.enableTooltip=function(){document.addEventListener("mousemove",_)},e.disableTooltip=function(){document.removeEventListener("mousemove",_)}},function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),a=n(0),s=n(1),l=n(16),u=n(4),c=n(13),d=n(17),f=function(t){function e(e,n){var i=t.call(this,e,r.extend({navigationType:"click"},n))||this;return i._currentRoot=null,i._factory=d.createFactory(u.ItemType.button),i.mount(e,a.create({render:function(){return i._draw()}})),i}return o(e,t),e.prototype.getValues=function(){var t={};for(var e in this.data.eachChild(this.data.getRoot(),(function(e){e.twoState?t[e.id]=e.active:e.type===u.ItemType.input&&(t[e.id]=e.value)}),!1),this._groups)this._groups[e].active&&(t[e]=this._groups[e].active);return t},e.prototype.setValues=function(t){for(var e in t)this._groups[e]?this._groups[e].active&&(this.data.update(this._groups[e].active,{active:!1}),this._groups[e].active=t[e],this.data.update(t[e],{active:!0})):this.data.getItem(e).type===u.ItemType.input?this.data.update(e,{value:t[e]}):this.data.update(e,{active:t[e]})},e.prototype._initHandlers=function(){var e=this;t.prototype._initHandlers.call(this),this._onInput=function(t){var n=s.locate(t);e.data.update(n,{value:t.target.value})},this._showTooltip=function(t){var n=s.locateNode(t);if(n){var i=n.getAttribute("dhx_id"),o=e.data.getItem(i);o.tooltip&&l.tooltip(o.tooltip,{node:n,position:l.Position.bottom})}}},e.prototype._draw=function(){var t=this;return a.el(".toolbar.dhx_widget"+(this.config.css?"."+this.config.css:""),{dhx_widget_id:this._uid,onclick:this._handlers.onclick,oninput:this._onInput,onmouseover:this._showTooltip},this.data.map((function(e){return t._factory(e,t.events)}),this.data.getRoot(),!1))},e.prototype._getMode=function(t,e){return t.id===e?"bottom":"right"},e.prototype._close=function(){this._activeMenu=null,this._activePosition=null,this._currentRoot=null,this.paint()},e.prototype._normalizeData=function(){var t=this,e=this.data.getRoot(),n={};this.data.eachChild(e,(function(i){i.type!==u.ItemType.menuItem&&i.type!==u.ItemType.selectButton||t.data.haveChilds(i.id)&&(t.data.eachChild(i.id,(function(t){return t.type=t.type||u.ItemType.menuItem}),!1),i.parent!==e?i.$openIcon="right":i.$openIcon="bot"),i.group&&c.addInGroups(n,i)}),!0),this._groups=n},e.prototype._setRoot=function(t){this.data.getParent(t)===this.data.getRoot()&&(this._currentRoot=t)},e}(n(18).MenuBase);e.Toolbar=f},function(t,e,n){"use strict";function i(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),n(28);var o=n(8);e.DataCollection=o.DataCollection;var r=n(16);e.message=r.message,i(n(42)),i(n(15));var a=n(14);e.i18n={},e.i18n.setLocale=function(t,n){var i=e.i18n[t];for(var o in n)i[o]=n[o]},e.i18n.vault=e.i18n.vault||a.default},function(t,e,n){},,,function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var i=n(7),o=function(){function e(t,e){this._parent=t,this._changes=e}return e.prototype.load=function(t,e){var n=this;return this._parent.loadData=t.load().then((function(t){n._parent.removeAll(),n.parse(t,e)}))},e.prototype.parse=function(t,e){void 0===e&&(e="json"),t=(e=i.toDataDriver(e)).toJsonArray(t),this._parent.$parse(t)},e.prototype.save=function(e){for(var n=this,o=function(o){if(o.saving||o.pending)i.dhxWarning("item is saving");else{var a=r._findPrevState(o.id);if(a&&a.saving){var s=new t((function(t,r){a.promise.then((function(){o.pending=!1,t(n._setPromise(o,e))})).catch((function(t){n._removeFromOrder(a),n._setPromise(o,e),i.dhxWarning(t),r(t)}))}));r._addToChain(s),o.pending=!0}else r._setPromise(o,e)}},r=this,a=0,s=this._changes.order;a<s.length;a++)o(s[a]);this._parent.saveData.then((function(){n._saving=!1}))},e.prototype._setPromise=function(t,e){var n=this;return t.promise=e.save(t.obj,t.status),t.promise.then((function(){n._removeFromOrder(t)})).catch((function(e){t.saving=!1,t.error=!0,i.dhxError(e)})),t.saving=!0,this._saving=!0,this._addToChain(t.promise),t.promise},e.prototype._addToChain=function(t){this._parent.saveData&&this._saving?this._parent.saveData=this._parent.saveData.then((function(){return t})):this._parent.saveData=t},e.prototype._findPrevState=function(t){for(var e=0,n=this._changes.order;e<n.length;e++){var i=n[e];if(i.id===t)return i}return null},e.prototype._removeFromOrder=function(t){this._changes.order=this._changes.order.filter((function(e){return!i.isEqualObj(e,t)}))},e}();e.Loader=o}).call(this,n(10))},function(t,e,n){var i=Function.prototype.apply;function o(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new o(i.call(setTimeout,window,arguments),clearTimeout)},e.setInterval=function(){return new o(i.call(setInterval,window,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(window,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout((function(){t._onTimeout&&t._onTimeout()}),e))},n(33),e.setImmediate=setImmediate,e.clearImmediate=clearImmediate},function(t,e,n){(function(t,e){!function(t){"use strict";if(!t.setImmediate){var n,i,o,r,a,s=1,l={},u=!1,c=t.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(t);d=d&&d.setTimeout?d:t,"[object process]"==={}.toString.call(t.process)?n=function(t){e.nextTick((function(){p(t)}))}:function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?(r="setImmediate$"+Math.random()+"$",a=function(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(r)&&p(+e.data.slice(r.length))},t.addEventListener?t.addEventListener("message",a,!1):t.attachEvent("onmessage",a),n=function(e){t.postMessage(r+e,"*")}):t.MessageChannel?((o=new MessageChannel).port1.onmessage=function(t){p(t.data)},n=function(t){o.port2.postMessage(t)}):c&&"onreadystatechange"in c.createElement("script")?(i=c.documentElement,n=function(t){var e=c.createElement("script");e.onreadystatechange=function(){p(t),e.onreadystatechange=null,i.removeChild(e),e=null},i.appendChild(e)}):n=function(t){setTimeout(p,0,t)},d.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),i=0;i<e.length;i++)e[i]=arguments[i+1];var o={callback:t,args:e};return l[s]=o,n(s),s++},d.clearImmediate=f}function f(t){delete l[t]}function p(t){if(u)setTimeout(p,0,t);else{var e=l[t];if(e){u=!0;try{!function(t){var e=t.callback,n=t.args;switch(n.length){case 0:e();break;case 1:e(n[0]);break;case 2:e(n[0],n[1]);break;case 3:e(n[0],n[1],n[2]);break;default:e.apply(void 0,n)}}(e)}finally{f(t),u=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,n(20),n(34))},function(t,e){var n,i,o=t.exports={};function r(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===r||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:r}catch(t){n=r}try{i="function"==typeof clearTimeout?clearTimeout:a}catch(t){i=a}}();var l,u=[],c=!1,d=-1;function f(){c&&l&&(c=!1,l.length?u=l.concat(u):d=-1,u.length&&p())}function p(){if(!c){var t=s(f);c=!0;for(var e=u.length;e;){for(l=u,u=[];++d<e;)l&&l[d].run();d=-1,e=u.length}l=null,c=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===a||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{return i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(t)}}function h(t,e){this.fun=t,this.array=e}function v(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];u.push(new h(t,e)),1!==u.length||c||s(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=v,o.addListener=v,o.once=v,o.off=v,o.removeListener=v,o.removeAllListeners=v,o.emit=v,o.prependListener=v,o.prependOnceListener=v,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(7),o=function(){function t(){}return t.prototype.sort=function(t,e){var n=this;e.rule&&"function"==typeof e.rule?this._sort(t,e):e.by&&(e.rule=function(t,o){var r=n._checkVal(e.as,t[e.by]),a=n._checkVal(e.as,o[e.by]);return i.naturalCompare(r.toString(),a.toString())},this._sort(t,e))},t.prototype._checkVal=function(t,e){return t?t.call(this,e):e},t.prototype._sort=function(t,e){var n=this,i={asc:1,desc:-1};return t.sort((function(t,o){return e.rule.call(n,t,o)*(i[e.dir]||i.asc)}))},t}();e.Sort=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,o=n(1),r=n(5),a=n(38),s=n(23),l=n(6);!function(t){t[t.top=0]="top",t[t.bot=1]="bot",t[t.in=2]="in"}(i||(i={}));var u=function(){function t(){var t=this;this._transferData={},this._canMove=!0,this._ghostTopPadding=-17,this._onMouseMove=function(e){if(t._transferData.id){var n=e.pageX,i=e.pageY;if(!t._transferData.ghost){if(Math.abs(t._transferData.x-n)<3&&Math.abs(t._transferData.y-i)<3)return;var o=t._onDragStart(t._transferData.id,t._transferData.targetId);if(!o)return void t._endDrop();t._transferData.ghost=o,document.body.appendChild(t._transferData.ghost)}t._moveGhost(n,i),t._onDrag(e)}},this._onMouseUp=function(){t._transferData.x&&(t._transferData.ghost?(t._removeGhost(),t._onDrop()):t._endDrop(),document.removeEventListener("mousemove",t._onMouseMove),document.removeEventListener("mouseup",t._onMouseUp))}}return t.prototype.setItem=function(t,e,n){a.collectionStore.setItem(t,e,n)},t.prototype.onMouseDown=function(t){if(1===t.which){document.addEventListener("mousemove",this._onMouseMove),document.addEventListener("mouseup",this._onMouseUp);var e=o.locate(t,"dhx_id"),n=o.locate(t,"dhx_collection_id");e&&n&&(this._transferData.x=t.x,this._transferData.y=t.y,this._transferData.targetId=n,this._transferData.id=e)}},t.prototype._moveGhost=function(t,e){if(this._transferData.ghost){var n=this._transferData.ghost.offsetWidth/2;this._transferData.ghost.style.left=t-n+"px",this._transferData.ghost.style.top=e+this._ghostTopPadding+"px"}},t.prototype._removeGhost=function(){document.body.removeChild(this._transferData.ghost)},t.prototype._onDrop=function(){if(this._canMove){var t=a.collectionStore.getItem(this._lastCollectionId),e=a.collectionStore.getItemConfig(this._lastCollectionId);if(t&&e.mode!==l.DragMode.source){var n={id:this._lastId,target:t},i={id:this._transferData.id,target:this._transferData.target};i.target.events.fire(r.DragEvents.beforeDrop,[i,n])&&(this._move(i,n),n.target.events.fire(r.DragEvents.dropComplete,[n.id,this._transferData.dropPosition])),this._endDrop()}else this._endDrop()}else this._endDrop()},t.prototype._onDragStart=function(t,e){var n=a.collectionStore.getItem(e),i=a.collectionStore.getItemConfig(e);if(i.dragMode===l.DragMode.target)return null;var o=n.data.getItem(t);n.events.fire(r.DragEvents.dragStart);var s=function(t){var e=document.createElement("div");return e.textContent=t.value||t.text,e.className="drag-ghost",e}(o);return n.events.fire(r.DragEvents.beforeDrag,[o,s])&&t?(this._toggleTextSelection(!0),this._transferData.target=n,this._transferData.dragConfig=i,s):null},t.prototype._onDrag=function(t){var e=t.x,n=t.y,u=document.elementFromPoint(e,n),c=o.locate(u,"dhx_id");if(c){var d,f,p=o.locate(u,"dhx_collection_id");if(this._transferData.dragConfig.behaviour===l.DragBehaviour.complex){var h=function(t){var e=t.y,n=function(t){for(t instanceof Event&&(t=t.target);t&&t.getAttribute;){if(t.getAttribute("dhx_id"))return t;t=t.parentNode}}(t);if(!n)return null;var i=n.childNodes[0].getBoundingClientRect();return(e-i.top)/i.height}(t);this._transferData.dropPosition=h<=.25?i.top:h>=.75?i.bot:i.in}else if(this._lastId===c&&this._lastCollectionId===p)return;c&&p||!this._canMove?(d=[f={id:this._transferData.id,target:this._transferData.target},{id:c,target:a.collectionStore.getItem(p)}],f.target.events.fire(r.DragEvents.dragOut,d),p!==this._transferData.targetId||!(f.target.data instanceof s.TreeCollection)||f.target.data instanceof s.TreeCollection&&f.target.data.canCopy(f.id,c)?(this._cancelCanDrop(),this._lastId=c,this._lastCollectionId=p,d.push(this._transferData.dropPosition),f.target.events.fire(r.DragEvents.dragIn,d)&&this._canDrop()):this._cancelCanDrop()):this._cancelCanDrop()}else this._cancelCanDrop()},t.prototype._move=function(t,e){var n=t.target.data,o=e.target.data,r=0,a=e.id;switch(this._transferData.dragConfig.behaviour){case l.DragBehaviour.child:break;case l.DragBehaviour.sibling:a=o.getParent(a),r=o.getIndex(e.id)+1;break;case l.DragBehaviour.complex:var s=this._transferData.dropPosition;s===i.top?(a=o.getParent(a),r=o.getIndex(e.id)):s===i.bot&&(a=o.getParent(a),r=o.getIndex(e.id)+1)}this._transferData.dragConfig.copy?n.copy(t.id,r,o,a):n.move(t.id,r,o,a)},t.prototype._endDrop=function(){this._toggleTextSelection(!1),this._transferData.target&&this._transferData.target.events.fire(r.DragEvents.dragEnd),this._cancelCanDrop(),this._canMove=!0,this._transferData={},this._lastId=null,this._lastCollectionId=null},t.prototype._cancelCanDrop=function(){this._canMove=!1;var t=a.collectionStore.getItem(this._lastCollectionId);t&&this._lastId&&t.events.fire(r.DragEvents.cancelDrop,[this._lastId])},t.prototype._canDrop=function(){this._canMove=!0;var t=a.collectionStore.getItem(this._lastCollectionId);t&&this._lastId&&t.events.fire(r.DragEvents.canDrop,[this._lastId,this._transferData.dropPosition])},t.prototype._toggleTextSelection=function(t){t?document.body.classList.add("dhx-no-select"):document.body.classList.remove("dhx-no-select")},t}();e.dragManager=new u},function(t,e){if(Element&&!Element.prototype.matches){var n=Element.prototype;n.matches=n.matchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector||n.webkitMatchesSelector}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(){this._store={}}return t.prototype.setItem=function(t,e,n){this._store[t]={target:e,config:n}},t.prototype.getItem=function(t){return this._store[t]?this._store[t].target:null},t.prototype.getItemConfig=function(t){return this._store[t]?this._store[t].config:null},t}();e.collectionStore=new i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(9),o=n(5),r=n(6),a=function(){function t(t,e,n){var o=this;this.events=n||new i.EventSystem,this._data=e,this._data.events.on(r.DataEvents.removeAll,(function(){o._selected=null})),this._data.events.on(r.DataEvents.change,(function(){if(o._selected){var t=o._data.getNearId(o._selected);t!==o._selected&&(o._selected=null,t&&o.add(t))}}))}return t.prototype.getId=function(){return this._selected},t.prototype.getItem=function(){return this._selected?this._data.getItem(this._selected):null},t.prototype.remove=function(t){return!(t=t||this._selected)||!!this.events.fire(o.SelectionEvents.beforeUnSelect,[t])&&(this._data.update(t,{$selected:!1}),this._selected=null,this.events.fire(o.SelectionEvents.afterUnSelect,[t]),!0)},t.prototype.add=function(t){this._selected!==t&&(this.remove(),this.events.fire(o.SelectionEvents.beforeSelect,[t])&&(this._selected=t,this._data.update(t,{$selected:!0}),this.events.fire(o.SelectionEvents.afterSelect,[t])))},t}();e.Selection=a},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var i=n(41);function o(t){var e=document.activeElement;e.classList.contains("apply-button")||e.classList.contains("reject-button")||t.preventDefault()}function r(t){var e=document.createElement("div");return e.className="dhx-blocker "+(t||""),document.body.appendChild(e),document.addEventListener("keydown",o),function(){document.body.removeChild(e),document.removeEventListener("keydown",o)}}e.blockScreen=r,e.alert=function(e){var n=e.buttons&&e.buttons[0]?e.buttons[0]:i.default.apply,o=r(e.blockerCss);return new t((function(t){var i=document.createElement("div");i.className="dhx-alert "+(e.css||""),i.innerHTML='\n\t\t\t<div class="message-box-header">\n\t\t\t\t<div class="mesage-box-title">'+e.header+'</div>\n\t\t\t</div>\n\t\t\t<div class="alert-message">'+e.text+'</div>\n\t\t\t<div class="action-button '+(e.buttonsAlignment?e.buttonsAlignment:"")+'">\n\t\t\t\t<button class="apply-button alert-btn dhx_btn dhx_btn--flat">'+n+"</button>\n\t\t\t</div>",document.body.appendChild(i),i.querySelector(".apply-button").focus(),i.querySelector("button").addEventListener("click",(function(){o(),document.body.removeChild(i),t(!0)}))}))},e.confirm=function(e){var n=e.buttons&&e.buttons[1]?e.buttons[1]:i.default.apply,o=e.buttons&&e.buttons[0]?e.buttons[0]:i.default.reject,a=r(e.blockerCss);return new t((function(t){var i=document.createElement("div");i.className="dhx-confirm "+(e.css||""),i.innerHTML='\n\t\t\t<div class="message-box-header">\n\t\t\t\t<div class="mesage-box-title">'+e.header+'</div>\n\t\t\t</div>\n\t\t\t<div class="confirm-message">'+e.text+'</div>\n\t\t\t<div class="action-button '+(e.buttonsAlignment?e.buttonsAlignment:"")+'">\n\t\t\t\t<button class="reject-button dhx_btn dhx_btn--link">'+o+'</button>\n\t\t\t\t<button class="apply-button dhx_btn dhx_btn--flat">'+n+"</button>\n\t\t\t</div>",document.body.appendChild(i),i.querySelector(".reject-button").focus();var r=function(e){var n;"BUTTON"===e.target.tagName&&(n=e.target.classList.contains("apply-button"),a(),i.removeEventListener("click",r),document.body.removeChild(i),t(n))};i.addEventListener("click",r)}))}}).call(this,n(10))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={apply:"apply",reject:"reject"}},function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__assign||Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t};Object.defineProperty(e,"__esModule",{value:!0});var a=n(3),s=n(0),l=n(9),u=n(1),c=n(44),d=n(12),f=n(8),p=n(45),h=n(16),v=n(48),_=n(14),g=n(15),y=n(64),m=n(65),b=n(66),w=n(67),x=n(68),O=function(t){function e(e,n){void 0===n&&(n={});var i=t.call(this,null,a.extend({mode:g.VaultMode.list,toolbar:!0,updateFromResponse:!0,scaleFactor:4,customScroll:!0,uploader:{},progressBar:{}},n))||this;return i.config.toolbar||(i.config.uploader.autosend=!0),n.data?(i.data=n.data,i.events=n.data.events,i.events.context=i):(i.events=new l.EventSystem(i),i.data=new f.DataCollection({},i.events)),i.data.config.init=function(t){return t.status=t.status||g.FileStatus.uploaded,t.file?(t.size=t.file.size,t.name=t.file.name):(t.size=t.size||0,t.name=t.name||""),i.config.mode===g.VaultMode.grid&&t.file&&b.isImage(t)&&i._readStack.add(t,i.uploader.config.autosend),t},i._readStack=new x.ReadStackPreview(i.data),i.uploader=new y.Uploader(i.config.uploader,i.data,i.events),i._scrollView=new c.ScrollView((function(){return i.getRootView()})),i._progressBar=new w.ProgressBar(i.events,i.config.progressBar),i.events.on(g.UploaderEvents.uploadProgress,(function(t,e,n){return i._progressBar.setState(t,{current:e,total:n})})),i._initHandlers(),i._initUI(e),i._initEvents(),i}return o(e,t),e.prototype.destructor=function(){this.toolbar.destructor(),this._readStack.stop(),this.uploader.unlinkDropArea(),this.uploader.abort()},e.prototype._initUI=function(t){var e=this,n=this.config.toolbar?m.layoutConfig:m.layoutConfigWithoutTopbar;n.on=this._getDragEvents();var i=this._layout=new p.Layout(t,n),o=this.toolbar=new v.Toolbar(null,{css:"vault-toolbar"}),r=[{id:"add",tooltip:_.default.add,type:v.ItemType.iconButton,icon:"dxi-plus"},{id:"upload",tooltip:_.default.upload,type:v.ItemType.iconButton,icon:"dxi icon-upload"},{type:"spacer"},{id:"remove-all",tooltip:_.default.clearAll,type:v.ItemType.iconButton,icon:"dxi-delete-forever"}];this.toolbar.data.parse(r),this._hideUploadAndDeleteButtons(),this.mount(null,s.create({render:function(){return e._draw()}})),this.config.toolbar&&i.cell("topbar").attach(o),i.cell("vault").attach(this)},e.prototype._initHandlers=function(){var t=this;this._handlers={onclick:{".action-add":function(){return t.uploader.selectFile()},".action-remove-file":function(e){var n=u.locate(e);n&&(t.data.update(n,{$toRemove:!0}),setTimeout((function(){t.data.update(n,{$toRemove:!1},!0),t.data.remove(n)}),200))}},onmouseover:{".action-download":function(t){h.tooltip(_.default.download,{node:t.target,position:h.Position.bottom})},".action-remove-file":function(t){h.tooltip(_.default.clear,{node:t.target,position:h.Position.bottom})},".title-content, .dhx-file-name":function(e){var n=u.locate(e),i=t.data.getItem(n);h.tooltip(i.name,{node:e.target,position:h.Position.bottom,css:"tooltip-light"})}}}},e.prototype._getDragEvents=function(){var t=this,e={left:null,top:null,width:null,height:null};return{dragleave:function(n){t._canDrop&&(n.pageX>e.left+e.width-1||n.pageX<e.left||n.pageY>e.top+e.height-1||n.pageY<e.top)&&(t._canDrop=!1,t.config.toolbar&&t._layout.cell("topbar").show(),t._layout.config.css="vault-layout",t._layout.paint())},dragenter:function(n){if(n.preventDefault(),!t.uploader.isActive&&!t._canDrop){for(var i=0,o=n.dataTransfer.types;i<o.length;i++){var r=o[i];if("Files"!==r&&"application/x-moz-file"!==r)return void(t._canDrop=!1)}t._canDrop=!0;var a=t._layout.getRootView().node.el.getBoundingClientRect();e.left=a.left+window.pageXOffset,e.top=a.top+window.pageYOffset,e.width=a.width,e.height=a.height,t._canDrop=!0,t.config.toolbar&&t._layout.cell("topbar").hide(),t._layout.config.css="vault-layout dhx-dragin",t._layout.paint()}},dragover:function(t){t.preventDefault()},drop:function(e){if(e.preventDefault(),t._canDrop){var n=e.dataTransfer;t.uploader.parseFiles(n),t._canDrop=!1,t.config.toolbar&&t._layout.cell("topbar").show(),t._layout.config.css="vault-layout",t._layout.paint()}}}},e.prototype._hideUploadAndDeleteButtons=function(){this.toolbar.hide(["upload","remove-all"])},e.prototype._showUploadAndDeleteButtons=function(){this.uploader.config.autosend?this.toolbar.show("remove-all"):this.toolbar.show(["upload","remove-all"])},e.prototype._initEvents=function(){var t=this;this.data.events.on(g.DataEvents.change,(function(){t.data.getLength()?t._showUploadAndDeleteButtons():t._hideUploadAndDeleteButtons(),t.paint()})),this.events.on(g.UploaderEvents.uploadBegin,(function(){t.config.toolbar&&t._layout.cell("topbar").attach(t._progressBar)})),this.events.on(g.UploaderEvents.uploadComplete,(function(){t.config.mode===g.VaultMode.grid&&t.uploader.config.autosend&&t._readStack.read(),t.config.toolbar&&t._layout.cell("topbar").attach(t.toolbar)})),this.toolbar.events.on(v.ToolbarEvents.click,(function(e){switch(e){case"add":t.uploader.selectFile();break;case"remove-all":t.data.removeAll();break;case"upload":t.uploader.send()}})),this.events.on(g.ProgressBarEvents.cancel,(function(){t.uploader.abort(),t.paint()}))},e.prototype._draw=function(){var t=!this.data.getLength(),e=this.config.mode===g.VaultMode.grid?this._drawGrid():this._drawList();return s.el("div",r({class:"vault dhx_widget"+(this._canDrop?" drop-here":"")},this._handlers,{dhx_widget_id:this._uid}),[this._canDrop||t?this._drawDropableArea():this.config.customScroll?this._scrollView.render(e):e])},e.prototype._getFileActions=function(t){var e=[],n=[],i=[s.el(".dhx-default-actions",e),s.el(".dhx-hover-actions",n)];if(t.status===g.FileStatus.inprogress)return i;if(t.status!==g.FileStatus.failed&&t.link){var o=(this.config.downloadURL||"")+t.link,r=o.split("/").pop().split("?")[0],a=s.el("a",{download:r,class:"download-link",href:o},[s.el(".icon-btn.dxi.dxi-download.action-download")]);n.push(a)}var l=s.el(".icon-btn.dxi.dxi-delete-forever.action-remove-file");if(n.push(l),t.status===g.FileStatus.failed){var u=s.el(".dxi.dxi-alert-circle.warning-status");e.push(u)}if(t.status===g.FileStatus.uploaded){var c=s.el(".dxi.dxi-checkbox-marked-circle.uploaded-status");e.push(c)}return i},e.prototype._drawList=function(){var t=this;return s.el(".dhx-files-block.dhx-webkit-scroll",this.data.map((function(e){var n=e.status===g.FileStatus.failed&&e.request,i=e.status===g.FileStatus.inprogress,o=e.status===g.FileStatus.queue,r=e.status!==g.FileStatus.uploaded;return s.el("div",{class:"dhx-file-item"+(e.$toRemove?" to-remove":"")+(o?" in-queue":""),dhx_id:e.id,_key:e.id},[s.el(".dhx-file-icon",[s.el("div",{class:"dhx-file-type "+b.getFileClassName(e)+(r?" not-loaded":"")})]),s.el(".dhx-file-title",[s.el(".dhx-title-content",e.name),s.el(".dhx-file-info",[n&&s.el(".warn-message",e.request.statusText||_.default.error),i?s.el(".progress-value",(100*e.progress).toFixed(1)+"%"):s.el(".dhx-size"+(n?".dhx-size-error":""),b.getBasis(e.size))])]),i&&s.el(".dhx-download-progress",{style:{width:(100*e.progress).toFixed(1)+"%"}}),!i&&s.el(".dhx-file-action",t._getFileActions(e))])})))},e.prototype._drawDropableArea=function(){return s.el(".dhx-dropable-area.drop-files-here",[s.el(".dhx-big-icon-block",[s.el(".dxi.icon-upload")]),!this._canDrop&&s.el(".drop-area-bold-text",_.default.dragAndDrop),!this._canDrop&&s.el(".drop-area-bold-text",_.default.filesOrFoldersHere),!this._canDrop&&s.el(".drop-area-light-text",_.default.or),!this._canDrop&&s.el("button.dhx_btn.dhx_btn--flat.dhx_btn--small.action-add",_.default.browse)])},e.prototype._drawGrid=function(){var t=this;return s.el("div",{class:"dhx-files-grid dhx-webkit-scroll"},[s.el(".dhx-grid-content",this.data.map((function(e){var n=e.status===g.FileStatus.inprogress,i=e.status===g.FileStatus.queue,o=e.status===g.FileStatus.failed;return s.el("div",{class:"dhx-file-grid-item"+(n?" in-progress":"")+(e.$toRemove?" to-remove":"")+(i?" in-queue":"")+(o?" failed":""),dhx_id:e.id,_key:e.id},[s.el(".dhx-preview-wrapper",[e.preview?s.el(".dhx-server-file-preview",[s.el("img",{src:e.preview})]):e.image?s.el("canvas",{width:98*t.config.scaleFactor,height:98*t.config.scaleFactor,_hooks:{didInsert:function(n){var i=b.calculateCover(e.image),o=i.dx,r=i.dy,a=i.sx,s=i.sy,l=i.sHeight,u=i.sWidth;n.el.getContext("2d").drawImage(e.image,a,s,u,l,o,r,98*t.config.scaleFactor,98*t.config.scaleFactor)}}}):s.el("div",{class:"dhx-file-preview dhx-file-type "+b.getFileClassName(e)}),n&&t._drawCircle(e.progress)].concat(t._getFileActions(e),[s.el(".dhx-file-info",[o&&s.el(".warn-message",e.request.statusText||_.default.error),!n&&s.el(".dhx-size"+(o?".dhx-size-error":""),b.getBasis(e.size))])])),s.el(".dhx-file-name",b.truncateWord(e.name))])})))])},e.prototype._drawCircle=function(t){return s.el(".progress-layout",[s.el(".progress-amount",(100*t).toFixed(1)+"%"),s.sv("svg",{xmlns:"http://www.w3.org/2000/svg",class:"progress-circle",viewBox:"0 0 60 60"},[s.sv("circle",{cx:30,cy:30,r:28,"stroke-width":4,class:"progress-bar-background"}),s.sv("circle.active-circle",{cx:30,cy:30,r:28,"stroke-width":4,"stroke-dasharray":"175.9 175.9","stroke-dashoffset":175.9*(1-t),class:"progress-bar-active"})])])},e}(d.View);e.Vault=O},function(t,e,n){t.exports=function(){"use strict";var t="undefined"!=typeof window,e=(t?window:{}).requestAnimationFrame,n={};function i(){}var o=Array.isArray;function r(t){return null!=t}function a(t){return null!=t&&t.constructor===Object}function s(t,e,n,i){t.splice.apply(t,[n,i].concat(e))}function l(t){var e=typeof t;return"string"===e||"number"===e}function u(t){return"function"==typeof t}function c(t){for(var e=arguments,n=1;n<e.length;n++)for(var i in e[n])t[i]=e[n][i];return t}function d(t,e){for(var n=[],i=e;i<t.length;i++)n.push(t[i]);return n}function f(t,e){for(var n in t)if(t[n]!==e[n])return!1;return!0}function p(t,e){var n=t.length;if(e.length!==n)return!1;for(var i=0;i<n;i++)if(t[i]!==e[i])return!1;return!0}function h(t){if(!e)return t;var n,i,o;function r(){n=0,t.apply(i,o)}return function(){i=this,o=arguments,n||(n=e(r))}}function v(t){return"o"===t[0]&&"n"===t[1]}function _(t){return"_"===t[0]}function g(t){t&&t.el&&t.el.offsetHeight}function y(t){return null!=t.node&&null!=t.node.el}function m(t,e){switch(e){case"value":case"checked":case"selected":return!0}return!1}function b(t){for(t=t||n;null==t.vm&&t.parent;)t=t.parent;return t.vm}function w(){}var x=w.prototype={constructor:w,type:null,vm:null,key:null,ref:null,data:null,hooks:null,ns:null,el:null,tag:null,attrs:null,body:null,flags:0,_class:null,_diff:null,_dead:!1,_lis:!1,idx:null,parent:null};function O(t){var e=new w;return e.type=2,e.body=t,e}var T={},k=/\[(\w+)(?:=(\w+))?\]/g;function C(t,e,n,i){var o=new w;o.type=1,r(i)&&(o.flags=i),o.attrs=e;var a=function(t){var e,n,i,o,r=T[t];if(null==r)for(T[t]=r={tag:(e=t.match(/^[-\w]+/))?e[0]:"div",id:(n=t.match(/#([-\w]+)/))?n[1]:null,class:(i=t.match(/\.([-\w.]+)/))?i[1].replace(/\./g," "):null,attrs:null};o=k.exec(t);)null==r.attrs&&(r.attrs={}),r.attrs[o[1]]=o[2]||"";return r}(t);if(o.tag=a.tag,a.id||a.class||a.attrs){var s=o.attrs||{};if(a.id&&!r(s.id)&&(s.id=a.id),a.class&&(o._class=a.class,s.class=a.class+(r(s.class)?" "+s.class:"")),a.attrs)for(var l in a.attrs)r(s[l])||(s[l]=a.attrs[l]);o.attrs=s}var u=o.attrs;return r(u)&&(r(u._key)&&(o.key=u._key),r(u._ref)&&(o.ref=u._ref),r(u._hooks)&&(o.hooks=u._hooks),r(u._data)&&(o.data=u._data),r(u._flags)&&(o.flags=u._flags),r(o.key)||(r(o.ref)?o.key=o.ref:r(u.id)?o.key=u.id:r(u.name)&&(o.key=u.name+("radio"===u.type||"checkbox"===u.type?u.value:"")))),null!=n&&(o.body=n),o}function D(t,e,n,i){if(5!==t.type&&4!==t.type){t.parent=e,t.idx=n,t.vm=i,null!=t.ref&&(l=b(t),u=t.ref,c=t,function(t,e,n){for(var i;i=e.shift();)0===e.length?t[i]=n:t[i]=t=t[i]||{}}(l,["refs"].concat(u.split(".")),c));var r=t.hooks,a=i&&i.hooks;(r&&(r.willRemove||r.didRemove)||a&&(a.willUnmount||a.didUnmount))&&function(t){for(;t=t.parent;)t.flags|=1}(t),o(t.body)&&function(t){for(var e=t.body,n=0;n<e.length;n++){var i=e[n];!1===i||null==i?e.splice(n--,1):o(i)?s(e,i,n--,1):(null==i.type&&(e[n]=i=O(""+i)),2===i.type?null==i.body||""===i.body?e.splice(n--,1):n>0&&2===e[n-1].type?(e[n-1].body+=i.body,e.splice(n--,1)):D(i,t,n,null):D(i,t,n,null))}}(t)}var l,u,c}var I={animationIterationCount:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridColumn:!0,order:!0,lineClamp:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0};function E(t,e){var i,o,r=(t.attrs||n).style,a=e?(e.attrs||n).style:null;if(null==r||l(r))t.el.style.cssText=r;else{for(var s in r){var u=r[s];(null==a||null!=u&&u!==a[s])&&(t.el.style[s]=(i=s,o=u,isNaN(o)||I[i]?o:o+"px"))}if(a)for(var c in a)null==r[c]&&(t.el.style[c]="")}}var P=[];function M(t,e,n,i,o){if(null!=t){var r=n.hooks[e];if(r){if("d"!==e[0]||"i"!==e[1]||"d"!==e[2])return r(n,i);o?g(n.parent)&&r(n,i):P.push([r,n,i])}}}function j(t){var e;if(P.length)for(g(t.node);e=P.shift();)e[0](e[1],e[2])}var S=t?document:null;function A(t){return t.nextSibling}function L(t){var e=t.vm,n=null!=e&&M(e.hooks,"willUnmount",e,e.data),i=M(t.hooks,"willRemove",t);if(!(1&~t.flags)&&o(t.body))for(var r=0;r<t.body.length;r++)L(t.body[r]);return n||i}function B(t,e,n){var i=e._node,r=i.vm;if(o(i.body))if(1&~i.flags)F(i);else for(var a=0;a<i.body.length;a++)B(e,i.body[a].el);delete e._node,t.removeChild(e),M(i.hooks,"didRemove",i,null,n),null!=r&&(M(r.hooks,"didUnmount",r,r.data,n),r.node=null)}function R(t,e){var n,i,o,r,a=e._node;if(!a._dead){var s=L(a);null!=s&&("object"==typeof(r=s)&&u(r.then))?(a._dead=!0,s.then((n=B,i=[t,e,!0],function(){return n.apply(o,i)}))):B(t,e)}}function F(t){for(var e=t.body,n=0;n<e.length;n++){var i=e[n];delete i.el._node,null!=i.vm&&(i.vm.node=null),o(i.body)&&F(i)}}function N(t){var e=t.el;if(1&t.flags){var n=e.firstChild;do{var i=A(n);R(e,n)}while(n=i)}else o(t.body)&&F(t),e.textContent=null}function z(t,e,n){var i=e._node,o=null!=e.parentNode,r=e!==n&&o?null:i.vm;null!=r&&M(r.hooks,"willMount",r,r.data),M(i.hooks,o?"willReinsert":"willInsert",i),t.insertBefore(e,n),M(i.hooks,o?"didReinsert":"didInsert",i),null!=r&&M(r.hooks,"didMount",r,r.data)}function V(t,e,n){z(t,e,n?A(n):null)}var H={};var U=i;function W(t,e,n){t[e]=n}function Y(t,e,n,i,o){var r=t.apply(o,e.concat([n,i,o,o.data]));o.onevent(n,i,o,o.data,e),U.call(null,n,i,o,o.data,e),!1===r&&(n.preventDefault(),n.stopPropagation())}function q(t){var e,n,i=function(t){for(;null==t._node;)t=t.parentNode;return t._node}(t.target),r=b(i),a=t.currentTarget._node.attrs["on"+t.type];if(o(a))Y(e=a[0],n=a.slice(1),t,i,r);else for(var s in a)if(t.target.matches(s)){var l=a[s];o(l)?(e=l[0],n=l.slice(1)):(e=l,n=[]),Y(e,n,t,i,r)}}function X(t,e,n,i){if(n!==i){var o=t.el;null==n||u(n)?W(o,e,n):null==i&&W(o,e,q)}}function $(t,e,n){"."===e[0]&&(e=e.substr(1),n=!0),n?t.el[e]="":t.el.removeAttribute(e)}function G(t,e,n,i,o){var r=t.el;null==n?!o&&$(t,e,!1):null!=t.ns?r.setAttribute(e,n):"class"===e?r.className=n:"id"===e||"boolean"==typeof n||i?r[e]=n:"."===e[0]?r[e.substr(1)]=n:r.setAttribute(e,n)}function K(t,e,i){var o=t.attrs||n,r=e.attrs||n;if(o===r);else{for(var a in o){var s=o[a],l=m(t.tag,a),u=l?t.el[a]:r[a];s===u||("style"===a?E(t,e):_(a)||(v(a)?X(t,a,s,u):G(t,a,s,l,i)))}for(var a in r)!(a in o)&&!_(a)&&$(t,a,m(t.tag,a)||v(a))}}function J(t,e,n,i){return 4===t.type&&(e=t.data,n=t.key,i=t.opts,t=t.view),new ct(t,e,n,i)}function Z(t){for(var e=0;e<t.body.length;e++){var n=t.body[e],i=n.type;if(i<=3)z(t.el,Q(n));else if(4===i)i=(o=J(n.view,n.data,n.key,n.opts)._redraw(t,e,!1)).node.type,z(t.el,Q(o.node));else if(5===i){var o;(o=n.vm)._redraw(t,e),i=o.node.type,z(t.el,o.node.el)}}}function Q(t,e){return null==t.el&&(1===t.type?(t.el=e||(r=t.tag,null!=(a=t.ns)?S.createElementNS(a,r):S.createElement(r)),null!=t.attrs&&K(t,n,!0),!(8&~t.flags)&&t.body.body(t),o(t.body)?Z(t):null!=t.body&&""!==t.body&&(t.el.textContent=t.body)):2===t.type?t.el=e||(i=t.body,S.createTextNode(i)):3===t.type&&(t.el=e||function(t){return S.createComment(t)}(t.body))),t.el._node=t,t.el;var i,r,a}window.lisMove=et;function tt(t,e,n,i,o,r,a,s){return function(l,u,c,d,f,p){var h,v;if(null!=d[i]){if(null==(h=d[i]._node))return void(d[i]=t(d[i]));if(function(t){return t.parent}(h)!==l)return v=t(d[i]),null!=h.vm?h.vm.unmount(!0):R(u,d[i]),void(d[i]=v)}if(d[o]==f)return 2;if(null==d[o].el)n(u,Q(d[o]),d[i]),d[o]=e(d[o],c);else if(d[o].el===d[i])d[o]=e(d[o],c),d[i]=t(d[i]);else{if(p||h!==d[a])return p&&null!=d[i]?et(t,e,n,i,o,u,c,h,d):1;v=d[i],d[i]=t(v),s(u,v,d[r]),d[r]=v}}}function et(t,e,n,i,o,r,a,s,l){if(s._lis)n(r,l[o].el,l[i]),l[o]=e(l[o],a);else{var u=function(t,e){var n,i=0,o=e.length-1;if(o<=2147483647)for(;i<=o;){if(e[n=i+o>>1]===t)return n;e[n]<t?i=n+1:o=n-1}else for(;i<=o;){if(e[n=Math.floor((i+o)/2)]===t)return n;e[n]<t?i=n+1:o=n-1}return i==e.length?null:i}(s.idx,l.tombs);s._lis=!0;var c=t(l[i]);n(r,l[i],null!=u?a[l.tombs[u]].el:u),null==u?l.tombs.push(s.idx):l.tombs.splice(u,0,s.idx),l[i]=c}}var nt=tt(A,(function(t,e){return e[t.idx+1]}),z,"lftSib","lftNode","rgtSib","rgtNode",V),it=tt((function(t){return t.previousSibling}),(function(t,e){return e[t.idx-1]}),V,"rgtSib","rgtNode","lftSib","lftNode",z);function ot(t,e,n,i){for(var o=Array.prototype.slice.call(e.childNodes),r=[],a=0;a<o.length;a++){var s=o[a]._node;s.parent===t&&r.push(s.idx)}for(var l=function(t){var e,n,i=t.slice(),o=[];o.push(0);for(var r=0,a=t.length;r<a;++r){var s=o[o.length-1];if(t[s]<t[r])i[r]=s,o.push(r);else{for(e=0,n=o.length-1;e<n;){var l=(e+n)/2|0;t[o[l]]<t[r]?e=l+1:n=l}t[r]<t[o[e]]&&(e>0&&(i[r]=o[e-1]),o[e]=r)}}for(n=o[(e=o.length)-1];e-- >0;)o[e]=n,n=i[n];return o}(r).map((function(t){return r[t]})),u=0;u<l.length;u++)n[l[u]]._lis=!0;for(i.tombs=l;2!==nt(t,e,n,i,null,!0););}function rt(t){return t.el._node.parent!==t.parent}function at(t,e,n){return e[n]}function st(t,e,n){for(;n<e.length;n++){var i=e[n];if(null!=i.vm){if(4===t.type&&i.vm.view===t.view&&i.vm.key===t.key||5===t.type&&i.vm===t.vm)return i}else if(!rt(i)&&t.tag===i.tag&&t.type===i.type&&t.key===i.key&&(-2&t.flags)==(-2&i.flags))return i}return null}function lt(t,e,n){return e[e._keys[t.key]]}function ut(t,e){M(e.hooks,"willRecycle",e,t);var i=t.el=e.el,r=e.body,a=t.body;if(i._node=t,2!==t.type||a===r){null==t.attrs&&null==e.attrs||K(t,e,!1);var s=o(r),l=o(a),u=!(8&~t.flags);s?l||u?function(t,e){var i=t.body,o=i.length,r=e.body,a=r.length,s=!(8&~t.flags),l=!(2&~t.flags),u=!(4&~t.flags),c=!l&&1===t.type,d=!0,f=u?lt:l||s?at:st;if(u){for(var p={},h=0;h<r.length;h++)p[r[h].key]=h;r._keys=p}if(c&&0===o)return N(e),void(s&&(t.body=[]));var v,_,g=0,m=!1,b=0;if(s)var w={key:null},x=Array(o);for(h=0;h<o;h++){if(s){var O=!1,T=null;d&&(u&&(w.key=i.key(h)),v=f(w,r,b)),null!=v?(_=v.idx,!0===(T=i.diff(h,v))?((k=v).parent=t,k.idx=h,k._lis=!1):O=!0):O=!0,O&&(D(k=i.tpl(h),t,h),k._diff=null!=T?T:i.diff(h),null!=v&&ut(k,v)),x[h]=k}else{var k,C=(k=i[h]).type;if(C<=3)(v=d&&f(k,r,b))&&(ut(k,v),_=v.idx);else if(4===C){if(v=d&&f(k,r,b)){_=v.idx;var I=v.vm._update(k.data,t,h)}else I=J(k.view,k.data,k.key,k.opts)._redraw(t,h,!1);C=I.node.type}else if(5===C){var E=y(k.vm);C=(I=k.vm._update(k.data,t,h,E)).node.type}}if(!u&&null!=v&&(_===b?++b===a&&o>a&&(v=null,d=!1):m=!0,a>100&&m&&++g%10==0))for(;b<a&&rt(r[b]);)b++}s&&(t.body=x),c&&function(t,e){var i=e.body,o=t.el,r=t.body,a={lftNode:r[0],rgtNode:r[r.length-1],lftSib:(i[0]||n).el,rgtSib:(i[i.length-1]||n).el};t:for(;;){for(;;){var s=nt(t,o,r,a,null,!1);if(1===s)break;if(2===s)break t}for(;;){var l=it(t,o,r,a,a.lftNode,!1);if(1===l)break;if(2===l)break t}ot(t,o,r,a);break}}(t,e)}(t,e):a!==r&&(null!=a?i.textContent=a:N(e)):l?(N(e),Z(t)):a!==r&&(i.firstChild?i.firstChild.nodeValue=a:i.textContent=a),M(e.hooks,"didRecycle",e,t)}else i.nodeValue=a}function ct(t,e,n,i){var o=this;o.view=t,o.data=e,o.key=n,i&&(o.opts=i,o.config(i));var r=a(t)?t:t.call(o,o,e,n,i);u(r)?o.render=r:(o.render=r.render,o.config(r)),o._redrawAsync=h((function(t){return o.redraw(!0)})),o._updateAsync=h((function(t){return o.update(t,!0)})),o.init&&o.init.call(o,o,o.data,o.key,i)}var dt=ct.prototype={constructor:ct,_diff:null,init:null,view:null,key:null,data:null,state:null,api:null,opts:null,node:null,hooks:null,onevent:i,refs:null,render:null,mount:function(t,e){var n=this;return e?(N({el:t,flags:0}),n._redraw(null,null,!1),t.nodeName.toLowerCase()!==n.node.tag?(Q(n.node),z(t.parentNode,n.node.el,t),t.parentNode.removeChild(t)):z(t.parentNode,Q(n.node,t),t)):(n._redraw(null,null),t&&z(t,n.node.el)),t&&j(n),n},unmount:function(t){var e=this.node;R(e.el.parentNode,e.el),t||j(this)},config:function(t){var e=this;t.init&&(e.init=t.init),t.diff&&(e.diff=t.diff),t.onevent&&(e.onevent=t.onevent),t.hooks&&(e.hooks=c(e.hooks||{},t.hooks)),t.onemit&&(e.onemit=c(e.onemit||{},t.onemit))},parent:function(){return b(this.node.parent)},root:function(){for(var t=this.node;t.parent;)t=t.parent;return t.vm},redraw:function(t){var e=this;return t?e._redraw(null,null,y(e)):e._redrawAsync(),e},update:function(t,e){var n=this;return e?n._update(t,null,null,y(n)):n._updateAsync(t),n},_update:function(t,e,n,i){var o=this;return null!=t&&o.data!==t&&(M(o.hooks,"willUpdate",o,t),o.data=t),o._redraw(e,n,i)},_redraw:function(t,e,n){var i,r,a=null==t,s=this,l=s.node&&s.node.el&&s.node.el.parentNode,u=s.node;if(null!=s.diff&&(i=s._diff,s._diff=r=s.diff(s,s.data),null!=u)){var c=o(i)?p:f;if(i===r||c(i,r))return ft(s,u,t,e)}l&&M(s.hooks,"willRedraw",s,s.data);var d=s.render.call(s,s,s.data,i,r);if(d===u)return ft(s,u,t,e);if(s.refs=null,null!=s.key&&d.key!==s.key&&(d.key=s.key),s.node=d,t?(D(d,t,e,s),t.body[e]=d):u&&u.parent?(D(d,u.parent,u.idx,s),u.parent.body[u.idx]=d):D(d,null,null,s),!1!==n)if(u)if(u.tag!==d.tag||u.key!==d.key){u.vm=d.vm=null;var h=u.el.parentNode,v=A(u.el);R(h,u.el),z(h,Q(d),v),u.el=d.el,d.vm=s}else ut(d,u);else Q(d);return l&&M(s.hooks,"didRedraw",s,s.data),a&&l&&j(s),s},_redrawAsync:null,_updateAsync:null};function ft(t,e,n,i){return null!=n&&(n.body[i]=e,e.idx=i,e.parent=n,e._lis=!1),t}function pt(t,e,n,i){var o,r;return null==n?a(e)?o=e:r=e:(o=e,r=n),C(t,o,r,i)}var ht="http://www.w3.org/2000/svg";function vt(t,e,n,i){this.view=t,this.data=e,this.key=n,this.opts=i}function _t(t){this.vm=t}vt.prototype={constructor:vt,type:4,view:null,data:null,key:null,opts:null},_t.prototype={constructor:_t,type:5,vm:null};var gt={config:function(t){var e;U=t.onevent||U,t.onemit&&(e=t.onemit,c(H,e))},ViewModel:ct,VNode:w,createView:J,defineElement:pt,defineSvgElement:function(t,e,n,i){var o=pt(t,e,n,i);return o.ns=ht,o},defineText:O,defineComment:function(t){var e=new w;return e.type=3,e.body=t,e},defineView:function(t,e,n,i){return new vt(t,e,n,i)},injectView:function(t){return new _t(t)},injectElement:function(t){var e=new w;return e.type=1,e.el=e.key=t,e},lazyList:function(t,e){var n=t.length,i={items:t,length:n,key:function(n){return e.key(t[n],n)},diff:function(n,i){var r=e.diff(t[n],n);if(null==i)return r;var a=i._diff;return(r===a||o(a)?p(r,a):f(r,a))||r},tpl:function(n){return e.tpl(t[n],n)},map:function(t){return e.tpl=t,i},body:function(t){for(var e=Array(n),o=0;o<n;o++){var r=i.tpl(o);r._diff=i.diff(o),e[o]=r,D(r,t,o)}t.body=e}};return i},FIXED_BODY:2,DEEP_REMOVE:1,KEYED_LIST:4,LAZY_LIST:8};function yt(t,e){var n=t.body;if(o(n))for(var i=0;i<n.length;i++){var r=n[i];null!=r.vm?e.push(r.vm):yt(r,e)}return e}function mt(t){var e,n,i=arguments,r=i.length;if(r>1){var s=1;a(i[1])&&(n=i[1],s=2),e=r===s+1&&(l(i[s])||o(i[s])||n&&!(8&~n._flags))?i[s]:d(i,s)}return C(t,n,e)}return x.patch=function(t,e){!function(t,e,n){if(null!=e.type){if(null!=t.vm)return;D(e,t.parent,t.idx,null),t.parent.body[t.idx]=e,ut(e,t),n&&g(e),j(b(e))}else{var i=Object.create(t);i.attrs=c({},t.attrs);var o=c(t.attrs,e);if(null!=t._class){var r=o.class;o.class=null!=r&&""!==r?t._class+" "+r:t._class}K(t,i),n&&g(t)}}(this,t,e)},dt.emit=function(t){var e=this,n=e,i=d(arguments,1).concat(n,n.data);do{var o=e.onemit,r=o?o[t]:null;if(r){r.apply(e,i);break}}while(e=e.parent());H[t]&&H[t].apply(e,i)},dt.onemit=null,dt.body=function(){return yt(this.node,[])},gt.defineElementSpread=mt,gt.defineSvgElementSpread=function(){var t=mt.apply(null,arguments);return t.ns=ht,t},gt}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(3),o=n(0),r=n(1),a=function(){function t(t,e){var n;void 0===e&&(e={});var o=this;this.config=i.extend({speed:20},e),this._wheelName=r.isIE()?"onmousewheel":"onwheel",this._getRootView=t,this._scrollTop=0,this._runnerTop=0,this._runnerHeight=0,this._visibleArea=1,this._scrollWidth=r.getScrollbarWidth(),this._handlers=((n={onscroll:function(){o._update()}})[this._wheelName]=function(t){t.preventDefault();var e=((t.deltaY||-t.wheelDelta)>0?1:-1)*o.config.speed,n=o._getRefs().area,i=n.scrollHeight-o._runnerHeight,r=o._scrollTop+e;n.scrollTop=r<0?0:r>i?i:r,o._update()},n.onmousedownRunner=function(t){t.preventDefault();var e=o._getRefs(),n=e.area,i=e.runner,r=n.getBoundingClientRect(),a=r.top+window.pageYOffset,s=r.bottom+window.pageYOffset,l=n.scrollHeight-o._runnerHeight,u=t.pageY-i.getBoundingClientRect().top-window.pageYOffset,c=function(t){var e=t.pageY-u;n.scrollTop=e<=a?0:e>s?l:(e-a)/o._visibleArea,o._update()},d=function(){document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",d),document.body.classList.remove("dhx-no-select")};document.body.classList.add("dhx-no-select"),document.addEventListener("mousemove",c),document.addEventListener("mouseup",d)},n.onmousedownTrack=function(t){if(!t.target.classList.contains("scroll-runner")){t.preventDefault();var e=function(){document.removeEventListener("mouseup",e),window.clearInterval(l)},n=o._getRefs().area,i=t.target.getBoundingClientRect().top+window.pageYOffset,r=n.scrollHeight-o._runnerHeight,a=t.pageY,s=function(){var t;if(a<i+o._runnerTop)(t=o._scrollTop-n.clientHeight)<0&&(t=0);else{if(!(a>i+o._runnerTop+o._runnerHeight))return;(t=o._scrollTop+n.clientHeight)>r&&(t=r)}n.scrollTop=t,o._update()};s();var l=setInterval(s,100);document.addEventListener("mouseup",e)}},n)}return t.prototype.render=function(t){var e,n=this;return 0===this._scrollWidth?t:o.el(".scroll-view-wrapper",{style:{width:"100%",height:"100%",overflow:"hidden",position:"relative"}},[o.el(".scroll-view",{onscroll:this._handlers.onscroll,_ref:"scroll-view",_hooks:{didInsert:function(){n._update()},didRecycle:function(){n._update()}},style:{height:"100%",width:"calc(100% + "+this._scrollWidth+"px)",overflowY:"scroll","-ms-overflow-style":"scrollbar"}},[t]),o.el(".y-scroll",(e={onmousedown:this._handlers.onmousedownTrack},e[this._wheelName]=this._handlers[this._wheelName],e.style={width:"10px",height:"100%",right:0,top:0,position:"absolute"},e),[o.el(".scroll-runner",{_ref:"scroll-runner",onmousedown:this._handlers.onmousedownRunner,style:{height:this._runnerHeight+"px",right:"2px",top:this._runnerTop,width:"6px",position:"absolute"}})])])},t.prototype._update=function(){var t=this._getRefs();if(t){var e=t.area,n=t.runner;this._visibleArea=e.clientHeight/e.scrollHeight,this._scrollTop=e.scrollTop,this._runnerTop=this._scrollTop*this._visibleArea,this._visibleArea<1?this._runnerHeight=e.clientHeight*this._visibleArea:this._runnerHeight=0,n.style.top=this._runnerTop+"px",n.style.height=this._runnerHeight+"px"}},t.prototype._getRefs=function(){var t=this._getRootView();if(t.refs&&t.refs["scroll-view"]&&t.refs["scroll-runner"])return{area:t.refs["scroll-view"].el,runner:t.refs["scroll-runner"].el}},t}();e.ScrollView=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}(n(46))},function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r=n(47),a=n(0),s=function(t){function e(n,i){var o=t.call(this,n,i)||this;if(o.config.views&&(o.config.activeView=o.config.activeView||0,o._isViewLayout=!0),o._all={},o._parseConfig(),o._css+=o._xLayout?"layout_x":"layout_y",!(n instanceof e)){var r=a.create({render:function(){return o.toVDOM()}},o);o.mount(n,r)}return o}return o(e,t),e.prototype.cell=function(t){return this._all[t]},e.prototype.updateActiveView=function(t){for(var e=0;e<this._cells.length;e++)if(this._cells[e].id===t)return void(this.config.activeView!==e&&(this.config.activeView=e,this.paint()))},e.prototype.getActiveView=function(){return this._cells[this.config.activeView]},e.prototype.toVDOM=function(){if(this._isViewLayout)return t.prototype.toVDOM.call(this,[this.getActiveView().toVDOM()]);var e=[];return this._cells.forEach((function(t){var n=t.toVDOM();Array.isArray(n)?e.push.apply(e,n):e.push(n)})),t.prototype.toVDOM.call(this,e,this._isTopParent)},e.prototype.removeCell=function(t){var e=this.getTopParent();if(e._all[t]){var n=e._all[t].getParent();delete e._all[t];for(var i=n._cells,o=-1,r=0;r<i.length;r++)if(i[r].id===t){o=r;break}-1!==o&&i.splice(o,1),this.paint()}},e.prototype.addCell=function(t,e){void 0===e&&(e=-1);var n=this.getTopParent(),i=this._parseView(t,n);e<0&&(e=this._cells.length+e+1),this._cells.splice(e,0,i),this.paint()},e.prototype.getId=function(t){return t<0&&(t=this._cells.length+t),this._cells[t]?this._cells[t].id:void 0},e.prototype._parseConfig=function(){var t=this,e=this.config,n=this.getTopParent(),i=e.rows||e.cols||e.views;this._xLayout=!e.rows,this._cells=i.map((function(e){return t._parseView(e,n)}))},e.prototype._createUi=function(t){return t.rows||t.cols||t.views?new e(this,t):new r.Cell(this,t)},e.prototype._parseView=function(t,e){var n=this._createUi(t);return t.id&&(e._all[t.id]=n),n},e}(r.Cell);e.Layout=s},function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__assign||Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t};Object.defineProperty(e,"__esModule",{value:!0});var a,s=n(0),l=n(12);!function(t){t[t.unknown=0]="unknown",t[t.percents=1]="percents",t[t.pixels=2]="pixels",t[t.mixedpx1=3]="mixedpx1",t[t.mixedpx2=4]="mixedpx2",t[t.mixedperc1=5]="mixedperc1",t[t.mixedperc2=6]="mixedperc2"}(a||(a={}));var u=function(t){function e(n,i){var o=t.call(this,n,i)||this;return o._parent=n,o._isTopParent=!(n instanceof e),o._initHandlers(),o.mount(n,{redraw:function(){n.paint()}}),o.id=o.config.id,o._css="",o}return o(e,t),e.prototype.isVisible=function(){return!this.config.hidden},e.prototype.isView=function(){return!!this._parent.config.views},e.prototype.hide=function(){this.config.hidden=!0,this.paint()},e.prototype.show=function(t){this.isView()?this._parent.updateActiveView(this.id):(this._parent&&!this._parent.isVisible()&&this._parent.show(),this.config.hidden=!1,this.paint())},e.prototype.getParent=function(){return this._parent},e.prototype.getTopParent=function(){if(this._isTopParent)return this;for(var t=this.getParent();t;){if(t._isTopParent)return t;t=t.getParent()}},e.prototype.destructor=function(){this.config=null},e.prototype.getWidget=function(){return this._ui},e.prototype.attach=function(t,e){return"object"==typeof t?this._ui=t:"string"==typeof t?this._ui=new window.dhx[t](null,e):"function"==typeof t&&(t.prototype instanceof l.View?this._ui=new t(null,e):this._ui={getRootView:function(){return t(e)}}),this.paint(),this._ui},e.prototype.toVDOM=function(t,e){if(void 0===e&&(e=!1),!this.config.hidden){var n,i=this._css+" "+(this.config.css||"")+(e?" dhx_widget":""),o=this._calculateStyle();if(this.config.html)n=[s.el("div",{".innerHTML":this.config.html})];else if(this._ui){var a=this._ui.getRootView();a.render&&(a=s.inject(a)),n=[a]}else n=t||null;var l=this.config.canResize&&!this._isLastCell()?s.el(".resizer."+(this._isXDirection()?"x":"y"),r({},this._resizerHandlers,{_ref:"resizer_"+this._uid}),[s.el("div",{class:"dxi "+(this._isXDirection()?"dxi-dots-vertical":"dxi-dots-horizontal")})]):null,u={};if(this.config.on)for(var c in this.config.on)u["on"+c]=this.config.on[c];var d=s.el("div",r({_key:this._uid,style:o,_ref:this._uid},u,{class:"dhx_cell "+i+(this.config.collapsed?" collapsed":"")}),[this.config.header?s.el("div",{class:"dhx_cell_header",onclick:this._handlers.collapse},[s.el(".header-text",this.config.header),s.el(".header-action-icon",[s.el("div",{class:"dxi "+this.config.headerIcon})])]):null,this.config.collapsed?null:s.el("div",{class:"dhx_cell_content"},n),this.config.footer?s.el("div",{class:"dhx_cell_footer"},this.config.footer):null]);return l?[d,l]:d}},e.prototype._initHandlers=function(){var t=this,e={left:null,top:null,isActive:!1,range:null,xLayout:null,nextCell:null,size:null,resizerLength:null,mode:null,percentsum:null},n=function(){e.isActive=!1,document.body.classList.remove("dhx-no-select"),document.removeEventListener("mouseup",n),document.removeEventListener("mousemove",i)},i=function(n){if(e.isActive&&e.mode!==a.unknown){var i=e.xLayout?n.x-e.range.min-window.pageXOffset:n.y-e.range.min-window.pageYOffset,o=e.xLayout?"width":"height";switch(i<0?i=e.resizerLength/2:i>e.size&&(i=e.size-e.resizerLength),e.mode){case a.pixels:t.config[o]=i-e.resizerLength/2+"px",e.nextCell.config[o]=e.size-i-e.resizerLength/2+"px";break;case a.mixedpx1:t.config[o]=i-e.resizerLength/2+"px";break;case a.mixedpx2:e.nextCell.config[o]=e.size-i-e.resizerLength/2+"px";break;case a.percents:t.config[o]=i/e.size*e.percentsum+"%",e.nextCell.config[o]=(e.size-i)/e.size*e.percentsum+"%";break;case a.mixedperc1:t.config[o]=i/e.size*e.percentsum+"%";break;case a.mixedperc2:e.nextCell.config[o]=(e.size-i)/e.size*e.percentsum+"%"}t.paint()}};this._handlers={collapse:function(){t.config.canCollapse&&(t.config.collapsed=!t.config.collapsed,t.paint())}},this._resizerHandlers={onmousedown:function(o){if(3!==o.which){e.isActive&&n(),document.body.classList.add("dhx-no-select");var r,s,l,u=t._getCellView(),c=t._getNextCell(),d=c._getCellView(),f=t._getResizerView(),p=u.el.getBoundingClientRect(),h=f.el.getBoundingClientRect(),v=d.el.getBoundingClientRect();if(e.xLayout=t._isXDirection(),e.left=p.left+window.pageXOffset,e.top=p.top+window.pageYOffset,e.range=(r=p,s=v,void 0===(l=e.xLayout)&&(l=!0),l?{min:r.left+window.pageXOffset,max:s.right+window.pageXOffset}:{min:r.top+window.pageYOffset,max:s.bottom+window.pageYOffset}),e.size=e.range.max-e.range.min,e.isActive=!0,e.nextCell=c,e.resizerLength=e.xLayout?h.width:h.height,e.mode=function(t,e,n){var i=t?"width":"height",o=e[i]&&-1!==e[i].indexOf("%"),r=n[i]&&-1!==n[i].indexOf("%"),s=e[i]&&-1!==e[i].indexOf("px"),l=n[i]&&-1!==n[i].indexOf("px");return o&&r?a.percents:s&&l?a.pixels:s&&!l?a.mixedpx1:l&&!s?a.mixedpx2:o?a.mixedperc1:r?a.mixedperc2:a.unknown}(e.xLayout,t.config,c.config),e.mode===a.percents){var _=e.xLayout?"width":"height";e.percentsum=parseFloat(t.config[_])+parseFloat(c.config[_])}e.mode===a.mixedperc1&&(_=e.xLayout?"width":"height",e.percentsum=1/(p[_]/(e.size-e.resizerLength))*parseFloat(t.config[_])),e.mode===a.mixedperc2&&(_=e.xLayout?"width":"height",e.percentsum=1/(v[_]/(e.size-e.resizerLength))*parseFloat(c.config[_])),document.addEventListener("mouseup",n),document.addEventListener("mousemove",i)}},ondragstart:function(t){return t.preventDefault()}}},e.prototype._isLastCell=function(){var t=this._parent;return t&&t._cells.indexOf(this)===t._cells.length-1},e.prototype._getNextCell=function(){var t=this._parent,e=t._cells.indexOf(this);return t._cells[e+1]},e.prototype._getCellView=function(){return this.getTopParent().getRootView().refs[this._uid]},e.prototype._getResizerView=function(){return this.getTopParent().getRootView().refs["resizer_"+this._uid]},e.prototype._isXDirection=function(){return this._parent&&this._parent._xLayout},e.prototype._calculateStyle=function(){var t=this.config,e={};return this._isXDirection()?(void 0!==this.config.width&&(e.flex="0 0 "+t.width),void 0!==t.height&&(e.height=t.height)):(void 0!==this.config.height&&(e.flex="0 0 "+t.height),void 0!==t.width&&(e.width=t.width)),e},e}(l.View);e.Cell=u},function(t,e,n){"use strict";function i(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),i(n(26)),i(n(61)),i(n(62)),i(n(63)),i(n(17));var o=n(4);e.ToolbarEvents=o.ToolbarEvents,e.ItemType=o.ItemType},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),o=n(2);e.button=function(t){return i.el("div",{class:"button-container main-btn element"+o.getCss(t)+(t.value?"":" no-text"),dhx_id:t.id},[o.counter(t),t.icon?o.icon(t.icon):null,t.value?i.el(".button-text",t.value):null])}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),o=n(2);e.customHTMLButton=function(t){return i.el("div",{class:"button-container custom-html-btn element"+o.getCss(t),dhx_id:t.id},[o.counter(t),i.el(".html-content",{".innerHTML":t.html}),t.value?i.el(".button-text",t.value):null])}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),o=n(2);e.dhx_button=function(t){return i.el("button",{class:"dhx_btn"+o.getCss(t)+o.getButtonCss(t),dhx_id:t.id},[t.icon?o.icon(t.icon):null,t.value?i.el(".item-value",t.value):null])}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),o=n(2);e.iconButton=function(t){return i.el("div",{class:"icon-btn element"+o.getCss(t),dhx_id:t.id},[o.counter(t),o.icon(t.icon),t.css&&-1!==t.css.indexOf("ripple")?i.el(".ripple-container-outside"):null])}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),o=n(2);e.imageButton=function(t){return i.el("div",{class:"button-container img-btn element"+o.getCss(t),dhx_id:t.id},[o.counter(t),i.el(".img-button-wrapper",[i.el("img.img-button",{src:t.src})])])}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),o=n(2);e.imageButtonText=function(t){return i.el("div",{class:"button-container img-text-btn element"+o.getCss(t),dhx_id:t.id},[o.counter(t),i.el("img.img-button",{src:t.src}),i.el(".button-text",t.value)])}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),o=n(4),r=n(2);e.input=function(t,e){return i.el("div",{dhx_id:t.id,class:"input-container element"+r.getCss(t)},[i.el(".input-wrapper",[i.el("input.text-input",{placeholder:t.placeholder,value:t.value,style:{width:t.width?t.width:null},_hooks:{didInsert:function(n){e&&e.fire(o.ToolbarEvents.inputCreated,[t.id,n.el])}},_key:t.id}),i.el(".input-animation")]),t.icon?r.icon(t.icon):null])}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),o=n(2);e.menuItem=function(t){return i.el("div",{class:"menu-item element"+o.getCss(t),dhx_id:t.id},[t.icon?o.icon(t.icon):null,t.value?i.el("span.menu-item-content",t.value):null,t.$openIcon?i.el(".dhx-icon.sub-menu-opener",[i.el(".dxi."+("right"===t.$openIcon?".dxi-menu-right":".dxi-menu-down"))]):null,t.hotkey?i.el(".hotkey",t.hotkey):null])}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0);e.separator=function(t){return i.el(".separator")}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0);e.spacer=function(t){return i.el(".spacer")}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),o=n(2);e.text=function(t){return i.el("div",{class:"text element"+o.getCss(t),dhx_id:t.id},t.value)}},function(t,e,n){"use strict";function i(t){for(var e=t.toLowerCase().match(/\w+/g),n=0,i="",o=0;o<e.length;o++){var r=e[o];"ctrl"===r?n+=4:"shift"===r?n+=2:"alt"===r?n+=1:i=r}return n+i}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(){var t=this;this._keysStorage={},document.addEventListener("keydown",(function(e){var n=(e.ctrlKey?4:0)+(e.shiftKey?2:0)+(e.altKey?1:0);if(e.key){var i=n+e.key.toLowerCase(),o=t._keysStorage[i];o&&o.handler(e)}}))}return t.prototype.addHotKey=function(t,e,n){var o=i(t);this._keysStorage[o]={handler:e,scope:n}},t.prototype.removeHotKey=function(t,e){var n=this._keysStorage;if(t&&delete n[o=i(t)],e)for(var o in n)n[o].scope===e&&delete n[o]},t.prototype.exist=function(t){var e=i(t);return!!this._keysStorage[e]},t}();e.keyManager=new o},function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),a=n(13),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._isContextMenu=!0,e}return o(e,t),e.prototype.showAt=function(t,e){if(void 0===e&&(e="bottom"),t instanceof MouseEvent)this._changeActivePosition({left:window.pageXOffset+t.x+1,right:window.pageXOffset+t.x+1,top:window.pageYOffset+t.y,bottom:window.pageYOffset+t.y},e);else{var n=r.toNode(t);this._changeActivePosition(a.getRealPosition(n),e)}},e.prototype._close=function(){this._activeMenu=null,this._changeActivePosition(null,null)},e.prototype._normalizeData=function(){var t=this,e=this.data.getRoot();this.data.eachChild(e,(function(e){t.data.haveChilds(e.id)&&(e.$openIcon="right")}),!0)},e.prototype._getMode=function(t,e,n){return n?this._mode:"right"},e.prototype._changeActivePosition=function(t,e){this._activePosition=t,this._mode=e,this._listenOuterClick(),this.paint()},e}(n(18).MenuBase);e.ContextMenu=s},function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__assign||Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t};Object.defineProperty(e,"__esModule",{value:!0});var a=n(0),s=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i.mount(e,a.create({render:function(){return i._draw()}})),i}return o(e,t),e.prototype._draw=function(){return a.el("div",r({dhx_widget_id:this._uid,class:"main-menu"},this._handlers),this._drawMenuItems(this.data.getRoot()))},e}(n(18).MenuBase);e.Menu=s},function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),a=n(13),s=n(26),l=n(4),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype._draw=function(){var t=this;return r.el(".ribbon.dhx_widget",{dhx_widget_id:this._uid,onclick:this._handlers.onclick},this.data.map((function(e){return t._drawBlock(e.id)}),this.data.getRoot(),!1))},e.prototype._setRoot=function(t){var e=this.data.getParent(t);this.data.getItem(e).type===l.ItemType.block&&(this._currentRoot=t)},e.prototype._normalizeData=function(){var t=this,e=this.data.getRoot(),n={};this.data.eachChild(e,(function(e){if(e.type===l.ItemType.menuItem&&t.data.haveChilds(e.id)){t.data.eachChild(e.id,(function(t){return t.type=t.type||l.ItemType.menuItem}),!1);var i=t.data.getParent(e.id),o=t.data.getItem(i);e.$openIcon=o.type===l.ItemType.block?"bot":"right"}e.group&&a.addInGroups(n,e)}),!0),this._groups=n},e.prototype._drawBlock=function(t){var e=this,n=this.data.getItem(t);if(!n)return null;var i="row"===n.direction?" ribbon-row":" ribbon-cols",o=this.data.map((function(t){return t.type===l.ItemType.block?e._drawBlock(t.id):e._factory(t)}),t,!1);return r.el("div",{class:"ribbon-item-block"+i},[r.el(".block-content",o),n.label?r.el(".block-label",[r.el("span",n.label)]):null])},e}(s.Toolbar);e.Ribbon=u},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var i=n(3),o=n(1),r=n(8),a=n(15),s=function(){function e(t,e,n){void 0===t&&(t={}),this.config=i.extend({autosend:!0,updateFromResponse:!0,fieldName:"file"},t),this.data=e||new r.DataCollection,this.events=n||this.data.events,this.isActive=!1,this._fileInput=document.createElement("input"),this._fileInput.type="file",this._fileInput.multiple=!0,this._initEvents(),this._dropAreas=new Map}return e.prototype.selectFile=function(){this._fileInput.click()},e.prototype.linkDropArea=function(t){var e=this,n=o.toNode(t),i=function(){return n.style.cursor="pointer"},r=function(t){return t.preventDefault()},a=function(t){t.preventDefault(),e.parseFiles(t.dataTransfer)};n.addEventListener("mouseover",i),n.addEventListener("dragover",r),n.addEventListener("drop",a),this._dropAreas.set(n,{mouseover:i,dragover:r,drop:a})},e.prototype.unlinkDropArea=function(t){var e=this;if(t){var n=o.toNode(t);this._unlinkDropArea(n),this._dropAreas.delete(n)}else this._dropAreas.forEach((function(t,n){e._unlinkDropArea(n)})),this._dropAreas.clear()},e.prototype.parseFiles=function(t){if(t.items&&t.items[0]&&t.items[0].webkitGetAsEntry)this._parseAsWebkitEntry(t.items);else{for(var e=t.files,n=0;n<e.length;n++)this._addFile(e[n]);this.config.autosend&&this.send()}},e.prototype.send=function(t){var e=this;if(!this._uploadInfo||!this.isActive){var n=this.data.findAll((function(t){return t.status===a.FileStatus.queue||t.status===a.FileStatus.failed})).filter((function(t){return e.events.fire(a.UploaderEvents.beforeUploadFile,[t])}));if(n.length)if(this.isActive=!0,this._uploadInfo={files:n,count:n.length,size:n.reduce((function(t,e){return t+e.file.size}),0)},this.events.fire(a.UploaderEvents.uploadBegin,[n]),this.events.fire(a.UploaderEvents.uploadProgress,[0,0,this._uploadInfo.size]),this.config.singleRequest)this._xhrSend(n,t);else for(var i=0,o=n;i<o.length;i++){var r=o[i];this._xhrSend([r],t)}}},e.prototype.abort=function(t){if(t){var e=this.data.getItem(t);e&&e.request&&4!==e.request.readyState&&e.request.abort()}else{if(!this._uploadInfo||!this._uploadInfo.files)return;for(var n=0,i=this._uploadInfo.files;n<i.length;n++){var o=i[n];this.abort(o.id)}}},e.prototype._unlinkDropArea=function(t){var e=this._dropAreas.get(t);if(e){var n=e.mouseover,i=e.dragover,o=e.drop;t.removeEventListener("mouseover",n),t.removeEventListener("dragover",i),t.removeEventListener("drop",o)}},e.prototype._initEvents=function(){var t=this;this._fileInput.addEventListener("change",(function(){for(var e=t._fileInput.files,n=0;n<e.length;n++)t._addFile(e[n]);t.config.autosend&&t.send(),t._fileInput.value=null}))},e.prototype._xhrSend=function(t,e){for(var n=this,i=this._createFormData(t,e),o=new XMLHttpRequest,r=0,s=t;r<s.length;r++){var l=s[r];this.data.update(l.id,{request:o,status:a.FileStatus.inprogress,progress:0})}o.open("POST",this.config.target),o.upload.onprogress=function(e){for(var i=0,o=t;i<o.length;i++){var r=o[i];n.data.update(r.id,{progress:e.loaded/e.total,status:a.FileStatus.inprogress})}var s=n._uploadInfo.files.reduce((function(t,e){return t+e.size*e.progress}),0)||0,l=n._uploadInfo.size,u=s/n._uploadInfo.size*100||0;n.events.fire(a.UploaderEvents.uploadProgress,[u,s,l])},o.onloadend=function(){n._uploadInfo.count=n.config.singleRequest?0:n._uploadInfo.count-1;for(var e=200===o.status?a.FileStatus.uploaded:a.FileStatus.failed,i=200===o.status&&o.response?JSON.parse(o.response):null,r=0,s=t;r<s.length;r++){var l=s[r];n.data.update(l.id,{status:e}),e===a.FileStatus.uploaded?(n.config.updateFromResponse&&i&&(n.config.singleRequest&&i[l.id]?n.data.update(l.id,i[l.id]):n.config.singleRequest||n.data.update(l.id,i)),n.events.fire(a.UploaderEvents.uploadFile,[l,i])):n.events.fire(a.UploaderEvents.uploadFail,[l])}0===n._uploadInfo.count&&(n.isActive=!1,n.events.fire(a.UploaderEvents.uploadComplete,[n._uploadInfo.files]))},o.send(i)},e.prototype._parseAsWebkitEntry=function(e){for(var n=this,i=[],o=0;o<e.length;o++){var r=e[o].webkitGetAsEntry();i.push(this._traverseFileTree(r))}t.all(i).then((function(){n.config.autosend&&n.send()}))},e.prototype._createFormData=function(t,e){var n=this.config.fieldName,i=new FormData,o=this.config.params;if(e)for(var r in e)i.append(r,e[r]);if(o)for(var r in o)i.append(r,o[r]);for(var a=t.length>1?"[]":"",s=0,l=t;s<l.length;s++){var u=l[s];i.append(n+a,u.file,u.file.name),i.append(n+"_fullname"+a,u.path+u.file.name),i.append(n+"_id"+a,u.id)}return i},e.prototype._addFile=function(t,e){void 0===e&&(e="");var n={id:i.uid(),file:t,progress:0,status:a.FileStatus.queue,src:null,path:e};this.data.add(n)},e.prototype._traverseFileTree=function(e){var n=this;return new t((function(t){var i=0,o=function(e,o){if(e.isFile)i++,e.file((function(e){i--,n._addFile(e,o),0===i&&t()}));else if(e.isDirectory){var a=e.createReader();r(a,o+e.name+"/")}},r=function(e,n){i++,e.readEntries((function(e){i--;for(var r=0,a=e;r<a.length;r++){var s=a[r];o(s,n)}0===i&&t()}))};o(e,"")}))},e}();e.Uploader=s}).call(this,n(10))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.layoutConfig={css:"vault-layout",rows:[{id:"topbar",css:"vault-topbar"},{id:"vault",css:"vault-file-grid"}]},e.layoutConfigWithoutTopbar={css:"vault-layout",rows:[{id:"vault",css:"vault-file-grid"}]}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,o=n(14),r=["byte","kilobyte","megabyte","gigabyte"];function a(t){return{extension:t.name.split(".").pop()||"none",mime:t.file?t.file.type:""}}function s(t,e){switch(t){case"jpg":case"jpeg":case"gif":case"png":case"bmp":case"tiff":case"pcx":case"svg":case"ico":return i.image;case"avi":case"mpg":case"mpeg":case"rm":case"move":case"mov":case"mkv":case"flv":case"f4v":case"mp4":case"3gp":case"wmv":case"webm":case"vob":return i.video;case"rar":case"zip":case"tar":case"tgz":case"arj":case"gzip":case"bzip2":case"7z":case"ace":case"apk":case"deb":case"zipx":case"cab":case"tar-gz":case"rpm":case"xar":return i.archive;case"xlr":case"xls":case"xlsm":case"xlsx":case"ods":case"csv":case"tsv":return i.table;case"doc":case"docx":case"docm":case"dot":case"dotx":case"odt":case"wpd":case"wps":case"pages":return i.document;case"wav":case"aiff":case"au":case"mp3":case"aac":case"wma":case"ogg":case"flac":case"ape":case"wv":case"m4a":case"mid":case"midi":return i.audio;case"pot":case"potm":case"potx":case"pps":case"ppsm":case"ppsx":case"ppt":case"pptx":case"pptm":case"odp":return i.presentation;case"html":case"htm":case"eml":return i.web;case"exe":return i.application;case"dmg":return i.apple;case"pdf":case"ps":case"eps":return i.pdf;case"psd":return i.psd;case"txt":case"djvu":case"nfo":case"xml":return i.text;default:switch(e.split("/")[0]){case"image":return i.image;case"audio":return i.audio;case"video":return i.video;default:return i.other}}}e.getBasis=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=0),t<1024?t+" "+o.default[r[e]]:this.getBasis(Math.round(t/1024),e+1)},e.truncateWord=function(t,e){var n,i;if(void 0===e&&(e=13),t.length<=e)return t;var o=t.lastIndexOf(".");if(-1===o)i=t.substr(t.length-4),n=t.substr(0,e-7);else{var r=o-3;i=t.substr(r),n=t.substr(0,e-(t.length-r))}return n+"..."+i},e.calculateCover=function(t){var e,n,i,o,r=t.width,a=t.height,s=r/a;return s>1?(e=a,i=(r-(n=a))/2,o=0):s<1?(n=r,i=0,o=(a-(e=r))/2):(e=r,n=r,i=0,o=0),{sx:i,sy:o,sWidth:n,sHeight:e,dx:0,dy:0}},function(t){t.image="image",t.video="video",t.archive="archive",t.table="table",t.document="document",t.presentation="presentation",t.application="application",t.web="web",t.apple="apple",t.pdf="pdf",t.psd="psd",t.audio="audio",t.other="other",t.text="text"}(i=e.FileType||(e.FileType={})),e.getFileType=s,e.getFileClassName=function(t){var e=a(t),n=e.mime,i=e.extension;return s(i,n)+" extension-"+i},e.isImage=function(t){var e=a(t),n=e.mime;return s(e.extension,n)===i.image}},function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),a=n(12),s=n(14),l=n(15),u=function(t){function e(e,n){var i=t.call(this,null,n)||this;return i.events=e,i._progress=0,i.mount(null,r.create({render:function(){return i._draw()}})),i._abortUpload=function(){i.events.fire(l.ProgressBarEvents.cancel)},i}return o(e,t),e.prototype.setState=function(t,e){this._progress=t,this.config.template?this._progressText=this.config.template(t,e):this._progressText=this._progress.toFixed(1)+"%",this.paint()},e.prototype._draw=function(){return r.el(".progress-bar",{_key:this._uid},[r.el(".progress-indicator",{style:{width:this._progress+"%"}}),r.el(".progress-text",{".innerHTML":this._progressText}),r.el("button",{class:"dhx_btn dhx_btn--flat dhx_btn_small action-abort-all",onclick:this._abortUpload},s.default.cancel)])},e}(a.View);e.ProgressBar=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t){this._readerStack=[],this._isActive=!1,this._data=t}return t.prototype.add=function(t,e){void 0===e&&(e=!1),this._readerStack.push(t),e||this.read()},t.prototype.read=function(){var t=this;if(this._readerStack.length&&!this._isActive){var e=this._readerStack.shift();this._isActive=!0;var n=new FileReader;n.readAsDataURL(e.file),n.onload=function(n){var i=new Image;i.src=n.target.result,i.onload=function(){t._data.exists(e.id)&&t._data.update(e.id,{image:i}),t._isActive=!1,t.read()}},n.onerror=function(){t._isActive=!1,t.read()}}},t.prototype.stop=function(){this._readerStack=[]},t}();e.ReadStackPreview=i}])})),window.dhx_legacy){if(window.dhx)for(var key in dhx)dhx_legacy[key]=dhx[key];window.dhx=dhx_legacy,delete window.dhx_legacy}